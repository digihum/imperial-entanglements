{"version":3,"sources":["webpack:///external \"React\"","webpack:///./src/common/components/ComboDropdown.tsx","webpack:///./src/common/components/Overlay.tsx","webpack:///./src/common/components/fields/EditableFieldComponent.tsx","webpack:///external \"ReactDOM\"","webpack:///./src/common/components/RecursiveTree.tsx","webpack:///./src/common/components/fields/PredicateDescription.tsx","webpack:///./src/common/itemTypes.ts","webpack:///./src/common/literalTypes.ts","webpack:///./src/common/stats/StatsGrid.tsx","webpack:///./src/client/ClientApiService.ts","webpack:///./src/common/FalconApp.tsx","webpack:///./src/app/AdminApp.tsx","webpack:///./src/common/Exceptions.ts","webpack:///./src/common/components/Loading.tsx","webpack:///./src/common/components/Sidebar.tsx","webpack:///./src/common/components/Toast.tsx","webpack:///./src/common/components/Workspace.tsx","webpack:///./src/common/components/entity_editor/DateFieldEditor.tsx","webpack:///./src/common/components/entity_editor/EntityFieldEditor.tsx","webpack:///./src/common/components/entity_editor/IntegerFieldEditor.tsx","webpack:///./src/common/components/entity_editor/RecordPredicate.tsx","webpack:///./src/common/components/entity_editor/RecordRow.tsx","webpack:///./src/common/components/entity_editor/RecordsEditor.tsx","webpack:///./src/common/components/entity_editor/StringFieldEditor.tsx","webpack:///./src/common/components/fields/DatePickerDropdown.tsx","webpack:///./src/common/components/fields/ScorePicker.tsx","webpack:///./src/common/components/modal/ConflictResolution.tsx","webpack:///./src/common/components/modal/CreateEntity.tsx","webpack:///./src/common/components/modal/CreateEntityType.tsx","webpack:///./src/common/components/modal/CreatePredicate.tsx","webpack:///./src/common/components/modal/CreatePresetRecord.tsx","webpack:///./src/common/components/modal/CreateRecord.tsx","webpack:///./src/common/components/modal/CreateSource.tsx","webpack:///./src/common/components/modal/CreateTabSet.tsx","webpack:///./src/common/components/object_list/EntityList.tsx","webpack:///./src/common/components/object_list/EntityTypeList.tsx","webpack:///./src/common/components/object_list/PredicateList.tsx","webpack:///./src/common/components/object_list/SourceList.tsx","webpack:///./src/common/components/sidebar/SearchBox.tsx","webpack:///./src/common/components/workspace/AdvancedSearchWorkspace.tsx","webpack:///./src/common/components/workspace/EmptyWorkspace.tsx","webpack:///./src/common/components/workspace/EntityEditorWorkspace.tsx","webpack:///./src/common/components/workspace/EntityTypeWorkspace.tsx","webpack:///./src/common/components/workspace/ObjectListWorkspace.tsx","webpack:///./src/common/components/workspace/PredicateEditorWorkspace.tsx","webpack:///./src/common/components/workspace/SourceEditorWorkspace.tsx","webpack:///./src/common/components/workspace/entity/EntityWorkspaceCoreView.tsx","webpack:///./src/common/components/workspace/entity/EntityWorkspaceReferenceView.tsx","webpack:///./src/common/components/workspace/workspace.ts","webpack:///./src/common/stores/DataController.ts","webpack:///./src/common/stores/DataStore.ts","webpack:///./src/common/stores/ModalStore.tsx","webpack:///./src/common/views/Admin.tsx","webpack:///./src/common/components/SearchBar.tsx","webpack:///./src/common/views/AppDownload.tsx","webpack:///./src/common/views/DatabaseUpload.tsx","webpack:///./src/common/views/ObjectEditor.tsx","webpack:///./src/common/views/RouteNotFound.tsx","webpack:///./src/common/views/User.tsx","webpack:///./src/common/views/UserManagement.tsx","webpack:///./src/client/app.frontend.ts","webpack:///./src/common/components/fields/EditableHeader.tsx","webpack:///./src/common/ApiService.ts","webpack:///./src/common/components/fields/EditableComboDropdown.tsx","webpack:///./src/common/components/fields/EditableParagraph.tsx","webpack:///./src/common/components/fields/SameAsEditor.tsx","webpack:///./src/common/helper/findParentTree.ts","webpack:///./src/common/helper/formatDate.ts","webpack:///external \"_\"","webpack:///./src/common/components/AddTabButton.tsx"],"names":[],"mappings":"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","file":"./main.dist.js","sourcesContent":["module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 1\n// module chunks = 0","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport * as lunr from 'lunr';\n\nimport { findIndex, noop } from 'lodash';\n\nexport interface ComboDropdownOption<T> {\n    key: string;\n    value: T | null;\n}\n\nexport interface ComboDropdownProps<T> {\n    options: ComboDropdownOption<T>[];\n    typeName: string;\n    value: ComboDropdownOption<T> | null;\n    setValue: (s: ComboDropdownOption<T> | null) => void;\n    createNewValue: (s: string) => void;\n    updateSearchString?: (s: string) => void;\n    allowNew?: boolean;\n    additionalClasses?: string[];\n}\n\ninterface ComboDropdownState<T> {\n    searchString: string;\n    showingDropDown: boolean;\n    filteredOptions: ComboDropdownOption<T>[];\n    highlightedIndex: null | number;\n    dropDownHeight: number;\n}\n\nexport class ComboDropdown<T> extends React.Component<ComboDropdownProps<T>, ComboDropdownState<T>> {\n\n    public static defaultProps = {\n       allowNew: true,\n       additionalClasses: [],\n       updateSearchString: noop\n    };\n\n    private ignoreBlur;\n    private ignoreClick;\n    private recalculateHeight;\n\n    private dropDownBoxElement;\n\n    private static readonly comboDropdownInputBoxRef : string = 'comboDropDownInputBox';\n\n    constructor() {\n        super();\n\n        this.state = {\n            searchString: '',\n            showingDropDown: false,\n            filteredOptions: [],\n            highlightedIndex: null,\n            dropDownHeight: 0\n        };\n    }\n\n    public componentWillMount() {\n        this.ignoreBlur = false;\n        this.ignoreClick = false;\n        this.recalculateHeight = true;\n        this.dropDownBoxElement = null;\n\n         this.setState({\n            filteredOptions: this.props.options,\n            searchString: this.props.value === null || this.props.value.key === null ? '' : this.props.value.key\n        });\n    }\n\n    public componentWillReceiveProps(newProps: ComboDropdownProps<T>) {\n\n        let filterString = '';\n\n        if (this.props.value === null) {\n            if (newProps.value === null) {\n                // change nothing\n                filterString = this.state.searchString;\n            } else {\n                // set to newProps value\n                filterString = newProps.value.key;\n            }\n        } else {\n            if (newProps.value === null) {\n                // set to ''\n                filterString = '';\n            } else {\n                if (newProps.value === this.props.value) {\n                    // change nothing\n                    filterString = this.state.searchString;\n                } else {\n                    // set to newProps value\n                    filterString = newProps.value.key;\n                }\n            }\n        }\n\n        //const filterString = newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString;\n\n        this.updateFilter(filterString, newProps);\n        this.setState({\n            searchString: filterString\n        });\n    }\n\n    public changeSearchString(event : React.FormEvent<HTMLInputElement>) {\n        this.setState({\n            searchString: (event.target as HTMLInputElement).value,\n            showingDropDown: true},\n        () => {\n            this.updateFilter(this.state.searchString, this.props);\n            if (this.props.updateSearchString !== undefined) {\n              this.props.updateSearchString(this.state.searchString);\n            }\n        });\n    }\n\n    public updateSearchString(s: string) {\n        if (this.props.updateSearchString !== undefined) {\n          this.props.updateSearchString(s);\n        }\n    }\n\n    public updateFilter(filter: string, props: ComboDropdownProps<T>) {\n\n        let filtered : any[] = [];\n\n        if (filter.length > 0) {\n            const idx = lunr(function () {\n                this.field('key', { boost: 10 });\n            });\n\n            props.options.forEach((opt, i) => idx.add(Object.assign({}, opt, { id: i})));\n\n            const result = idx.search(filter);\n\n            for (let i = 0; i < result.length; i += 1) {\n                filtered.push(props.options[result[i].ref]);\n            }\n        } else {\n            filtered = props.options;\n        }\n\n        if (this.dropDownBoxElement !== null) {\n            this.recalculateHeight = true;\n            this.calculateDropdownHeight(this.dropDownBoxElement);\n        }\n\n        this.setState({\n            filteredOptions: filtered\n        });\n    }\n\n    public addNewAction(option: string) {\n        this.props.createNewValue(option);\n    }\n\n    public selectOption(option: ComboDropdownOption<T>) {\n        this.props.setValue(option);\n        this.ignoreBlur = false;\n        this.recalculateHeight = true;\n        this.setState({ showingDropDown: false, searchString: option.key });\n        this.updateSearchString(option.key);\n    }\n\n    public handleInputBlur() {\n        if (!this.ignoreBlur) {\n\n            if (this.state.searchString.length === 0) {\n                 this.setState({ searchString: '' });\n            } else {\n                 if (findIndex(this.props.options, (option) => option.key === this.state.searchString) === -1) {\n                    this.setState({ searchString: this.props.value === null ? '' : this.props.value.key }, () => {\n                        this.updateFilter(this.props.value === null ? '' : this.props.value.key, this.props);\n                    });\n                }\n            }\n            this.recalculateHeight = true;\n            this.setState({\n                showingDropDown: false\n            });\n        }\n    }\n\n    public handleInputFocus () {\n        if (this.ignoreBlur) {\n        this.ignoreBlur = true;\n        return;\n        }\n        // We don't want `selectItemFromMouse` to trigger when\n        // the user clicks into the input to focus it, so set this\n        // flag to cancel out the logic in `handleInputClick`.\n        // The event order is:  MouseDown -> Focus -> MouseUp -> Click\n        this.ignoreClick = true;\n        this.setState({ showingDropDown: true });\n  }\n\n  public handleInputClick () {\n    // Input will not be focused if it's disabled\n    if (this.isInputFocused() && this.state.showingDropDown === false) {\n        this.setState({ showingDropDown: true })\n    } else {\n         if (this.state.highlightedIndex !== null && !this.ignoreClick) {\n             this.selectItemFromMouse(this.state.filteredOptions[this.state.highlightedIndex]);\n         } else {\n             this.ignoreClick = false;\n         }\n    }\n  }\n\n  public selectItemFromMouse (item) {\n       this.recalculateHeight = true;\n    this.setState({\n      showingDropDown: false,\n      highlightedIndex: null\n    }, () => {\n      this.props.setValue(item);\n      (this.refs[ComboDropdown.comboDropdownInputBoxRef] as HTMLElement).focus();\n    });\n  }\n\n   public isInputFocused () {\n    const el = this.refs[ComboDropdown.comboDropdownInputBoxRef] as HTMLElement;\n    return el.ownerDocument && (el === el.ownerDocument.activeElement);\n  }\n\n  public clearSearchBox() {\n      this.props.setValue(null);\n      this.setState({ searchString: '' });\n      (this.refs[ComboDropdown.comboDropdownInputBoxRef] as HTMLElement).focus();\n  }\n\n  public calculateDropdownHeight(val: null | HTMLElement) {\n\n    this.dropDownBoxElement = val;\n\n      if (val === null || !this.recalculateHeight) {\n          return;\n      } else {\n          this.setState({\n              dropDownHeight: window.document.body.getBoundingClientRect().bottom - val.getBoundingClientRect().top - 32\n          });\n          this.recalculateHeight = false;\n      }\n  }\n\n  public render() {\n\n       return (\n        <div className={'combo-dropdown ' + this.props.additionalClasses!.join(' ')}>\n                <div>\n                    <input type='text'\n                        ref={ComboDropdown.comboDropdownInputBoxRef}\n                        className='search-input'\n                        value={this.state.searchString}\n                        placeholder='Click here and start typing..'\n                        onBlur={this.handleInputBlur.bind(this)}\n                        onFocus={this.handleInputFocus.bind(this)}\n                        onChange={this.changeSearchString.bind(this)}\n                        onClick={this.handleInputClick.bind(this)}\n                    />\n                    {this.state.searchString.length > 0 ? (\n                        <i className='fa fa-times clear-button' onClick={this.clearSearchBox.bind(this)}></i>\n                    ) : null}\n                </div>\n                {this.state.showingDropDown ? (\n                    <div className='dropdown'\n                        style={{maxHeight: this.state.dropDownHeight, overflowY: 'auto'}}\n                        ref={this.calculateDropdownHeight.bind(this)}>\n                        <ul>\n                            {this.state.searchString.length === 0 && this.props.allowNew ? (\n                                <li className='add'\n                                onMouseDown={() => this.ignoreBlur = true}\n                                 onClick={() => this.addNewAction('')}>\n                                    <i className='fa fa-plus' aria-hidden='true'></i>\n                                    Add new {this.props.typeName}</li>\n                            ) : null }\n                            {this.state.filteredOptions.map((opt, i) => (\n                                <li key={`opt-${opt.key}-${i}`}\n                                onMouseDown={() => this.ignoreBlur = true}\n                                onClick={() => this.selectOption(opt)}>{opt.key}</li>\n                            ))}\n                            {this.state.searchString.length > 0 && this.props.allowNew ? (\n                                <li className='add'\n                                onMouseDown={() => this.ignoreBlur = true}\n                                onClick={() => this.addNewAction(this.state.searchString)}>\n                                    <i className='fa fa-plus' aria-hidden='true'></i>\n                                    Add new {this.props.typeName}: '{this.state.searchString}'</li>\n                            ) : null }\n                        </ul>\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n}\n\nexport class NumberComboDropdown extends ComboDropdown<number> {}\nexport class StringComboDropdown extends ComboDropdown<string> {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/ComboDropdown.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\ninterface OverlayProps {\n\n}\n\ninterface OverlayState{\n\n}\n\nexport class Overlay extends React.Component<OverlayProps, OverlayState> {\n\n    public render() {\n        return (\n        <div className='full-page-overlay'>\n            <div className='overlay-container'>\n                {this.props.children}\n            </div>\n        </div>\n        );\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/Overlay.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nexport interface EditableSubfieldProps<T> {\n    edit?: boolean;\n    value?: T | null;\n    onChange?: (updated: T | null) => void;\n    setEdit?: () => void;\n    acceptChanges?: () => void;\n    cancelChanges?: () => void;\n    // TODO: check this\n    onDelete?: (val: T) => void;\n}\n\ninterface EditableFieldProps<T> {\n    value: T;\n    onChange: (s: T | null) => void;\n    onDelete?: (val: T) => void;\n}\n\ninterface EditableFieldState<T> {\n    edit: boolean;\n    internalValue: T | null;\n}\n\nexport function EditableFieldHOC<P, S, D>(\n  WrappedComponent: new() => React.Component<P & EditableSubfieldProps<D>, S> |\n  React.PureComponent<P & EditableSubfieldProps<D>, S>\n  ) {\n  return class EditableFieldComponent extends React.Component<EditableFieldProps<D>, EditableFieldState<D>> {\n\n    constructor() {\n        super();\n        this.state = {\n            edit: false,\n            internalValue: null\n        };\n    }\n\n    public componentWillMount() {\n      this.setState({internalValue: this.props.value === undefined ? null : this.props.value});\n    }\n\n    public componentWillReceiveProps(newProps: EditableFieldProps<D>) {\n        this.setState({internalValue: newProps.value});\n    }\n\n    public switchToEditState() {\n        this.setState({edit: true, internalValue: this.props.value});\n    }\n\n    public setInternalValue(internalValue: D) {\n        this.setState({ internalValue });\n    }\n\n    public acceptChanges() {\n        this.props.onChange(this.state.internalValue);\n        this.setState({edit: false});\n    }\n\n    public cancelChanges() {\n        this.setState({edit: false, internalValue: this.props.value});\n    }\n\n    public render() {\n\n      return (<WrappedComponent\n        {...this.props}\n         edit={this.state.edit}\n          value={this.state.internalValue}\n          onChange={this.setInternalValue.bind(this)}\n          setEdit={this.switchToEditState.bind(this)}\n          acceptChanges={this.acceptChanges.bind(this)}\n          cancelChanges={this.cancelChanges.bind(this)}\n          onDelete={(e) => this.props.onDelete !== undefined ? this.props.onDelete(this.props.value) : null}\n       />\n      );\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/fields/EditableFieldComponent.tsx","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 18\n// module chunks = 0","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { FalconItem, HierarchicalItem } from '@digihum/falcon-core';\nimport { AddTabButton } from './AddTabButton';\nimport { DataController } from '../stores/DataController';\n\ninterface RecursiveTreeProps<T extends FalconItem & HierarchicalItem> {\n  data: T[];\n  parentId: null | number;\n  dataStore: DataController;\n  tabType: string;\n}\n\ninterface RecursiveTreeState {\n  collapsed: boolean;\n}\n\nexport class RecursiveTree<T extends FalconItem & HierarchicalItem> extends React.Component<RecursiveTreeProps<T>, RecursiveTreeState> {\n\n  constructor() {\n    super();\n    this.state = { collapsed: false };\n  }\n\n  render() {\n    const filtered = this.props.data.filter((datum) => datum.parent === this.props.parentId);\n    if (filtered.length === 0) {\n      return null;\n    }\n\n    return (\n      <div>\n        {\n          filtered.map((item) => (\n            <div key={item.label}>\n              <div className='tree-label' onClick={() => this.setState({ collapsed: !this.state.collapsed})}>\n                - {item.label} <AddTabButton uid={item.uid as number} tabType={this.props.tabType} />\n              </div>\n              {!this.state.collapsed ? (\n                <div className='tree-children'>\n                  <RecursiveTree\n                    dataStore={this.props.dataStore}\n                    data={this.props.data}\n                    tabType={this.props.tabType}\n                    parentId={item.uid as number | null} />\n                </div>\n              ) : null}\n            </div>\n          ))\n        }\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/RecursiveTree.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { NumberComboDropdown, ComboDropdown, ComboDropdownOption } from '../ComboDropdown';\nimport { noop } from 'lodash';\n\nexport class PredicateRangeComboDropdown extends ComboDropdown<{isReference: boolean, value: number | string}> {}\n\ninterface PredicateDescriptionProps {\n    domain: ComboDropdownOption<number>;\n    range: ComboDropdownOption<{isReference: boolean, value: number | string}>;\n    mode: 'editAll' | 'editSingle';\n    domainChanged: (s: ComboDropdownOption<number>) => void;\n    rangeChanged: (s: ComboDropdownOption<{isReference: boolean, value: number | string}>) => void;\n    domainOptions: ComboDropdownOption<number>[];\n    rangeOptions: ComboDropdownOption<{isReference: boolean, value: number | string}>[];\n}\n\ninterface PredicateDescriptionState {\n    editingDomain: boolean;\n    editingRange: boolean;\n    domainValue: ComboDropdownOption<number>;\n    rangeValue: ComboDropdownOption<{isReference: boolean, value: number | string}>;\n}\n\nexport class PredicateDescription extends React.Component<PredicateDescriptionProps, PredicateDescriptionState> {\n\n    constructor() {\n        super();\n        this.state = {\n            editingDomain: false,\n            editingRange: false,\n            rangeValue: {key: '', value: null},\n            domainValue: {key: '', value: null}\n        };\n    }\n\n    public componentWillMount() {\n        this.setState({\n            rangeValue: this.props.range,\n            domainValue: this.props.domain\n        });\n    }\n\n    public componentWillReceiveProps(newProps: PredicateDescriptionProps) {\n        this.setState({\n            rangeValue: newProps.range,\n            domainValue: newProps.domain\n        });\n    }\n\n    public acceptDomainChanges() {\n        this.props.domainChanged(this.state.domainValue);\n        this.setState({ editingDomain: false});\n    }\n\n    public cancelDomainChanges() {\n        this.setState({ editingDomain: false, domainValue: this.props.domain});\n    }\n\n    public acceptRangeChanges() {\n        this.props.rangeChanged(this.state.rangeValue);\n        this.setState({ editingRange: false});\n    }\n\n    public cancelRangeChanges() {\n        this.setState({ editingDomain: false, rangeValue: this.props.range});\n    }\n\n        //  <label className='small'>Property Class</label>\n        //   <section className='class'>\n        //     <input type='radio' name='property-class' value='ObjectProperty' /> Object Property <small>Links to another entity</small><br/>\n        //     <input type='radio' name='property-class' value='DataTypeProperty' /> Data Type Property <small>Links to some data, like text or a date</small><br/>\n        //     <input type='radio' name='property-class' value='SourceProperty' /> Source Property <small>Links to a source</small><br/>\n        //   </section>\n        //   <label className='small'>Typing</label>\n\n    public render() {\n\n        const domainChanged = this.props.mode === 'editAll' ?\n            this.props.domainChanged : (c) => this.setState({ domainValue: c });\n\n        const rangeChanged = this.props.mode === 'editAll' ?\n            this.props.rangeChanged : (c) => this.setState({ rangeValue: c });\n\n        return (\n        <div className='predicate-function-description'>\n          <div className='typing'>\n            <div className='domain'>\n                {this.props.mode === 'editAll' || this.state.editingDomain ? (\n                <div>\n                    <label className='small'>Domain</label>\n                    <NumberComboDropdown\n                        options={this.props.domainOptions}\n                        typeName='entity type'\n                        allowNew={false}\n                        value={this.state.domainValue}\n                        setValue={domainChanged}\n                        createNewValue={noop} />\n                    {this.props.mode === 'editSingle' ? (\n                        <div>\n                            <button onClick={this.acceptDomainChanges.bind(this)}>\n                                <i className='fa fa-check' aria-hidden='true'></i>\n                            </button>\n                            <button onClick={this.cancelDomainChanges.bind(this)}>\n                                <i className='fa fa-times' aria-hidden='true'></i>\n                            </button>\n                        </div>\n                    ) : null}\n                </div>\n                ) : (<div>{this.props.domain.key} <i className='fa fa-pencil-square-o'\n                    title='Edit'\n                    aria-hidden='true'\n                    onClick={() => this.setState({ editingDomain: true })}>\n                </i></div>)}\n            </div>\n            <div className='arrow'><i className='fa fa-long-arrow-right' aria-hidden='true'></i></div>\n            <div className='range'>\n                {this.props.mode === 'editAll' || this.state.editingRange ? (\n                    <div>\n                        <label className='small'>Range</label>\n                        <PredicateRangeComboDropdown\n                            options={this.props.rangeOptions}\n                            typeName='entity type'\n                            allowNew={false}\n                            value={this.state.rangeValue}\n                            setValue={rangeChanged}\n                            createNewValue={noop} />\n                        {this.props.mode === 'editSingle' ? (\n                        <div>\n                            <button  onClick={this.acceptRangeChanges.bind(this)}>\n                                <i className='fa fa-check' aria-hidden='true'></i>\n                            </button>\n                            <button  onClick={this.cancelRangeChanges.bind(this)}>\n                                <i className='fa fa-times' aria-hidden='true'></i>\n                            </button>\n                        </div>\n                    ) : null}\n                    </div>\n                ) : (<div>{this.props.range.key} <i className='fa fa-pencil-square-o'\n                    title='Edit'\n                    aria-hidden='true'\n                    onClick={() => this.setState({ editingRange: true })}>\n                </i></div>)}\n            </div>\n          </div>\n        </div>);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/fields/PredicateDescription.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport { CompositeKey, FalconItem, ElementSet, Record, Entity, EntityType, Predicate, Source, SourceElement, Element } from '@digihum/falcon-core';\n\ninterface ItemDescription {\n    machineName: string;\n    name: string;\n    plural: string;\n    workspace: string;\n    buildKey: (raw: string[]) => number | CompositeKey;\n    item: (new() => FalconItem);\n}\n\ninterface ItemTypes {\n    element_set: ItemDescription;\n    element: ItemDescription;\n    record: ItemDescription;\n    entity: ItemDescription;\n    entity_type: ItemDescription;\n    predicate: ItemDescription;\n    source: ItemDescription;\n    source_element: ItemDescription;\n}\n\nconst simpleKey = (raw: string[]) => {\n  return parseInt(raw[0]);\n};\n\nexport const itemTypes : ItemTypes = {\n\n    element_set: {\n        machineName: 'element_set',\n        name: 'Element Set',\n        plural: 'Element Sets',\n        workspace: '',\n        buildKey: simpleKey,\n        item: ElementSet\n    },\n\n    element: {\n        machineName: 'element',\n        name: 'Element',\n        plural: 'Elements',\n        workspace: '',\n        buildKey: simpleKey,\n        item: Element\n    },\n\n    record: {\n        machineName: 'record',\n        name: 'Record',\n        plural: 'Records',\n        workspace: '',\n        buildKey: simpleKey,\n        item: Record\n    },\n\n    entity:  {\n        machineName: 'entity',\n        name: 'Entity',\n        plural: 'Entities',\n        workspace: 'entity',\n        buildKey: simpleKey,\n        item: Entity\n    },\n\n    entity_type: {\n        machineName: 'entity_type',\n        name: 'Entity Type',\n        plural: 'Entity Types',\n        workspace: 'entity_type',\n        buildKey: simpleKey,\n        item: EntityType\n    },\n\n    predicate: {\n        machineName: 'predicate',\n        name: 'Property',\n        plural: 'Properties',\n        workspace: 'predicate',\n        buildKey: simpleKey,\n        item: Predicate\n    },\n\n    source: {\n        machineName: 'source',\n        name: 'Source',\n        plural: 'Sources',\n        workspace: 'source',\n        buildKey: simpleKey,\n        item: Source\n    },\n\n    source_element: {\n        machineName: 'source_element',\n        name: 'Source Element',\n        plural: 'Source Elements',\n        workspace: '',\n        buildKey: (raw: string[]) => ({\n            order: ['source', 'element'],\n            values: {\n                source: parseInt(raw[0]),\n                element: parseInt(raw[1])\n            }\n        }),\n        item: SourceElement\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/itemTypes.ts","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nexport const literalTypes: { label: string, value: string, url: string, description: string }[] = [\n    { label: 'text', value: 'string', url: '', description: 'some text' },\n    { label: 'number', value: 'integer', url: '', description: 'a number' },\n    { label: 'date', value: 'date', url: '', description: 'a date'},\n   // { name: 'point', value: 'point', url: '', description: 'a point on a map '},\n   // { name: 'region', value: 'region', url: '', description: 'a region on a map'},\n    { label: 'source', value: 'source', url: '', description: 'a source in the database'}\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/literalTypes.ts","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { GeneralStatistics } from './GeneralStatistics';\n\ninterface StatsGridProps {\n  stats: GeneralStatistics;\n}\n\nexport const StatsGrid : React.StatelessComponent<StatsGridProps>\n    = (props: StatsGridProps) => {\n\n    return (\n    <section className='stats-grid'>\n\n      <Link to='/edit/entity'>\n        <div className='entity'>\n          <span className='item-name'>Entities</span><span className='item-count'>{props.stats.entity}</span>\n        </div>\n      </Link>\n\n      <Link to='/edit/entity_type'>\n        <div className='entity_type'>\n          <span className='item-name'>Entity Types</span><span className='item-count'>{props.stats.entityType}</span>\n        </div>\n      </Link>\n\n      <Link to='/edit/source'>\n        <div className='source'>\n          <span className='item-name'>Sources</span><span className='item-count'>{props.stats.source}</span>\n        </div>\n      </Link>\n\n      <Link to='/edit/predicate'>\n        <div className='predicate'>\n          <span className='item-name'>Properties</span><span className='item-count'>{props.stats.predicate}</span>\n        </div>\n      </Link>\n\n      <div className='record'>\n        <span className='item-name'>Records</span><span className='item-count'>{props.stats.record}</span>\n      </div>\n\n    </section>\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/stats/StatsGrid.tsx","/**\n * @fileOverview Abstract interface for sources\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport { ApiService } from '../common/ApiService';\nimport { Serializer, TrackedFalconItem, CompositeKey } from '@digihum/falcon-core';\nimport * as queryString from 'query-string';\n\nimport { isObject } from 'lodash';\n\nimport { UnprocessableEntity, KeyNotFoundException } from '../common/Exceptions';\n\nexport { AppUrls } from '../common/ApiService';\n\nfunction handleErrors(response: any) {\n    if (!response.ok) {\n\n        if (response.status === 422) {\n            throw new UnprocessableEntity(response.statusText, response.json().then((result) => result.data));\n        }\n\n        // showToast.dispatch('Something went wrong ;(', response.statusText);\n\n        if (response.status === 404) {\n             throw new KeyNotFoundException(JSON.stringify({\n                statusText: response.statusText,\n                status: response.status\n            }));\n        }\n    }\n    return response;\n}\n\nexport class ClientApiService implements ApiService {\n    public getItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey) : Promise<T> {\n\n        const endURL = isObject(uid) ?\n            (<CompositeKey> uid).order.map((key) => (<CompositeKey> uid).values[key]).join('/')\n            : uid.toString();\n\n        return fetch(`/api/v1/${baseUrl}/${endURL}`)\n            .then(handleErrors)\n            .then((response) => response.json())\n            .then((data) => Serializer.fromJson(obj, data));\n    }\n\n    public getCollection<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, params: any) : Promise<T[]> {\n        return fetch(`/api/v1/${baseUrl}?` + queryString.stringify(params))\n            .then(handleErrors)\n            .then((response) => response.json())\n            .then((data) => data.map((datum) => Serializer.fromJson(obj, datum)));\n    }\n\n    public postItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, data: T, params: any) : Promise<number[]> {\n        return fetch(`/api/v1/${baseUrl}?` + queryString.stringify(params), {\n            method: 'POST',\n            body: JSON.stringify(data),\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            credentials: 'same-origin'\n        })\n        .then(handleErrors)\n        .then((response) => {\n            return response.json();\n        }).then((data) => {\n            return Promise.resolve(data);\n        });\n    }\n\n    public putItem<T extends TrackedFalconItem>(obj: { new(): T; },\n            baseUrl : string, uid: number | CompositeKey, data: T) : Promise<void> {\n\n        const endURL = isObject(uid) ?\n            (<CompositeKey> uid).order.map((key) => (<CompositeKey> uid).values[key]).join('/')\n            : uid.toString();\n\n        return fetch(`/api/v1/${baseUrl}/${endURL}`, {\n            method: 'PUT',\n            body: JSON.stringify(data),\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            credentials: 'same-origin'\n        })\n        .then(handleErrors);\n    }\n\n    public patchItem<T extends TrackedFalconItem>(obj: { new(): T; },\n            baseUrl : string, uid: number | CompositeKey, data : T) : Promise<void> {\n\n        const endURL = isObject(uid) ?\n            (<CompositeKey> uid).order.map((key) => (<CompositeKey> uid).values[key]).join('/')\n            : uid.toString();\n\n        return fetch(`/api/v1/${baseUrl}/${endURL}`, {\n            method: 'PATCH',\n            body: JSON.stringify(data),\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            credentials: 'same-origin'\n        })\n        .then(handleErrors);\n    }\n\n    public delItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey) : Promise<void>{\n\n        const endURL = isObject(uid) ?\n            (<CompositeKey> uid).order.map((key) => (<CompositeKey> uid).values[key]).join('/')\n            : uid.toString();\n\n        return fetch(`/api/v1/${baseUrl}/${endURL}`, {\n            method: 'DELETE',\n            credentials: 'same-origin'\n        })\n        .then(handleErrors);\n    }\n\n    public query(graphQLQueryString: string) : Promise<any> {\n        return fetch('/api/v1/query?query=' + graphQLQueryString)\n            .then(handleErrors)\n            .then((response) => response.json());\n    }\n\n    public getStats() : Promise<any> {\n      return fetch('/stats', { credentials: 'same-origin' })\n        .then(handleErrors)\n        .then((response) => response.json());\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/ClientApiService.ts","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\n//https://react-router.now.sh/Match\n\nimport * as React from 'react';\nimport { Match, Miss } from 'react-router';\n\nimport { RouteNotFound } from './views/RouteNotFound';\n\nimport { ApiService, AppUrls } from './ApiService';\n\nimport { itemTypes } from './itemTypes';\n\nimport { Admin } from './views/Admin';\nimport { AdminApp } from '../app/AdminApp';\n\nimport { User } from './views/User';\nimport { UserManagement } from './views/UserManagement';\nimport { AppDownload } from './views/AppDownload';\nimport { DatabaseUpload } from './views/DatabaseUpload';\n\nimport { Link } from 'react-router';\nimport { ObjectEditor } from './views/ObjectEditor';\n\nimport { GeneralStatistics } from './stats/GeneralStatistics';\n\ninterface FalconAppProps {\n    router: any;\n    api: ApiService;\n    routerSettings: any;\n    environment: 'app' | 'website';\n    connected: boolean;\n}\n\ninterface FalconAppState {\n    user: string;\n    tabsets: any[];\n    stats: GeneralStatistics | null;\n}\n\nexport class FalconApp extends React.Component<FalconAppProps, FalconAppState> {\n\n    constructor(props: FalconAppProps) {\n        super();\n        this.state = {\n            user: '',\n            stats: null,\n            tabsets: []\n        };\n    }\n\n    public componentDidMount() {\n        if (this.props.environment === 'website' && window !== undefined) {\n            fetch('/currentuser', { credentials: 'same-origin' })\n                .then((response) => response.json())\n                .then((userData) => this.setState({ user: userData.username }));\n\n            fetch('/tabset', { credentials: 'same-origin' })\n                .then((response) => response.json())\n                .then((tabsets) => this.setState({ tabsets }));\n        }\n\n        this.props.api.getStats()\n        .then((stats) => {\n          this.setState({ stats })\n        });\n    }\n\n    public render() {\n        return (\n        <div id='main' className='flex-fill'>\n            <this.props.router {...this.props.routerSettings} className='flex-fill' basename='http://localhost:8080'>\n                <div className='flex-fill' style={{ flexDirection: 'column' }}>\n                    <div className='header'>\n                        <Link to='/' className='logo-link'><div className='logo'>VRE</div></Link>\n                        <Link to='/' className='header-link'>Home</Link>\n                        <Link accessKey='s' to={'/edit/' + AppUrls.source} className='header-link source'>{itemTypes.source.plural}</Link>\n                        <Link accessKey='e' to={'/edit/' + AppUrls.entity} className='header-link entity'>{itemTypes.entity.plural}</Link>\n                        <Link accessKey='p'\n                            to={'/edit/' + AppUrls.predicate} className='header-link predicate'>{itemTypes.predicate.plural}</Link>\n                        <Link accessKey='t'\n                            to={'/edit/' + AppUrls.entity_type} className='header-link entity_type'>{itemTypes.entity_type.plural}</Link>\n\n                        { this.props.environment === 'website' ? (\n                            <div className='right-header'>\n                                <Link to='/user' className='header-link'><span className='current-user'>{this.state.user}</span></Link>\n                                <a href='/logout' className='header-link'>Logout</a>\n                                <a href='/' className='header-link'><i className='fa fa-external-link'></i></a>\n                            </div>\n                        ) : null}\n\n                    </div>\n\n                    { this.props.environment === 'website' ? (\n                        <Match exactly pattern='/' render={\n                        (matchprops) => (\n                          <Admin {...matchprops} stats={this.state.stats} tabsets={this.state.tabsets}/>\n                        )}/>\n                    ) : (\n                        <Match exactly pattern='/' render={\n                        (matchprops) => (\n                          <AdminApp {...matchprops} stats={this.state.stats}/>\n                        )}/>\n                    )}\n\n                    <Match exactly pattern='/user' component={User} />\n                    <Match exactly pattern='/users' component={UserManagement} />\n                    <Match exactly pattern='/app' component={AppDownload} />\n                    <Match exactly pattern='/upload' component={DatabaseUpload} />\n\n                    <Match exactly pattern='/search' render={\n                        (matchprops) => (\n                            <ObjectEditor\n                                api={this.props.api} {...matchprops}\n                                workspace={'search'} />)\n                    } />\n\n                    <Match pattern='/edit/:workspace' render={\n                        (matchprops) => (\n                            <ObjectEditor\n                                api={this.props.api} {...matchprops}\n                                workspace={matchprops.params.workspace === 'property' ? 'predicate' : matchprops.params.workspace}\n                                />)\n                    } />\n\n                    <Miss component={RouteNotFound} />\n                </div>\n            </this.props.router>\n        </div>);\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/FalconApp.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { GeneralStatistics } from '../common/stats/GeneralStatistics';\nimport { StatsGrid } from '../common/stats/StatsGrid';\n\n// ideally:\n// - Open file\n// - Recent files\n// - Metrics\n\ninterface AdminAppProps {\n  stats: GeneralStatistics | null;\n}\n\nexport const AdminApp = (props: AdminAppProps) => (\n    <div className='page'>\n        <section>\n            <h1>VRE App</h1>\n            {props.stats !== null ? (\n              <StatsGrid stats={props.stats} />\n            ) : null}\n        </section>\n     </div>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/AdminApp.tsx","/**\n * @fileOverview Abstract interface for sources\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nexport class UnprocessableEntity extends Error {\n\n    public data: Promise<any> | undefined;\n    public readonly code: number = 422;\n\n    constructor(message: string, data?: Promise<any>) {\n        super(message);\n        this.data = data;\n    }\n}\n\nexport class KeyNotFoundException extends Error {\n  public readonly code: number = 404;\n\n    constructor(message: string = 'Could not find the given key') {\n        super(message);\n    }\n}\n\nexport class ReadOnlyResourceException extends Error {\n  public readonly code: number = 400;\n\n    constructor(message: string = 'Attempt to update a readonly resource') {\n        super(message);\n    }\n}\n\nexport class CollectionNotFoundException extends Error {\n    public data: string;\n    constructor(message: string = 'Could not find the given collection') {\n        super(message);\n        this.data = message;\n    }\n}\n\nexport class OperationNotPermittedException extends Error {\n\n  public readonly code: number = 422;\n\n    public data: { message: string, data: any};\n    constructor(data: { message: string, data: any}) {\n        super(data.message);\n        this.data = data;\n    }\n}\n\nexport class InvalidUpdateException extends Error {\n\n  public readonly code: number = 400;\n\n  constructor(message: string) {\n      super(message);\n  }\n}\n\nexport class DatabaseIntegrityError extends Error {\n\n  public readonly code : number = 500;\n\n    constructor(message: string = `A database integrity constraint has been broken - your change has not been\n submitted. This is likely due to a change which violates the property types model; please check the types of\n what you are trying to do. Please also contact the Digital Humanities team, this error should not occur.`) {\n        super(message);\n    }\n}\n\n\nexport const Exceptions = {\n    UnprocessableEntity,\n    KeyNotFoundException,\n    CollectionNotFoundException,\n    OperationNotPermittedException,\n    DatabaseIntegrityError,\n    InvalidUpdateException,\n    ReadOnlyResourceException\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Exceptions.ts","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\ninterface LoadingProps {\n}\n\nexport const Loading : React.StatelessComponent<LoadingProps>\n    = (props: LoadingProps) => {\n\n    return (\n    <div className='loader-wrapper'>\n        <div className='loader'></div>\n    </div>);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/Loading.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { SearchBox } from './sidebar/SearchBox';\nimport { AppUrls } from '../ApiService';\nimport { Link } from 'react-router';\nimport { DataController } from '../stores/DataController';\n\nimport { capitalize, noop, isObject } from 'lodash';\n\nimport {SortableContainer, SortableElement, SortableHandle, arrayMove} from 'react-sortable-hoc';\n\nimport { ModalStore } from '../stores/ModalStore';\n\nimport { inject, observer } from 'mobx-react';\n\n\nexport interface Tab {\n    tabType: string;\n    tabClass: string;\n    uid: number;\n    query?: { [s: string]: string };\n    data?: any;\n}\n\nconst Handle = SortableHandle((props: {tabType: string}) => (\n  <div className='badge-container'>\n      <div className={'badge ' + props.tabType}>\n          <span>{props.tabType[0].toUpperCase()}</span>\n      </div>\n  </div>\n));\n\nconst onCloseTab = (e: React.MouseEvent<HTMLElement>, tabType: string, uid: number, dataStore: DataController) => {\n    dataStore.closeTab(tabType, uid);\n    e.stopPropagation();\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n}\n\nconst Card = SortableElement(observer((props: {dataStore: DataController, currentTab: boolean, url: any, index: number, tab: Tab, title: string, subtitle: string | string[],\n            compact: boolean}) => (\n      <li key={`${props.url}`}>\n          <div className={((currentTab) => {\n              const classes = ['sidebar-card', props.tab.tabClass];\n              if (currentTab) {\n                  classes.push('current');\n              }\n              if (props.compact) {\n                  classes.push('compact');\n              }\n              return classes.join(' ');\n          })(props.currentTab)}>\n              <Handle tabType={props.tab.tabType} index={props.index} />\n              <div className='description'>\n                  <Link to={props.url}>\n                      <span className='entity-name'>{props.title}</span>\n                      {props.compact ? null : isObject(props.subtitle) ? (\n                        <ul>{Object.keys(props.subtitle).map((sub, i) => (\n                          <li key={`tab-${props.index}-${i}`}>\n                            { sub }:\n                            {\n                              isObject(props.subtitle[sub]) ? (\n                                <span>\n                                  <ul>\n                                    {Object.keys(props.subtitle[sub]).map((subSub, j) =>\n                                      (<li key={`tab-${props.index}-${i}-${j}`}>{subSub}: {props.subtitle[sub][subSub]}</li>))}\n                                  </ul>\n                                </span>\n                              ) : null\n                            }\n                          </li>))}\n                        </ul>\n                      ) : (\n                          <span className='entity-type'>{props.subtitle}</span>\n                      )}\n                  </Link>\n              </div>\n              <span className='lock-button'>\n                  {props.tab.tabType === 'source' ? (\n                    props.dataStore.defaultSource === props.tab.uid ?\n                    (<i onClick={() => props.dataStore.defaultSource = null} className='fa fa-lock'></i>) :\n                    (<i onClick={() => props.dataStore.defaultSource = props.tab.uid} className='fa fa-unlock'></i>)\n                  ) : null}\n              </span>\n              {!props.currentTab ? (\n                  <span className='close-button'>\n                      <i className='fa fa-times' onClick={(e) => onCloseTab(e, props.tab.tabType, props.tab.uid, props.dataStore)}></i>\n                  </span>\n              ) : null}\n          </div>\n      </li>\n)));\n\nconst CardList = observer((props: {\n\n    dataStore: DataController,\n    list: boolean,\n    workspace: string,\n    id: number,\n    compact: boolean}) => {\n\n    return (\n      <ul className='card-list'>\n            {props.dataStore.tabs.map((tab, index) => {\n\n                // TODO: shouldn't be ==\n                const item = props.dataStore.dataStore.all[tab.tabType].value\n                    .find((item) => item.uid == tab.uid);\n\n                let url : string | Object | null = null;\n                if (tab.tabClass === 'item') {\n                  url = `/edit/${AppUrls[tab.tabType]}/${tab.uid}`;\n                } else {\n                  if (tab.tabClass === 'view') {\n                    url = {\n                      pathname: `/edit/${AppUrls[tab.tabType]}`,\n                      query: tab.query\n                    };\n                  }\n                }\n\n                const subtitle = tab.tabClass === 'item' ?\n                  capitalize(AppUrls[tab.tabType]).replace('_', ' ') + ' ' + tab.uid\n                  : tab.data;\n\n                const title = item === undefined ? `${tab.tabType} list` : item.label;\n\n                const currentTab = !props.list && tab.tabType === props.workspace && tab.uid == props.id;\n\n              return (\n                 <Card\n                  key={`tab-${tab.tabType}-${tab.tabClass}-${tab.uid}-${tab.query}`}\n                  currentTab={currentTab}\n                  url={url}\n                  tab={tab}\n                  title={title}\n                  subtitle={subtitle}\n                  index={index}\n                  dataStore={props.dataStore}\n                  compact={props.compact}\n                />\n              );\n        })}\n        </ul>\n    );\n});\n\n\ninterface SidebarProps {\n  dataStore?: DataController;\n  modalStore?: ModalStore;\n  workspace: string;\n  list: boolean;\n  id: number;\n}\n\ninterface SidebarState {\n    searchString: string;\n    compactMode: boolean;\n}\n\n@inject('dataStore', 'modalStore')\n@observer\nexport class Sidebar extends React.Component<SidebarProps, SidebarState> {\n\n    constructor() {\n        super();\n        this.state = {\n            searchString: '',\n            compactMode: false\n        };\n    }\n\n    public render() {\n\n        return (\n            <section id='sidebar'>\n\n                <SearchBox searchString={this.state.searchString} dataStore={this.props.dataStore!}\n                onChange={(evt) => this.setState({searchString: (evt.currentTarget as HTMLInputElement).value})} />\n\n                <div className='sidebar-toolbar'>\n                    <button onClick={() => this.props.dataStore!.clearAllTabs()}><i className='fa fa-trash'></i> Clear All</button>\n                    <button onClick={() => this.props.modalStore!.addModal({ name: 'createTabSet', cancel: noop, complete: noop, settings: {}})}><i className='fa fa-floppy-o'></i> Save</button>\n                    <button onClick={() => this.setState({compactMode: !this.state.compactMode})}><i className='fa fa-compress'></i> Compact</button>\n                </div>\n                <div className='card-list-container'>\n\n                 <CardList\n                    dataStore={this.props.dataStore!}\n                    list={this.props.list}\n                    workspace={this.props.workspace}\n                    id={this.props.id}\n                    compact={this.state.compactMode}\n\n                  />\n                </div>\n            </section>\n        );\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/Sidebar.tsx","/**\n * @fileOverview Toast controller\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\ninterface SingleToast {\n    id: number;\n    title: string;\n    message: string;\n    level: string;\n    lifeTime: number;\n}\n\ninterface ToastProps {\n}\n\ninterface ToastState {\n    toasts: SingleToast[];\n    nextId: number;\n}\n\nexport class Toast extends React.Component<ToastProps, ToastState> {\n\n    constructor() {\n        super();\n        this.state = {\n            toasts: [],\n            nextId: 0\n       };\n    }\n\n    public addToast(title: string, message: string, level: string = 'warning', lifeTime: number = 3000) {\n\n        const id = this.state.nextId;\n\n        this.setState({\n            toasts: this.state.toasts.concat([{ title, message, level, lifeTime, id }]),\n            nextId: id + 1\n        });\n\n        setTimeout(() => {\n            this.setState({\n                toasts: this.state.toasts.filter((toast) => toast.id !== id)\n            })\n        }, lifeTime);\n    }\n\n    public render() {\n        return (<span>\n            {this.state.toasts.map((toast, i) => (\n                <div key={`toast-${toast.id}`} style={{bottom: (1 + 7 * i) + 'em'}} className={`toast ${toast.level}`}>\n                    <div className='title'>\n                        {toast.title}\n                    </div>\n                    <div className='message'>\n                        {toast.message}\n                    </div>\n                </div>\n            ))}\n        </span>);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/Toast.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { ApiService } from '../ApiService';\nimport { DataController } from '../stores/DataController';\nimport { Loading } from './Loading';\n\nimport { } from 'mobx';\nimport { inject, observer } from 'mobx-react';\n\nimport {\n    EmptyWorkspace,\n    SourceEditorWorkspace,\n    EntityEditorWorkspace,\n    EntityTypeWorkspace,\n    PredicateEditorWorkspace,\n    AdvancedSearchWorkspace,\n    ObjectListWorkspace } from './workspace/workspace';\n\ninterface WorkspaceProps {\n    workspace: string;\n    id: number;\n    list: boolean;\n    dataStore?: DataController;\n    loading: boolean;\n    location: { pathname: string, search: string, query: any };\n}\n\ninterface WorkspaceState {\n    searchString: string;\n}\n\n@inject('dataStore')\n@observer\nexport class Workspace extends React.Component<WorkspaceProps, WorkspaceState> {\n\n    constructor() {\n        super();\n        this.state = {\n            searchString: ''\n        };\n    }\n\n    public render() {\n\n        if (this.props.loading) {\n            return (<Loading />);\n        }\n\n        if (this.props.list) {\n            return (<ObjectListWorkspace\n                query={this.props.location.query}\n                listType={this.props.workspace}\n            />);\n        }\n\n        let workspaceComponent : any = EmptyWorkspace;\n\n        switch (this.props.workspace) {\n            case 'entity':\n                workspaceComponent = EntityEditorWorkspace;\n                break;\n            case 'predicate':\n                workspaceComponent = PredicateEditorWorkspace;\n                break;\n            case 'source':\n                workspaceComponent = SourceEditorWorkspace;\n                break;\n            case 'entity_type':\n                workspaceComponent = EntityTypeWorkspace;\n                break;\n            case 'search':\n                workspaceComponent = AdvancedSearchWorkspace;\n                break;\n        }\n\n        return (\n            <div className='flex-fill workspace-outer-wrapper'>\n                <div className='workspace-inner-wrapper flex-fill'>\n                    {React.createElement(workspaceComponent, { id: this.props.id })}\n                </div>\n            </div>\n        );\n\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/Workspace.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { DatePickerDropdown } from '../fields/DatePickerDropdown';\n\ninterface DateFieldEditorProps {\n    onChange: (s: string) => void;\n    value: string;\n}\n\nexport const DateFieldEditor : React.StatelessComponent<DateFieldEditorProps> =\n    (props: DateFieldEditorProps)  => {\n        return (\n        <div className='date-selector'>\n            <DatePickerDropdown\n                value={props.value}\n                setValue={props.onChange}\n            />\n        </div>);\n    };\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/entity_editor/DateFieldEditor.tsx","/**\n * @fileOverview Entity Field Editor - select box for entities\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { NumberComboDropdown, ComboDropdownOption } from '../ComboDropdown';\nimport { Entity } from '@digihum/falcon-core';\nimport { noop } from 'lodash';\n\ninterface EntityFieldEditorProps {\n    onChange: (val: number | null) => void;\n    value: number;\n    entities: Entity[];\n}\n\nexport const EntityFieldEditor : React.StatelessComponent<EntityFieldEditorProps> =\n  (props: EntityFieldEditorProps)  => {\n\n  // build the options list\n  const options : ComboDropdownOption<number>[] = props.entities.map((entity) =>\n    ({ key: entity.label, value: entity.uid !== null ? entity.uid : null }));\n\n  // find the default option to display\n  let selectedOption : ComboDropdownOption<number> | undefined = options.find((opt) =>\n    opt.value !== null && opt.value === props.value);\n\n  if (selectedOption === undefined) {\n    selectedOption = { key: '', value: null};\n  }\n\n  return (\n    <NumberComboDropdown\n      options={options}\n      typeName='entity type'\n      allowNew={false}\n      value={selectedOption}\n      setValue={(val) => val !== null && val.value !== null ? props.onChange(val.value) : props.onChange(null)}\n      createNewValue={noop} />\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/entity_editor/EntityFieldEditor.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\ninterface IntegerFieldEditorProps {\n    onChange: (s: string) => void;\n    value: string;\n}\n\nexport const IntegerFieldEditor : React.StatelessComponent<IntegerFieldEditorProps> =\n  (props: IntegerFieldEditorProps)  => {\n\n    const integerFieldChangeHandler = (e) => props.onChange((e.target as HTMLInputElement).value);\n\n    return (\n      <input type='number' value={props.value} onChange={integerFieldChangeHandler} />\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/entity_editor/IntegerFieldEditor.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { AppUrls } from '../../ApiService';\nimport { DataController } from '../../stores/DataController';\n\nimport { Record, Predicate, Source, Entity, Serializer } from '@digihum/falcon-core';\nimport { EditableFieldHOC } from '../fields/EditableFieldComponent';\n\nimport { RecordRow } from './RecordRow';\n\nimport { AddTabButton } from '../AddTabButton';\n\nconst RecordEditableFieldComponent = EditableFieldHOC(RecordRow);\n\ninterface RecordPredicateProps {\n  entity_id: number;\n\tdataStore: DataController;\n\tdimension: string;\n\trecords: Record[];\n\tpredicate : Predicate;\n\tsources: Source[];\n  onChange: () => void;\n}\n\ninterface RecordPredicateState {\n\tpotentialValues: Entity[];\n}\n\nexport class RecordPredicate extends React.Component<RecordPredicateProps, RecordPredicateState> {\n\n    constructor() {\n        super();\n        this.state = {\n            potentialValues: []\n        };\n    }\n\n    public componentDidMount() {\n        if (this.props.predicate.rangeIsReference) {\n            this.props.dataStore!.getCollection(Entity, AppUrls.entity, { type: this.props.predicate.range })\n            .then((potentialValues) => this.setState({ potentialValues }));\n        }\n    }\n\n    public createNewRecord() {\n        this.props.dataStore!.postItem(Record, AppUrls.record,\n        Serializer.fromJson(Record, {\n            predicate: this.props.predicate.uid,\n            entity: this.props.entity_id,\n            valueType: this.props.predicate.rangeIsReference ? 'entity' : this.props.predicate.range,\n            score: 3,\n            source: this.props.dataStore!.defaultSource\n        }), {});\n    }\n\n\tpublic deleteRecord(record: Record) {\n\n\t\tif (record.uid === null) {\n\t\t\tthrow new Error('Trying to delete a record with null id');\n\t\t}\n\n\t\tthis.props.dataStore!.delItem(Record, AppUrls.record, record.uid)\n\t\t.then(() => {\n\t\t\tthis.props.onChange();\n\t\t});\n\t}\n\n\tpublic recordChanged(record: Record) {\n\t\tthis.props.dataStore!.putItem(Record, AppUrls.record, this.props.entity_id, Serializer.toJson(record));\n\t}\n\n\tpublic render() {\n\n    if (this.props.predicate.uid === null) {\n      throw new Error('Expected uid to be a number, it was null');\n    }\n\n    return (\n      <section>\n            <h5 className='section-header'>{this.props.predicate.label} <i\n                    className='fa fa-plus-circle add button'\n                      aria-hidden='true'\n                      onClick={this.createNewRecord.bind(this)}\n                      title={`Add new ${this.props.predicate.label} record`}\n                ></i>\n            <AddTabButton\n                uid={this.props.predicate.uid}\n                tabType='predicate' />\n            </h5>\n            <table className='record-editing-table'>\n                <thead>\n                    <tr className='record-row title'>\n                        <th className='record-row-item uid'>ID</th>\n                        {this.props.predicate.range !== 'source' ? (<th className='record-row-item'>Value</th>) : null}\n                        <th className='record-row-item'>Source</th>\n                        <th className='record-row-item score'>Score</th>\n                        <th className='record-row-item score'>Period</th>\n                        <th className='record-row-item buttons'>Actions</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {this.props.records.map((record) => (\n                        <RecordEditableFieldComponent\n                            key={`row-${record.uid}`}\n                            value={record}\n                            onChange={this.recordChanged.bind(this)}\n                            onDelete={this.deleteRecord.bind(this)}\n                            sources={this.props.sources}\n                            entities={this.state.potentialValues} />\n                    ))}\n                </tbody>\n            </table>\n        </section>\n    );\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/entity_editor/RecordPredicate.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Record, Source, Entity } from '@digihum/falcon-core';\nimport { EditableSubfieldProps } from '../fields/EditableFieldComponent';\nimport { ScorePicker } from '../fields/ScorePicker';\nimport { NumberComboDropdown, ComboDropdownOption } from '../ComboDropdown';\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nimport { StringFieldEditor } from './StringFieldEditor';\nimport { EntityFieldEditor } from './EntityFieldEditor';\nimport { DateFieldEditor } from './DateFieldEditor';\nimport { IntegerFieldEditor } from './IntegerFieldEditor';\n\nimport { AddTabButton } from '../AddTabButton';\n\nimport { formatDate } from '../../helper/formatDate';\n\nimport { inject, observer } from 'mobx-react';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\ninterface RecordRowProps extends EditableSubfieldProps<Record> {\n    dimension: string;\n    sources: Source[];\n    entities: Entity[];\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\nconst recordEditor = (props: RecordRowProps, record: Record) => {\n    switch (record.valueType) {\n        case 'string':\n            return (<StringFieldEditor\n                value={record.value || ''}\n                onChange={(value) => props.onChange!(Object.assign(record, { value }))} />);\n        case 'date':\n            return (<DateFieldEditor\n                value={record.value || ''}\n                onChange={(value) => props.onChange!(Object.assign(record, { value }))} />);\n        case 'integer':\n            return (<IntegerFieldEditor\n                value={record.value || ''}\n                onChange={(value) => props.onChange!(Object.assign(record, { value }))} />);\n        case 'entity':\n            return (<EntityFieldEditor\n                value={record.value === null ? 0 : parseInt(record.value)}\n                onChange={(value) => props.onChange!(Object.assign(record, { value }))}\n                entities={props.entities} />);\n        default:\n            return (<div>Missing editor</div>);\n    }\n};\n\nconst formatValue = (props: RecordRowProps, record: Record) => {\n    if (record.valueType === 'entity') {\n        const entity = props.entities.find((entity) => entity.uid == record.value);\n        if (entity !== undefined) {\n            if (entity.uid === null) {\n              throw Error('Unexpected null ID on entity');\n            }\n            return (<span>\n                {entity.label} <AddTabButton\n                    uid={entity.uid}\n                    tabType='entity' />\n            </span>);\n        } else {\n            return (<em>Missing Entity</em>);\n        }\n    }\n\n    if (record.valueType === 'date') {\n       return (<span>{formatDate(record.value)}</span>);\n    }\n\n    return (<span>{record.value}</span>);\n};\n\nexport const RecordRow = inject('dataStore', 'modalStore')(observer((props: RecordRowProps) => {\n\n    const createNewSource = (initialValue: string) => {\n        const a : ModalDefinition = {\n            name: 'source',\n            complete: () => {\n                // TODO : Automatically reload sources\n            },\n            cancel: () => { console.log('cancel'); },\n            settings: {\n                initialValue\n            }\n        };\n\n        props.modalStore!.addModal(a);\n    };\n\n    const recordValue = props.value!;\n\n    if (recordValue === null) {\n        throw new Error('Should not be null!!');\n    }\n\n    const currentSource = recordValue.source === null ? undefined :\n      props.sources.find((source) => source.uid === recordValue.source);\n\n    const dropDownValue : ComboDropdownOption<number> = {\n        key: '', value: recordValue.source === null ? null : recordValue.source\n    };\n\n    if (currentSource !== undefined) {\n        dropDownValue.key = currentSource.label;\n    }\n\n    if (props.edit) {\n        return (\n        <tr className='record-row'>\n            <td className='record-row-item uid'>{recordValue.uid}</td>\n            {recordValue.valueType !== 'source' ? (\n                <td className='record-row-item'>\n                    {recordEditor(props, recordValue)}\n                </td>\n            ) : null}\n            <td className='record-row-item'>\n                <NumberComboDropdown\n                    options={props.sources.map((source) =>\n                      ({ key: source.label, value: source.uid !== null ? source.uid : null}))}\n                    typeName='source'\n                    value={dropDownValue}\n                    setValue={(combo) => props.onChange!(Object.assign(recordValue, { source: combo === null ? combo : combo.value }))}\n                    createNewValue={() => createNewSource('')}\n                />\n            </td>\n            <td className='record-row-item score'>\n                <ScorePicker value={recordValue.score} readOnly={false}\n                    onChange={(score) => props.onChange!(Object.assign(recordValue, { score }))} />\n            </td>\n            <td className='record-row-item period'>\n                <DateFieldEditor\n                    value={recordValue.period || ''}\n                    onChange={(period) => props.onChange!(Object.assign(recordValue, { period }))} />\n            </td>\n            <td className='record-row-item buttons'>\n                <button onClick={props.acceptChanges} ><i className='fa fa-check' aria-hidden='true'></i></button>\n                <button onClick={props.cancelChanges}><i className='fa fa-times' aria-hidden='true'></i></button>\n            </td>\n        </tr>);\n    } else {\n        return (\n        <tr className='record-row'>\n            <td className='record-row-item uid'>#{recordValue.uid}</td>\n            {recordValue.valueType !== 'source' ? (\n                <td className='record-row-item'>\n                   {formatValue(props, recordValue)}\n                </td>\n            ) : null }\n            <td className='record-row-item'>{dropDownValue.key}\n                {dropDownValue.key.length > 0 && dropDownValue.value !== null ? (\n                    <AddTabButton\n                        uid={dropDownValue.value}\n                        tabType='source' />\n                ) : null}\n\t\t\t</td>\n            <td className='record-row-item score'>\n                 <ScorePicker value={recordValue.score} readOnly={true} />\n            </td>\n            <td className='record-row-item period'>\n                 {formatDate(recordValue.period)}\n            </td>\n            <td className='record-row-item buttons'>\n                <button onClick={props.setEdit}><i className='fa fa-pencil-square-o' title='Edit'  aria-hidden='true'></i></button>\n                <button  onClick={() => props.onDelete!(props.value!)}><i className='fa fa-trash' aria-hidden='true'></i></button>\n            </td>\n        </tr>\n        );\n    }\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/entity_editor/RecordRow.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { AppUrls } from '../../ApiService';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\nimport { Record, Predicate, Source } from '@digihum/falcon-core';\n\nimport { SearchBar } from '../SearchBar';\n\nimport { RecordPredicate } from './RecordPredicate';\n\nimport { findParentTree } from '../../helper/findParentTree';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nimport { groupBy, Dictionary } from 'lodash';\n\nimport { inject, observer } from 'mobx-react';\n\ninterface RecordsEditorProps {\n  id: number;\n\tdimension: string;\n\tentityTypeId: number;\n\tentityExists: boolean;\n\trecords: Dictionary<Record[]>;\n\tonChange: () => void;\n\tpredicates : Predicate[];\n\tsources: Source[];\n\tdataStore?: DataController;\n  modalStore?: ModalStore;\n}\n\ninterface RecordsEditorState {\n\tfilterFunc: (p: Predicate) => boolean;\n}\n\n@inject('dataStore', 'modalStore')\n@observer\n\nexport class RecordsEditor extends React.Component<RecordsEditorProps, RecordsEditorState> {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tfilterFunc: () => true\n\t\t};\n\t}\n\n\tpublic deleteRecord(record: Record) {\n\n\t\tif (record.uid === null) {\n\t\t\tthrow new Error('Trying to delete a record with null id');\n\t\t}\n\n\t\tthis.props.dataStore!.delItem(Record, AppUrls.record, record.uid)\n\t\t.then(() => {\n\t\t\tthis.props.onChange();\n\t\t});\n\t}\n\n\tpublic createNewRecord() {\n\n        const entity = this.props.dataStore!.dataStore.tabs.entity[this.props.id].value.entity;\n\n        const entityType = this.props.dataStore!.dataStore.all.entity_type.value.find((t) => t.uid === entity.entityType);\n\n        const entityTypeParents = findParentTree(entity.entityType, this.props.dataStore!.dataStore.all.entity_type.value);\n        const predicates = this.props.dataStore!.dataStore.all.predicate\n            .value.filter((pred) => entityTypeParents.indexOf(pred.domain) !== -1);\n\n        const modalDef: ModalDefinition = {\n            name: 'record',\n            complete: (data) => {\n                console.log('Records editor called complete');\n                //this.loadData(this.props);\n            },\n            cancel: () => {\n                console.log('Records editor called cancel');\n            },\n            settings: {\n                options: predicates.map((pred) => ({ key: pred.label, value: pred})),\n                entityUid: this.props.id,\n                entityType: this.props.entityTypeId\n            }\n        };\n\n        this.props.modalStore!.addModal(modalDef);\n    }\n\n\tpublic render() {\n\n\t\tconst predicates = this.props.predicates;\n\n\t\treturn (\n\t\t<div>\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<label className='small'>Records</label>\n\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t<div style={{ flex: '1' }}>\n\t\t\t\t\t\t\t<SearchBar\n\t\t\t\t\t\t\t\tgetValue={(p: Predicate) => p.label}\n\t\t\t\t\t\t\t\tsetFilterFunc={(filterFunc) => this.setState({ filterFunc })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{padding: '0.1em 0.4em', fontSize: '2em'}}>\n\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\tclassName='fa fa-plus-circle add button'\n\t\t\t\t\t\t\t\taria-hidden='true'\n\t\t\t\t\t\t\t\tonClick={this.createNewRecord.bind(this)}\n\t\t\t\t\t\t\t\ttitle='Add new record'\n\t\t\t\t\t\t\t>\n                    \t\t</i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t </div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{Object.keys(this.props.records).map((section) => {\n\n\t\t\t\t\t\t\tconst currentPredicate = predicates.find((pred) => {\n\t\t\t\t\t\t\t\tif (pred.uid === null) {\n\t\t\t\t\t\t\t\t\tthrow new Error('encountered predicate with null id');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn pred.uid.toString() === section;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif(currentPredicate === undefined) {\n\t\t\t\t\t\t\t\tthrow new Error('Could not find predicate');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!this.state.filterFunc(currentPredicate)) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (<RecordPredicate\n\t\t\t\t\t\t\t\tkey={`section-${section}`}\n\t\t\t\t\t\t\t\tentity_id={this.props.id}\n\t\t\t\t\t\t\t\tdataStore={this.props.dataStore!}\n\t\t\t\t\t\t\t\tdimension='predicate'\n\t\t\t\t\t\t\t\trecords={this.props.records[section]}\n\t\t\t\t\t\t\t\tpredicate={currentPredicate}\n\t\t\t\t\t\t\t\tsources={this.props.sources}\n\t\t\t\t\t\t\t\tonChange={this.props.onChange}\n\t\t\t\t\t\t\t />);\n\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/entity_editor/RecordsEditor.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\ninterface StringFieldEditorProps {\n    onChange: (s: string) => void;\n    value: string;\n}\n\nexport const StringFieldEditor : React.StatelessComponent<StringFieldEditorProps> =\n  (props: StringFieldEditorProps)  => {\n    return (\n      <input type='text' value={props.value} onChange={(e) => props.onChange((e.target as HTMLInputElement).value)} />\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/entity_editor/StringFieldEditor.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport * as moment from 'moment';\n\nimport { padStart } from 'lodash';\n\nimport { formatDate } from '../../helper/formatDate';\n\nexport interface DatePickerDropdownProps {\n    value: string;\n    setValue: (s: string) => void;\n}\n\ninterface DatePickerDropdownState {\n    showingDropDown: boolean;\n}\n\nexport class DatePickerDropdown<T> extends React.Component<DatePickerDropdownProps, DatePickerDropdownState> {\n\n    private ignoreBlur;\n    private ignoreClick;\n    private ignoreGlobalClick;\n    private boundWindowClick;\n\n    private static readonly datePickerDropDownInputBoxRef : string = 'datePickerDropDownInputBox';\n\n    constructor() {\n        super();\n\n        //TODO: should be false\n        this.state = {\n            showingDropDown: false\n        };\n\n        if (document !== undefined) {\n            this.boundWindowClick = () => {\n                if (!this.ignoreGlobalClick) {\n                    this.setState({\n                        showingDropDown: false\n                    });\n                } else {\n                    this.ignoreGlobalClick = false;\n                }\n            };\n\n            document.body.addEventListener('click', this.boundWindowClick);\n        }\n    }\n\n    public componentWillMount() {\n        this.ignoreBlur = false;\n        this.ignoreClick = false;\n        this.ignoreGlobalClick = false;\n    }\n\n    public componentWillUnmount() {\n        document.body.removeEventListener('click', this.boundWindowClick);\n    }\n\n    public componentWillReceiveProps(newProps: DatePickerDropdownProps) {\n        // this.updateFilter(newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString, newProps);\n        // this.setState({\n        //     searchString: newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString,\n        //     selected: newProps.value,\n        //     options: newProps.options\n        // });\n    }\n\n    //should be false\n    public handleInputBlur() {\n        if (!this.ignoreBlur) {\n            this.setState({\n                showingDropDown: false\n            });\n        } else {\n            this.ignoreBlur = false;\n        }\n    }\n\n    public handleInputFocus () {\n        if (this.ignoreBlur) {\n        this.ignoreBlur = true;\n        return;\n        }\n        // We don't want `selectItemFromMouse` to trigger when\n        // the user clicks into the input to focus it, so set this\n        // flag to cancel out the logic in `handleInputClick`.\n        // The event order is:  MouseDown -> Focus -> MouseUp -> Click\n        this.ignoreClick = true;\n        this.setState({ showingDropDown: true });\n  }\n\n  public handleInputClick () {\n    // Input will not be focused if it's disabled\n    if (this.isInputFocused() && this.state.showingDropDown === false) {\n        this.setState({ showingDropDown: true });\n    } else {\n        //  if (this.state.highlightedIndex !== null && !this.ignoreClick) {\n        //      this.selectItemFromMouse(this.state.filteredOptions[this.state.highlightedIndex]);\n        //  } else {\n             this.ignoreClick = false;\n        //  }\n    }\n  }\n\n  public selectItemFromMouse (item) {\n    this.setState({\n      showingDropDown: false\n    }, () => {\n      this.props.setValue(item);\n    })\n  }\n\n   public isInputFocused () {\n    const el = this.refs[DatePickerDropdown.datePickerDropDownInputBoxRef] as HTMLElement;\n    return el.ownerDocument && (el === el.ownerDocument.activeElement);\n  }\n\n  public onDropdownClick() {\n      this.ignoreBlur = true;\n      this.ignoreGlobalClick = true;\n      console.log('clicked');\n  }\n\n  public rangeTypeChanged(rangeType: string) {\n       this.props.setValue(rangeType + this.props.value.substr(1));\n  }\n\n  public yearChanged(e: React.FormEvent<HTMLSelectElement>) {\n      const base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\n      let yearVal : string = e.currentTarget.value.substr(0, 4).replace(/[^0-9]/g, '');\n      for (let i = yearVal.length; i < 4; i += 1) {\n          yearVal += 'X';\n      }\n      this.props.setValue(base.substr(0, 1) + yearVal + base.substr(5));\n  }\n\n  public monthChanged(e: React.FormEvent<HTMLInputElement>) {\n      this.ignoreGlobalClick = true;\n      const base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\n      const monthVal : string = e.currentTarget.value.substr(0, 2);\n      this.props.setValue(base.substr(0, 5) + monthVal + base.substr(7));\n  }\n\n  public dayChanged(e: React.FormEvent<HTMLInputElement>) {\n      const base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\n      let dayVal : string = e.currentTarget.value.substr(0, 2).replace(/[^0-9]/g, '');\n      dayVal = padStart(dayVal, 2, '0');\n      this.props.setValue( base.substr(0, 7) + dayVal);\n  }\n\n  public render() {\n\n      let rangeOption = this.props.value.substr(0, 1);\n\n      if (['<', '>', '='].indexOf(rangeOption) === -1) {\n          rangeOption = '=';\n      }\n\n      const rangeOptionClassName = (val: string) => {\n          if (val === rangeOption) {\n              return 'range-option selected';\n          } else {\n              return 'range-option';\n          }\n      };\n\n      const year = this.props.value.substr(1, 4).replace(/X/g, '');\n      const month = this.props.value.substr(5, 2);\n      const day = this.props.value[7] === '0' ? this.props.value[8] === '0' ?\n        ''\n        : this.props.value.substr(8, 1)\n        : this.props.value.substr(7, 2);\n\n       const displayValue = formatDate(this.props.value);\n\n       return (\n        <div className='combo-dropdown'>\n                <div>\n                    <input type='text'\n                        readOnly={true}\n                        ref={DatePickerDropdown.datePickerDropDownInputBoxRef}\n                        className='search-input'\n                        value={displayValue}\n                        onBlur={this.handleInputBlur.bind(this)}\n                        onFocus={this.handleInputFocus.bind(this)}\n                        onClick={this.handleInputClick.bind(this)}\n                    />\n                </div>\n                {this.state.showingDropDown ? (\n                    <div className='dropdown'>\n                        <div className='date-picker-dropdown' onMouseDown={this.onDropdownClick.bind(this)}>\n                            <section className='range-type'>\n                                <div className={rangeOptionClassName('<')} onClick={() => this.rangeTypeChanged('<')}>Before</div>\n                                <div className={rangeOptionClassName('=')} onClick={() => this.rangeTypeChanged('=')}>Exactly</div>\n                                <div className={rangeOptionClassName('>')} onClick={() => this.rangeTypeChanged('>')}>After</div>\n                            </section>\n                            <section className='date-select'>\n                                <div className='date-selector day'>\n                                    <label className='small'>Day</label>\n                                    <input type='text' maxLength={2} value={day} onChange={this.dayChanged.bind(this)} />\n                                </div>\n                                <div className='date-selector month'>\n                                    <label className='small'>Month</label>\n                                    <select onChange={this.monthChanged.bind(this)} value={month}>\n                                        <option value='00'>Unknown</option>\n                                        {moment.months().map((month, i) => (\n                                            <option key={`option-${month}`} value={padStart((i + 1).toString(), 2, '0')}>{month}</option>\n                                        ))}\n                                    </select>\n                                </div>\n                                <div className='date-selector year'>\n                                    <label className='small'>Year</label>\n                                    <input type='text' maxLength={4} value={year} onChange={this.yearChanged.bind(this)} />\n                                </div>\n                            </section>\n                        </div>\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/fields/DatePickerDropdown.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { reverse } from 'lodash';\n\ninterface ScorePickerProps {\n    value: number;\n    onChange?: (val: number) => void;\n    readOnly: boolean;\n}\n\nexport const ScorePicker : React.StatelessComponent<ScorePickerProps> =\n    (props: ScorePickerProps) => {\n\n        const values = [1, 2, 3, 4, 5];\n\n        if (props.readOnly) {\n            return (\n            <span className='score-picker'>\n                {values.map((val) => (<i key={val}\n                    className={'fa fa-star' + (val > props.value ? '-o' : '')}\n                    aria-hidden='true'></i>))}\n            </span>\n            );\n        } else {\n\n          return (\n            <span className='score-picker editing'>\n                {reverse(values).map((val) => (\n                  <i key={val}\n                    className={'fa fa-star' + (val > props.value ? '-o' : '')}\n                    onClick={() => {\n                      if(props.onChange === undefined) {\n                        throw new Error('An onChange handler is required');\n                      }\n                      props.onChange(val);\n                    }}\n                    aria-hidden='true'></i>\n                ))}\n            </span>\n            );\n        }\n\n\n    };\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/fields/ScorePicker.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Overlay } from '../Overlay';\nimport { Entity, EntityType, Record, Predicate, Source } from '@digihum/falcon-core';\n\nimport { ComboDropdown, ComboDropdownOption } from '../ComboDropdown';\n\nimport { noop } from 'lodash';\n\nimport { DataController } from '../../stores/DataController';\nimport { inject, observer } from 'mobx-react';\n\ninterface ConflictResolutionProps {\n    dataStore?: DataController;\n    complete: (s: string) => void;\n    cancel: () => void;\n    message: string;\n    conflictingItems: {\n        record: Record[];\n        entity: Entity[];\n        predicate: Predicate[];\n        entityType: EntityType[];\n        source: Source[];\n    };\n}\n\ninterface ConflictResolutionState {\n    label: string;\n    entityType: ComboDropdownOption<number>;\n    allEntityTypes: EntityType[];\n}\n\n@inject('dataStore')\n@observer\nexport class ConflictResolution extends React.Component<ConflictResolutionProps, ConflictResolutionState> {\n\n    constructor() {\n        super();\n        this.state = {\n            label: '',\n            entityType: { key: '', value: null},\n            allEntityTypes: []\n        };\n    }\n\n\n    public render() {\n        return (\n        <Overlay>\n            <h2><i className='fa fa-exclamation-triangle warning'></i> Conflict: {this.props.message}</h2>\n            {this.props.conflictingItems.record !== undefined && this.props.conflictingItems.record.length > 0 ? (\n                <span>\n                    <p>The following records conflict with your request change:</p>\n                    <table className='table'>\n                        <thead>\n                            <tr>\n                                <th>Entity</th>\n                                <th>Predicate</th>\n                                <th>Value</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        {this.props.conflictingItems.record.map((record) => {\n\n                            const entityName = this.props.dataStore!.dataStore.all.entity.value\n                                .find((entity) => entity.uid == record.entity)!.label;\n\n                            const predicateName = this.props.dataStore!.dataStore.all.predicate.value\n                                .find((predicate) => predicate.uid == record.predicate)!.label;\n\n\n                            return (\n                            <tr key={`row-${record.uid}`}>\n                                <td>\n                                    {entityName}\n                                </td>\n                                <td>\n                                    {predicateName}\n                                </td>\n                                <td>\n                                    {record.value}\n                                </td>\n                            </tr>);\n                        })}\n                        </tbody>\n                    </table>\n                </span>\n            ) : null }\n\n\n            {this.props.conflictingItems.entity !== undefined && this.props.conflictingItems.entity.length > 0 ? (\n                <span>\n                    <p>The following entities conflict with your request change:</p>\n                    <table className='table'>\n                        <thead>\n                            <tr>\n                                <th>Entity</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        {this.props.conflictingItems.entity.map((entity) => {\n                            return (\n                            <tr key={`row-${entity.uid}`}>\n                                <td>\n                                    {entity.label}\n                                </td>\n                            </tr>);\n                        })}\n                        </tbody>\n                    </table>\n                </span>\n            ) : null }\n\n            {this.props.conflictingItems.entityType !== undefined && this.props.conflictingItems.entityType.length > 0 ? (\n                <span>\n                    <p>The following entity types conflict with your request change:</p>\n                    <table className='table'>\n                        <thead>\n                            <tr>\n                                <th>Entity Type</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        {this.props.conflictingItems.entityType.map((entityType) => {\n                            return (\n                            <tr key={`row-${entityType.uid}`}>\n                                <td>\n                                    {entityType.label}\n                                </td>\n                            </tr>);\n                        })}\n                        </tbody>\n                    </table>\n                </span>\n            ) : null }\n\n             {this.props.conflictingItems.source !== undefined && this.props.conflictingItems.source.length > 0 ? (\n                <span>\n                    <p>The following sources conflict with your request change:</p>\n                    <table className='table'>\n                        <thead>\n                            <tr>\n                                <th>Sources</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        {this.props.conflictingItems.source.map((source) => {\n                            return (\n                            <tr key={`row-${source.uid}`}>\n                                <td>\n                                    {source.label}\n                                </td>\n                            </tr>);\n                        })}\n                        </tbody>\n                    </table>\n                </span>\n            ) : null }\n\n\n            <div className='block-buttons'>\n                <button onClick={() => this.props.cancel()}>Cancel</button>\n                <button onClick={() => this.props.complete('addToWorkspace')}>\n                    <i className='icon-list-add'></i>Cancel and add conflicting records to workspace\n                </button>\n                <button onClick={() => this.props.complete('deleteAll')}>\n                    <i className='fa fa-trash'></i> Continue and delete all conflicting records\n                </button>\n            </div>\n\n        </Overlay>\n        );\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/modal/ConflictResolution.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Overlay } from '../Overlay';\nimport { Entity, EntityType, Serializer } from '@digihum/falcon-core';\nimport { AppUrls } from '../../ApiService';\nimport { NumberComboDropdown, ComboDropdownOption } from '../ComboDropdown';\n\nimport { noop } from 'lodash';\n\nimport { DataController } from '../../stores/DataController';\nimport { inject, observer } from 'mobx-react';\n\ninterface CreateEntityProps {\n    dataStore?: DataController;\n    complete: (s: string) => void;\n    cancel: () => void;\n    initialName?: string;\n    initialType?: number;\n}\n\ninterface CreateEntityState {\n    label: string;\n    entityType: ComboDropdownOption<number> | null;\n    allEntityTypes: EntityType[];\n}\n\n@inject('dataStore')\n@observer\nexport class CreateEntity extends React.Component<CreateEntityProps, CreateEntityState> {\n\n    constructor() {\n        super();\n        this.state = {\n            label: '',\n            entityType: { key: '', value: null},\n            allEntityTypes: []\n        };\n    }\n\n    public componentWillMount() {\n        this.props.dataStore!.getCollection(EntityType, AppUrls.entity_type, {})\n        .then((allEntityTypes) => {\n            if (this.props.initialType !== undefined) {\n                const initialType = allEntityTypes.find((et) => et.uid === this.props.initialType);\n\n                if (initialType === undefined) {\n                  throw new Error('Invalid initial type');\n                }\n\n                if (initialType.uid === null) {\n                  throw new Error('found entity type with null uid');\n                }\n\n                this.setState({\n                    entityType:  { key: initialType.label, value: initialType.uid }\n                })\n            }\n            this.setState({ allEntityTypes });\n        });\n    }\n\n    public createEntity() {\n\n      if (this.state.entityType === null) {\n        throw new Error('Cannot create entity with null type');\n      }\n\n        this.props.dataStore!.postItem(Entity, AppUrls.entity,\n            Serializer.fromJson(Entity, {\n                label: this.state.label,\n                entityType: this.state.entityType.value\n            }), {})\n        .then((a) => this.props.complete(a[0].toString()));\n    }\n\n    public render() {\n        return (\n        <Overlay>\n            <h2>Create Entity</h2>\n\n            <label className='small'>Label</label>\n            <input type='text'\n                value={this.state.label}\n                ref={(a) => { if(a !== null) a.focus(); }}\n                name='new-entity-name'\n                className='gap'\n                onChange={(e) => this.setState({ label: (e.target as HTMLInputElement).value })} />\n\n            <label className='small'>Type</label>\n            <NumberComboDropdown\n                options={this.state.allEntityTypes.map((t) => ({ key: t.label, value: t.uid }))}\n                typeName='entity type'\n                value={this.state.entityType}\n                setValue={(entityType) => this.setState({entityType})}\n                createNewValue={noop}\n                allowNew={false}\n            />\n            <button name='cancel-modal' onClick={() => this.props.cancel()} className='pull-left'>Cancel</button>\n            <button name='create-entity' onClick={this.createEntity.bind(this)} className='pull-right'>Create Entity</button>\n        </Overlay>\n        );\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/modal/CreateEntity.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Overlay } from '../Overlay';\nimport { EntityType, Serializer } from '@digihum/falcon-core';\nimport { AppUrls } from '../../ApiService';\n\nimport { DataController } from '../../stores/DataController';\nimport { inject, observer } from 'mobx-react';\n\nimport * as mousetrap from 'mousetrap';\n\ninterface CreateEntityTypeProps {\n    dataStore?: DataController;\n    complete: (s: string) => void;\n    cancel: () => void;\n}\n\ninterface CreateEntityTypeState {\n    internalValue: string;\n}\n\n@inject('dataStore')\n@observer\nexport class CreateEntityType extends React.Component<CreateEntityTypeProps, CreateEntityTypeState> {\n\n    private keyboardShortcuts;\n\n    constructor() {\n        super();\n        this.state = {\n            internalValue: ''\n        };\n    }\n\n    public createEntityType() {\n        this.props.dataStore!.postItem(EntityType, AppUrls.entity_type,\n            Serializer.fromJson(EntityType, {\n                label: this.state.internalValue\n            }), {})\n        .then(this.props.complete);\n    }\n\n    public inputRef(val: HTMLElement | null) {\n        if (val !== null) {\n            val.focus();\n            this.keyboardShortcuts = new mousetrap(val);\n            this.keyboardShortcuts.bind('return', this.createEntityType.bind(this));\n            this.keyboardShortcuts.bind('escape', this.props.cancel);\n        } else {\n            this.keyboardShortcuts.unbind('return');\n        }\n    }\n\n    public render() {\n        return (\n        <Overlay>\n            <h2>Create Entity Type</h2>\n            <label className='small'>Name</label>\n            <input type='text'\n                value={this.state.internalValue}\n                ref={this.inputRef.bind(this)}\n                onChange={(e) => this.setState({ internalValue: e.target.value })} />\n            <button onClick={() => this.props.cancel()} className='pull-left'>Cancel</button>\n            <button onClick={this.createEntityType.bind(this)} className='pull-right'>Create Entity Type</button>\n        </Overlay>\n        );\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/modal/CreateEntityType.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Overlay } from '../Overlay';\nimport { PredicateDescription } from '../fields/PredicateDescription';\nimport { Predicate, EntityType, Serializer } from '@digihum/falcon-core';\nimport { literalTypes } from '../../literalTypes';\nimport { AppUrls } from '../../ApiService';\n\nimport { ComboDropdownOption } from '../ComboDropdown';\n\nimport { DataController } from '../../stores/DataController';\nimport { inject, observer } from 'mobx-react';\n\ninterface CreatePredicateProps {\n    initialName: string;\n    cancel: () => void;\n    complete: (newPredicate: Predicate) => void;\n    initialDomain?: number;\n    dataStore?: DataController;\n}\n\ninterface CreatePredicateState {\n    label: string;\n    domain: ComboDropdownOption<number>;\n    range: ComboDropdownOption<{isReference: boolean, value: number | string}>;\n    domainOptions: ComboDropdownOption<number>[];\n    rangeOptions: ComboDropdownOption<{isReference: boolean, value: number | string}>[];\n}\n\n@inject('dataStore')\n@observer\nexport class CreatePredicate extends React.Component<CreatePredicateProps, CreatePredicateState> {\n\n    constructor() {\n        super();\n        this.state = {\n            label: '',\n            domain: {key: '', value: null},\n            range: {key: '', value: null},\n            domainOptions: [],\n            rangeOptions: []\n        };\n    }\n\n    public componentWillMount() {\n        this.setState({ label: this.props.initialName });\n    }\n\n    public componentDidMount() {\n        if (this.props.initialDomain !== undefined) {\n             this.props.dataStore!.getItem(EntityType, AppUrls.entity_type, this.props.initialDomain)\n            .then((result) => {\n\n                if (result.uid === null) {\n                    throw new Error('Unexpected null uid');\n                }\n\n                this.setState({\n                domain: { key: result.label, value: result.uid},\n                domainOptions: [\n                    { key: result.label, value: result.uid}\n                ].concat(result.parents.map((entityTypeId) => {\n                    const parentEntityType = this.props.dataStore!.dataStore.all.entity_type.value.find((e) => e.uid === entityTypeId)!;\n                    return { key: parentEntityType.label, value: entityTypeId };\n                }))});\n            });\n        }\n\n        const results = this.props.dataStore!.dataStore.all.entity_type.value;\n        const entityTypeMap : ComboDropdownOption<number>[] = results.map((entityType) => {\n            if (entityType.uid === null) {\n                throw new Error('Unexpected null uid');\n            }\n            return { key: entityType.label, value: entityType.uid };\n        });\n\n        const entityTypeMap2 : ComboDropdownOption<{isReference: boolean, value: number | string}>[] =\n          entityTypeMap.map((e) => ({ key: e.key, value: { isReference: true, value: e.value!.toString()}}));\n\n        const literalTypesMap : ComboDropdownOption<{isReference: boolean, value: number | string}>[] =\n          literalTypes.map((lit) => ({ key: lit.label, value: { isReference: false, value: lit.value } }));\n\n        if (this.props.initialDomain === undefined) {\n            this.setState({ domainOptions: entityTypeMap });\n        }\n\n        this.setState({\n            rangeOptions:  literalTypesMap.concat(entityTypeMap2)\n        });\n    }\n\n    public create() {\n\n      if(this.state.range.value === null || this.state.domain.value === null) {\n        throw new Error('Domain and range must be set');\n      }\n\n        const newPredicate = Serializer.fromJson(Predicate, {\n            label: this.state.label,\n            domain: this.state.domain.value,\n            range: this.state.range.value.value,\n            rangeIsReference: this.state.range.value.isReference\n        });\n\n        this.props.dataStore!.postItem(Predicate, AppUrls.predicate, newPredicate, {})\n            .then((result) => {\n                newPredicate.uid = result[0];\n                this.props.complete(newPredicate);\n            });\n    }\n\n    public render() {\n        return (\n        <Overlay>\n            <h2><i className='fa fa-plus' aria-hidden='true'></i> Create Property</h2>\n            <label className='small'>Name</label>\n\n            <input type='text'\n                className='gap'\n                ref={(a) =>  {\n                  if (a !== null) {\n                    a.focus();\n                  }\n                }}\n                value={this.state.label}\n                onChange={(e) => this.setState({ label: (e.target as HTMLInputElement).value })} />\n\n            <PredicateDescription\n                domain={this.state.domain}\n                range={this.state.range}\n                domainChanged={(s) => this.setState({ domain: s })}\n                rangeChanged={(s) => this.setState({ range: s })}\n                domainOptions={this.state.domainOptions}\n                rangeOptions={this.state.rangeOptions}\n                mode='editAll' />\n            <div className='modal-toolbar'>\n                <button onClick={this.props.cancel} className='pull-left'>Cancel</button>\n                <button onClick={this.create.bind(this)} className='pull-right'>Create Property</button>\n            </div>\n        </Overlay>\n        );\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/modal/CreatePredicate.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Overlay } from '../Overlay';\nimport { Record, Serializer, Source } from '@digihum/falcon-core';\nimport { AppUrls } from '../../ApiService';\n\nimport { DataController } from '../../stores/DataController';\nimport { inject, observer } from 'mobx-react';\n\nimport { ModalStore } from '../../stores/ModalStore';\n\nimport { ComboDropdown, ComboDropdownOption } from '../ComboDropdown';\n\nimport { ModalDefinition } from './ModalDefinition';\n\n\n\ninterface CreatePresetRecordProps {\n    complete: (s: any) => void;\n    cancel: () => void;\n    source: Source;\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface CreatePresetRecordState {\n}\n\n@inject('dataStore', 'modalStore')\n@observer\nexport class CreatePresetRecord extends React.Component<CreatePresetRecordProps, CreatePresetRecordState> {\n\n    private static openEntityDialog : boolean = true;\n\n    constructor() {\n        super();\n        this.state = {\n          };\n    }\n\n    public componentDidMount() {\n        if (CreatePresetRecord.openEntityDialog) {\n            CreatePresetRecord.openEntityDialog = false;\n            this.createNewEntity();\n        } else {\n            CreatePresetRecord.openEntityDialog = true;\n        }\n    }\n\n    public createNewEntity() {\n        const modalDef: ModalDefinition = {\n            name: 'entity',\n            complete: (data : number[]) => {\n\n                const isMentioned = this.props.dataStore!.dataStore.all.predicate.value.find((pred) => pred.label === 'is mentioned');\n\n                if (isMentioned === undefined) {\n                  throw new Error('Is mentioned predicate is missing, it should be loaded by default');\n                }\n\n                this.props.dataStore!.postItem(Record, AppUrls.record,\n                    Serializer.fromJson(Record, {\n                        predicate: isMentioned.uid,\n                        entity: data[0],\n                        valueType: 'source',\n                        source: this.props.source.uid,\n                        score: 3\n                    }), {})\n                .then((result) => {\n                    this.props.complete(result);\n                })\n                .catch(this.props.cancel);\n            },\n            cancel: () => {\n            },\n            settings: {}\n        };\n\n        this.props.modalStore!.addModal(modalDef);\n    }\n\n    public render() {\n        return null;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/modal/CreatePresetRecord.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Overlay } from '../Overlay';\nimport { Record, Predicate, Serializer } from '@digihum/falcon-core';\nimport { AppUrls } from '../../ApiService';\nimport {ComboDropdown, ComboDropdownOption } from '../ComboDropdown';\n\nimport { ModalDefinition } from './ModalDefinition';\n\nimport { DataController } from '../../stores/DataController';\nimport { inject, observer } from 'mobx-react';\n\nimport { ModalStore } from '../../stores/ModalStore';\n\nclass PredicateComboDropdown extends ComboDropdown<Predicate> {}\n\ninterface CreateRecordProps {\n    options: ComboDropdownOption<Predicate>[];\n    complete: (s: any) => void;\n    cancel: () => void;\n    entityUid: number;\n    entityType: number;\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface CreateRecordState {\n    comboValue: ComboDropdownOption<Predicate>;\n    searchValue: string;\n}\n\n@inject('modalStore', 'dataStore')\n@observer\nexport class CreateRecord extends React.Component<CreateRecordProps, CreateRecordState> {\n\n    constructor() {\n        super();\n        this.state = {\n            comboValue: {key: '', value: null},\n            searchValue: ''\n        };\n    }\n\n    public componentDidMount() {\n        ((this.refs['comboDropDown'] as React.Component<any, any>).refs['comboDropDownInputBox'] as HTMLElement).focus();\n    }\n\n    public createNewPredicate() {\n        const modalDef: ModalDefinition = {\n            name: 'predicate',\n            complete: (data : Predicate) => {\n                console.log('Predicate editor called complete');\n                this.setComboValue({ key: data.label, value: data === null ? null : data});\n            },\n            cancel: () => {\n                console.log('Predicate editor called cancel');\n            },\n            settings: {\n                initialName: this.state.searchValue,\n                initialDomain: this.props.entityType\n            }\n        };\n\n        this.props.modalStore!.addModal(modalDef);\n    }\n\n    public setComboValue(opt: { key: string, value: Predicate | null}) {\n\n      if (opt.value === null) {\n        throw new Error('Value cannot be null');\n      }\n\n      this.props.dataStore!.postItem(Record, AppUrls.record,\n          Serializer.fromJson(Record, {\n              predicate: opt.value.uid,\n              entity: this.props.entityUid,\n              valueType: opt.value.rangeIsReference ? 'entity' : opt.value.range,\n              score: 3,\n              source: this.props.dataStore!.defaultSource\n          }), {})\n      .then((result) => this.props.complete(result))\n      .catch(this.props.cancel);\n    }\n\n    public render() {\n        return (\n        <Overlay>\n            <h2>Create Record</h2>\n            <PredicateComboDropdown\n                ref='comboDropDown'\n                options={this.props.options}\n                typeName='predicate'\n                value={this.state.comboValue}\n                setValue={this.setComboValue.bind(this)}\n                createNewValue={this.createNewPredicate.bind(this)}\n                updateSearchString={(s) => this.setState({ searchValue: s})}\n            />\n        </Overlay>\n        );\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/modal/CreateRecord.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Overlay } from '../Overlay';\nimport { Source, Serializer } from '@digihum/falcon-core';\nimport { AppUrls } from '../../ApiService';\n\nimport { DataController } from '../../stores/DataController';\nimport { inject, observer } from 'mobx-react';\n\nimport * as mousetrap from 'mousetrap';\n\ninterface CreateSourceProps {\n    complete: (s: string) => void;\n    cancel: () => void;\n    initialValue: string;\n    dataStore?: DataController;\n}\n\ninterface CreateSourceState {\n    internalValue: string;\n}\n\n@inject('dataStore')\n@observer\nexport class CreateSource extends React.Component<CreateSourceProps, CreateSourceState> {\n\n    private keyboardShortcuts;\n\n    public static defaultProps : Partial<CreateSourceProps> = {\n       initialValue: ''\n    };\n\n    constructor() {\n        super();\n        this.state = {\n            internalValue: ''\n        };\n    }\n\n    public componentWillMount() {\n        this.setState({ internalValue: this.props.initialValue});\n    }\n\n    public createSource() {\n        this.props.dataStore!.postItem(Source, AppUrls.source,\n            Serializer.fromJson(Source, {\n                label: this.state.internalValue\n            }), {})\n        .then(this.props.complete);\n    }\n\n    public inputRef(val: HTMLElement | null) {\n        if (val !== null) {\n            val.focus();\n            this.keyboardShortcuts = new mousetrap(val);\n            this.keyboardShortcuts.bind('return', this.createSource.bind(this));\n            this.keyboardShortcuts.bind('escape', this.props.cancel);\n        } else {\n            this.keyboardShortcuts.unbind('return');\n            this.keyboardShortcuts.unbind('escape');\n        }\n    }\n\n    public render() {\n        return (\n        <Overlay>\n            <h2>Create Source</h2>\n            <label className='small'>Name</label>\n            <input type='text'\n                value={this.state.internalValue}\n                ref={this.inputRef.bind(this)}\n                onChange={(e) => this.setState({ internalValue: (e.target as HTMLInputElement).value })} />\n            <button onClick={() => this.props.cancel()} className='pull-left'>Cancel</button>\n            <button onClick={this.createSource.bind(this)} className='pull-right'>Create Source</button>\n        </Overlay>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/modal/CreateSource.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Overlay } from '../Overlay';\n\n\nimport { DataController } from '../../stores/DataController';\nimport { inject, observer } from 'mobx-react';\n\nimport * as mousetrap from 'mousetrap';\n\ninterface CreateTabSetProps {\n  dataStore?: DataController;\n  complete: (s: string) => void;\n  cancel: () => void;\n}\n\ninterface CreateEntityTypeState {\n    internalValue: string;\n}\n\n@inject('dataStore')\n@observer\nexport class CreateTabSet extends React.Component<CreateTabSetProps, CreateEntityTypeState> {\n\n    private keyboardShortcuts;\n\n    constructor() {\n        super();\n        this.state = {\n            internalValue: ''\n        };\n    }\n\n    public createTabSet() {\n      return fetch('/tabset', {\n          method: 'POST',\n          body: JSON.stringify({\n            name: this.state.internalValue,\n            tabs: this.props.dataStore!.tabs\n          }),\n          headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n          },\n          credentials: 'same-origin'\n      })\n      .then((response) => {\n          return response.json();\n      }).then(() => this.props.complete(''));\n    }\n\n    public inputRef(val: HTMLElement | null) {\n        if (val !== null) {\n            val.focus();\n            this.keyboardShortcuts = new mousetrap(val);\n            this.keyboardShortcuts.bind('return', this.createTabSet.bind(this));\n            this.keyboardShortcuts.bind('escape', this.props.cancel);\n        } else {\n            this.keyboardShortcuts.unbind('return');\n        }\n    }\n\n    public render() {\n        return (\n        <Overlay>\n            <h2>Save Tab Set</h2>\n            <label className='small'>Name</label>\n            <input type='text'\n                value={this.state.internalValue}\n                ref={this.inputRef.bind(this)}\n                onChange={(e) => this.setState({ internalValue: e.target.value })} />\n            <button onClick={() => this.props.cancel()} className='pull-left'>Cancel</button>\n            <button onClick={this.createTabSet.bind(this)} className='pull-right'>Create Tab Set</button>\n        </Overlay>\n        );\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/modal/CreateTabSet.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport * as lev from 'levenshtein';\n\nimport { Entity, EntityType, Predicate } from '@digihum/falcon-core';\nimport { NumberComboDropdown, ComboDropdownOption } from '../ComboDropdown';\nimport { noop, cloneDeep } from 'lodash';\n\nimport { AddTabButton } from '../AddTabButton';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nimport { formatDate } from '../../helper/formatDate';\n\nimport { inject, observer } from 'mobx-react';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\ninterface EntityListProps {\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n    query: any;\n}\n\nexport interface ColumnSettings {\n    predicate: number;\n    sort: 'none' | 'asc' | 'desc';\n    filterType: 'any' | 'exists' | 'contains' | 'similar';\n    invertFilter: boolean;\n    filterValue: string;\n}\n\ninterface EntityListState {\n    entities: Entity[];\n    entityTypes: EntityType[];\n    predicates: Predicate[];\n    columns: ColumnSettings[];\n    entityType: ComboDropdownOption<number> | null;\n    queryData: any;\n}\n\nconst sortIcons = {\n    'none': 'fa fa-sort',\n    'asc': 'fa fa-sort-asc',\n    'desc': 'fa fa-sort-desc'\n};\n\nconst customColumns = (predicates, columns, updateColumnParams, rotateSort) => {\n    return [0, 1, 2].map((id) => {\n\n        const comboValue = { key: '', value: null};\n\n        if (columns[id].predicate !== -1) {\n            const thisPred = predicates.find((pred) => pred.uid == columns[id].predicate);\n            if (thisPred !== undefined) {\n                comboValue.key = thisPred.label;\n            }\n            comboValue.value = columns[id].predicate;\n        }\n\n        return (\n            <td key={`col-${id}`}>\n                <div className='list-combo-header'>\n                    <div className='combo-wrapper'>\n                        <NumberComboDropdown\n                            value={comboValue}\n                            typeName='predicate'\n                            allowNew={false}\n                            setValue={(value) => updateColumnParams(id, 'p' , value === null ? null : value.value)}\n                            options={predicates.map((pred) => ({ key: pred.label, value: pred.uid.toString()}))}\n                            createNewValue={noop}\n                            additionalClasses={['compact']}\n                        />\n                    </div>\n                    <div className='order-wrapper'>\n                        <i className={sortIcons[columns[id].sort]} onClick={() => rotateSort(id)}></i>\n                    </div>\n                </div>\n            </td>\n        );\n    });\n};\n\n@inject('dataStore', 'modalStore')\n@observer\nexport class EntityList extends React.Component<EntityListProps, EntityListState> {\n\n    public static contextTypes = {\n        router: React.PropTypes.object.isRequired\n    };\n\n    constructor(props: EntityListProps) {\n        super();\n        this.state = {\n            entities: [],\n            entityTypes: [],\n            predicates: [],\n            columns: [\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' },\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' },\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' }\n            ],\n            entityType: { key: 'Any', value: 0},\n            queryData: {}\n        };\n    }\n\n    public componentDidMount() {\n      this.update(this.props);\n    }\n\n    public componentWillReceiveProps(newProps: EntityListProps) {\n      this.update(newProps);\n    }\n\n    public update(props: EntityListProps) {\n        const queryStringOptions = props.query;\n        const columns = cloneDeep(this.state.columns);\n        if (queryStringOptions !== null) {\n            for (let i = 1; i < 4; i += 1 ) {\n              columns[i - 1].predicate = queryStringOptions[`col${i}p`] || null;\n              columns[i - 1].sort = queryStringOptions[`col${i}s`] || null;\n              columns[i - 1].filterType = queryStringOptions[`col${i}f`] || '';\n              columns[i - 1].filterValue = queryStringOptions[`col${i}v`] || '';\n              columns[i - 1].invertFilter = queryStringOptions[`col${i}i`] || null;\n            }\n        }\n         this.setState({\n            columns,\n            queryData: queryStringOptions === null ? {} : queryStringOptions\n        });\n    }\n\n    public addNew() {\n        const a : ModalDefinition = {\n            name: 'entity',\n            complete: () => {\n            },\n            cancel: () => { console.log('cancel'); },\n            settings: {\n                initialName: ''\n            }\n        };\n\n        this.props.modalStore!.addModal(a);\n    }\n\n    public updateColumnParams(colId: number, key: string, value: any) {\n        this.context.router.transitionTo({\n          pathname: '/edit/entity',\n          query: Object.assign(this.state.queryData, { [`col${colId + 1}${key}`]: value })\n        });\n    }\n\n    public rotateSort(colId: number) {\n        const columns = cloneDeep(this.state.columns);\n        switch (columns[colId].sort) {\n            case 'none':\n                columns[colId].sort = 'asc';\n                break;\n            case 'asc':\n                columns[colId].sort = 'desc';\n                break;\n            case 'desc':\n                columns[colId].sort = 'none';\n        }\n        this.setState({\n            columns\n        });\n    }\n\n    public addViewTab() {\n      const tabData = {};\n\n      const mapping = [\n        { key: 'p', display: 'Predicate', mod: (data) => this.props.dataStore!.dataStore.all.predicate.value.find((pred) => pred.uid == data)!.label },\n        { key: 's', display: 'Sort', mod: (data) => data },\n        { key: 'f', display: 'filterType', mod: (data) => data },\n        { key: 'v', display: 'filterValue', mod: (data) => data },\n        { key: 'i', display: 'invertFilter', mod: (data) => data }\n      ];\n\n      for (let i = 1; i < 4; i += 1) {\n        for (let j = 0; j < mapping.length; j += 1) {\n          if (this.state.queryData[`col${i}${mapping[j].key}`] !== undefined) {\n            if (tabData[`Column ${i}`] === undefined) {\n              tabData[`Column ${i}`] = {};\n            }\n            tabData[`Column ${i}`][mapping[j].display] = mapping[j].mod(this.state.queryData[`col${i}${mapping[j].key}`]);\n          }\n        }\n      }\n\n       this.props.dataStore!.createTab('entity', Date.now(), 'view', tabData, this.props.query);\n    }\n\n    public render() {\n\n        const entities = this.props.dataStore!.dataStore.all.entity.value;\n        const predicates = this.props.dataStore!.dataStore.all.predicate.value;\n        const entityTypes = this.props.dataStore!.dataStore.all.entity_type.value;\n\n        const entityTypeOptions = entityTypes.map((entityType) => ({ key: entityType.label, value: entityType.uid}));\n\n        const tableData = entities.map((entity) => {\n            const entityType = entityTypes.find((t) => t.uid === entity.entityType);\n            const entityData = this.props.dataStore!.dataStore.records.filter((res) => res.entity === entity.uid);\n\n            return {\n                uid: entity.uid,\n                label: entity.label,\n                entityType,\n                columns: this.state.columns.map((col) => {\n                        let value = '';\n\n                        if (entityData !== undefined && col.predicate !== -1) {\n                            const predicateData = entityData\n                            .filter((record) => record.predicate == col.predicate);\n\n                            if (predicateData !== undefined) {\n                                value = predicateData.map((pred) => {\n\n                                    if (pred.valueType === 'date') {\n                                        return formatDate(pred.value);\n                                    }\n\n                                    if (pred.valueType === 'source') {\n                                        if (pred.value === null) {\n                                            return 'Not set';\n                                        }\n                                        return this.props.dataStore!.dataStore.all.source.value.find((source) => source.uid === pred.value)!.label;\n                                    }\n\n                                    if (pred.valueType === 'entity') {\n                                        if (pred.value === null) {\n                                            return 'Not set';\n                                        }\n                                        return this.props.dataStore!.dataStore.all.entity.value.find((entity) => entity.uid === pred.value)!.label;\n                                    }\n\n                                    return pred.value;\n                                }).join(', ');\n                            }\n                            return value;\n                        }\n                })\n            };\n        })\n        .filter((row) => {\n            let keepRow = true;\n            this.state.columns.forEach((col, i) => {\n                if (col.filterType === 'contains' && col.filterValue.length > 0 && col.predicate !== null) {\n                    if (row.columns[i]!.toLowerCase().indexOf(col.filterValue.toLowerCase()) === -1) {\n                        keepRow = false;\n                    }\n                }\n\n                if (col.filterType === 'exists' && col.predicate !== null) {\n                    if (row.columns[i]!.length === 0) {\n                        keepRow = false;\n                    }\n                }\n\n                if (col.filterType === 'similar' && col.predicate !== null && col.filterValue.length > 0) {\n                    if (new lev(row.columns[i], col.filterValue).distance >= col.filterValue.length + 2) {\n                        keepRow = false;\n                    }\n                }\n\n\n            });\n            return keepRow;\n        })\n        .sort((row1, row2) => {\n            let score = 0;\n            this.state.columns.forEach((col, i) => {\n                if (col.sort !== 'none' && row1.columns[i] !== row2.columns[i]) {\n                    score += (row1.columns[i] > row2.columns[i] ? 1 : -1) * (Math.pow(10, 3 - i)) * (col.sort === 'asc' ? -1 : 1);\n                }\n            });\n            return score;\n        });\n\n        return (\n        <div className='workspace-editor'>\n            <header className='editor-header entity'>\n              <div className='primary-toolbar'>\n                <div className='main-toolbar'>\n                    <h2>All Entities <i\n                            className='fa fa-plus-circle add button'\n                            title='Add new entity'\n                            aria-hidden='true'\n                            onClick={this.addNew.bind(this)}\n                    ></i></h2>\n                </div>\n                 <div className='sub-toolbar'>\n                        <i\n                            className='fa fa-folder-open-o'\n                            aria-hidden='true'\n                            onClick={this.addViewTab.bind(this)}\n                        ></i>\n                    </div>\n              </div>\n              <div className='secondary-toolbar'>\n                  <div className='tab-bar'>\n                    <div className={'entity selected'}>LIST</div>\n                  </div>\n              </div>\n            </header>\n\n            <section className='editor-body'>\n                <table className='table'>\n                    <thead>\n                        <tr>\n                            <td>#</td>\n                            <td>Label</td>\n                            <td>Type</td>\n                            { customColumns(predicates, this.state.columns, this.updateColumnParams.bind(this), this.rotateSort.bind(this))}\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td></td>\n                            <td>\n                                <NumberComboDropdown\n                                    value={this.state.entityType}\n                                    typeName='entity type'\n                                    allowNew={false}\n                                    setValue={(entityType) => this.setState({ entityType })}\n                                    options={entityTypeOptions}\n                                    createNewValue={noop}\n                                    additionalClasses={['compact']}\n                                />\n                            </td>\n\n                            {this.state.columns.map((col, id) => (\n                                <td key={`col-${id}`}>\n                                    <div className='flex-fill'>\n                                        <div>\n                                            <select value={col.filterType}\n                                                    className='padded'\n                                                    onChange={(e) => this.updateColumnParams(id, 'f', e.target.value)}>\n                                                <option value='any'>Any</option>\n                                                <option value='exists'>Exists</option>\n                                                <option value='contains'>Contains</option>\n                                                <option value='similar'>Similar</option>\n                                            </select>\n                                        </div>\n                                        <div>\n                                            <input type='text'\n                                                disabled={col.filterType === 'any' || col.filterType === 'exists'}\n                                                onChange={(e) => this.updateColumnParams(id, 'v', e.target.value)}\n                                                value={col.filterValue} />\n                                        </div>\n                                    </div>\n                                </td>\n                            ))}\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {tableData.map((row) => (\n                            <tr key={`entity-${row.uid}`}>\n                                <td>{row.uid}</td>\n                                <td>{row.label} <AddTabButton\n                                    uid={row.uid!}\n                                    tabType='entity'/></td>\n                                <td>{row.entityType ? row.entityType.label : ''}</td>\n                                {[0,1,2].map((id) => (<td key={`col-val-${id}`}>{row.columns[id]}</td>))}\n                            </tr>\n                        )\n                    )}\n                    </tbody>\n                </table>\n            </section>\n        </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/object_list/EntityList.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { EntityType } from '@digihum/falcon-core';\n\nimport { AddTabButton } from '../AddTabButton';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nimport { SearchBar } from '../SearchBar';\n\nimport { RecursiveTree } from '../RecursiveTree';\n\nimport { inject, observer } from 'mobx-react';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\nclass EntityRecursiveTree extends RecursiveTree<EntityType> {}\n\ninterface EntityTypeListProps {\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface EntityTypeListState {\n    filterFunc: (t: EntityType) => boolean;\n    mode: 'list' | 'tree';\n}\n\n@inject('dataStore', 'modalStore')\n@observer\nexport class EntityTypeList extends React.Component<EntityTypeListProps, EntityTypeListState> {\n\n    constructor() {\n        super();\n        this.state = {\n            filterFunc: () => true,\n            mode: 'list'\n        };\n    }\n\n    public addNew() {\n        const a : ModalDefinition = {\n            name: 'entity_type',\n            complete: () => {\n            },\n            cancel: () => { console.log('cancel')},\n            settings: {}\n        };\n\n        this.props.modalStore!.addModal(a);\n    }\n\n\n    public render() {\n        return (\n        <div className='workspace-editor'>\n\n            <header className='editor-header entity_type'>\n              <div className='primary-toolbar'>\n                <div className='main-toolbar'>\n                    <h2>All Entity Types <i\n                        className='fa fa-plus-circle add button'\n                        aria-hidden='true'\n                        title='Add new entity type'\n                        onClick={this.addNew.bind(this)}\n                    ></i></h2>\n                </div>\n              </div>\n               <div className='secondary-toolbar'>\n                  <div className='tab-bar'>\n                    <div className={'entity_type ' + (this.state.mode === 'list' ? 'selected' : '')}\n                      onClick={() => this.setState({ mode: 'list' })}>LIST</div>\n\n                    <div  className={'entity_type ' + (this.state.mode === 'tree' ? 'selected' : '')}\n                      onClick={() => this.setState({ mode: 'tree' })}>TREE</div>\n                  </div>\n              </div>\n            </header>\n\n            <section className='editor-body'>\n\n                <SearchBar\n                    getValue={(a: EntityType) => a.label}\n                    setFilterFunc={(f) => this.setState({ filterFunc: f })}\n                />\n\n                {this.state.mode === 'list' ? (\n                  <table className='table gap'>\n                    <thead>\n                          <tr>\n                              <td>#</td>\n                              <td>Name</td>\n                              <td>Parent</td>\n                              <td>Description</td>\n                          </tr>\n                      </thead>\n                      <tbody>\n                      {this.props.dataStore!.dataStore.all.entity_type.value.filter(this.state.filterFunc).map((entityType) => {\n\n                        if (entityType.uid === null) {\n                          throw new Error('Found entity with no id');\n                        }\n\n                          return (\n                              <tr key={`entityType-${entityType.uid}`}>\n                                  <td>{entityType.uid} <AddTabButton\n                                      uid={entityType.uid}\n                                      tabType='entity_type' /></td>\n                                  <td>{entityType.label}</td>\n                                  <td>{entityType.parent}</td>\n                                  <td>{entityType.description}</td>\n                              </tr>\n                          );}\n                      )}\n                    </tbody>\n                  </table>\n\n                ) : (<div className='tree-root'>\n                   <EntityRecursiveTree\n                    data={this.props.dataStore!.dataStore.all.entity_type.value}\n                    tabType={'entity_type'}\n                    parentId={null}\n                    dataStore={this.props.dataStore!} />\n                  </div>)}\n\n            </section>\n        </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/object_list/EntityTypeList.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Predicate, EntityType } from '@digihum/falcon-core';\n\nimport { AddTabButton } from '../AddTabButton';\n\nimport { inject, observer } from 'mobx-react';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nimport { SearchBar } from '../SearchBar';\n\n\ninterface PredicateListProps {\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface PredicateListState {\n    filterFunc: (p: Predicate) => boolean;\n}\n\ninterface ColumnSettings {\n    name: string;\n    nullable: boolean;\n\n}\n\n@inject('dataStore', 'modalStore')\n@observer\nexport class PredicateList extends React.Component<PredicateListProps, PredicateListState> {\n\n    constructor() {\n        super();\n        this.state = {\n            filterFunc: () => true\n        };\n    }\n\n    public addNew() {\n        const a : ModalDefinition = {\n            name: 'predicate',\n            complete: () => {\n            },\n            cancel: () => { console.log('cancel')},\n            settings: {\n                initialName: ''\n            }\n        };\n\n        this.props.modalStore!.addModal(a);\n    }\n\n    public render() {\n        return (\n        <div className='workspace-editor'>\n            <header className='editor-header predicate'>\n              <div className='primary-toolbar'>\n                <div className='main-toolbar'>\n                    <h2>All Properties <i\n                        className='fa fa-plus-circle add button'\n                        title='Add new property'\n                        aria-hidden='true'\n                        onClick={this.addNew.bind(this)}\n                    ></i></h2>\n                </div>\n              </div>\n               <div className='secondary-toolbar'>\n                  <div className='tab-bar'>\n                    <div className={'predicate selected'}>LIST</div>\n                  </div>\n              </div>\n            </header>\n\n            <section className='editor-body'>\n\n                <SearchBar\n                    getValue={(a: Predicate) => a.label}\n                    setFilterFunc={(f) => this.setState({ filterFunc: f })}\n                />\n\n                <table className='table gap'>\n                    <thead>\n                        <tr>\n                            <td>#</td>\n                            <td>Label</td>\n                            <td>Domain</td>\n                            <td>Range</td>\n                            <td>Uses</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {this.props.dataStore!.dataStore.all.predicate.value.filter(this.state.filterFunc).map((predicate) => {\n                        const entityType = this.props.dataStore!.dataStore.all.entity_type.value.find((t) => t.uid === predicate.domain);\n                        const rangeType = predicate.rangeIsReference ?\n                            this.props.dataStore!.dataStore.all.entity_type.value.find((t) => t.uid === predicate.range) :\n                            predicate.range;\n\n                        if (predicate.uid === null) {\n                          throw new Error('Found predicate with null uid');\n                        }\n\n                        return (\n                            <tr key={`predicate-${predicate.uid}`}>\n                                <td>{predicate.uid} <AddTabButton\n                                      uid={predicate.uid}\n                                    tabType='predicate' /></td>\n                                <td>{predicate.label}</td>\n                                <td>{entityType ? entityType.label : ''}</td>\n                                <td>{predicate.rangeIsReference ? rangeType ? (rangeType as EntityType).label : '' : rangeType}</td>\n                                <td>{predicate.uses}</td>\n                            </tr>\n                        );}\n                    )}\n                    </tbody>\n                </table>\n            </section>\n        </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/object_list/PredicateList.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { Source } from '@digihum/falcon-core';\n\nimport { AddTabButton } from '../AddTabButton';\n\nimport { inject, observer } from 'mobx-react';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nimport { SearchBar } from '../SearchBar';\n\nimport { RecursiveTree } from '../RecursiveTree';\n\nclass SourceRecursiveTree extends RecursiveTree<Source> {}\n\ninterface SourceListProps {\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface SourceListState {\n    filterFunc: (p: Source) => boolean;\n    mode: 'list' | 'tree';\n}\n\ninterface ColumnSettings {\n    name: string;\n    nullable: boolean;\n}\n\n@inject('dataStore', 'modalStore')\n@observer\nexport class SourceList extends React.Component<SourceListProps, SourceListState> {\n\n    constructor() {\n        super();\n        this.state = {\n            filterFunc: () => true,\n            mode: 'list'\n        };\n    }\n\n    public addNew() {\n        const a : ModalDefinition = {\n            name: 'source',\n            complete: () => {\n            },\n            cancel: () => { console.log('cancel')},\n            settings: {}\n        };\n\n        this.props.modalStore!.addModal(a);\n    }\n\n\n    public render() {\n\n        return (\n         <div className='workspace-editor'>\n            <header className='editor-header source'>\n              <div className='primary-toolbar'>\n                <div className='main-toolbar'>\n                    <h2>All Sources <i\n                        className='fa fa-plus-circle add button'\n                        aria-hidden='true'\n                        title='Add new source'\n                        onClick={this.addNew.bind(this)}\n                    ></i></h2>\n                </div>\n              </div>\n              <div className='secondary-toolbar'>\n                <div className='tab-bar'>\n\n                  <div className={'source ' + (this.state.mode === 'list' ? 'selected' : '')}\n                    onClick={() => this.setState({ mode: 'list' })}>LIST</div>\n\n                  <div  className={'source ' + (this.state.mode === 'tree' ? 'selected' : '')}\n                    onClick={() => this.setState({ mode: 'tree' })}>TREE</div>\n\n                </div>\n              </div>\n            </header>\n\n            <section className='editor-body'>\n\n                <SearchBar\n                    getValue={(a: Source) => a.label}\n                    setFilterFunc={(f) => this.setState({ filterFunc: f })}\n                />\n\n                {this.state.mode === 'list' ? (\n                  <table className='table gap'>\n                    <thead>\n                        <tr>\n                            <td>#</td>\n                            <td>Name</td>\n                            <td>Parent</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {this.props.dataStore!.dataStore.all.source.value.filter(this.state.filterFunc).map((source) => {\n\n                      if(source.uid === null) {\n                        throw new Error('Encountered source with null uid');\n                      }\n\n                        return (\n                            <tr key={`source-${source.uid}`}>\n                                <td>{source.uid} <AddTabButton\n                                     uid={source.uid}\n                                    tabType='source' /></td>\n                                <td>{source.label}</td>\n                                <td>{source.parent}</td>\n                            </tr>\n                        );}\n                    )}\n                    </tbody>\n                  </table>\n                ) : (\n                  <div className='tree-root'>\n                   <SourceRecursiveTree\n                    data={this.props.dataStore!.dataStore.all.source.value}\n                    tabType={'source'}\n                    parentId={null}\n                    dataStore={this.props.dataStore!} />\n                  </div>\n                )}\n\n\n            </section>\n        </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/object_list/SourceList.tsx","/**\n * @fileOverview Searchboc for sidebar\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { StringComboDropdown, ComboDropdownOption } from '../ComboDropdown';\nimport { DataController } from '../../stores/DataController';\n\nimport { AppUrls } from '../../ApiService';\n\ninterface SearchBoxProps {\n    searchString: string;\n    dataStore: DataController;\n}\n\nexport const SearchBox : React.StatelessComponent<SearchBoxProps> = (props : SearchBoxProps, context: any) => {\n\n    const entities : ComboDropdownOption<string>[] = props.dataStore!.dataStore.all.entity.value.map((entity) =>\n        ({ key: entity.label, value: `${AppUrls.entity}/${entity.uid}`}));\n\n    const entityTypes : ComboDropdownOption<string>[]  = props.dataStore!.dataStore.all.entity_type.value.map((entityType) =>\n        ({ key: entityType.label, value: `${AppUrls.entity_type}/${entityType.uid}` }));\n\n    const predicates : ComboDropdownOption<string>[]  = props.dataStore!.dataStore.all.predicate.value.map((predicate) =>\n        ({ key: predicate.label, value: `${AppUrls.predicate}/${predicate.uid}`  }));\n\n    const sources : ComboDropdownOption<string>[]  = props.dataStore!.dataStore.all.source.value.map((source) =>\n        ({ key: source.label, value: `${AppUrls.source}/${source.uid}`  }));\n\n    const all : ComboDropdownOption<string>[]  = entities.concat(entityTypes, predicates, sources);\n\n\n    return (\n        <span>\n            <div className='input-addon-formgroup'>\n                <span className='input-addon-icon'><i className='fa fa-search fa-fw'></i></span>\n                <StringComboDropdown\n                    value={{ key: '', value: null}}\n                    setValue={(val) => {\n                      if (val !== null) {\n                        context.router.transitionTo(`/edit/${val.value}`)\n                      }\n                    }}\n                    typeName='all'\n                    options={all}\n                    allowNew={false}\n                    createNewValue={() => {}}\n                />\n            </div>\n        </span>\n    );\n\n};\n\nSearchBox.contextTypes = {router: React.PropTypes.object.isRequired};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/sidebar/SearchBox.tsx","/**\n * @fileOverview Empty workspace for when nothing is open!\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\ninterface AdvancedSearchWorkspaceProps {\n}\n\nexport const AdvancedSearchWorkspace : React.StatelessComponent<AdvancedSearchWorkspaceProps> =\n    (props: AdvancedSearchWorkspaceProps) => (\n    <div className='workspace-editor'>\n        <h2>Advanced Search</h2>\n    </div>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/AdvancedSearchWorkspace.tsx","/**\n * @fileOverview Empty workspace for when nothing is open!\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nexport const EmptyWorkspace = () => (\n    <div className='workspace-editor'>\n        <h2>There is nothing here</h2>\n    </div>\n);\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/EmptyWorkspace.tsx","/**\n * @fileOverview Empty workspace for when nothing is open!\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { AppUrls } from '../../ApiService';\n\nimport { Entity, Record, Serializer } from '@digihum/falcon-core';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\n\nimport { findParentTree } from '../../helper/findParentTree';\n\n\nimport { EditableHeader } from '../fields/EditableHeader';\nimport { EditableFieldHOC } from '../fields/EditableFieldComponent';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\nimport { EntityWorkspaceCoreView } from './entity/EntityWorkspaceCoreView';\nimport { EntityWorkspaceReferenceView } from './entity/EntityWorkspaceReferenceView';\n\nimport { inject, observer } from 'mobx-react';\n\nconst HeaderEditableFieldComponent = EditableFieldHOC(EditableHeader);\n\ninterface EntityEditorProps {\n    id: number;\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface EntityEditorState {\n    tab: number;\n}\n\n// What can I do?\n// Entity Operations\n// - Delete the entity\n// - Merge the entity\n// - Split the entity\n// - Add 'same-as-ses' to the entity\n// Records\n// - Order records by type, source and date\n// - Add new records\n// - Adding a new predicate creates a new record with the\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\n//   to one of its parents. The range MUST be set.\n// Visualisations:\n// - Network graph of entity relationships\n@inject('dataStore', 'modalStore')\n@observer\nexport class EntityEditorWorkspace extends React.Component<EntityEditorProps, EntityEditorState> {\n\n    public static contextTypes = {\n        router: React.PropTypes.object.isRequired,\n        manager: React.PropTypes.object.isRequired\n    };\n\n    constructor(props : EntityEditorProps, context: any) {\n        super();\n        this.state = {\n            tab: 0\n        };\n    }\n\n    public del() {\n        this.props.dataStore!.delItem(Entity, AppUrls.entity, this.props.id)\n        .then(() => {\n          this.props.dataStore!.closeTab('entity', this.props.id);\n          this.context.router.transitionTo('/edit/notfound');\n        })\n         .catch((e) => {\n           if (e.code === 404) {\n              this.context.router.transitionTo('/edit/notfound');\n           }\n\n           if (e.code === 422) {\n\n            e.data.then((data) => {\n\n                const conflictResolutionModal : ModalDefinition = {\n                    name: 'conflict_resolution',\n                    cancel: () => {},\n                    complete: (result) => {\n                        if (result === 'addToWorkspace') {\n                            data.record.forEach((datum) => {\n                                 this.props.dataStore!.createTab('entity', datum.entity, 'item');\n                            });\n                            data.entity.forEach((datum) => {\n                                 this.props.dataStore!.createTab('entity', datum.uid, 'item');\n                            });\n                        }\n\n                        if (result === 'deleteAll') {\n                            Promise.all(\n                                data.record.map((datum) => this.props.dataStore!.delItem(Record, AppUrls.record, datum.uid))\n                            )\n                            .then(() => {\n                                this.del();\n                            });\n                        }\n                    },\n                    settings: {\n                        conflictingItems: data,\n                        message: 'Deleting Entity'\n                    }\n                };\n\n                this.props.modalStore!.addModal(conflictResolutionModal);\n            });\n           }\n        });\n    }\n\n    public createNewRecord() {\n\n        const entity = this.props.dataStore!.dataStore.tabs.entity[this.props.id].value.entity;\n\n        const entityType = this.props.dataStore!.dataStore.all.entity_type.value.find((t) => t.uid === entity.entityType);\n\n        const entityTypeParents = findParentTree(entity.entityType, this.props.dataStore!.dataStore.all.entity_type.value);\n        const predicates = this.props.dataStore!.dataStore.all.predicate\n            .value.filter((pred) => entityTypeParents.indexOf(pred.domain) !== -1);\n\n        if (entityType === undefined) {\n          throw new Error('Encountered undefined entity type!');\n        }\n\n\n        const modalDef: ModalDefinition = {\n            name: 'record',\n            complete: (data) => {\n                console.log('Records editor called complete');\n                //this.loadData(this.props);\n            },\n            cancel: () => {\n                console.log('Records editor called cancel');\n            },\n            settings: {\n                options: predicates.map((pred) => ({ key: pred.label, value: pred })),\n                entityUid: this.props.id,\n                entityType: entityType.uid\n            }\n        };\n\n        this.props.modalStore!.addModal(modalDef);\n    }\n\n    public update(data: any) {\n        this.props.dataStore!.patchItem(Entity, AppUrls.entity, this.props.id, data);\n    }\n\n    public clone() {\n\n      const entity = this.props.dataStore!.dataStore.tabs.entity[this.props.id].value.entity;\n\n      this.props.dataStore!.postItem(Entity, AppUrls.entity,\n          Serializer.fromJson(Entity, {\n              label: 'Copy of ' + entity.label,\n              entityType: entity.entityType\n          }), { clone: this.props.id }).then(([id]) => this.props.dataStore!.createTab('entity', id, 'item'));\n    }\n\n    public render() {\n\n        const entity = this.props.dataStore!.dataStore.tabs.entity[this.props.id].value.entity;\n        const potentialParents = this.props.dataStore!.dataStore.all.entity.value;\n\n        let parentName = '';\n        if (potentialParents !== null && entity.parent !== undefined) {\n            const found = potentialParents.find((par) => par.uid === entity.parent);\n            if (found !== undefined) {\n                parentName = found.label;\n            }\n        }\n\n        return (\n            <div className='workspace-editor'>\n\n                <header className='editor-header entity'>\n                  <div className='primary-toolbar'>\n                    <div className='main-toolbar'>\n                        <i className='fa fa-cube item-icon'></i>\n                        <HeaderEditableFieldComponent\n                            value={entity.label}\n                            onChange={(value) => this.update({ 'label': value })} />\n                    </div>\n\n                    <div className='sub-toolbar'>\n                        <i\n                            className='fa fa-trash delete button'\n                            aria-hidden='true'\n                            onClick={this.del.bind(this)}\n                        ></i>\n                        <i\n                            className='fa fa-clone button'\n                            aria-hidden='true'\n                            onClick={this.clone.bind(this)}\n                        ></i>\n                    </div>\n                  </div>\n                  <div className='secondary-toolbar'>\n                      <div className='tab-bar'>\n                        <div className={'entity ' + (this.state.tab === 0 ? 'selected' : '')} onClick={() => this.setState({ tab: 0 })}>CORE</div>\n                        <div className={'entity ' + (this.state.tab === 1 ? 'selected' : '')} onClick={() => this.setState({ tab: 1 })}>REFERENCED BY</div>\n                      </div>\n                  </div>\n                </header>\n\n                {this.state.tab === 0 ? (\n                  <EntityWorkspaceCoreView\n                  dataStore={this.props.dataStore}\n                  id={this.props.id}\n                 />\n                ) : (\n                  <EntityWorkspaceReferenceView\n                  dataStore={this.props.dataStore!}\n                  id={this.props.id}\n                 />\n                )}\n\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/EntityEditorWorkspace.tsx","/**\n * @fileOverview Predicate editor workspace\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { SameAsEditor } from '../fields/SameAsEditor';\nimport { AppUrls } from '../../ApiService';\n\nimport { EntityType, Serializer } from '@digihum/falcon-core';\n\nimport { AddTabButton } from '../AddTabButton';\n\nimport { EditableHeader } from '../fields/EditableHeader';\nimport { EditableFieldHOC } from '../fields/EditableFieldComponent';\nimport { EditableParagraph } from '../fields/EditableParagraph';\nimport { EditableComboDropdown } from '../fields/EditableComboDropdown';\nimport { ComboDropdownOption } from '../ComboDropdown';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nimport { inject, observer } from 'mobx-react';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\n\nconst HeaderEditableFieldComponent = EditableFieldHOC(EditableHeader);\nconst ParagraphEditableFieldComponent = EditableFieldHOC(EditableParagraph);\nconst SameAsEditableFieldComponent = EditableFieldHOC(SameAsEditor);\nconst ComboEditableFieldComponent = EditableFieldHOC(EditableComboDropdown);\n\ninterface EntityTypeWorkspaceProps {\n    id: number;\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface EntityTypeWorkspaceState {\n}\n\n@inject('dataStore', 'modalStore')\n@observer\nexport class EntityTypeWorkspace extends React.Component<EntityTypeWorkspaceProps, EntityTypeWorkspaceState> {\n\n    public static contextTypes = {\n        router: React.PropTypes.object.isRequired\n    };\n\n    constructor() {\n        super();\n        this.state = {\n        };\n    }\n\n    public update(data: any) {\n        const entityType = this.props.dataStore!.dataStore.tabs.entity_type[this.props.id].value;\n        this.props.dataStore!.patchItem(EntityType, AppUrls.entity_type, this.props.id, data)\n        .then(() => this.setState({ entityType: Object.assign({}, entityType, data)}));\n    }\n\n\n    public copy() {\n\n        const entityType = this.props.dataStore!.dataStore.tabs.entity_type[this.props.id].value;\n\n        const newEntityType = Serializer.fromJson(EntityType,\n            Object.assign({}, Serializer.toJson(entityType), { label: 'Copy of ' + entityType.label}));\n\n        this.props.dataStore!.postItem(EntityType, AppUrls.entity_type, newEntityType, {})\n            .then(([id]) => {\n                this.props.dataStore!.createTab('entity_type', id, 'item');\n        });\n    }\n\n    public del() {\n        this.props.dataStore!.delItem(EntityType, AppUrls.entity_type, this.props.id)\n        .then(() => this.context.router.transitionTo('/edit/notfound'))\n        .catch((e) => {\n           if (e.code === 404) {\n              this.context.router.transitionTo('/edit/notfound');\n           }\n\n           if (e.code === 422) {\n            e.data.then((data) => {\n\n                const conflictResolutionModal : ModalDefinition = {\n                    name: 'conflict_resolution',\n                    cancel: () => {},\n                    complete: (result) => {\n                        if (result === 'addToWorkspace') {\n                            data.entityType.forEach((datum) => {\n                                 this.props.dataStore!.createTab('entity_type', datum.uid, 'item');\n                            });\n                            data.predicate.forEach((datum) => {\n                                 this.props.dataStore!.createTab('predicate', datum.uid, 'item');\n                            });\n                            data.entity.forEach((datum) => {\n                                 this.props.dataStore!.createTab('entity', datum.uid, 'item');\n                            });\n                        }\n                    },\n                    settings: {\n                        conflictingItems: data,\n                        message: 'Deleting Entity Type'\n                    }\n                };\n\n                this.props.modalStore!.addModal(conflictResolutionModal);\n            });\n           }\n        });\n    }\n\n    public createEntity() {\n        const a : ModalDefinition = {\n            name: 'entity',\n            complete: ([id]) => {\n                 this.props.dataStore!.createTab('entity', id, 'item');\n            },\n            cancel: () => { console.log('cancel'); },\n            settings: {\n                initialName: '',\n                initialType: this.props.id\n            }\n        };\n\n        this.props.modalStore!.addModal(a);\n    }\n\n    public render() {\n\n        const entityType = this.props.dataStore!.dataStore.tabs.entity_type[this.props.id].value;\n        const potentialParents = this.props.dataStore!.dataStore.all.entity_type.value;\n\n\n        let parentName = '';\n        if (potentialParents !== null && entityType.parent !== undefined) {\n            const found = potentialParents.find((par) => par.uid === entityType.parent);\n            if (found !== undefined) {\n                parentName = found.label;\n            }\n        }\n\n        const potentialParentOptions : ComboDropdownOption<number>[] = potentialParents.map((par) => ({ key: par.label, value: par.uid}));\n\n        return (\n            <div className='workspace-editor'>\n\n                <header className='editor-header entity_type'>\n                  <div className='primary-toolbar'>\n                    <div className='main-toolbar'>\n                        <div className='bread-crumbs'>\n                            {entityType.parents.map((parent, i) => {\n\n                              const parentEntityType = this.props.dataStore!.dataStore.all.entity_type.value.find((e) => e.uid === parent)!;\n\n                              return (\n                                <span key={`breadcrumb-${parent}`}>\n                                    <span>  {parentEntityType.label} <AddTabButton\n                                        tabType='entity_type'\n                                        uid={parent} /> </span>\n                                    <i className='fa fa-angle-right'></i>\n                                </span>\n                            )})}\n                        </div>\n                        <i className='fa fa-tag item-icon'></i>\n                        <HeaderEditableFieldComponent\n                            value={entityType.label}\n                            onChange={(value) => this.update({'label': value})} />\n                    </div>\n                    <div className='sub-toolbar'>\n                        <i\n                            className='fa fa-plus add button'\n                            aria-hidden='true'\n                            onClick={this.createEntity.bind(this)}\n                        ></i>\n                         <i\n                            className='fa fa-trash delete button'\n                            aria-hidden='true'\n                            onClick={this.del.bind(this)}\n                        ></i>\n                        <i\n                            className='fa fa-clone button'\n                            aria-hidden='true'\n                            onClick={this.copy.bind(this)}\n                        ></i>\n                    </div>\n                  </div>\n                  <div className='secondary-toolbar'>\n                      <div className='tab-bar'>\n                        <div className={'entity_type selected'}>CORE</div>\n                      </div>\n                  </div>\n                </header>\n\n                <section className='editor-body'>\n\n                    <div className='edit-group'>\n\n                        <label className='small'>Parent</label>\n                        <ComboEditableFieldComponent\n                            value={entityType.parent === null ? {key: '', value: null} : {key: parentName, value: entityType.parent}}\n                            onChange={(value) => this.update({'parent': value === null ? null : value.value})}\n                             comboSettings={{\n                               options: potentialParentOptions,\n                                typeName: 'EntityType'\n                              }}\n                            />\n                        {entityType.parent !== null ? (<AddTabButton\n                            tabType='entity_type'\n                            uid={entityType.parent} />) : null}\n                    </div>\n\n                    <div className='edit-group'>\n                        <label className='small'>Description</label>\n                        <ParagraphEditableFieldComponent\n                            value={entityType.description}\n                            onChange={(value) => this.update({'description': value})} />\n                    </div>\n\n                    <div className='edit-group'>\n                        <SameAsEditableFieldComponent\n                            value={entityType.sameAs}\n                            onChange={(value) => this.update({'sameAs': value})} />\n                    </div>\n\n                    <div>\n                        <h4>Direct Children</h4>\n                        <ul>\n                        {entityType.children\n                            .map((child) => this.props.dataStore!.dataStore.all.entity_type.value.find((et) => et.uid === child))\n                            .map((childEt) => {\n                              if(childEt === undefined) {\n                                return null;\n                              }\n                              //TODO: REMOVE !\n                                return (<li key={`dc-${childEt.label}`}>{childEt.label} <AddTabButton\n                                    tabType='entity_type'\n                                    uid={childEt.uid!} /></li>\n                            );})}\n                        </ul>\n                    </div>\n                </section>\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/EntityTypeWorkspace.tsx","/**\n * @fileOverview Empty workspace for when nothing is open!\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { EntityList } from '../object_list/EntityList';\nimport { PredicateList } from '../object_list/PredicateList';\nimport { SourceList } from '../object_list/SourceList';\nimport { EntityTypeList } from '../object_list/EntityTypeList';\n\ninterface ObjectListWorkspaceProps {\n    listType: string;\n    query: any;\n}\n\nexport const ObjectListWorkspace : React.StatelessComponent<ObjectListWorkspaceProps> =\n    (props: ObjectListWorkspaceProps) => (\n    <div className='workspace-editor object-list'>\n        {(() => {\n            switch(props.listType) {\n                case 'entity':\n                    return (<EntityList query={props.query} />);\n                case 'source':\n                    return (<SourceList />);\n                case 'predicate':\n                    return (<PredicateList />);\n                case 'entity_type':\n                    return (<EntityTypeList />);\n            }\n        })()}\n    </div>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/ObjectListWorkspace.tsx","/**\n * @fileOverview Predicate editor workspace\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nimport { SameAsEditor } from '../fields/SameAsEditor';\nimport { AppUrls } from '../../ApiService';\n\nimport { Predicate, Serializer, Record } from '@digihum/falcon-core';\n\nimport { EditableHeader } from '../fields/EditableHeader';\nimport { EditableFieldHOC } from '../fields/EditableFieldComponent';\nimport { EditableParagraph } from '../fields/EditableParagraph';\nimport { PredicateDescription } from '../fields/PredicateDescription';\nimport { ComboDropdownOption } from '../ComboDropdown';\n\nimport { literalTypes } from '../../literalTypes';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nimport { inject, observer } from 'mobx-react';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\nconst HeaderEditableFieldComponent = EditableFieldHOC(EditableHeader);\nconst ParagraphEditableFieldComponent = EditableFieldHOC(EditableParagraph);\nconst SameAsEditableFieldComponent = EditableFieldHOC(SameAsEditor);\n\ninterface PredicateEditorProps {\n    id: number;\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface PredicateEditorState {\n    records: Record[];\n}\n\n// - Should state the number of times this predicate is used\n// - Widening the domain or range always okay\n// - Narrowing should check for conflicts and return them\n// - Asks 'Delete conflicting records?'\n// - Strong check (double button press or type) to confirm\n// - Changing name/description/sameAs - absolutly fine\n// - Cannot change 'readonly'\n@inject('dataStore', 'modalStore')\n@observer\nexport class PredicateEditorWorkspace extends React.Component<PredicateEditorProps, PredicateEditorState> {\n\n    public static contextTypes = {\n        router: React.PropTypes.object.isRequired\n    };\n\n    constructor() {\n        super();\n        this.state = {\n            records: []\n        };\n    }\n\n    public updatePredicate(field: string, value: string | number | null, rangeIsReferenceOverride: boolean | null = null) {\n\n        const predicate = this.props.dataStore!.dataStore.tabs.predicate[this.props.id].value;\n\n        if (predicate === null) {\n            console.warn('Tried to edit unready predicate');\n            return;\n        }\n\n        const rangeIsReferenceVal = rangeIsReferenceOverride === null\n            ? predicate.rangeIsReference : rangeIsReferenceOverride;\n\n        this.props.dataStore!.patchItem(Predicate, AppUrls.predicate, predicate.uid!,\n        {\n            [field]: value,\n            rangeIsReference: rangeIsReferenceVal\n        });\n    }\n\n    public copy() {\n\n        const predicate = this.props.dataStore!.dataStore.tabs.predicate[this.props.id].value;\n\n        const newPredicate = Serializer.fromJson(Predicate,\n            Object.assign({}, Serializer.toJson(predicate), { label: 'Copy of ' + predicate.label}));\n\n        this.props.dataStore!.postItem(Predicate, AppUrls.predicate, newPredicate, {})\n            .then(([id]) => {\n                this.props.dataStore!.createTab('predicate', id, 'item');\n        });\n    }\n\n    public del() {\n        this.props.dataStore!.delItem(Predicate, AppUrls.predicate, this.props.id)\n        .then(() => this.context.router.transitionTo('/edit/notfound'))\n        .catch((e) => {\n           if (e.code === 404) {\n              this.context.router.transitionTo('/edit/notfound');\n           }\n\n           if (e.code === 422) {\n\n            e.data.then((data) => {\n\n                const conflictResolutionModal : ModalDefinition = {\n                    name: 'conflict_resolution',\n                    cancel: () => {},\n                    complete: (result) => {\n                        if (result === 'addToWorkspace') {\n                            data.forEach((datum) => {\n                                 this.props.dataStore!.createTab('entity', datum.entity, 'item');\n                            });\n                        }\n\n                        if (result === 'deleteAll') {\n                            Promise.all(data.record.map((datum) => this.props.dataStore!.delItem(Record, AppUrls.record, datum.uid)))\n                            .then(() => {\n                                this.del();\n                            });\n                        }\n                    },\n                    settings: {\n                        conflictingItems: data,\n                        message: 'Deleting Predicate'\n                    }\n                };\n\n                this.props.modalStore!.addModal(conflictResolutionModal);\n            });\n           }\n        });\n    }\n\n    public render() {\n\n        const predicate = this.props.dataStore!.dataStore.tabs.predicate[this.props.id].value;\n        const entityTypes = this.props.dataStore!.dataStore.all.entity_type.value;\n\n        const currentDomainEntityType = entityTypes.find((t) => t.uid == predicate.domain);\n\n        let currentDomainEntityTypeName = '';\n\n        if (currentDomainEntityType !== undefined) {\n            currentDomainEntityTypeName = currentDomainEntityType.label;\n        }\n\n        const domain : ComboDropdownOption<number> = {key: currentDomainEntityTypeName, value: predicate.domain };\n\n        const range : ComboDropdownOption<{isReference: boolean, value: number | string}> = {key: '', value: {\n          isReference: predicate.rangeIsReference,\n          value: predicate.range\n        }};\n\n        if (predicate.rangeIsReference) {\n            const currentRangeEntityType =\n                entityTypes.find((t) => t.uid === predicate.range);\n\n            if (currentRangeEntityType !== undefined) {\n                range.key = currentRangeEntityType.label;\n            }\n\n        } else {\n            const literalType = literalTypes.find((t) => t.value === predicate.range);\n            if (literalType !== undefined) {\n                range.key = literalType.label;\n            }\n        }\n\n        const entityTypeOptions = entityTypes.map((t) => {\n            if (t.uid === null) {\n                throw new Error('Encountered entity type with no id!');\n            }\n            return { key: t.label, value: t.uid };\n        });\n\n        const literalTypeOptions : ComboDropdownOption<{isReference: boolean, value: number | string}>[] =\n          literalTypes.map((t) => ({ key: t.label, value: { value: t.label, isReference: false }}));\n\n        const entityTypeMap2 : ComboDropdownOption<{isReference: boolean, value: number | string}>[] =\n          entityTypeOptions.map((e) => ({ key: e.key, value: { isReference: true, value: e.value!.toString()}}));\n\n        return (\n            <div className='workspace-editor'>\n                <header className='editor-header predicate'>\n                  <div className='primary-toolbar'>\n                    <div className='main-toolbar'>\n                        <i className='fa fa-long-arrow-right item-icon'></i>\n                        <HeaderEditableFieldComponent\n                            value={predicate.label}\n                            onChange={(value) => this.updatePredicate('label', value)} />\n                    </div>\n                    <div className='sub-toolbar'>\n                        <i\n                            className='fa fa-trash delete button'\n                            aria-hidden='true'\n                            onClick={this.del.bind(this)}\n                        ></i>\n                        <i\n                            className='fa fa-clone button'\n                            aria-hidden='true'\n                            onClick={this.copy.bind(this)}\n                        ></i>\n                    </div>\n                  </div>\n                  <div className='secondary-toolbar'>\n                      <div className='tab-bar'>\n                        <div className={'predicate selected'}>CORE</div>\n                        <div style={{display:'none'}} className={'predicate'}>SAME AS</div>\n                      </div>\n                  </div>\n                </header>\n\n                <section className='editor-body'>\n\n                    <div><Link to={`/edit/entity?col1p=${this.props.id}&col1f=exists`}>Uses: {predicate.uses}</Link></div>\n\n                    <div className='edit-group'>\n                        <label className='small'>Description</label>\n                        <ParagraphEditableFieldComponent\n                            value={predicate.description!}\n                            onChange={(value) => this.updatePredicate('description', value)} />\n                    </div>\n\n                    <div className='edit-group'>\n                        <label className='small'>Typing</label>\n                        <PredicateDescription\n                            domain={domain}\n                            range={range}\n                            domainChanged={(value) => this.updatePredicate('domain', value.value!)}\n                            rangeChanged={(value) => this.updatePredicate('range', value.value!.value, value.value!.isReference)}\n                            mode='editSingle'\n                            domainOptions={entityTypeOptions}\n                            rangeOptions={literalTypeOptions.concat(entityTypeMap2)}\n                        />\n                    </div>\n\n                    <div>\n                        <SameAsEditableFieldComponent\n                            value={predicate.sameAs!}\n                            onChange={(value) => this.updatePredicate('sameAs', value)} />\n                    </div>\n                </section>\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/PredicateEditorWorkspace.tsx","/**\n * @fileOverview Predicate editor workspace\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { SameAsEditor } from '../fields/SameAsEditor';\nimport { Loading } from '../Loading';\nimport { AppUrls } from '../../ApiService';\n\nimport { Source, Serializer, Element, SourceElement, Record } from '@digihum/falcon-core';\n\nimport { EditableHeader } from '../fields/EditableHeader';\nimport { EditableFieldHOC } from '../fields/EditableFieldComponent';\nimport { EditableParagraph } from '../fields/EditableParagraph';\nimport { EditableComboDropdown } from '../fields/EditableComboDropdown';\nimport { ComboDropdownOption } from '../ComboDropdown';\n\nimport { keyBy, Dictionary, omit } from 'lodash';\n\nimport { inject, observer } from 'mobx-react';\n\nimport { DataController } from '../../stores/DataController';\nimport { ModalStore } from '../../stores/ModalStore';\n\nimport { AddTabButton } from '../AddTabButton';\n\nimport { ModalDefinition } from '../modal/ModalDefinition';\n\nconst HeaderEditableFieldComponent = EditableFieldHOC(EditableHeader);\nconst ParagraphEditableFieldComponent = EditableFieldHOC(EditableParagraph);\nconst SameAsEditableFieldComponent = EditableFieldHOC(SameAsEditor);\nconst ComboEditableFieldComponent = EditableFieldHOC(EditableComboDropdown);\n\ninterface SourceEditorProps {\n    id: number;\n    dataStore?: DataController;\n    modalStore?: ModalStore;\n}\n\ninterface SourceEditorState {\n    metaData: Dictionary<SourceElement>;\n}\n\n// - Should state the number of times this predicate is used\n// - Widening the domain or range always okay\n// - Narrowing should check for conflicts and return them\n// - Asks 'Delete conflicting records?'\n// - Strong check (double button press or type) to confirm\n// - Changing name/description/sameAs - absolutly fine\n// - Cannot change 'readonly'\n@inject('dataStore', 'modalStore')\n@observer\nexport class SourceEditorWorkspace extends React.Component<SourceEditorProps, SourceEditorState> {\n\n    public static contextTypes = {\n        router: React.PropTypes.object.isRequired\n    };\n\n    constructor() {\n        super();\n        this.state = {\n            metaData: {}\n        };\n    }\n\n    public componentDidMount() {\n        this.loadData(this.props);\n    }\n\n    public componentWillReceiveProps(newProps: SourceEditorProps)  {\n        this.loadData(newProps);\n    }\n\n\n    public loadData(props: SourceEditorProps) {\n\n        const source = props.dataStore!.dataStore.tabs.source[this.props.id].value.source;\n\n        this.setState({\n            metaData: keyBy(source.metaData, 'name')\n        });\n    }\n\n    public updateSource(field: string, value: string | number | null) {\n\n      const source = this.props.dataStore!.dataStore.tabs.source[this.props.id].value.source;\n\n      if (source.uid === null) {\n        throw new Error('source uid should not be null');\n      }\n\n      this.props.dataStore!.patchItem(Source, AppUrls.source, source.uid, { [field]: value });\n    }\n\n    public updateSourceElement(element: Element, value: string | null) {\n\n        const source = this.props.dataStore!.dataStore.tabs.source[this.props.id].value.source;\n\n\n        if (element.uid === null) {\n          throw new Error('source element uid should not be null');\n        }\n\n        const compositeKey = {\n            order: ['source', 'element'],\n            values: {\n                source: this.props.id,\n                element: element.uid\n            }\n        };\n\n        if (source.metaData[element.label] !== undefined\n            && source.metaData[element.label].values.find((a) => a.source === this.props.id) !== undefined) {\n\n            this.props.dataStore!.patchItem(SourceElement, AppUrls.source_element,\n            compositeKey,\n                Serializer.fromJson(SourceElement, {\n                    uid: compositeKey,\n                    element: source.metaData[element.label].element_uid,\n                    source: this.props.id,\n                    value\n                }));\n        } else {\n            this.props.dataStore!.postItem(SourceElement, AppUrls.source_element,\n                Serializer.fromJson(SourceElement, {\n                    uid: compositeKey,\n                    value: value\n                }), {});\n        }\n    }\n\n    public del() {\n        this.props.dataStore!.delItem(Source, AppUrls.source, this.props.id)\n        .then(() => this.context.router.transitionTo('/edit/notfound'))\n        .catch((e) => {\n           if (e.code === 404) {\n              this.context.router.transitionTo('/edit/notfound');\n           }\n\n           if (e.code === 422) {\n            e.data.then((data) => {\n\n                const conflictResolutionModal : ModalDefinition = {\n                    name: 'conflict_resolution',\n                    cancel: () => {},\n                    complete: (result) => {\n                        if (result === 'addToWorkspace') {\n                            data.source.forEach((datum) => {\n                                 this.props.dataStore!.createTab('source', datum.uid, 'item');\n                            });\n                        }\n\n                        if (result === 'deleteAll') {\n                            Promise.all(data.source.map((datum) => this.props.dataStore!.delItem(Source, AppUrls.source, datum.uid)))\n                            .then(() => {\n                                this.del();\n                            });\n                        }\n                    },\n                    settings: {\n                        conflictingItems: data,\n                        message: 'Deleting Source'\n                    }\n                };\n\n                this.props.modalStore!.addModal(conflictResolutionModal);\n            });\n           }\n        });\n    }\n\n\n    public createChild() {\n\n        const source = this.props.dataStore!.dataStore.tabs.source[this.props.id].value.source;\n\n        const newSource = Serializer.fromJson(Source,\n        omit(Object.assign({}, Serializer.toJson(source), { label: 'Child of ' + source.label, parent: this.props.id }),\n        'metaData', 'children', 'parents'));\n\n        this.props.dataStore!.postItem(Source, AppUrls.source, newSource, {})\n            .then(([id]) => {\n                this.props.dataStore!.createTab('source', id, 'item');\n        });\n    }\n\n    // create entity with 'mentioned in' already set to this source\n    public createEntity() {\n        const a : ModalDefinition = {\n            name: 'preset_record',\n            complete: ([id]) => {\n                 this.props.dataStore!.createTab('entity', id, 'item');\n            },\n            cancel: () => { },\n            settings: {\n                source: this.props.dataStore!.dataStore.tabs.source[this.props.id].value.source\n            }\n        };\n\n        this.props.modalStore!.addModal(a);\n    }\n\n    public render() {\n\n        const source = this.props.dataStore!.dataStore.tabs.source[this.props.id].value.source;\n        const potentialParents = this.props.dataStore!.dataStore.all.source.value;\n\n        let parentName = '';\n        if (potentialParents !== null && source.parent !== undefined) {\n            const found = potentialParents.find((par) => par.uid === source.parent);\n            if (found !== undefined) {\n                parentName = found.label;\n            }\n        }\n\n        return (\n            <div className='workspace-editor'>\n                <header className='editor-header source'>\n                  <div className='primary-toolbar'>\n                    <div className='main-toolbar'>\n                        <div className='bread-crumbs'>\n                            {source.parents\n                                .slice()\n                                .reverse()\n                                .map((child) => this.props.dataStore!.dataStore.all.source.value.find((et) => et.uid === child))\n                                .map((parent, i) => {\n                                  if(parent === undefined) {\n                                    throw new Error('Encountered undefined parent');\n                                  }\n                                  if(parent.uid === null) {\n                                    throw new Error('Encountered parent with null uid');\n                                  }\n                                return (\n                                <span key={`breadcrumb-${parent.uid}`}>\n                                    <span>  {parent.label} <AddTabButton\n                                        tabType='source'\n                                        uid={parent.uid} /> </span>\n                                    <i className='fa fa-angle-right'></i>\n                                </span>\n                                )})}\n                        </div>\n                        <i className='fa fa-sun-o item-icon'></i>\n                        <EditableHeader\n                            value={source.label}\n                            onChange={(value) => this.updateSource('label', value)} />\n                    </div>\n                    <div className='sub-toolbar'>\n                        <i\n                            className='fa fa-plus add button'\n                            aria-hidden='true'\n                            onClick={this.createEntity.bind(this)}\n                        ></i>\n                        <i\n                            className='fa fa-trash delete button'\n                            aria-hidden='true'\n                            onClick={() => this.del()}\n                        ></i>\n                        <i\n                            className='fa fa-arrow-circle-o-down button'\n                            aria-hidden='true'\n                            onClick={this.createChild.bind(this)}\n                        ></i>\n                    </div>\n                  </div>\n                  <div className='secondary-toolbar'>\n                      <div className='tab-bar'>\n                        <div className={'source selected'}>DUBLIN CORE</div>\n                        <div className={'source'} style={{display:'none'}}>DETAILS</div>\n                        <div className={'source'} style={{display:'none'}}>MEDIA</div>\n                      </div>\n                  </div>\n                </header>\n\n                <section className='editor-body'>\n\n                    <div className='edit-group'>\n                        <label className='small'>Parent</label>\n                        <ComboEditableFieldComponent\n                            value={{key: parentName, value: source.parent}}\n                            onChange={(value) => this.updateSource('parent', value === null ? null : value.value)}\n                                  comboSettings={{\n                                options: potentialParents.map((par) => ({ key: par.label, value: par.uid})),\n                                typeName: 'Source'\n                              }}\n                            />\n                            {source.parent !== null ? (<AddTabButton\n                                tabType='source'\n                                uid={source.parent} />) : null}\n                    </div>\n\n                    <div className='edit-group'>\n                        <SameAsEditableFieldComponent\n                            value={source.sameAs}\n                            onChange={(value) => this.updateSource('sameAs', value)} />\n                    </div>\n\n                    {this.props.dataStore!.dataStore.all.dublinCore.value.elements!.map((element) => {\n\n                        const values = source.metaData.hasOwnProperty(element.label) ?\n                            source.metaData[element.label].values : [{ source: this.props.id, value: ''}];\n                        const editableValue = values[0].source == this.props.id ? values[0].value : '';\n\n                        return (\n                            <div key={`${element.label}-edit`}>\n                                <h5 className='section-header'>{element.label} <small><a href={element.uri}>{element.uri}</a></small></h5>\n                                <p className='element-description'>{element.description}</p>\n                                <ul>\n                                    {values.map((value) => value.source != this.props.id ? (\n                                        <li key={`${element.uid}-${value.source}`}>{\n                                            this.props.dataStore!.dataStore.all.source.value.find((s) => s.uid === value.source)!.label\n                                        }: {value.value}</li>\n                                    ) : null)}\n                                </ul>\n                                <ParagraphEditableFieldComponent\n                                    value={editableValue}\n                                    onChange={(value) => this.updateSourceElement(element, value)} />\n                            </div>\n                        );\n                    })}\n\n                    <div>\n                        <h4>Direct Children</h4>\n                        <ul>\n                        {source.children\n                            .map((child) => this.props.dataStore!.dataStore.all.source.value.find((et) => et.uid === child))\n                            .map((childEt) =>\n                                (<li key={`dc-${childEt!.uid}`}>{childEt!.label} <AddTabButton\n                                    tabType='source'\n                                       uid={childEt!.uid!} /></li>\n                            ))}\n                        </ul>\n                    </div>\n                </section>\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/SourceEditorWorkspace.tsx","/**\n * @fileOverview Empty workspace for when nothing is open!\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { RecordsEditor } from '../../entity_editor/RecordsEditor';\nimport { AppUrls } from '../../../ApiService';\n\nimport { Entity } from '@digihum/falcon-core';\n\nimport { ComboDropdownOption } from '../../ComboDropdown';\n\nimport { groupBy } from 'lodash';\n\nimport { AddTabButton } from '../../AddTabButton';\n\nimport { findParentTree } from '../../../helper/findParentTree';\n\n\nimport { EditableFieldHOC } from '../../fields/EditableFieldComponent';\nimport { EditableComboDropdown } from '../../fields/EditableComboDropdown';\n\nimport { DataController } from '../../../stores/DataController';\n\nconst ComboEditableFieldComponent = EditableFieldHOC(EditableComboDropdown);\n\ninterface EntityWorkspaceCoreViewProps {\n    id: number;\n    dataStore?: DataController;\n}\n\ninterface EntityWorkspaceCoreViewState {\n    comboValue: ComboDropdownOption<number>;\n    comboSearchValue: string;\n}\n\n// What can I do?\n// Entity Operations\n// - Delete the entity\n// - Merge the entity\n// - Split the entity\n// - Add 'same-as-ses' to the entity\n// Records\n// - Order records by type, source and date\n// - Add new records\n// - Adding a new predicate creates a new record with the\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\n//   to one of its parents. The range MUST be set.\n// Visualisations:\n// - Network graph of entity relationships\nexport class EntityWorkspaceCoreView extends React.Component<EntityWorkspaceCoreViewProps, EntityWorkspaceCoreViewState> {\n\n    public static contextTypes = {\n        router: React.PropTypes.object.isRequired\n    };\n\n    constructor(props : EntityWorkspaceCoreViewProps, context: any) {\n        super();\n        this.state = {\n            comboValue: { key: 'test', value: null},\n            comboSearchValue: ''\n        };\n    }\n\n    public update(data: any) {\n        this.props.dataStore!.patchItem(Entity, AppUrls.entity, this.props.id, data);\n    }\n\n    public render() {\n\n        const entity = this.props.dataStore!.dataStore.tabs.entity[this.props.id].value.entity;\n\n        const entityType = this.props.dataStore!.dataStore.all.entity_type.value.find((t) => t.uid === entity.entityType);\n\n        if (entityType === undefined || entityType.uid === null) {\n          throw new Error('Encountered undefined entity type or entity type with null id');\n        }\n\n        const potentialParents = this.props.dataStore!.dataStore.all.entity.value;\n\n        const entityTypeParents = findParentTree(entity.entityType, this.props.dataStore!.dataStore.all.entity_type.value);\n        const predicates = this.props.dataStore!.dataStore.all.predicate\n            .value.filter((pred) => entityTypeParents.indexOf(pred.domain) !== -1);\n\n        const sources = this.props.dataStore!.dataStore.all.source.value;\n        const records = groupBy(this.props.dataStore!.dataStore.tabs.entity[this.props.id].value.records, 'predicate');\n\n\n        const options = predicates.map((pred) => ({ key: pred.label, value: pred.uid, meta: pred}));\n\n        let parentName = '';\n        if (potentialParents !== null && entity.parent !== undefined) {\n            const found = potentialParents.find((par) => par.uid === entity.parent);\n            if (found !== undefined) {\n                parentName = found.label;\n            }\n        }\n\n        return (\n          <section className='editor-body'>\n\n            <div className='flex-fill'>\n                <div className='flex-fill'>\n                    <div><label className='small'>Type</label>{entityType.label} <AddTabButton\n                        uid={entityType.uid}\n                        tabType='entity_type'\n                    /></div>\n                </div>\n\n                <div style={{ flex: 1 }}>\n                    <label className='small'>Parent</label>\n                    <ComboEditableFieldComponent\n                        value={{key: parentName, value: entity.parent}}\n                        onChange={(value) => this.update({'parent': value === null ? null : value.value})}\n                        comboSettings={{\n                            options: potentialParents.map((par) => ({ key: par.label, value: par.uid})),\n                            typeName: 'Entity'\n                        }} />\n                    {entity.parent !== null ? (<AddTabButton\n                        tabType='entity'\n                        uid={entity.parent} />) : null}\n                </div>\n            </div>\n\n            <div className='edit-group'>\n                <RecordsEditor\n                    dimension='predicates'\n                    entityExists={true}\n                    id={this.props.id}\n                    records={records}\n                    onChange={() => {}}\n                    predicates={predicates}\n                    sources={sources}\n                    entityTypeId={entityType.uid}\n                />\n            </div>\n          </section>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/entity/EntityWorkspaceCoreView.tsx","/**\n * @fileOverview Empty workspace for when nothing is open!\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { ApiService, AppUrls } from '../../../ApiService';\nimport { Entity } from '@digihum/falcon-core';\n\nimport { AddTabButton } from '../../AddTabButton';\n\nimport { DataController } from '../../../stores/DataController';\n\ninterface EntityWorkspaceReferenceViewProps {\n    id: number;\n    dataStore: DataController;\n}\n\ninterface EntityWorkspaceReferenceViewState {\n\n}\n\n// What can I do?\n// Entity Operations\n// - Delete the entity\n// - Merge the entity\n// - Split the entity\n// - Add 'same-as-ses' to the entity\n// Records\n// - Order records by type, source and date\n// - Add new records\n// - Adding a new predicate creates a new record with the\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\n//   to one of its parents. The range MUST be set.\n// Visualisations:\n// - Network graph of entity relationships\nexport class EntityWorkspaceReferenceView extends React.Component<EntityWorkspaceReferenceViewProps, EntityWorkspaceReferenceViewState> {\n\n    public static contextTypes = {\n        router: React.PropTypes.object.isRequired\n    };\n\n    constructor(props : EntityWorkspaceReferenceViewProps, context: any) {\n        super();\n        this.state = {\n            comboValue: { key: 'test', value: ''},\n            comboSearchValue: ''\n        };\n    }\n\n    public update(data: any) {\n        this.props.dataStore!.patchItem(Entity, AppUrls.entity, this.props.id, data);\n    }\n\n    public render() {\n\n        return (\n          <section className='editor-body'>\n            <h2>References</h2>\n            <table className='table'>\n              <thead>\n                <tr>\n                  <th>Entity</th>\n                  <th>Property</th>\n                </tr>\n              </thead>\n              <tbody>\n                {this.props.dataStore.dataStore.tabs.entity[this.props.id].value.referenceRecords.map((record) => {\n                  return (<tr key={`record-${record.uid}`}>\n                    <td>{this.props.dataStore.dataStore.all.entity.value.find((entity) => entity.uid === record.entity)!.label} <AddTabButton tabType={'entity'} uid={record.entity} /></td>\n                    <td>{this.props.dataStore.dataStore.all.predicate.value.find((predicate) => predicate.uid === record.predicate)!.label} <AddTabButton\n                      tabType={'predicate'}\n                      uid={record.predicate} /></td>\n                  </tr>);\n                })}\n              </tbody>\n            </table>\n          </section>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/entity/EntityWorkspaceReferenceView.tsx","/**\n * @fileOverview Unified export of workspaces\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\" />Tim Hollies</a>\n * @version 0.2.0\n */\n\nexport { EmptyWorkspace } from './EmptyWorkspace';\nexport { EntityEditorWorkspace } from './EntityEditorWorkspace';\nexport { EntityTypeWorkspace } from './EntityTypeWorkspace';\nexport { SourceEditorWorkspace } from './SourceEditorWorkspace';\nexport { PredicateEditorWorkspace } from './PredicateEditorWorkspace';\nexport { AdvancedSearchWorkspace } from './AdvancedSearchWorkspace';\nexport { ObjectListWorkspace } from './ObjectListWorkspace';\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/workspace/workspace.ts","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport { FalconItem, Entity, Record, Source, Predicate, EntityType, SourceElement, ElementSet } from '@digihum/falcon-core';\nimport { ApiService, AppUrls } from '../ApiService';\nimport { DataStore, emptyDataStore } from './DataStore';\nimport { Tab } from '../components/Sidebar';\n\nimport { arrayMove } from 'react-sortable-hoc';\n\nimport { TrackedFalconItem, CompositeKey } from '@digihum/falcon-core';\n\nimport { observable, action } from 'mobx';\n\n\nimport { cloneDeep, find, groupBy, findIndex, isNaN } from 'lodash';\n\nimport * as moment from 'moment';\n\nexport class DataController implements ApiService {\n\n  @observable public dataStore: DataStore;\n  @observable public tabs: Tab[];\n  @observable public defaultSource: null | number;\n\n  private readonly api: ApiService;\n\n  private entitySearchColumns: string[];\n\n  public constructor(api: ApiService) {\n\n    this.api = api;\n\n    this.dataStore = cloneDeep(emptyDataStore);\n\n    this.tabs = [];\n\n    if (typeof window !== 'undefined') {\n      const tabString = window.localStorage.getItem('open_tabs');\n      if (tabString !== null) {\n        this.tabs = JSON.parse(tabString);\n      }\n    }\n  }\n\n  // checks that the page exists and adds it to tabs if necessery\n  @action public enterPage(workspace: string, uid: number, other: any) : boolean {\n\n    if (!isNaN(uid)) {\n      if (find(this.tabs, (tab) => tab.tabType === workspace && tab.uid == uid) === undefined) {\n        this.tabs = this.tabs.concat([{ tabType: workspace, uid: uid, tabClass: 'item'}]);\n        return false;\n      }\n    }\n\n    if (other !== null) {\n      this.entitySearchColumns = [other['col1p'], other['col2p'], other['col3p']].filter((a) => a !== undefined);\n    } else {\n      this.entitySearchColumns = [];\n    }\n\n    return true;\n  }\n\n  private async loadTabData(tab: Tab) : Promise<any> {\n\n    if (tab.tabClass !== 'item') {\n      return new Entity();\n    }\n\n    switch (tab.tabType) {\n        case 'entity':\n            return Promise.all([\n                this.api.getItem(Entity, AppUrls.entity, tab.uid),\n                this.api.getCollection(Record, AppUrls.record, { entity: tab.uid }),\n                this.api.getCollection(Record, AppUrls.record, { value_type: 'entity', value_entity: tab.uid })\n            ]).then(([entity, records, referenceRecords]) => ({ entity, records, referenceRecords }));\n        case 'predicate':\n            return this.api.getItem(Predicate, AppUrls.predicate, tab.uid);\n        case 'entity_type':\n            return this.api.getItem(EntityType, AppUrls.entity_type, tab.uid);\n        case 'source':\n            return Promise.all([\n                this.api.getItem(Source, AppUrls.source, tab.uid),\n                this.api.getCollection(SourceElement, AppUrls.source_element, { source: tab.uid })\n            ]).then(([source, source_element]) => ({ source, source_element }));\n        default:\n            throw new Error('Unexpected tab type requested');\n    }\n  }\n\n  /*\n  * Loads required data from the server\n  * @return Promise returning a boolean indicating whether the operation was succesful\n  */\n  @action public async update() : Promise<boolean> {\n\n    // LOAD TABS\n    const groupedTabs = groupBy(this.tabs, 'tabType');\n\n    if (find(this.tabs, (tab: Tab) => tab.tabType === 'source' && tab.uid === this.defaultSource) === undefined) {\n      this.defaultSource = null;\n    }\n\n    const tabPromise = Promise.all(\n      Object.keys(groupedTabs).map((tabType) =>\n        Promise.all(groupedTabs[tabType].map((tab) =>\n          this.loadTabData(tab)\n          .then((value) => {\n            return { [parseInt(tab.uid)]: { value, lastUpdate: moment() }};\n          })\n          .catch((err) => {\n            this.tabs = this.tabs.filter((tab2: Tab) => tab2 !== tab);\n            this.saveTabs();\n            // propogate the error\n            throw err;\n          })\n        ))\n        .then((tabData) => {\n          return { [tabType]: Object.assign({}, ...tabData) };\n        })\n      )\n    );\n\n    // load lists of data commonly required by views\n    const allPromise = Promise.all([\n        this.api.getCollection(Predicate, AppUrls.predicate, {}),\n        this.api.getCollection(Source, AppUrls.source, {}),\n        this.api.getCollection(Entity, AppUrls.entity, {}),\n        this.api.getCollection(EntityType, AppUrls.entity_type, {}),\n        this.api.getItem(ElementSet, AppUrls.element_set, 1)\n    ])\n    .then(([predicates, sources, entities, entityType, dublinCore]) => {\n\n        return {\n            predicate: { value: predicates, lastUpdate: moment() },\n            source: { value: sources, lastUpdate: moment() },\n            entity: { value: entities, lastUpdate: moment() },\n            entity_type: { value: entityType, lastUpdate: moment() },\n            dublinCore: { value: dublinCore, lastUpdate: moment() }\n        };\n    });\n\n    return Promise.all([tabPromise, allPromise])\n    .then(action(async ([tabsArray, all]) => {\n        const tabs = Object.assign({}, ...tabsArray);\n        this.dataStore.tabs = tabs;\n        this.dataStore.all = all;\n\n        if (this.entitySearchColumns.length > 0) {\n          this.dataStore.records = await this.getCollection(Record, AppUrls.record, {\n            predicate: this.entitySearchColumns,\n              entity: this.dataStore.all.entity.value.map((entity) => entity.uid)\n          });\n        }\n\n        return true;\n    }));\n  }\n\n  /*\n  *\n  *    API\n  *\n  */\n\n  public getItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey) : Promise<T> {\n    return this.api.getItem.apply(this.api, arguments);\n  }\n\n  public getCollection<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, params: any) : Promise<T[]> {\n    return this.api.getCollection.apply(this.api, arguments);\n  }\n\n  public postItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, data: T, params: any) : Promise<number[]> {\n    return this.api.postItem.apply(this.api, arguments).then((result) => this.update().then(() => result));\n  }\n\n  public putItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey, data: T) : Promise<void> {\n    return this.api.putItem.apply(this.api, arguments).then((result) => this.update().then(() => result));\n  }\n\n  //TODO: patch item takes a subset of an objects properties. This is currently being looked at in TS in the\n  //context of the 'setState' function in react\n  public patchItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey, data : any) : Promise<void> {\n    return this.api.patchItem.apply(this.api, arguments).then((result) => this.update().then(() => result));\n  }\n\n  public delItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey) : Promise<void> {\n    return this.api.delItem.apply(this.api, arguments).then((result) => this.update().then(() => result));\n  }\n\n  public query(graphQLQuery: string) : Promise<any> {\n    return this.api.query.apply(this.api, arguments);\n  }\n\n  public getStats() : Promise<any> {\n    return this.api.getStats.apply(this.api, arguments);\n  }\n\n  /*\n  *\n  *    TABS\n  *\n  */\n\n  @action public createTab(tabType: string, uid: number, tabClass: string, data?: any, query?: { [s: string]: string }) {\n    // don't add a tab if it already exists\n    if (find(this.tabs, (tab) => tab.tabType === tabType && tab.uid == uid) === undefined) {\n      this.tabs.unshift({ tabType, uid, data, tabClass, query });\n      this.saveTabs();\n      this.update();\n    }\n  }\n\n  @action public updateTab(tabType: string, uid: number, data: any) {\n    const tabs = cloneDeep(this.tabs);\n    const tabId = findIndex(tabs, (tab) => tab.tabType === tabType && tab.uid === uid);\n    if (tabId !== -1) {\n      tabs[tabId].data = data;\n      this.tabs = tabs;\n    }\n  }\n\n  @action public closeTab(tabType: string, uid: number) {\n    this.tabs = this.tabs.filter((a) => a.tabType !== tabType || a.uid !== uid);\n    this.saveTabs();\n    this.update();\n  }\n\n  @action public saveTabs() {\n    const tabsString = JSON.stringify(this.tabs);\n    window.localStorage.setItem('open_tabs', tabsString);\n  }\n\n  @action public clearAllTabs() {\n    this.tabs = [];\n    this.saveTabs();\n    this.update();\n  }\n\n  @action public reorderTabs(data: {newIndex: number, oldIndex: number}) {\n    this.tabs = arrayMove(this.tabs, data.oldIndex, data.newIndex);\n    this.saveTabs();\n  }\n\n  // thinking\n  public entity(uid: number) : Entity {\n    if (!(uid in this.dataStore.tabs.entity)) {\n      throw new Error('Not loaded!');\n    }\n    return this.dataStore.tabs.entity[uid].value.value.entity;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/stores/DataController.ts","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport { Predicate, EntityType, Entity, Record, Source, SourceElement, ElementSet } from '@digihum/falcon-core';\nimport * as moment from 'moment';\n\nexport interface DataStoreEntry<T> {\n    value: T;\n    lastUpdate: moment.Moment | null;\n}\n\ninterface TabMap<T> {\n  [uid: number]: DataStoreEntry<T>;\n}\n\nexport interface DataStore {\n  all: {\n    entity: DataStoreEntry<Entity[]>;\n    entity_type: DataStoreEntry<EntityType[]>;\n    predicate: DataStoreEntry<Predicate[]>;\n    source: DataStoreEntry<Source[]>;\n    dublinCore: DataStoreEntry<ElementSet>;\n  };\n\n  records: Record[];\n\n  tabs: {\n\n    entity: TabMap<{\n      entity: Entity;\n      records: Record[];\n      referenceRecords: Record[];\n    }>;\n\n    entity_type: TabMap<EntityType>;\n\n    predicate: TabMap<Predicate>;\n\n    source: TabMap<{\n      source: Source;\n      elements: SourceElement;\n    }>;\n\n  };\n\n  lockedSource: number | null;\n}\n\nexport const emptyDataStore : DataStore = {\n\n  all: {\n    entity: { value: [], lastUpdate: null },\n    entity_type: { value: [], lastUpdate: null },\n    predicate: { value: [], lastUpdate: null },\n    source: { value: [], lastUpdate: null },\n    dublinCore: { value: new ElementSet(), lastUpdate: null }\n  },\n\n  records: [],\n\n  tabs: {\n    entity: {},\n    entity_type: {},\n    predicate: {},\n    source: {}\n  },\n\n  lockedSource: null\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/stores/DataStore.ts","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { ModalDefinition } from '../components/modal/ModalDefinition';\nimport { tail } from 'lodash';\n\nimport { CreatePredicate } from '../components/modal/CreatePredicate';\nimport { CreateRecord } from '../components/modal/CreateRecord';\nimport { CreatePresetRecord } from '../components/modal/CreatePresetRecord';\nimport { CreateSource } from '../components/modal/CreateSource';\nimport { CreateEntity } from '../components/modal/CreateEntity';\nimport { CreateEntityType } from '../components/modal/CreateEntityType';\nimport { ConflictResolution } from '../components/modal/ConflictResolution';\nimport { CreateTabSet } from '../components/modal/CreateTabSet';\n\nimport { observable, action, computed } from 'mobx';\n\nexport class ModalStore {\n\n  @observable private  modalQueue: ModalDefinition[];\n\n  public constructor() {\n    this.modalQueue = [];\n  }\n\n  // might be @computed?\n  @computed public get currentModal() : JSX.Element | null {\n    if (this.modalQueue.length === 0) {\n        return null;\n    }\n\n    const sharedProps = {\n        complete: this.modalComplete.bind(this),\n        cancel: this.modalCancel.bind(this)\n    };\n\n    switch (this.modalQueue[0].name) {\n        case 'predicate':\n            return (<CreatePredicate {...sharedProps}\n              initialName={this.modalQueue[0].settings['initialName']}\n              initialDomain={this.modalQueue[0].settings['initialDomain']} />);\n\n        case 'record':\n            return (<CreateRecord {...sharedProps}\n              entityType={this.modalQueue[0].settings['entityType']}\n              entityUid={this.modalQueue[0].settings['entityUid']}\n              options={this.modalQueue[0].settings['options']} />);\n\n        case 'preset_record':\n            return (<CreatePresetRecord {...sharedProps} source={this.modalQueue[0].settings['source']}/>);\n\n        case 'source':\n            return (<CreateSource {...sharedProps} initialValue={this.modalQueue[0].settings['initialName']} />);\n\n        case 'entity':\n            return (<CreateEntity {...sharedProps} {...this.modalQueue[0].settings}/>);\n\n        case 'entity_type':\n            return (<CreateEntityType {...sharedProps} {...this.modalQueue[0].settings}/>);\n\n        case 'conflict_resolution':\n            return (<ConflictResolution {...sharedProps}\n              conflictingItems={this.modalQueue[0].settings['conflictingItems']}\n              message={this.modalQueue[0].settings['message']}/>);\n\n        case 'createTabSet':\n            return (<CreateTabSet {...sharedProps} />);\n    }\n\n    return null;\n  }\n\n  @action public addModal(def: ModalDefinition) {\n    this.modalQueue.unshift(def);\n  }\n\n  @action public modalComplete(data: any) {\n    if (this.modalQueue.length === 0) {\n        throw new Error('Attempted to complete non-existent modal');\n    }\n    this.modalQueue[0].complete(data);\n    if (this.modalQueue.length > 0) {\n        this.modalQueue = tail(this.modalQueue);\n    }\n  }\n\n  @action public modalCancel() {\n    if (this.modalQueue.length === 0) {\n        throw new Error('Attempted to cancel non-existent modal');\n    }\n    this.modalQueue[0].cancel();\n    this.modalQueue = [];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/stores/ModalStore.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { GeneralStatistics } from '../stats/GeneralStatistics';\nimport { StatsGrid } from '../stats/StatsGrid';\n\ninterface AdminProps {\n  stats: GeneralStatistics | null;\n  tabsets: any[];\n}\n\nconst setTabList = (data: any, router: any) => {\n  window.localStorage.setItem('open_tabs', JSON.stringify(data));\n  router.transitionTo('/edit/empty');\n};\n\nconst deleteTabSet = (id: number) => {\n  fetch('/tabset/' + id, {\n    method: 'DELETE',\n    credentials: 'same-origin'\n  });\n};\n\nexport const Admin : React.StatelessComponent<AdminProps> = (props : AdminProps, context: any) => (\n    <div className='page'>\n        <section>\n            <h1>Welcome to the admin pages</h1>\n            <ul className='links-list'>\n                <li><Link to='/users'><i className='fa fa-users'></i> Manage Users</Link></li>\n                <li><Link to='/app'><i className='fa fa-download'></i> Download app</Link></li>\n                <li><a href='/snapshot'><i className='fa fa-cloud-download'></i> Download database snapshot</a></li>\n                <li><Link to='/upload'><i className='fa fa-cloud-upload'></i> Upload database file</Link></li>\n            </ul>\n        </section>\n        <section>\n          <h2>Saved Tab Sets</h2>\n          <ul className='links-list'>\n          { props.tabsets.map((tabset) => {\n            return (<li key={`tabset-${tabset.uid}`}>\n              <span className='a'>\n                <span onClick={() => setTabList(tabset.tabs, context.router)}>{tabset.name}</span>\n                <span><i className='fa fa-times' onClick={() => deleteTabSet(tabset.uid)}></i></span>\n              </span>\n            </li>);\n          })}\n          </ul>\n        </section>\n        {props.stats !== null ? (\n          <StatsGrid stats={props.stats} />\n        ) : null}\n     </div>\n);\n\nAdmin.contextTypes = {\n  router: React.PropTypes.object.isRequired\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/views/Admin.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\ninterface SearchBarProps {\n    setFilterFunc: (f: (a : any) => boolean) => void;\n    getValue: (a: any) => string;\n}\n\nexport const SearchBar : React.StatelessComponent<SearchBarProps>\n    = (props: SearchBarProps) => {\n\n    const filterFunc = (s: string) => {\n        return (a: any) => {\n            if (s.length === 0) {\n                return true;\n            }\n            return props.getValue(a).toLowerCase().indexOf(s.toLowerCase()) !== -1;\n        };\n    };\n\n    return (\n        <div>\n            <div className='input-addon-formgroup'>\n                <span className='input-addon-icon'><i className='fa fa-search fa-fw'></i></span>\n                <input type='text'\n                    className='form-control with-addon'\n                    onChange={(e) => props.setFilterFunc(filterFunc((e.target as HTMLInputElement).value))}/>\n            </div>\n\n        </div>\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/SearchBar.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nexport const AppDownload = (props) => (\n    <div className='page'>\n        <section>\n            <h1>App Download</h1>\n            <p>Use this VRE without an internet connection! Simply download the app for your platform and then\n            download a database snapshot from the main page. When you are ready, use the upload tool to merge\n            your offline copy with the server.</p>\n            <ul className='links-list'>\n              <li><a href='https://github.com/digihum/imperial-entanglements-app/raw/master/bin/imperial-entanglements%20Setup%200.1.1.exe'><i className='fa fa-windows'></i> Windows</a></li>\n              <li><a href='https://github.com/digihum/imperial-entanglements-app/raw/master/bin/mac/imperial-entanglements-0.1.1.dmg'><i className='fa fa-apple'></i> Mac</a></li>\n              <li><a href='https://github.com/digihum/imperial-entanglements-app/raw/master/bin/imperial-entanglements-0.1.1-x86_64.AppImage'><i className='fa fa-linux'></i> Linux</a></li>\n            </ul>\n        </section>\n    </div>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/views/AppDownload.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nexport const DatabaseUpload = (props) => (\n    <div className='page'>\n        <section>\n            <h1>This is the database upload page</h1>\n            <input type='file' id='input' accept='.sqlite' />\n            <button onClick={() => { alert('Work in process')}}>Upload</button>\n        </section>\n    </div>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/views/DatabaseUpload.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nimport { ApiService } from '../ApiService';\n\nimport { Sidebar, Tab } from '../components/Sidebar';\nimport { Workspace } from '../components/Workspace';\nimport { Toast } from '../components/Toast';\n\nimport { find, tail, cloneDeep, findIndex } from 'lodash';\n\nimport { DataController } from '../stores/DataController';\nimport { ModalStore } from '../stores/ModalStore';\n\nimport { SortableContainer, arrayMove } from 'react-sortable-hoc';\n\nimport DevTools from 'mobx-react-devtools';\n\nimport { observable } from 'mobx';\nimport { Provider, observer, inject } from 'mobx-react';\n\ninterface ExpectedParams {\n    id: string;\n}\n\ninterface EntityEditorProps {\n    api: ApiService;\n    params: ExpectedParams;\n    workspace: string;\n    location: { pathname: string, search: string, query: any  };\n    pathname: string;\n}\n\ninterface EntityEditorState {\n\n    dataController: DataController;\n    modalStore: ModalStore;\n\n    loading: boolean;\n    loadingWheel: boolean;\n\n    id: number;\n    list: boolean;\n\n    splitWorkspace: boolean;\n}\n\nconst ObjectEditorCore = SortableContainer((props: {\n  id: number,\n  workspace: string,\n  list: boolean,\n  loadingWheel: boolean,\n  splitWorkspace: boolean,\n  toggleSplitWorkspace: () => void,\n  location: { pathname: string, search: string, query: any }\n}) => {\n  return (\n    <span className='flex-fill'>\n      <Sidebar\n        list={props.list}\n        id={props.id}\n        workspace={props.workspace}\n    />\n\n    <Workspace\n      workspace={props.workspace}\n      id={props.id}\n      loading={props.loadingWheel}\n      location={props.location}\n      list={props.list} />\n\n    {props.splitWorkspace ? (\n       <Workspace\n        workspace={props.workspace}\n        id={props.id}\n        loading={props.loadingWheel}\n        location={props.location}\n        list={props.list} />\n    ) : null}\n\n    <div style={{display:'none'}} className='split-workspace-button-container'\n        onClick={props.toggleSplitWorkspace}>\n      {props.splitWorkspace ? (\n        <i className='fa fa-times' title='split'></i>\n      ) : (\n        <i className='fa fa-columns' title='split'></i>\n      )}\n    </div>\n  </span>\n  );\n});\n\nconst ModalWrapper = inject('modalStore')(observer((props: { modalStore?: ModalStore }) => (<span>{ props.modalStore!.currentModal }</span>)));\n\nexport class ObjectEditor extends React.Component<EntityEditorProps, EntityEditorState> {\n\n    public static contextTypes = {\n        router: React.PropTypes.object.isRequired\n    };\n\n    constructor(props: EntityEditorProps, context: any) {\n        super();\n\n        this.state = {\n            dataController: new DataController(props.api),\n            modalStore: new ModalStore(),\n            loadingWheel: true,\n            loading: true,\n            id: NaN,\n            list: false,\n            splitWorkspace: false\n        };\n    }\n\n    public componentDidMount() {\n        this.reload(this.props, false, true);\n    }\n\n    public componentWillUnmount() {\n        this.state.dataController.saveTabs();\n    }\n\n    public componentWillReceiveProps(props: EntityEditorProps) {\n        this.reload(props);\n    }\n\n    public reload(props: EntityEditorProps, force: boolean = false, initialLoad : boolean = false) {\n\n      const oldId = parseInt(this.props.location.pathname.substr(this.props.pathname.length + 1));\n      const newId = parseInt(props.location.pathname.substr(props.pathname.length + 1));\n\n      const workspaceChanged = props.workspace !== this.props.workspace;\n      const idChanged = isNaN(oldId) ? !isNaN(newId) : isNaN(newId) ? true : oldId !== newId;\n      const queryChanged = props.location.search !== this.props.location.search;\n\n      const newWorkspace = props.workspace;\n\n      // if there is not a tab for the current URL - create it\n      // if the url is invalid, relocate to /edit/notfound\n      if (['entity', 'source', 'predicate', 'entity_type', 'notfound'].indexOf(newWorkspace) === -1) {\n        this.context.router.transitionTo('/edit/notfound');\n      }\n\n      const alreadyLoaded = newWorkspace === 'notfound' || this.state.dataController.enterPage(newWorkspace, newId, this.props.location.query);\n\n      if (!initialLoad && this.state.loading && !force) {\n        this.setState({\n          id: newId,\n          list: props.location.pathname.substr(props.pathname.length + 1).length === 0\n        });\n      } else {\n        this.setState({\n          id: newId,\n          list: props.location.pathname.substr(props.pathname.length + 1).length === 0,\n          loading: true,\n          loadingWheel: initialLoad || !alreadyLoaded\n        }, () => {\n\n          this.state.dataController.update()\n          .then((dataStore) => {\n            this.setState({\n              loading: false,\n              loadingWheel: false\n            });\n          }).catch(() => {\n            this.context.router.transitionTo('/edit/notfound');\n          });\n        });\n      }\n    }\n\n    public render() {\n        return (\n          <Provider dataStore={this.state.dataController} modalStore={this.state.modalStore}>\n            <section id='entity-editor' className='flex-fill'>\n              {process.env.NODE_ENV === 'dev' ? (<DevTools />) : null}\n                <span className={'header-colour ' + this.props.workspace}></span>\n                    <span className='flex-fill'>\n                      <ObjectEditorCore\n                        id={this.state.id}\n                        workspace={this.props.workspace}\n                        useDragHandle={true}\n                        loadingWheel={this.state.loadingWheel}\n                        splitWorkspace={this.state.splitWorkspace}\n                        helperClass={'card-being-dragged'}\n                        toggleSplitWorkspace={() => this.setState({ splitWorkspace: !this.state.splitWorkspace})}\n                        list={this.state.list}\n                        location={this.props.location}\n                        onSortEnd={(change) => this.state.dataController.reorderTabs(change)}\n                       />\n\n                    <Toast />\n\n                    <ModalWrapper />\n                </span>\n                <span className={'header-colour ' + this.props.workspace}></span>\n            </section>\n            </Provider>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/views/ObjectEditor.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\n\nexport const RouteNotFound = (props: { url: string }) => (\n    <section>\n        <h1>The page at {props.url} does not exist :(</h1>\n    </section>\n) ;\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/views/RouteNotFound.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nexport const User = (props) => (\n    <div className='page'>\n        <section>\n            <h1>This is the user page</h1>\n        </section>\n    </div>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/views/User.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nexport const UserManagement = (props) => (\n    <div className='page'>\n        <section>\n            <h1>This is the user management page</h1>\n        </section>\n    </div>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/views/UserManagement.tsx","/**\n * @fileOverview Abstract interface for sources\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport { render } from 'react-dom';\nimport { createElement } from 'react';\nimport { FalconApp } from '../common/FalconApp';\nimport { ClientApiService } from './ClientApiService';\nimport { BrowserRouter } from 'react-router';\n\ndocument.addEventListener('DOMContentLoaded', (event) => {\n    render(createElement(FalconApp, {\n        api: new ClientApiService(),\n        router: BrowserRouter,\n        routerSettings: {},\n        environment: 'website',\n        connected: true\n    }), <Element>document.getElementById('main'));\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app.frontend.ts","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { EditableSubfieldProps } from './EditableFieldComponent';\n\nexport const EditableHeader : React.StatelessComponent<EditableSubfieldProps<string>>\n    = (props: EditableSubfieldProps<string>) => {\n         if (!props.edit || props.value == null) {\n            return (\n                <h2>\n                    {props.value}\n                    <sup>\n                        <i className='fa fa-pencil-square-o'\n                            title='Edit'\n                            aria-hidden='true'\n                            onClick={props.setEdit}>\n                        </i>\n                    </sup>\n                </h2>\n            );\n        } else {\n            return (\n                <span>\n                    <input type='text'\n                        value={props.value}\n                        className='text-edit-header'\n                        onChange={(e) => props.onChange!((e.target as HTMLInputElement).value)} />\n                    <button onClick={props.acceptChanges}><i className='fa fa-check' aria-hidden='true'></i></button>\n                    <button onClick={props.cancelChanges}><i className='fa fa-times' aria-hidden='true'></i></button>\n                </span>\n            );\n        }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/fields/EditableHeader.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport { TrackedFalconItem, CompositeKey } from '@digihum/falcon-core';\n\nimport { itemTypes } from './itemTypes';\n\nexport const AppUrls : {\n    element_set: string,\n    record: string,\n    entity: string,\n    entity_type: string,\n    predicate: string,\n    source: string,\n    source_element: string,\n    element: string\n} = {\n    element_set: itemTypes.element_set.machineName,\n    record:  itemTypes.record.machineName,\n    entity:  itemTypes.entity.machineName,\n    entity_type:  itemTypes.entity_type.machineName,\n    predicate:  itemTypes.predicate.machineName,\n    source:  itemTypes.source.machineName,\n    source_element:  itemTypes.source_element.machineName,\n    element: 'element'\n};\n\nexport interface ApiService {\n    getItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey) : Promise<T>;\n    getCollection<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, params: any) : Promise<T[]>;\n\n    postItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, data: T, params: any) : Promise<number[]>;\n    putItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey, data: T) : Promise<void>;\n\n    //TODO: patch item takes a subset of an objects properties. This is currently being looked at in TS in the\n    //context of the 'setState' function in react\n    patchItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey, data : any) : Promise<void>;\n    delItem<T extends TrackedFalconItem>(obj: { new(): T; }, baseUrl : string, uid: number | CompositeKey) : Promise<void>;\n\n    query(graphQLQuery: string) : Promise<any>;\n    getStats() : Promise<any>;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/ApiService.ts","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { EditableSubfieldProps } from '../fields/EditableFieldComponent';\nimport { NumberComboDropdown, ComboDropdownOption } from '../ComboDropdown';\n\ninterface EditableComboDropdownProps extends EditableSubfieldProps<ComboDropdownOption<number>> {\n    comboSettings: {\n      options: ComboDropdownOption<number>[];\n      typeName: string;\n    };\n}\n\nexport function EditableComboDropdown(props: EditableComboDropdownProps) {\n\n    if (props.edit) {\n        return (<div>\n            <NumberComboDropdown {...props.comboSettings}\n                value={props.value!}\n                setValue={props.onChange!}\n                allowNew={false}\n                createNewValue={() => {}} />\n            <button onClick={props.acceptChanges}><i className='fa fa-check' aria-hidden='true'></i></button>\n            <button onClick={props.cancelChanges}><i className='fa fa-times' aria-hidden='true'></i></button>\n        </div>\n        );\n    } else {\n        return (\n            <div>\n                {props.value !== null && props.value!.key.length > 0 ? props.value!.key\n                : (\n                    <em>No value</em>\n                )}\n                <sup>\n                    <i className='fa fa-pencil-square-o'\n                        title='Edit'\n                        aria-hidden='true'\n                        onClick={props.setEdit}>\n                    </i>\n                </sup>\n            </div>\n        );\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/fields/EditableComboDropdown.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { EditableSubfieldProps } from './EditableFieldComponent';\n\nimport * as mousetrap from 'mousetrap';\n\nexport const EditableParagraph : React.StatelessComponent<EditableSubfieldProps<string>> =\n    (props: EditableSubfieldProps<string>) => {\n\n    let keyBoardShortcuts;\n\n    const bindKeyboard = (val) => {\n        if (val !== null) {\n            val.focus();\n            keyBoardShortcuts = new mousetrap(val);\n            keyBoardShortcuts.bind('ctrl+return', props.acceptChanges);\n            keyBoardShortcuts.bind('escape', props.cancelChanges);\n        } else {\n            keyBoardShortcuts.unbind('ctrl+return');\n        }\n    };\n\n    if (!props.edit) {\n        return (\n            <div onClick={props.setEdit} className='editable-paragraph-box'>\n                <p>\n                    {props.value === null || props.value!.length > 0 ? props.value\n                    : (\n                        <em>No value</em>\n                    )}\n                    <sup>\n                        <i className='fa fa-pencil-square-o'\n                            title='Edit'\n                            aria-hidden='true'\n                            >\n                        </i>\n                    </sup>\n                </p>\n            </div>\n        );\n    } else {\n        return (\n            <div>\n                <textarea\n                    value={props.value === null ? '' : props.value}\n                    ref={bindKeyboard}\n                    onChange={(e) => props.onChange!(e.target.value)}\n                    style={{ width: '100%', height: '6em'}}></textarea>\n                <button onClick={props.acceptChanges}>\n                    <i className='fa fa-check' aria-hidden='true'></i></button>\n                <button onClick={props.cancelChanges}><i className='fa fa-times' aria-hidden='true'></i></button>\n            </div>\n        );\n    }\n };\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/fields/EditableParagraph.tsx","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { omit } from 'lodash';\n\nimport * as mousetrap from 'mousetrap';\n\nimport { EditableSubfieldProps } from './EditableFieldComponent';\n\ninterface SameAsEditorState {\n    temporaryValue: string;\n    urls: string[];\n}\n\nexport class SameAsEditor extends React.Component<EditableSubfieldProps<string>, SameAsEditorState> {\n\n    private keyboardShortcuts;\n\n    constructor(props: EditableSubfieldProps<string>) {\n        super();\n        this.state = {\n            temporaryValue: '',\n            urls: props.value === null || props.value!.length === 0 ? [] : props.value!.split(',')\n        };\n    }\n\n    public componentWillReceiveProps(props: EditableSubfieldProps<string>) {\n        this.setState({\n            temporaryValue: '',\n            urls: props.value === null || props.value!.length === 0 ? [] : props.value!.split(',')\n        });\n    }\n\n    public addItemToList() {\n        if (this.state.temporaryValue.length === 0) {\n            return;\n        }\n        this.setState({ urls: this.state.urls.concat([this.state.temporaryValue]), temporaryValue: ''},\n            () => this.props.onChange!(this.state.urls.join(',')));\n    }\n\n    public removeItemFromList(itemId: number) {\n        this.setState({\n            urls: this.state.urls.filter((val, i) => i !== itemId)\n        }, () => this.props.onChange!(this.state.urls.join(',')));\n    }\n\n    public setupKeyboardShortcuts(val: null | HTMLElement ) {\n        if (val !== null) {\n            val.focus();\n            this.keyboardShortcuts = new mousetrap(val);\n            this.keyboardShortcuts.bind('return', this.addItemToList.bind(this));\n            this.keyboardShortcuts.bind('escape', this.props.cancelChanges);\n            this.keyboardShortcuts.bind('ctrl+s', (e) => {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    // internet explorer\n                    e.returnValue = false;\n                }\n                this.props.acceptChanges!();\n            });\n        } else {\n            this.keyboardShortcuts.unbind('return');\n            this.keyboardShortcuts.unbind('escape');\n            this.keyboardShortcuts.unbind('ctrl+s');\n        }\n    }\n\n    public render() {\n\n        return (\n        <div className='same-as-box'>\n            <label className='small'>Same As {!this.props.edit ? (\n                <sup>\n                    <i className='fa fa-pencil-square-o'\n                        title='Edit'\n                        aria-hidden='true'\n                        onClick={this.props.setEdit}>\n                    </i>\n                </sup>\n            ) : null }</label>\n            {this.props.edit ? (\n                <div className='edit-group'>\n                    <button onClick={this.props.acceptChanges}><i className='fa fa-check' aria-hidden='true'></i></button>\n                    <button onClick={this.props.cancelChanges}><i className='fa fa-times' aria-hidden='true'></i></button>\n                    <div className='input-addon-formgroup'>\n                        <input type='text' value={this.state.temporaryValue}\n                            ref={this.setupKeyboardShortcuts.bind(this)}\n                            onChange={(e) => this.setState({ temporaryValue: e.target.value })}\n                            className='form-control with-addon' />\n                        <span className='input-addon-icon right button' onClick={this.addItemToList.bind(this)}>\n                            <i className='fa fa-plus'></i>\n                        </span>\n                    </div>\n                </div>\n            ) : null}\n            <ul className='same-as-list'>\n                {this.state.urls.map((url, i) => (\n                    <li key={`li-${url}`}><a target='_blank' href={url}>{url}</a> {this.props.edit ? (<i\n                        className='fa fa-times close-button'\n                        onClick={this.removeItemFromList.bind(this,i)}></i>) : null}</li>\n                ))}\n            </ul>\n        </div>);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/fields/SameAsEditor.tsx","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nexport const findParentTree =\n     (uid: number, data: { ['parent']: number | null, ['uid']: number | null }[], ancestors : number[] = []) => {\n    const current = data.find((datum) => datum.uid === uid);\n    if (current === undefined) {\n        console.warn('Couldn\\'t find parent');\n        return ancestors;\n    } else {\n        if (current.parent === null || current.uid === null) {\n            if (current.uid === null) {\n                console.warn('Found entity will null uid');\n                return ancestors;\n            } else {\n                return ancestors.concat([current.uid]);\n            }\n        } else {\n            return findParentTree(current.parent, data, ancestors.concat([current.uid]));\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/helper/findParentTree.ts","/**\n * @fileOverview <Description Missing>\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as moment from 'moment';\n\nexport const formatDate : (s: string | null) => string = (str: string | null) => {\n\n      if (str === null || str.length === 0) {\n          return '';\n      }\n\n      const modifier = {\n            '=': '',\n            '>': 'After ',\n            '<': 'Before '\n        }[str[0]];\n\n        const year = str.substr(1, 4);\n\n        const rawMonth = parseInt(str.substr(5, 2)) - 1;\n        const month = rawMonth === -1 || isNaN(rawMonth) ? 'Unknown' : moment.months()[rawMonth];\n\n        const rawDay = parseInt(str.substr(7, 2));\n        const day = rawDay > 0 ? rawDay : '';\n\n\n        return `${modifier} ${day} ${month} ${year}`;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/common/helper/formatDate.ts","module.exports = _;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 6\n// module chunks = 0","/**\n * @fileOverview Sidebar for editor\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.2.0\n */\n\nimport * as React from 'react';\nimport { DataController } from '../stores/DataController';\n\nimport { inject, observer } from 'mobx-react';\n\ninterface AddTabButtonProps {\n    tabType: string;\n    uid: number;\n    dataStore?: DataController;\n    data?: any;\n}\n\ninterface WrappedReactComponent<T> extends React.ClassicComponentClass<T> {\n  wrappedComponent: React.StatelessComponent<T>;\n}\n\nexport const AddTabButton : React.ClassicComponentClass<AddTabButtonProps> = inject('dataStore')(observer(\n    (props: AddTabButtonProps, context: any) => {\n\n        if (props.dataStore!.dataStore.tabs[props.tabType] !== undefined\n                && props.uid in props.dataStore!.dataStore.tabs[props.tabType]) {\n            return (<i className='fa fa-folder-open-o add button'\n                title='Open item'\n                onClick={() => context.router.transitionTo(`/edit/${props.tabType}/${props.uid}`)}> </i>);\n        }\n\n        return (\n        <i className='icon-list-add add button'\n            title='Add to list'\n            onClick={() => props.dataStore!.createTab(props.tabType, props.uid, 'item', props.data)}></i>\n)}));\n\n(AddTabButton as WrappedReactComponent<AddTabButtonProps>).wrappedComponent.contextTypes = {\n    router: React.PropTypes.object.isRequired\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/AddTabButton.tsx"],"sourceRoot":""}