var m="function"==typeof Object.defineProperties?Object.defineProperty:function(g,d,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");g!=Array.prototype&&g!=Object.prototype&&(g[d]=c.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function v(){v=function(){};n.Symbol||(n.Symbol=w)}var y=0;function w(g){return"jscomp_symbol_"+(g||"")+y++}
function A(){v();var g=n.Symbol.iterator;g||(g=n.Symbol.iterator=n.Symbol("iterator"));"function"!=typeof Array.prototype[g]&&m(Array.prototype,g,{configurable:!0,writable:!0,value:function(){return C(this)}});A=function(){}}function C(g){var d=0;return E(function(){return d<g.length?{done:!1,value:g[d++]}:{done:!0}})}function E(g){A();g={next:g};g[n.Symbol.iterator]=function(){return this};return g}function F(g){A();v();A();var d=g[Symbol.iterator];return d?d.call(g):C(g)}
function G(g,d){function c(){}c.prototype=d.prototype;g.prototype=new c;g.prototype.constructor=g;for(var a in d)if(Object.defineProperties){var b=Object.getOwnPropertyDescriptor(d,a);b&&Object.defineProperty(g,a,b)}else g[a]=d[a]}function H(g){for(var d,c=[];!(d=g.next()).done;)c.push(d.value);return c}
function I(g,d){A();g instanceof String&&(g+="");var c=0,a={next:function(){if(c<g.length){var b=c++;return{value:d(b,g[b]),done:!1}}a.next=function(){return{done:!0,value:void 0}};return a.next()}};a[Symbol.iterator]=function(){return a};return a}function M(g,d){if(d){var c=n;g=g.split(".");for(var a=0;a<g.length-1;a++){var b=g[a];b in c||(c[b]={});c=c[b]}g=g[g.length-1];a=c[g];d=d(a);d!=a&&null!=d&&m(c,g,{configurable:!0,writable:!0,value:d})}}
function N(g,d){return Object.prototype.hasOwnProperty.call(g,d)}M("Object.assign",function(g){return g?g:function(d,c){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var e in b)N(b,e)&&(d[e]=b[e])}return d}});function O(g,d,c){g instanceof String&&(g=String(g));for(var a=g.length,b=0;b<a;b++){var e=g[b];if(d.call(c,e,b,g))return{yc:b,se:e}}return{yc:-1,se:void 0}}M("Array.prototype.findIndex",function(g){return g?g:function(d,c){return O(this,d,c).yc}});
M("Promise",function(g){function d(a){this.Zb=0;this.xd=void 0;this.Vb=[];var b=this.$c();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}}function c(){this.gb=null}if(g)return g;c.prototype.Nd=function(a){null==this.gb&&(this.gb=[],this.ef());this.gb.push(a)};c.prototype.ef=function(){var a=this;this.Od(function(){a.If()})};var a=n.setTimeout;c.prototype.Od=function(b){a(b,0)};c.prototype.If=function(){for(;this.gb&&this.gb.length;){var a=this.gb;this.gb=[];for(var b=0;b<a.length;++b){var c=a[b];
delete a[b];try{c()}catch(l){this.ff(l)}}}this.gb=null};c.prototype.ff=function(a){this.Od(function(){throw a;})};d.prototype.$c=function(){function a(a){return function(f){c||(c=!0,a.call(b,f))}}var b=this,c=!1;return{resolve:a(this.gg),reject:a(this.wd)}};d.prototype.gg=function(a){if(a===this)this.wd(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.ng(a);else{var b;a:switch(typeof a){case "object":b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.fg(a):
this.de(a)}};d.prototype.fg=function(a){var b=void 0;try{b=a.then}catch(k){this.wd(k);return}"function"==typeof b?this.og(b,a):this.de(a)};d.prototype.wd=function(a){this.pe(2,a)};d.prototype.de=function(a){this.pe(1,a)};d.prototype.pe=function(a,b){if(0!=this.Zb)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.Zb);this.Zb=a;this.xd=b;this.Jf()};d.prototype.Jf=function(){if(null!=this.Vb){for(var a=this.Vb,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.Vb=null}};var b=
new c;d.prototype.ng=function(a){var b=this.$c();a.qc(b.resolve,b.reject)};d.prototype.og=function(a,b){var c=this.$c();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};d.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{f(a(b))}catch(p){h(p)}}:b}var f,h,e=new d(function(a,b){f=a;h=b});this.qc(c(a,f),c(b,h));return e};d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.qc=function(a,c){function f(){switch(e.Zb){case 1:a(e.xd);break;case 2:c(e.xd);
break;default:throw Error("Unexpected state: "+e.Zb);}}var e=this;null==this.Vb?b.Nd(f):this.Vb.push(function(){b.Nd(f)})};d.resolve=function(a){return a instanceof d?a:new d(function(b){b(a)})};d.reject=function(a){return new d(function(b,c){c(a)})};d.race=function(a){return new d(function(b,c){for(var f=F(a),h=f.next();!h.done;h=f.next())d.resolve(h.value).qc(b,c)})};d.all=function(a){var b=F(a),c=b.next();return c.done?d.resolve([]):new d(function(a,f){function h(b){return function(c){e[b]=c;k--;
0==k&&a(e)}}var e=[],k=0;do e.push(void 0),k++,d.resolve(c.value).qc(h(e.length-1),f),c=b.next();while(!c.done)})};d.$jscomp$new$AsyncExecutor=function(){return new c};return d});M("Array.prototype.find",function(g){return g?g:function(d,c){return O(this,d,c).se}});
M("WeakMap",function(g){function d(a){this.Ub=(e+=Math.random()+1).toString();if(a){v();A();a=F(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(a){N(a,b)||m(a,b,{value:{}})}function a(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if(function(){if(!g||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),c=new g([[a,2],[b,3]]);if(2!=c.get(a)||3!=c.get(b))return!1;c.delete(a);c.set(b,4);return!c.has(a)&&4==c.get(b)}catch(h){return!1}}())return g;
var b="$jscomp_hidden_"+Math.random().toString().substring(2);a("freeze");a("preventExtensions");a("seal");var e=0;d.prototype.set=function(a,e){c(a);if(!N(a,b))throw Error("WeakMap key fail: "+a);a[b][this.Ub]=e;return this};d.prototype.get=function(a){return N(a,b)?a[b][this.Ub]:void 0};d.prototype.has=function(a){return N(a,b)&&N(a[b],this.Ub)};d.prototype.delete=function(a){return N(a,b)&&N(a[b],this.Ub)?delete a[b][this.Ub]:!1};return d});
M("Map",function(g){function d(){var a={};return a.eb=a.next=a.head=a}function c(a,b){var c=a.bb;return E(function(){if(c){for(;c.head!=a.bb;)c=c.eb;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})}function a(a,b){var c;c=b&&typeof b;"object"==c||"function"==c?e.has(b)?c=e.get(b):(c=""+ ++f,e.set(b,c)):c="p_"+b;var d=a.Rb[c];if(d&&N(a.Rb,c))for(a=0;a<d.length;a++){var k=d[a];if(b!==b&&k.key!==k.key||b===k.key)return{id:c,list:d,index:a,sa:k}}return{id:c,
list:d,index:-1,sa:void 0}}function b(a){this.Rb={};this.bb=d();this.size=0;if(a){a=F(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}if(function(){if(!g||!g.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new g(F([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var c=b.entries(),f=c.next();if(f.done||f.value[0]!=a||"s"!=f.value[1])return!1;f=c.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||
!c.next().done?!1:!0}catch(r){return!1}}())return g;v();A();var e=new WeakMap;b.prototype.set=function(b,c){var f=a(this,b);f.list||(f.list=this.Rb[f.id]=[]);f.sa?f.sa.value=c:(f.sa={next:this.bb,eb:this.bb.eb,head:this.bb,key:b,value:c},f.list.push(f.sa),this.bb.eb.next=f.sa,this.bb.eb=f.sa,this.size++);return this};b.prototype.delete=function(b){b=a(this,b);return b.sa&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.Rb[b.id],b.sa.eb.next=b.sa.next,b.sa.next.eb=b.sa.eb,b.sa.head=null,
this.size--,!0):!1};b.prototype.clear=function(){this.Rb={};this.bb=this.bb.eb=d();this.size=0};b.prototype.has=function(b){return!!a(this,b).sa};b.prototype.get=function(b){return(b=a(this,b).sa)&&b.value};b.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};b.prototype.keys=function(){return c(this,function(a){return a.key})};b.prototype.values=function(){return c(this,function(a){return a.value})};b.prototype.forEach=function(a,b){for(var c=this.entries(),f;!(f=c.next()).done;)f=
f.value,a.call(b,f[1],f[0],this)};b.prototype[Symbol.iterator]=b.prototype.entries;var f=0;return b});M("Array.prototype.values",function(g){return g?g:function(){return I(this,function(d,c){return c})}});
(function(g){function d(a){if(c[a])return c[a].fa;var b=c[a]={yc:a,Nf:!1,fa:{}};g[a].call(b.fa,b,b.fa,d);b.Nf=!0;return b.fa}var c={};d.gh=g;d.Lg=c;d.yc=function(a){return a};d.d=function(a,b,c){Object.defineProperty(a,b,{configurable:!1,enumerable:!0,get:c})};d.n=function(a){var b=a&&a.Gg?function(){return a["default"]}:function(){return a};d.d(b,"a",b);return b};d.jh=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};d.p="";return d(d.sh=119)})([function(g){g.fa=require("react")},function(g){g.fa=
require("lodash")},function(g,d,c){g=c(29);d.f={Tb:g.Ka.Tb.Ba,M:g.Ka.M.Ba,o:g.Ka.o.Ba,H:g.Ka.H.Ba,c:g.Ka.c.Ba,source:g.Ka.source.Ba,Z:g.Ka.Z.Ba}},function(g,d,c){g=c(118);d.ea=new g.Ob;d.Sa=new g.Ob;d.showModal=new g.Ob;d.vb=new g.Ob;d.yd=new g.Ob;d.Hb=new g.Ob;d.Dg={ea:d.ea,Sa:d.Sa,showModal:d.showModal,vb:d.vb,yd:d.yd,Hb:d.Hb}},function(g,d,c){g=c(49);d.fb=g.Mb;g=c(25);d.Entity=g.nb;g=c(50);d.wa=g.Nb;g=c(26);d.xa=g.qb;g=c(18);d.da=g.Za;g=c(51);d.pa=g.Qb;g=c(48);d.Element=g.Lb;c=c(52);d.Fa=c.Pb},
function(g,d,c){var a=c(0),b=c(3);d.ka=function(c,f){return void 0!==c.b.F[c.D]&&c.b.F[c.D].has(c.D+"-"+c.uid)?a.createElement("i",{className:"fa fa-folder-open-o add button",title:"Open item",h:function(){return f.ma.ub("/edit/"+c.D+"/"+c.uid)}}," "):a.createElement("i",{className:"icon-list-add add button",title:"Add to list",h:function(){return b.ea.I(c.D,c.uid,c.data)}})};d.ka.Ab={ma:a.zb.object.Eb}},function(g,d){function c(a,b){this.db=a;this.g=b}c.prototype.la=function(a,b){if("number"!==typeof b)throw Error("Expected single column identifier");
return this.db.Bc(this.g,b).then(function(b){return(new a).w(b)})};c.prototype.ya=function(a,b){b=void 0===b?{}:b;return this.db.jb(this.g,b).then(function(b){return b.map(function(b){return(new a).w(b)})})};c.prototype.ha=function(a,b){return this.db.Td((new a).u(b))};c.prototype.ta=function(a,b,c){if("number"!==typeof b)throw Error("Expected single column identifier");return this.db.Kb((new a).u(c))};c.prototype.L=function(a,b,c){var f=this;c=(new a).u(c).U();var e=Object.keys(c),d={};if("number"!==
typeof b)throw Error("Expected single column identifier");for(var h=0;h<e.length;h+=1)void 0!==c[e[h]]&&(d[e[h]]=c[e[h]]);return this.db.Bc(this.g,b).then(function(b){return f.db.Kb((new a).w(Object.assign({},b,d)))})};c.prototype.T=function(a,b){if("number"!==typeof b)throw Error("Expected single column identifier");return this.db.T(this.g,b)};d.j=c},function(g,d,c){function a(){b.s.call(this);this.state={X:"",na:!1,dd:[],jd:null,Yd:0}}var b=c(0),e=c(116),f=c(1);G(a,b.s);a.prototype.sf=function(a){var b=
this;this.i({X:a.target.value,na:!0},function(){b.qe(b.state.X,b.a);b.a.Ad(b.state.X)})};a.prototype.qe=function(a,b){var c=[];if(0<a.length){var f=e(function(){this.Wg("key",{Kg:10})});b.options.forEach(function(a,b){return f.add(Object.assign({},a,{id:b}))});a=f.search(a);for(var d=0;d<a.length;d+=1)c.push(b.options[a[d].Xa])}else c=b.options;null!==this.Xd&&(this.Wb=!0,this.Pd(this.Xd));this.i({dd:c})};a.prototype.Kd=function(a){this.a.Ta(a)};a.prototype.lg=function(a){this.a.ia(a);this.Ja=!1;
this.Wb=!0;this.i({na:!1,X:a.key});this.a.Ad(a.key)};a.prototype.fd=function(){var a=this;this.Ja||(0===this.state.X.length?this.i({X:""}):-1===f.findIndex(this.a.options,function(b){return b.key===a.state.X})&&this.i({X:null===this.a.value?"":this.a.value.key},function(){a.qe(null===a.a.value?"":a.a.value.key,a.a)}),this.Wb=!0,this.i({na:!1}))};a.prototype.hd=function(){this.Ja?this.Ja=!0:(this.zc=!0,this.i({na:!0}))};a.prototype.gd=function(){this.nd()&&!1===this.state.na?this.i({na:!0}):null===
this.state.jd||this.zc?this.zc=!1:this.ne(this.state.dd[this.state.jd])};a.prototype.ne=function(a){var b=this;this.Wb=!0;this.i({na:!1,jd:null},function(){b.a.ia(a);b.vd.Qd.focus()})};a.prototype.nd=function(){var a=this.vd.Qd;return a.ownerDocument&&a===a.ownerDocument.activeElement};a.prototype.uf=function(){this.a.ia(null);this.i({X:""});this.vd.Qd.focus()};a.prototype.Pd=function(a){this.Xd=a;null!==a&&this.Wb&&(this.i({Yd:window.document.body.getBoundingClientRect().bottom-a.getBoundingClientRect().top-
32}),this.Wb=!1)};a.prototype.K=function(){var a=this;return b.createElement("div",{className:this.a.compact?"compact combo-dropdown":"combo-dropdown"},b.createElement("div",null,b.createElement("input",{type:"text",Xa:"comboDropDownInputBox",className:"search-input",value:this.state.X,placeholder:"Click here and start typing..",Uf:this.fd.bind(this),Wf:this.hd.bind(this),m:this.sf.bind(this),h:this.gd.bind(this)}),0<this.state.X.length?b.createElement("i",{className:"fa fa-times clear-button",h:this.uf.bind(this)}):
null),this.state.na?b.createElement("div",{className:"dropdown",style:{maxHeight:this.state.Yd,overflowY:"auto"},Xa:this.Pd.bind(this)},b.createElement("ul",null,0===this.state.X.length&&this.a.Ra?b.createElement("li",{className:"add",qd:function(){return a.Ja=!0},h:function(){return a.Kd("")}},b.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),"Add new ",this.a.typeName):null,this.state.dd.map(function(c,f){return b.createElement("li",{key:"opt-"+c.key+"-"+f,qd:function(){return a.Ja=
!0},h:function(){return a.lg(c)}},c.key)}),0<this.state.X.length&&this.a.Ra?b.createElement("li",{className:"add",qd:function(){return a.Ja=!0},h:function(){return a.Kd(a.state.X)}},b.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),"Add new ",this.a.typeName,": '",this.state.X,"'"):null)):null)};a.Bf={Ra:!0,compact:!1,Ad:f.Fb};d.Pa=a},function(g,d){function c(a,b){this.db=a;this.g=b}c.prototype.la=function(a,b){if("number"!==typeof b)throw Error("Expected single column identifier");
return this.db.Bc(this.g,b).then(function(b){return(new a).w(b)})};c.prototype.ya=function(a,b){b=void 0===b?{}:b;return this.db.jb(this.g,b).then(function(b){return b.map(function(b){return(new a).w(b)})})};c.prototype.ha=function(a,b){return this.db.Td((new a).u(b))};c.prototype.ta=function(a,b,c){if("number"!==typeof b)throw Error("Expected single column identifier");return this.db.Kb((new a).u(c))};c.prototype.L=function(a,b,c){var f=this;c=(new a).u(c).U();var e=Object.keys(c),d={};if("number"!==
typeof b)throw Error("Expected single column identifier");for(var h=0;h<e.length;h+=1)void 0!==c[e[h]]&&(d[e[h]]=c[e[h]]);return this.db.Bc(this.g,b).then(function(b){return f.db.Kb((new a).w(Object.assign({},b,d)))})};c.prototype.T=function(a,b){if("number"!==typeof b)throw Error("Expected single column identifier");return this.db.T(this.g,b)};d.j=c},function(g,d){function c(a){this.data=void 0===a?"A database integrity constraint has been broken - your change has not been\n submitted. This is likely due to a change which violates the property types model; please check the types of \n what you are trying to do. Please also contact the Digital Humanities team, this error should not occur.":
a}function a(a){this.data=a}function b(a){this.data=void 0===a?"Could not find the given collection":a}function e(a){this.data=void 0===a?"Could not find the given key":a}G(e,Error);d.ob=e;G(b,Error);d.Ya=b;G(a,Error);d.S=a;G(c,Error);d.xb=c;d.Hf={ob:e,Ya:b,S:a,xb:c}},function(g){g.fa=require("react-router")},function(g,d){function c(a){this.data=void 0===a?"A database integrity constraint has been broken - your change has not been\n submitted. This is likely due to a change which violates the property types model; please check the types of \n what you are trying to do. Please also contact the Digital Humanities team, this error should not occur.":
a}function a(a){this.data=a}function b(a){this.data=void 0===a?"Could not find the given collection":a}function e(a){this.data=void 0===a?"Could not find the given key":a}G(e,Error);d.ob=e;G(b,Error);d.Ya=b;G(a,Error);d.S=a;G(c,Error);d.xb=c;d.Hf={ob:e,Ya:b,S:a,xb:c}},function(g,d,c){function a(a){b.s.apply(this,arguments)}var b=c(0);G(a,b.s);a.prototype.K=function(){return b.createElement("div",{className:"full-page-overlay"},b.createElement("div",{className:"overlay-container"},this.a.children))};
d.yb=a},function(g,d,c){function a(){e.s.call(this);this.state={Ea:!1,Aa:null}}var b=this&&this.Rc||Object.assign||function(a){for(var b,c=1,f=arguments.length;c<f;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},e=c(0);G(a,e.s);a.prototype.rg=function(){this.i({Ea:!0,Aa:this.a.value})};a.prototype.mg=function(a){this.i({Aa:a})};a.prototype.rb=function(){this.a.m(this.state.Aa);this.i({Ea:!1})};a.prototype.tb=function(){this.i({Ea:!1,Aa:this.a.value})};
a.prototype.K=function(){var a=this;return e.createElement(this.a.aa,b({Ea:this.state.Ea,value:this.state.Aa,m:this.mg.bind(this),Yb:this.rg.bind(this),rb:this.rb.bind(this),tb:this.tb.bind(this),Cc:function(){return void 0!==a.a.Cc?a.a.Cc(a.a.value):null}},this.a.pc))};d.N=a},function(g,d,c){var a=c(0);d.mc=function(b){function c(a){return function(c){return 0===a.length?!0:-1!==b.xc(c).toLowerCase().indexOf(a.toLowerCase())}}return a.createElement("div",null,a.createElement("div",{className:"input-addon-formgroup"},
a.createElement("span",{className:"input-addon-icon"},a.createElement("i",{className:"fa fa-search fa-fw"})),a.createElement("input",{type:"text",className:"form-control with-addon",m:function(a){return b.Fc(c(a.target.value))}})))}},function(g,d,c){var a=c(0);g=c(13);d.N=g.N;d.ec=function(b){return b.Ea&&null!=b.value?a.createElement("span",null,a.createElement("input",{type:"text",value:b.value,className:"text-edit-header",m:function(a){return b.m(a.target.value)}}),a.createElement("button",{h:b.rb},
a.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),a.createElement("button",{h:b.tb},a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):a.createElement("h2",null,b.value,a.createElement("sup",null,a.createElement("i",{className:"fa fa-pencil-square-o",title:"Edit","aria-hidden":"true",h:b.Yb})))}},function(g){g.fa=require("moment")},function(g){g.fa=require("mousetrap")},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.da.apply(this,arguments)}
var e=c(45),f=c(6),k=c(11),l=c(1);G(b,e.da);b.prototype.ja=function(){return b.g};b.prototype.U=function(){var a=l.ca(this.B(),"value","valueType","creationTimestamp","lastmodifiedTimestamp");a.dc=this.valueType;void 0!==this.valueType&&"source"!==this.valueType&&(a["value_"+this.valueType]=this.value);return Object.assign({},a,{Ga:this.G,La:this.C})};b.prototype.w=function(a){a.valueType=a.dc;switch(a.dc){case "entity":a.value=a.Cd;break;case "string":a.value=a.te;break;case "date":a.value=a.ug;
break;case "integer":a.value=a.vg;break;case "point":a.value=a.wg;break;case "region":a.value=a.xg;break;case "source":a.value=a.source;break;default:a.value=null}this.u(a);return this};b.g="records";d.Za=b;G(a,f.j);a.prototype.ha=function(a,b){var c=this;return this.db.select("predicates",["range_type"]).v({uid:b.c}).then(function(e){e=F(e).next().value;if(b.valueType===e.Ma)return f.j.prototype.ha.call(c,a,b);throw new k.S({message:"Attempted to add a record with an incorrect type!",data:Promise.resolve({})});
})};a.prototype.ta=function(a,b,c){var e=this;return this.db.select("predicates",["range_type"]).v({uid:c.c}).then(function(d){d=F(d).next().value;if(c.valueType===d.Ma)return f.j.prototype.ta.call(e,a,b,c);throw new k.S({message:"Attempted to add a record with an incorrect type!",data:Promise.resolve({})});})};a.prototype.L=function(a,b,c){var e=this;return this.db.select("predicates",["range_type"]).v({uid:c.c}).then(function(d){d=F(d).next().value;if(c.valueType===d.Ma)return f.j.prototype.L.call(e,
a,b,c);throw new k.S({message:"Attempted to add a record with an incorrect type!",data:Promise.resolve({})});})};d.lc=a},function(g,d,c){var a=this&&this.Rc||Object.assign||function(a){for(var b,c=1,f=arguments.length;c<f;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},b=c(0);g=c(13);d.N=g.N;var e=c(7);d.Ic=function(c){return c.Ea?b.createElement("div",null,b.createElement(e.Pa,a({},c.Vc,{value:c.value,ia:c.m,Ra:!1,Ta:function(){}})),b.createElement("button",
null,b.createElement("i",{className:"fa fa-check",h:c.rb,"aria-hidden":"true"})),b.createElement("button",null,b.createElement("i",{className:"fa fa-times","aria-hidden":"true",h:c.tb}))):b.createElement("div",null,null!==c.value&&0<c.value.key.length?c.value.key:b.createElement("em",null,"No value"),b.createElement("sup",null,b.createElement("i",{className:"fa fa-pencil-square-o",title:"Edit","aria-hidden":"true",h:c.Yb})))}},function(g,d,c){var a=c(0);g=c(13);d.N=g.N;var b=c(17);d.Jc=function(c){function f(a){null!==
a?(a.focus(),e=new b(a)):e.Jb("ctrl+return")}var e;return c.Ea?a.createElement("div",null,a.createElement("textarea",{value:c.value,Xa:f,m:function(a){return c.m(a.target.value)},style:{width:"100%",height:"6em"}}),a.createElement("button",{h:c.rb},a.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),a.createElement("button",{h:c.tb},a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):a.createElement("div",{h:c.Yb,className:"editable-paragraph-box"},a.createElement("p",
null,null===c.value||0<c.value.length?c.value:a.createElement("em",null,"No value"),a.createElement("sup",null,a.createElement("i",{className:"fa fa-pencil-square-o",title:"Edit","aria-hidden":"true"}))))}},function(g,d,c){function a(a){b.s.call(this);this.state={$b:"",wb:null===a.value||0===a.value.length?[]:a.value.split(",")}}var b=c(0),e=c(17);G(a,b.s);a.prototype.bf=function(){var a=this;0!==this.state.$b.length&&this.i({wb:this.state.wb.concat([this.state.$b]),$b:""},function(){return a.a.m(a.state.wb.join(","))})};
a.prototype.dg=function(a){var b=this;this.i({wb:this.state.wb.filter(function(b,c){return c!==a})},function(){return b.a.m(b.state.wb.join(","))})};a.prototype.pg=function(a){null!==a?(a.focus(),this.ib=new e(a)):(this.ib.Jb("return"),this.ib.Jb("escape"),this.ib.Jb("ctrl+s"))};a.prototype.K=function(){var a=this;return b.createElement("div",{className:"same-as-box"},b.createElement("label",{className:"small"},"Same As ",this.a.Ea?null:b.createElement("sup",null,b.createElement("i",{className:"fa fa-pencil-square-o",
title:"Edit","aria-hidden":"true",h:this.a.Yb}))),this.a.Ea?b.createElement("div",{className:"edit-group"},b.createElement("button",{h:this.a.rb},b.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),b.createElement("button",{h:this.a.tb},b.createElement("i",{className:"fa fa-times","aria-hidden":"true"})),b.createElement("div",{className:"input-addon-formgroup"},b.createElement("input",{type:"text",value:this.state.$b,Xa:this.pg.bind(this),m:function(b){return a.i({$b:b.target.value})},
className:"form-control with-addon"}),b.createElement("span",{className:"input-addon-icon right button",h:this.bf.bind(this)},b.createElement("i",{className:"fa fa-plus"})))):null,b.createElement("ul",{className:"same-as-list"},this.state.wb.map(function(c,f){return b.createElement("li",{key:"li-"+c},b.createElement("a",{target:"_blank",href:c},c)," ",a.a.Ea?b.createElement("i",{className:"fa fa-times close-button",h:a.dg.bind(a,f)}):null)})))};d.Pc=a},function(g,d,c){var a=c(16);d.vc=function(b){if(null===
b||0===b.length)return"";var c={"=":"",">":"After ","<":"Before "}[b[0]],f=b.substr(1,4),d=parseInt(b.substr(5,2))-1,d=-1===d||isNaN(d)?"Unknown":a.Tf()[d];b=parseInt(b.substr(7,2));return c+" "+(0<b?b:"")+" "+d+" "+f}},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.da.apply(this,arguments)}var e=c(93),f=c(8),k=c(9),l=c(1);G(b,e.da);b.prototype.ja=function(){return b.g};b.prototype.U=function(){var a=l.ca(this.B(),"value","valueType","creationTimestamp","lastmodifiedTimestamp");
a.dc=this.valueType;void 0!==this.valueType&&"source"!==this.valueType&&(a["value_"+this.valueType]=this.value);return Object.assign({},a,{Ga:this.G,La:this.C})};b.prototype.w=function(a){a.valueType=a.dc;switch(a.dc){case "entity":a.value=a.Cd;break;case "string":a.value=a.te;break;case "date":a.value=a.ug;break;case "integer":a.value=a.vg;break;case "point":a.value=a.wg;break;case "region":a.value=a.xg;break;case "source":a.value=a.source;break;default:a.value=null}this.u(a);return this};b.g="records";
d.Za=b;G(a,f.j);a.prototype.ha=function(a,b){var c=this;return this.db.select("predicates",["range_type"]).v({uid:b.c}).then(function(e){e=F(e).next().value;if(b.valueType===e.Ma)return f.j.prototype.ha.call(c,a,b);throw new k.S({message:"Attempted to add a record with an incorrect type!",data:Promise.resolve({})});})};a.prototype.ta=function(a,b,c){var e=this;return this.db.select("predicates",["range_type"]).v({uid:c.c}).then(function(d){d=F(d).next().value;if(c.valueType===d.Ma)return f.j.prototype.ta.call(e,
a,b,c);throw new k.S({message:"Attempted to add a record with an incorrect type!",data:Promise.resolve({})});})};a.prototype.L=function(a,b,c){var e=this;return this.db.select("predicates",["range_type"]).v({uid:c.c}).then(function(d){d=F(d).next().value;if(c.valueType===d.Ma)return f.j.prototype.L.call(e,a,b,c);throw new k.S({message:"Attempted to add a record with an incorrect type!",data:Promise.resolve({})});})};d.lc=a},function(g){g.fa=require("graphql")},function(g,d,c){function a(a){f.j.call(this,
a,b.g)}function b(a){e.Entity.apply(this,arguments)}var e=c(42),f=c(6),k=c(11),l=c(1);G(b,e.Entity);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return Object.assign(l.ca(this.B(),"entityType","creationTimestamp","lastmodifiedTimestamp"),{type:this.A,Ga:this.G,La:this.C})};b.prototype.w=function(a){this.u({A:a.type,uid:a.uid,label:a.label,parent:a.parent});return this};b.g="entities";d.nb=b;G(a,f.j);a.prototype.ya=function(a,b){b=void 0===b?{}:b;var c=this;return void 0!==b.type?
this.db.Db(l.isArray(b.type)?b.type[0]:b.type).then(function(b){return c.db.select("entities").mb("type",b).then(function(b){return b.map(function(b){return(new a).w(b)})})}):f.j.prototype.ya.call(this,a,b)};a.prototype.T=function(a,c){var e=this;return Promise.all([this.db.select(b.g).v("parent","=",c),this.db.select("records").v("value_entity","=",c)]).then(function(a){var b=F(a);a=b.next().value;b=b.next().value;if(0===a.length+b.length)return e.db.T(e.g,c);throw new k.S({message:"The operation could not be completed as the entity is referenced in other sources",
data:Promise.resolve({o:a,M:b})});})};d.hc=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.xa.apply(this,arguments)}var e=c(44),f=c(6),k=c(11),l=c(18),h=c(1);G(b,e.xa);b.prototype.ja=function(){return b.g};b.prototype.U=function(){var a=Object.assign(h.ca(this.B(),"range","rangeIsReference","sameAs","creationTimestamp","lastmodifiedTimestamp"),{Oa:this.W,Ma:this.V?"entity":this.J,Ga:this.G,La:this.C});a.range_ref=this.V?this.J:null;return a};b.prototype.w=function(a){"entity"===
a.Ma?(a.J=a.cg,a.V=!0):(a.J=a.Ma,a.V=!1);this.u(Object.assign(a,{sameAs:a.Oa}));return this};b.g="predicates";d.qb=b;G(a,f.j);a.prototype.ya=function(a,b){b=void 0===b?{}:b;var c=this;return void 0!==b.domain?this.db.wc(h.isArray(b.domain)?b.domain[0]:b.domain).then(function(e){return c.db.select("predicates").mb("domain",e.concat([b.domain[0]])).then(function(b){return b.map(function(b){return(new a).w(b)})})}):f.j.prototype.ya.call(this,a,b)};a.prototype.ta=function(a,b,c){if("number"!==typeof b)throw Error("Expected single column identifier");
return this.db.Kb((new a).u(c))};a.prototype.L=function(a,b,c){var e=this;return void 0!==c.domain?this.db.select("records",["entities.type as entityType"]).Cf().v({c:b}).Ua("entities","records.entity","entities.uid").then(function(d){return 0<d.length?e.db.Db(c.domain).then(function(a){d.map(function(a){return a.A}).forEach(function(b){if(-1===a.indexOf(b))throw new k.S({message:"The operation could not be completed as it would invalidate predicate relationships",data:Promise.resolve({})});})}).then(function(){return f.j.prototype.L.call(e,
a,b,c)}):f.j.prototype.L.call(e,a,b,c)}):void 0!==c.J?this.db.select("records").v({c:b}).then(function(d){if(0<d.length){if(!1===c.V)throw new k.S({message:"The operation could not be completed as it would invalidate predicate relationships",data:Promise.resolve({})});return e.db.Db(c.J).then(function(a){d.map(function(a){return a.Cd}).forEach(function(b){if(-1===a.indexOf(b))throw new k.S({message:"The operation could not be completed as it would invalidate predicate relationships",data:Promise.resolve({})});
})}).then(function(){return f.j.prototype.L.call(e,a,b,c)})}return f.j.prototype.L.call(e,a,b,c)}):f.j.prototype.L.call(this,a,b,c)};a.prototype.T=function(a,b){var c=this;return Promise.all([this.db.jb("records",{c:b})]).then(function(a){a=F(a).next().value;if(0===a.length)return c.db.T(c.g,b);throw new k.S({message:"The operation could not be completed as the predicate is used by other records",data:Promise.resolve({M:a.map(function(a){return(new l.Za).w(a)})})});})};d.kc=a},function(g,d,c){function a(){b.s.call(this);
this.state={Sb:!1,bd:!1,Ec:{key:"",value:""},tc:{key:"",value:""}}}var b=c(0),e=c(7),f=c(1);G(a,b.s);a.prototype.$e=function(){this.a.ad(this.state.tc);this.i({Sb:!1})};a.prototype.qf=function(){this.i({Sb:!1,tc:this.a.domain})};a.prototype.af=function(){this.a.sd(this.state.Ec);this.i({bd:!1})};a.prototype.rf=function(){this.i({Sb:!1,Ec:this.a.J})};a.prototype.K=function(){var a=this,c="editAll"===this.a.mode?this.a.ad:function(b){return a.i({tc:b})},d="editAll"===this.a.mode?this.a.sd:function(b){return a.i({Ec:b})};
return b.createElement("div",{className:"predicate-function-description"},b.createElement("div",{className:"domain"},"editAll"===this.a.mode||this.state.Sb?b.createElement("div",null,b.createElement("label",{className:"small"},"Domain"),b.createElement(e.Pa,{options:this.a.sc,typeName:"entity type",Ra:!1,value:this.state.tc,ia:c,Ta:f.Fb}),"editSingle"===this.a.mode?b.createElement("div",null,b.createElement("button",{h:this.$e.bind(this)},b.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),
b.createElement("button",{h:this.qf.bind(this)},b.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):null):b.createElement("div",null,this.a.domain.key," ",b.createElement("i",{className:"fa fa-pencil-square-o",title:"Edit","aria-hidden":"true",h:function(){return a.i({Sb:!0})}}))),b.createElement("div",{className:"arrow"},b.createElement("i",{className:"fa fa-long-arrow-right","aria-hidden":"true"})),b.createElement("div",{className:"range"},"editAll"===this.a.mode||this.state.bd?
b.createElement("div",null,b.createElement("label",{className:"small"},"Range"),b.createElement(e.Pa,{options:this.a.Dc,typeName:"entity type",Ra:!1,value:this.state.Ec,ia:d,Ta:f.Fb}),"editSingle"===this.a.mode?b.createElement("div",null,b.createElement("button",{h:this.af.bind(this)},b.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),b.createElement("button",{h:this.rf.bind(this)},b.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):null):b.createElement("div",
null,this.a.J.key," ",b.createElement("i",{className:"fa fa-pencil-square-o",title:"Edit","aria-hidden":"true",h:function(){return a.i({bd:!0})}}))))};d.Gd=a},function(g,d){d.uc=function(c,a,b){b=void 0===b?[]:b;var e=a.find(function(a){return a.uid===c});return void 0===e?(console.warn("Couldn't find parent"),b):null===e.parent||null===e.uid?null===e.uid?(console.warn("Found entity will null uid"),b):b.concat([e.uid]):d.uc(e.parent,a,b.concat([e.uid]))}},function(g,d){d.Ka={Tb:{Ba:"element_set",
name:"Element Set",Wa:"Element Sets",R:""},M:{Ba:"record",name:"Record",Wa:"Records",R:""},o:{Ba:"entity",name:"Entity",Wa:"Entities",R:"entity"},H:{Ba:"entity_type",name:"Entity Type",Wa:"Entity Types",R:"entity_type"},c:{Ba:"property",name:"Property",Wa:"Properties",R:"predicate"},source:{Ba:"source",name:"Source",Wa:"Sources",R:"source"},Z:{Ba:"source_element",name:"Source Element",Wa:"Source Elements",R:""}}},function(g,d){d.ge=[{name:"text",value:"string",url:"",description:"some text"},{name:"number",
value:"integer",url:"",description:"a number"},{name:"date",value:"date",url:"",description:"a date"},{name:"source",value:"source",url:"",description:"a source in the database"}]},function(g,d,c){var a=c(0),b=c(10);d.Jd=function(c){return a.createElement("section",{className:"stats-grid"},a.createElement(b.oa,{va:"/edit/entity"},a.createElement("div",{className:"entity"},a.createElement("span",{className:"item-name"},"Entities"),a.createElement("span",{className:"item-count"},c.ua.o))),a.createElement(b.oa,
{va:"/edit/entity_type"},a.createElement("div",{className:"entity_type"},a.createElement("span",{className:"item-name"},"Entity Types"),a.createElement("span",{className:"item-count"},c.ua.A))),a.createElement(b.oa,{va:"/edit/source"},a.createElement("div",{className:"source"},a.createElement("span",{className:"item-name"},"Sources"),a.createElement("span",{className:"item-count"},c.ua.source))),a.createElement(b.oa,{va:"/edit/predicate"},a.createElement("div",{className:"predicate"},a.createElement("span",
{className:"item-name"},"Properties"),a.createElement("span",{className:"item-count"},c.ua.c))),a.createElement("div",{className:"record"},a.createElement("span",{className:"item-name"},"Records"),a.createElement("span",{className:"item-count"},c.ua.M)))}},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.Entity.apply(this,arguments)}var e=c(90),f=c(8),k=c(9),l=c(1);G(b,e.Entity);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return Object.assign(l.ca(this.B(),"entityType",
"creationTimestamp","lastmodifiedTimestamp"),{type:this.A,Ga:this.G,La:this.C})};b.prototype.w=function(a){this.u({A:a.type,uid:a.uid,label:a.label,parent:a.parent});return this};b.g="entities";d.nb=b;G(a,f.j);a.prototype.ya=function(a,b){b=void 0===b?{}:b;var c=this;return void 0!==b.type?this.db.Db(l.isArray(b.type)?b.type[0]:b.type).then(function(b){return c.db.select("entities").mb("type",b).then(function(b){return b.map(function(b){return(new a).w(b)})})}):f.j.prototype.ya.call(this,a,b)};a.prototype.T=
function(a,c){var e=this;return Promise.all([this.db.select(b.g).v("parent","=",c),this.db.select("records").v("value_entity","=",c)]).then(function(a){var b=F(a);a=b.next().value;b=b.next().value;if(0===a.length+b.length)return e.db.T(e.g,c);throw new k.S({message:"The operation could not be completed as the entity is referenced in other sources",data:Promise.resolve({o:a,M:b})});})};d.hc=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.xa.apply(this,arguments)}var e=c(92),f=
c(8),k=c(9),l=c(23),h=c(1);G(b,e.xa);b.prototype.ja=function(){return b.g};b.prototype.U=function(){var a=Object.assign(h.ca(this.B(),"range","rangeIsReference","sameAs","creationTimestamp","lastmodifiedTimestamp"),{Oa:this.W,Ma:this.V?"entity":this.J,Ga:this.G,La:this.C});a.range_ref=this.V?this.J:null;return a};b.prototype.w=function(a){"entity"===a.Ma?(a.J=a.cg,a.V=!0):(a.J=a.Ma,a.V=!1);this.u(Object.assign(a,{sameAs:a.Oa}));return this};b.g="predicates";d.qb=b;G(a,f.j);a.prototype.ya=function(a,
b){b=void 0===b?{}:b;var c=this;return void 0!==b.domain?this.db.wc(h.isArray(b.domain)?b.domain[0]:b.domain).then(function(e){return c.db.select("predicates").mb("domain",e.concat([b.domain[0]])).then(function(b){return b.map(function(b){return(new a).w(b)})})}):f.j.prototype.ya.call(this,a,b)};a.prototype.ta=function(a,b,c){if("number"!==typeof b)throw Error("Expected single column identifier");return this.db.Kb((new a).u(c))};a.prototype.L=function(a,b,c){var e=this;return void 0!==c.domain?this.db.select("records",
["entities.type as entityType"]).Cf().v({c:b}).Ua("entities","records.entity","entities.uid").then(function(d){return 0<d.length?e.db.Db(c.domain).then(function(a){d.map(function(a){return a.A}).forEach(function(b){if(-1===a.indexOf(b))throw new k.S({message:"The operation could not be completed as it would invalidate predicate relationships",data:Promise.resolve({})});})}).then(function(){return f.j.prototype.L.call(e,a,b,c)}):f.j.prototype.L.call(e,a,b,c)}):void 0!==c.J?this.db.select("records").v({c:b}).then(function(d){if(0<
d.length){if(!1===c.V)throw new k.S({message:"The operation could not be completed as it would invalidate predicate relationships",data:Promise.resolve({})});return e.db.Db(c.J).then(function(a){d.map(function(a){return a.Cd}).forEach(function(b){if(-1===a.indexOf(b))throw new k.S({message:"The operation could not be completed as it would invalidate predicate relationships",data:Promise.resolve({})});})}).then(function(){return f.j.prototype.L.call(e,a,b,c)})}return f.j.prototype.L.call(e,a,b,c)}):
f.j.prototype.L.call(this,a,b,c)};a.prototype.T=function(a,b){var c=this;return Promise.all([this.db.jb("records",{c:b})]).then(function(a){a=F(a).next().value;if(0===a.length)return c.db.T(c.g,b);throw new k.S({message:"The operation could not be completed as the predicate is used by other records",data:Promise.resolve({M:a.map(function(a){return(new l.Za).w(a)})})});})};d.kc=a},function(g){g.fa=require("immutable")},function(g,d,c){function a(){e.s.call(this);this.state={re:"",ua:null}}var b=this&&
this.Rc||Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])}return a},e=c(0),f=c(10),k=c(100),l=c(2),h=c(29),q=c(96),r=c(53),u=c(101),t=c(102),p=c(97),z=c(98),x=c(10),D=c(99);G(a,e.s);a.prototype.K=function(){var a=this;return e.createElement("div",{id:"main",className:"flex-fill"},e.createElement(this.a.ma,b({},this.a.ig,{className:"flex-fill",Jg:"/admin"}),e.createElement("div",{className:"flex-fill",
style:{flexDirection:"column"}},e.createElement("div",{className:"header"},e.createElement(x.oa,{va:"/",className:"logo-link"},e.createElement("div",{className:"logo"},"VRE")),e.createElement(x.oa,{va:"/",className:"header-link"},"Home"),e.createElement(x.oa,{accessKey:"s",va:"/edit/"+l.f.source,className:"header-link source"},h.Ka.source.Wa),e.createElement(x.oa,{accessKey:"e",va:"/edit/"+l.f.o,className:"header-link entity"},h.Ka.o.Wa),e.createElement(x.oa,{accessKey:"p",va:"/edit/"+l.f.c,className:"header-link predicate"},
h.Ka.c.Wa),e.createElement(x.oa,{accessKey:"t",va:"/edit/"+l.f.H,className:"header-link entity_type"},h.Ka.H.Wa),"website"===this.a.be?e.createElement("div",{className:"right-header"},e.createElement(x.oa,{va:"/user",className:"header-link"},e.createElement("span",{className:"current-user"},this.state.re)),e.createElement("a",{href:"/admin/logout",className:"header-link"},"Logout"),e.createElement("a",{href:"/",className:"header-link"},e.createElement("i",{className:"fa fa-external-link"}))):null),
"website"===this.a.be?e.createElement(f.pb,{Cb:!0,pattern:"/",K:function(c){return e.createElement(q.ue,b({},c,{ua:a.state.ua}))}}):e.createElement(f.pb,{Cb:!0,pattern:"/",K:function(c){return e.createElement(r.ve,b({},c,{ua:a.state.ua}))}}),e.createElement(f.pb,{Cb:!0,pattern:"/user",aa:u.Xe}),e.createElement(f.pb,{Cb:!0,pattern:"/users",aa:t.Ye}),e.createElement(f.pb,{Cb:!0,pattern:"/app",aa:p.we}),e.createElement(f.pb,{Cb:!0,pattern:"/upload",aa:z.De}),e.createElement(f.pb,{Cb:!0,pattern:"/search",
K:function(c){return e.createElement(D.Fd,b({l:a.a.l},c,{R:"search"}))}}),e.createElement(f.pb,{pattern:"/edit/:workspace",K:function(c){return e.createElement(D.Fd,b({l:a.a.l},c,{R:"property"===c.P.R?"predicate":c.P.R}))}}),e.createElement(f.Cg,{aa:k.Re}))))};d.Ie=a},function(g,d,c){function a(a){this.ga=b(a)}var b=c(114),e=c(1),f=c(9);a.prototype.query=function(){return this.ga};a.prototype.select=function(a){return this.ga.select().from(a)};a.prototype.Bc=function(a,b){return this.ga.select().from(a).v({uid:b}).first().then(function(a){return void 0===
a?Promise.reject(new f.ob):a})};a.prototype.jb=function(a,b){var c=this.ga.select().from(a);Object.keys(b).forEach(function(a){c=c.mb(a,b[a])});return c.then(function(a){return void 0===a?Promise.reject(new f.ob):a})};a.prototype.Td=function(a){var b=this,c=e.ca(a.U(),["uid","tableName"]);return this.ga.transaction(function(e){return b.ga(a.ja()).bc(e).dh(c,"uid").qh("uid").then(function(a){return b.Sc(e).then(function(b){if(!b)throw new f.xb;return a})}).then(e.Sd).catch(e.le)})};a.prototype.Kb=
function(a){var b=this;return this.ga.transaction(function(c){return b.ga(a.ja()).bc(c).v({uid:a.uid}).update(e.ca(a.U(),["tableName"])).then(function(a){return b.Sc(c).then(function(b){if(!b)throw new f.xb;return a})}).then(c.Sd).catch(c.le)})};a.prototype.T=function(a,b){var c=this;return this.ga.transaction(function(e){return c.ga(a).bc(e).v({uid:b}).ra().then(function(a){return c.Sc(e).then(function(b){if(!b)throw new f.xb;return a})}).then(e.Sd).catch(e.le)})};a.prototype.wc=function(a){return this.ga.raw("\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM entity_types),\n                ancestor(uid) AS (\n                SELECT parent FROM parent_of WHERE uid="+
a+"\n                UNION ALL\n                SELECT parent FROM parent_of JOIN ancestor USING(uid) )\n\t\t\t\tSELECT * from ancestor").then(function(a){return a.filter(function(a){return null!==a.uid}).map(function(a){return a.uid})})};a.prototype.Db=function(a){return this.ga.raw("\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM entity_types),\n                ancestor(parent) AS (\n                SELECT uid FROM parent_of WHERE uid="+a+"\n                UNION ALL\n                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\n\t\t\t\tSELECT * from ancestor").then(function(a){return a.filter(function(a){return null!==
a.parent}).map(function(a){return a.parent})})};a.prototype.Sc=function(a){return Promise.all([this.ga.bc(a).select(this.ga.raw("SUM((records.value_type != predicates.range_type)) AS valid")).from("records").Ua("predicates","records.predicate","predicates.uid"),this.ga.bc(a).select(this.ga.raw("\n                SUM((\n\n                entities.type not in (\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM entity_types),\n                                ancestor(parent) AS (\n                                SELECT uid FROM parent_of WHERE uid=predicates.range_ref\n                                UNION ALL\n                                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\n                                SELECT * from ancestor\n                )\n\n                )) as valid\n            ")).from("records").Ua("predicates",
"records.predicate","predicates.uid").Ua("entities","entities.uid","records.value_entity").v("records.value_type","=","entity"),this.ga.bc(a).select(this.ga.raw("\n               SUM((\n\n                entities.type not in (\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM entity_types),\n                                ancestor(parent) AS (\n                                SELECT uid FROM parent_of WHERE uid=predicates.domain\n                                UNION ALL\n                                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\n                                SELECT * from ancestor\n                )\n\n                )) as valid\n            ")).from("records").Ua("predicates",
"records.predicate","predicates.uid").Ua("entities","entities.uid","records.entity")]).then(function(a){var b=F(a);a=F(b.next().value).next().value;var c=F(b.next().value).next().value,b=F(b.next().value).next().value;return 0===a.valid+c.valid+b.valid})};d.Database=a},function(g,d,c){function a(a,c,e){a.get("/api/v1/"+b.f.Z+"/:source/:element",function(){function a(a){for(;;)switch(d){case 0:return f=g,d=1,{value:c.getItem(e[b.f.Z],b.f.Z,{order:["source","element"],values:{source:g.P.source,element:g.P.element}}).then(function(a){return f.body=
a.B()}),done:!1};case 1:if(void 0===a){d=2;break}d=-1;throw a;case 2:d=-1;default:return{value:void 0,done:!0}}}var d=0,f,g=this,h={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();h[Symbol.iterator]=function(){return this};return h});a.put("/api/v1/"+b.f.Z+"/:source/:element",function(){function a(a){for(;;)switch(d){case 0:return f=g,d=1,{value:c.ta(e[b.f.Z],b.f.Z,{order:["source","element"],values:{source:g.P.source,element:g.P.element}},
g.request.body).then(function(a){return f.body=a}),done:!1};case 1:if(void 0===a){d=2;break}d=-1;throw a;case 2:d=-1;default:return{value:void 0,done:!0}}}var d=0,f,g=this,h={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();h[Symbol.iterator]=function(){return this};return h});a.Zf("/api/v1/"+b.f.Z+"/:source/:element",function(){function a(a){for(;;)switch(d){case 0:return f=g,d=1,{value:c.L(e[b.f.Z],b.f.Z,{order:["source",
"element"],values:{source:g.P.source,element:g.P.element}},g.request.body).then(function(a){return f.body=a}),done:!1};case 1:if(void 0===a){d=2;break}d=-1;throw a;case 2:d=-1;default:return{value:void 0,done:!0}}}var d=0,f,g=this,h={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();h[Symbol.iterator]=function(){return this};return h});a.ra("/api/v1/"+b.f.Z+"/:source/:element",function(){function a(a){for(;;)switch(d){case 0:return f=
g,d=1,{value:c.Ha(e[b.f.Z],b.f.Z,{order:["source","element"],values:{source:g.P.source,element:g.P.element}}).then(function(a){return f.body=a}),done:!1};case 1:if(void 0===a){d=2;break}d=-1;throw a;case 2:d=-1;default:return{value:void 0,done:!0}}}var d=0,f,g=this,h={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();h[Symbol.iterator]=function(){return this};return h})}var b=c(110),e=c(109),f=c(108);d.yg=function(a){var c=
new Map([[b.f.Tb,new f.gc(a)],[b.f.M,new f.lc(a)],[b.f.H,new f.ic(a)],[b.f.o,new f.hc(a)],[b.f.c,new f.kc(a)],[b.f.source,new f.nc(a)],[b.f.element,new f.fc(a)],[b.f.Z,new f.oc(a)]]);return new b.Se(a,c,new e.Ne(a),!0)};d.l=function(c,d){var e={},g=(e[b.f.Tb]=f.Mb,e[b.f.M]=f.Za,e[b.f.H]=f.Nb,e[b.f.o]=f.nb,e[b.f.c]=f.qb,e[b.f.source]=f.Qb,e[b.f.element]=f.Lb,e[b.f.Z]=f.Pb,e);c.use(function(a){function b(b){for(;;)switch(c){case 0:if("GET"!==d.eg.method&&!d.eh()){c=1;break}c=3;return{value:a,done:!1};
case 3:if(void 0===b){c=4;break}c=-1;throw b;case 4:c=2;break;case 1:d.status=403,d.body="You must be authorised to modify this resource";case 2:c=-1;default:return{value:void 0,done:!0}}}var c=0,d=this,e={next:function(){return b(void 0)},throw:function(a){return b(a)},return:function(){throw Error("Not yet implemented");}};A();e[Symbol.iterator]=function(){return this};return e});c.use(function(a){function b(b){for(;;)switch(c){case 0:f=g;try{return c=3,{value:a,done:!1}}catch(B){e=B;c=1;break}case 3:try{if(void 0===
b){c=4;break}c=-1;throw b;}catch(B){e=B;c=1;break}case 4:try{c=2;break}catch(B){e=B;c=1;break}case 1:d=e;switch(d.constructor.name){case "KeyNotFoundException":g.status=404;break;case "CollectionNotFoundException":g.status=404;break;case "OperationNotPermittedException":g.status=422;break;default:g.status=500}g.type="application/json";if(void 0===d.data){c=5;break}c=7;return{value:d.data.data.then(function(a){f.body=JSON.stringify(Object.assign({},d.data,{data:a}))}),done:!1};case 7:if(void 0===b){c=
8;break}c=-1;throw b;case 8:c=6;break;case 5:g.body=d.message;case 6:case 2:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,e,f,g=this,h={next:function(){return b(void 0)},throw:function(a){return b(a)},return:function(){throw Error("Not yet implemented");}};A();h[Symbol.iterator]=function(){return this};return h});c.get("/api/v1/query",function(){function a(a){for(;;)switch(b){case 0:return c=e,b=1,{value:d.bg.jg(e.query.query).then(function(a){return c.body=a}),done:!1};case 1:if(void 0===
a){b=2;break}b=-1;throw a;case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,c,e=this,f={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();f[Symbol.iterator]=function(){return this};return f});a(c,d,g);c.get("/api/v1/:route/:id",function(){function a(a){for(;;)switch(b){case 0:return c=e,b=1,{value:d.getItem(g[e.P.Na],e.P.Na,parseInt(e.P.id)).then(function(a){return c.body=a.B()}),done:!1};case 1:if(void 0===a){b=2;
break}b=-1;throw a;case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,c,e=this,f={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();f[Symbol.iterator]=function(){return this};return f});c.get("/api/v1/:route",function(){function a(a){for(;;)switch(b){case 0:return c=e,b=1,{value:d.hb(g[e.P.Na],e.P.Na,e.query).then(function(a){return c.body=a.map(function(a){return a.B()})}),done:!1};case 1:if(void 0===a){b=2;break}b=
-1;throw a;case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,c,e=this,f={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();f[Symbol.iterator]=function(){return this};return f});c.nh("/api/v1/:route",function(){function a(a){for(;;)switch(b){case 0:return c=e,b=1,{value:d.ha(g[e.P.Na],e.P.Na,Object.assign(e.request.body,{O:e.eg.re.uid})).then(function(a){return c.body=a}),done:!1};case 1:if(void 0===a){b=2;break}b=-1;
throw a;case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,c,e=this,f={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();f[Symbol.iterator]=function(){return this};return f});c.put("/api/v1/:route/:id",function(){function a(a){for(;;)switch(b){case 0:return c=e,b=1,{value:d.ta(g[e.P.Na],e.P.Na,parseInt(e.P.id),e.request.body).then(function(a){return c.body=a}),done:!1};case 1:if(void 0===a){b=2;break}b=-1;throw a;case 2:b=
-1;default:return{value:void 0,done:!0}}}var b=0,c,e=this,f={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();f[Symbol.iterator]=function(){return this};return f});c.Zf("/api/v1/:route/:id",function(){function a(a){for(;;)switch(b){case 0:return c=e,b=1,{value:d.L(g[e.P.Na],e.P.Na,parseInt(e.P.id),e.request.body).then(function(a){return c.body=a}),done:!1};case 1:if(void 0===a){b=2;break}b=-1;throw a;case 2:b=-1;default:return{value:void 0,
done:!0}}}var b=0,c,e=this,f={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();f[Symbol.iterator]=function(){return this};return f});c.ra("/api/v1/:route/:id",function(){function a(a){for(;;)switch(b){case 0:return c=e,b=1,{value:d.Ha(g[e.P.Na],e.P.Na,parseInt(e.P.id)).then(function(a){return c.body=a}),done:!1};case 1:if(void 0===a){b=2;break}b=-1;throw a;case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,c,e=this,
f={next:function(){return a(void 0)},throw:function(b){return a(b)},return:function(){throw Error("Not yet implemented");}};A();f[Symbol.iterator]=function(){return this};return f});return c}},function(g){g.fa=require("electron")},function(g){g.fa=require("react-dom")},function(g,d){function c(){}c.prototype.u=function(a){this.name=a.name;this.uid=a.uid;this.cd=a.cd;this.description=a.description;this.Wc=a.Wc;return this};c.prototype.B=function(){return this};d.Element=c},function(g,d){function c(){}
c.prototype.u=function(a){this.name=a.name;this.uid=a.uid;this.uri=a.uri;this.description=a.description;this.elements=a.elements;return this};c.prototype.B=function(){return this};d.fb=c},function(g,d){function c(){}c.prototype.u=function(a){this.uid=a.uid;this.A=a.A;this.label=a.label;this.parent=a.parent;this.O=a.O;this.G=a.G;this.C=a.C;return this};c.prototype.B=function(){return this};d.Entity=c},function(g,d){function c(){}c.prototype.u=function(a){this.uid=a.uid;this.name=a.name;this.description=
a.description;this.icon=a.icon;this.Uc=a.Uc;this.W=a.W;this.parent=a.parent;this.Da=a.Da;this.O=a.O;this.children=a.children;this.G=a.G;this.C=a.C;return this};c.prototype.B=function(){return this};d.wa=c},function(g,d){function c(){}c.prototype.B=function(){return this};c.prototype.u=function(a){this.uid=a.uid;this.domain=a.domain;this.J=a.J;this.name=a.name;this.description=a.description;this.W=a.W;this.ud=a.ud;this.V=a.V;this.O=a.O;this.G=a.G;this.C=a.C;return this};d.xa=c},function(g,d){function c(){this.valueType=
null}c.prototype.u=function(a){this.uid=a.uid;this.source=a.source;this.c=a.c;this.o=a.o;this.lb=a.lb;this.valueType=a.valueType;this.value=a.value;this.O=a.O;this.Gb=a.Gb;this.G=a.G;this.C=a.C;return this};c.prototype.B=function(){return this};d.da=c},function(g,d){function c(){}c.prototype.B=function(){return this};c.prototype.u=function(a){this.name=a.name;this.uid=a.uid;this.Ca=a.Ca;this.W=a.W;this.parent=a.parent;this.Da=a.Da;this.children=a.children;this.O=a.O;this.G=a.G;this.C=a.C;return this};
d.pa=c},function(g,d){function c(){}c.prototype.u=function(a){this.uid=a.uid;this.value=a.value;this.O=a.O;this.G=a.G;this.C=a.C;return this};c.prototype.B=function(){return this};d.Fa=c},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.Element.apply(this,arguments)}var e=c(40),f=c(6);G(b,e.Element);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return this.B()};b.prototype.w=function(a){this.u(a);return this};b.g="elements";d.Lb=b;G(a,f.j);d.fc=a},function(g,d,c){function a(a){f.j.call(this,
a,b.g)}function b(a){e.fb.apply(this,arguments)}var e=c(41),f=c(6),k=c(1);G(b,e.fb);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return k.ca(this.B(),"elements")};b.prototype.w=function(a){this.u(a);return this};b.g="element_sets";d.Mb=b;G(a,f.j);a.prototype.la=function(a,b){var c=this;return f.j.prototype.la.call(this,a,b).then(function(a){if(null===a.uid)throw Error("could not find source");return c.db.select("elements").v({element_set:a.uid}).then(function(b){a.elements=b;return a})})};
d.gc=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.wa.apply(this,arguments)}var e=c(43),f=c(6),k=c(26),l=c(25),h=c(11),q=c(1);G(b,e.wa);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return Object.assign(q.ca(this.B(),"sameAs","parents","children","creationTimestamp","lastmodifiedTimestamp"),{Oa:this.W,Ga:this.G,La:this.C})};b.prototype.w=function(a){this.u(Object.assign(a,{sameAs:a.Oa}));return this};b.g="entity_types";d.Nb=b;G(a,f.j);a.prototype.la=function(a,
b){var c=this;return f.j.prototype.la.call(this,a,b).then(function(e){return Promise.all([c.db.wc(b).then(function(b){return c.db.select("entity_types").mb("uid",b).then(function(b){return b.map(function(b){return(new a).w(b)})})}),c.db.select("entity_types",["uid"]).v({parent:b})]).then(function(a){var b=F(a);a=b.next().value;b=b.next().value;e.Da=a;e.children=b.map(function(a){return a.uid});return e})})};a.prototype.T=function(a,c){var e=this;return Promise.all([this.db.select(b.g).v("parent",
"=",c),this.db.select("entities").v("type","=",c),this.db.select("predicates").v("domain","=",c).Xf("range_ref","=",c)]).then(function(a){var d=F(a);a=d.next().value;var f=d.next().value,d=d.next().value;if(0===f.length+a.length+d.length)return e.db.T(e.g,c);throw new h.S({message:"The operation could not be completed as the entity is referenced in other sources",data:Promise.resolve({A:a.map(function(a){return(new b).w(a)}),o:f.map(function(a){return(new l.nb).w(a)}),c:d.map(function(a){return(new k.qb).w(a)})})});
})};d.ic=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.pa.apply(this,arguments)}var e=c(46),f=c(6),k=c(11),l=c(18),h=c(1);G(b,e.pa);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return Object.assign({},h.ca(this.B(),"metaData","sameAs","parents","children","creationTimestamp","lastmodifiedTimestamp"),{Oa:this.W,Ga:this.G,La:this.C})};b.prototype.w=function(a){this.u(Object.assign(a,{sameAs:a.Oa}));return this};b.g="sources";d.Qb=b;G(a,f.j);a.prototype.getMetadata=
function(a,b){var c=this;return this.db.query().raw("\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM sources),\n                ancestor(uid) AS (\n                SELECT parent FROM parent_of WHERE uid=?\n                UNION ALL\n                SELECT parent FROM parent_of JOIN ancestor USING(uid) )\n            \n            SELECT *\n                FROM ancestor;\n        ",b).then(function(e){e=h.map(e,"uid");e.pop();e=[b].concat(e);return Promise.all(e.map(function(b){return c.db.query().select(a).from("source_elements").Ua("elements",
function(){this.pd("source_elements.element","=","elements.uid")}).Ua("element_sets",function(){this.pd("element_sets.uid","=","elements.element_set")}).v({"source_elements.source":b})})).then(function(a){var b=h.ed(h.Lf(a),"name");return Object.keys(b).reduce(function(a,c){var d=h.ca(b[c][0],"source","value");d.values=b[c].map(function(a){return{source:a.source,value:a.value,uid:a.uid}}).sort(function(a,b){return e.indexOf(a.source)-e.indexOf(b.source)});var f={};return Object.assign(a,(f[c]=d,f))},
{})})})};a.prototype.la=function(a,b){var c=this;return f.j.prototype.la.call(this,a,b).then(function(a){if(null===a.uid)throw Error("could not find source");return Promise.all([c.getMetadata("source_elements.source as source;elements.name;source_elements.value;elements.description;element_sets.name as element_set;elements.comment;elements.uri;elements.uid as element_uid".split(";"),a.uid),c.db.query().select("uid").from("sources").v({parent:b}),c.db.query().raw("\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM sources),\n                    ancestor(uid) AS (\n                    SELECT parent FROM parent_of WHERE uid=?\n                    UNION ALL\n                    SELECT parent FROM parent_of JOIN ancestor USING(uid) )\n                    \n                    SELECT uid\n                    FROM ancestor;\n                ",
b)]).then(function(b){var c=F(b);b=c.next().value;var e=c.next().value,c=c.next().value;a.Ca=b;a.children=e.map(function(a){return a.uid}).filter(function(a){return null!==a});a.Da=c.map(function(a){return a.uid}).filter(function(a){return null!==a});return a})})};a.prototype.ya=function(a,b){b=void 0===b?{}:b;var c=this;return f.j.prototype.ya.call(this,a,b).then(function(a){return Promise.all(a.map(function(a){if(null===a.uid)throw Error("could not find source");return c.getMetadata(["elements.name",
"source_elements.value"],a.uid).then(function(b){a.Ca=b;return a})}))})};a.prototype.T=function(a,c){var e=this;return Promise.all([this.db.jb("records",{source:c}),this.db.jb("sources",{parent:c})]).then(function(a){var d=F(a);a=d.next().value;d=d.next().value;if(0===a.length+d.length)return e.db.T(e.g,c);throw new k.S({message:"The operation could not be completed as the source is used by other records",data:Promise.resolve({M:a.map(function(a){return(new l.Za).w(a)}),source:d.map(function(a){return(new b).w(a)})})});
})};d.nc=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.Fa.apply(this,arguments)}var e=c(47),f=c(6),k=c(11),l=c(1);G(b,e.Fa);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return Object.assign(l.ca(this.B(),"creationTimestamp","lastmodifiedTimestamp","uid"),{Ga:this.G,La:this.C,source:this.uid.values.source,element:this.uid.values.element})};b.prototype.w=function(a){this.u(Object.assign(a,{uid:{order:["source","element"],values:{source:a.source,element:a.element}}}));
return this};b.g="source_elements";d.Pb=b;G(a,f.j);a.prototype.la=function(a,b){return this.db.query().select().from(this.g).v(b.values).first().then(function(a){return void 0===a?Promise.reject(new k.ob):a}).then(function(b){return(new a).w(b)})};a.prototype.ta=function(a,b,c){return this.db.query()(this.g).v(b.values).update(l.ca(c.U(),["tableName"]))};a.prototype.L=function(a,b,c){a=(new a).u(c).U();c=Object.keys(a);for(var e={},d=0;d<c.length;d+=1)void 0!==a[c[d]]&&(e[c[d]]=a[c[d]]);return this.db.query()(this.g).v(b.values).update(e).then(function(){return!0}).catch(function(a){throw Error(a);
})};a.prototype.T=function(a,b){return this.db.query()(this.g).v(b.values).ra()};d.oc=a},function(g,d,c){var a=c(0),b=c(31);d.ve=function(c){return a.createElement("div",{className:"page"},a.createElement("section",null,a.createElement("h1",null,"VRE App"),null!==c.ua?a.createElement(b.Jd,{ua:c.ua}):null))}},function(g,d,c){g=c(34);c=c(4);d.Df={all:{o:{value:[],Va:null},H:{value:[],Va:null},c:{value:[],Va:null},source:{value:[],Va:null},Zd:{value:new c.fb,Va:null}},F:{o:g.Map(),H:g.Map(),c:g.Map(),
source:g.Map()}};d.Ef=[{o:g.Map()},{H:g.Map()},{c:g.Map()},{source:g.Map()}]},function(g,d,c){var a=c(0);d.Le=function(){return a.createElement("div",{className:"loader-wrapper"},a.createElement("div",{className:"loader"}))}},function(g,d,c){function a(){e.s.call(this);this.ie=function(a){var b=a.kh,c=a.ih;h.Hb.I(function(a){return r.Ig(a,b,c)})};this.state={X:"",Xc:!1}}var b=this,e=c(0),f=c(79),k=c(2),l=c(10),h=c(3),q=c(1),r=c(117),u=r.Fg(function(a){return e.createElement("li",{key:""+a.url},e.createElement("div",
{className:function(b){var c=["sidebar-card"];b&&c.push("current");a.compact&&c.push("compact");return c.join(" ")}(a.Ud)},e.createElement("div",{className:"badge-container"},e.createElement("div",{className:"badge "+a.tab.D},e.createElement("span",null,a.tab.D[0].toUpperCase()))),e.createElement("div",{className:"description"},e.createElement(l.oa,{va:a.url},e.createElement("span",{className:"entity-name"},a.title),a.compact?null:e.createElement("span",{className:"entity-type"},a.qg))),a.Ud?null:
e.createElement("span",{className:"close-button"},e.createElement("i",{className:"fa fa-times",h:function(c){return b.Sa(c,a.tab.D,a.tab.uid)}}))))}),t=r.Eg(function(a){return e.createElement("ul",{className:"card-list"},a.cb?null:a.F.map(function(b,c){var d=a.b.all[b.D].value.find(function(a){return a.uid==b.uid});if(void 0===d)return null;var f="/edit/"+k.f[b.D]+"/"+b.uid,d="entity"===b.D?d.label:d.name,g=q.Mg(k.f[b.D]).replace("_"," ")+" "+b.uid;return e.createElement(u,{key:"tab-"+c,Ud:!a.list&&
b.D===a.R&&b.uid==a.id,url:f,tab:b,title:d,qg:g,index:c,compact:a.compact})}))});G(a,e.s);a.prototype.Sa=function(a,b,c){h.Sa.I(b,c);a.stopPropagation();a.preventDefault();a.hh.stopImmediatePropagation()};a.prototype.K=function(){var a=this;return e.createElement("section",{id:"sidebar"},e.createElement(f.Id,{X:this.state.X,b:this.a.b,m:function(b){return a.i({X:b.currentTarget.value})}}),e.createElement("div",{className:"sidebar-toolbar"},e.createElement("button",{h:this.a.vf},e.createElement("i",
{className:"fa fa-trash"})," Clear All"),e.createElement("button",{h:function(){return a.i({Xc:!a.state.Xc})}},e.createElement("i",{className:"fa fa-compress"})," Compact")),e.createElement("div",{className:"card-list-container"},e.createElement(t,{b:this.a.b,cb:this.a.cb,F:this.a.F,list:this.a.list,R:this.a.R,id:this.a.id,compact:this.state.Xc,ie:this.ie})))};d.Te=a},function(g,d,c){function a(){b.s.call(this);this.state={ac:[],he:0};this.mf=this.df.bind(this);e.yd.add(this.mf)}var b=c(0),e=c(3);
G(a,b.s);a.prototype.df=function(a,b,c,e){e=void 0===e?3E3:e;var d=this,f=this.state.he;this.i({ac:this.state.ac.concat([{title:a,message:b,level:void 0===c?"warning":c,fh:e,id:f}]),he:f+1});setTimeout(function(){d.i({ac:d.state.ac.filter(function(a){return a.id!==f})})},e)};a.prototype.K=function(){return b.createElement("span",null,this.state.ac.map(function(a,c){return b.createElement("div",{key:"toast-"+a.id,style:{bottom:1+7*c+"em"},className:"toast "+a.level},b.createElement("div",{className:"title"},
a.title),b.createElement("div",{className:"message"},a.message))}))};d.We=a},function(g,d,c){function a(){b.s.call(this);this.state={X:""}}var b=c(0),e=c(55),f=c(87);G(a,b.s);a.prototype.K=function(){if(this.a.cb)return b.createElement(e.Le,null);if(this.a.list)return b.createElement(f.Nc,{l:this.a.l,name:this.a.name,query:this.a.location.query,Of:this.a.R,b:this.a.b});var a=f.Kc;switch(this.a.R){case "entity":a=f.Lc;break;case "predicate":a=f.Oc;break;case "source":a=f.Qc;break;case "entity_type":a=
f.Mc;break;case "search":a=f.Gc}return b.createElement("div",{className:"flex-fill workspace-outer-wrapper"},b.createElement("div",{className:"workspace-inner-wrapper flex-fill"},b.createElement(a,{l:this.a.l,b:this.a.b,id:this.a.id})))};d.Ze=a},function(g,d,c){var a=c(0),b=c(66);d.Dd=function(c){return a.createElement("div",{className:"date-selector"},a.createElement(b.Ee,{value:c.value,ia:c.m}))}},function(g,d,c){var a=c(0),b=c(7),e=c(1);d.Fe=function(c){var d=c.entities.map(function(a){return{key:a.label,
value:a.uid}}),f=d.find(function(a){return a.value==c.value});void 0===f&&(f={key:"",value:""});return a.createElement(b.Pa,{options:d,typeName:"entity type",Ra:!1,value:f,ia:function(a){return c.m(a.value)},Ta:e.Fb})}},function(g,d,c){var a=c(0);d.Ke=function(b){return a.createElement("input",{type:"number",value:b.value,m:function(a){return b.m(a.target.value)}})}},function(g,d,c){function a(){e.s.call(this);this.state={$f:[]}}function b(a){l.N.apply(this,arguments)}var e=c(0),f=c(2),k=c(4),l=c(13),
h=c(63),q=c(5);G(b,l.N);G(a,e.s);a.prototype.rc=function(){this.a.l.ha(k.da,f.f.M,(new k.da).u({c:this.a.c.uid,o:this.a.ae,valueType:this.a.c.V?"entity":this.a.c.J,lb:3}))};a.prototype.Vd=function(a){var b=this;if(null===a.uid)throw Error("Trying to delete a record with null id");this.a.l.Ha(k.da,f.f.M,a.uid).then(function(){b.a.m()})};a.prototype.je=function(a){this.a.l.ta(k.da,f.f.M,this.a.ae,a.B())};a.prototype.K=function(){var a=this;return e.createElement("section",null,e.createElement("h5",
{className:"section-header"},this.a.c.name," ",e.createElement("i",{className:"fa fa-plus-circle add button","aria-hidden":"true",h:this.rc.bind(this),title:"Add new "+this.a.c.name+" record"}),e.createElement(q.ka,{b:this.a.b,uid:this.a.c.uid,D:"predicate"})),e.createElement("table",{className:"record-editing-table"},e.createElement("thead",null,e.createElement("tr",{className:"record-row title"},e.createElement("th",{className:"record-row-item uid"},"ID"),"source"!==this.a.c.J?e.createElement("th",
{className:"record-row-item"},"Value"):null,e.createElement("th",{className:"record-row-item"},"Source"),e.createElement("th",{className:"record-row-item score"},"Score"),e.createElement("th",{className:"record-row-item score"},"Period"),e.createElement("th",{className:"record-row-item buttons"},"Actions"))),e.createElement("tbody",null,this.a.kb.map(function(c){return e.createElement(b,{key:"row-"+c.uid,value:c,m:a.je.bind(a),Cc:a.Vd.bind(a),aa:h.Pe,pc:{Wd:"predicates",Ib:a.a.Ib,entities:a.state.$f,
b:a.a.b}})}))))};d.Oe=a},function(g,d,c){function a(a){if("entity"===a.value.valueType){var b=a.entities.find(function(b){return b.uid==a.value.value});return void 0!==b?f.createElement("span",null,b.label," ",f.createElement(p.ka,{b:a.b,uid:b.uid,D:"entity"})):f.createElement("em",null,"Missing Entity")}return"date"===a.value.valueType?z.vc(a.value.value):a.value.value}function b(a){switch(a.value.valueType){case "string":return f.createElement(q.Ve,{value:a.value.value||"",m:function(b){return a.m(Object.assign(a.value,
{value:b}))}});case "date":return f.createElement(u.Dd,{value:a.value.value||"",m:function(b){return a.m(Object.assign(a.value,{value:b}))}});case "integer":return f.createElement(t.Ke,{value:a.value.value||"",m:function(b){return a.m(Object.assign(a.value,{value:b}))}});case "entity":return f.createElement(r.Fe,{value:a.value.value||"",m:function(b){return a.m(Object.assign(a.value,{value:b}))},entities:a.entities});default:return f.createElement("div",null,"Missing editor")}}function e(a){h.showModal.I({name:"source",
complete:function(){},cancel:function(){console.log("cancel")},Y:{Mf:a}})}var f=c(0);g=c(13);d.N=g.N;var k=c(67),l=c(7),h=c(3),q=c(65),r=c(60),u=c(59),t=c(61),p=c(5),z=c(22);d.Pe=function(c){var d=c.value;if(null===d)throw Error("Should not be null!!");var g=c.Ib.find(function(a){return a.uid===d.source}),h={key:"",value:c.value.source};void 0!==g&&(h.key=g.name);return c.Ea?f.createElement("tr",{className:"record-row"},f.createElement("td",{className:"record-row-item uid"},c.value.uid),"source"!==
d.valueType?f.createElement("td",{className:"record-row-item"},b(c)):null,f.createElement("td",{className:"record-row-item"},f.createElement(l.Pa,{options:c.Ib.map(function(a){return{key:a.name,value:a.uid}}),typeName:"source",value:h,ia:function(a){return c.m(Object.assign(c.value,{source:a.value}))},Ta:e})),f.createElement("td",{className:"record-row-item score"},f.createElement(k.Hd,{value:c.value.lb,readOnly:!1,m:function(a){return c.m(Object.assign(c.value,{lb:a}))}})),f.createElement("td",{className:"record-row-item period"},
f.createElement(u.Dd,{value:c.value.Gb||"",m:function(a){return c.m(Object.assign(c.value,{Gb:a}))}})),f.createElement("td",{className:"record-row-item buttons"},f.createElement("button",null,f.createElement("i",{className:"fa fa-check",h:c.rb,"aria-hidden":"true"})),f.createElement("button",null,f.createElement("i",{className:"fa fa-times","aria-hidden":"true",h:c.tb})))):f.createElement("tr",{className:"record-row"},f.createElement("td",{className:"record-row-item uid"},"#",c.value.uid),"source"!==
d.valueType?f.createElement("td",{className:"record-row-item"},a(c)):null,f.createElement("td",{className:"record-row-item"},h.key,0<h.key.length?f.createElement(p.ka,{b:c.b,uid:h.value,D:"source"}):null),f.createElement("td",{className:"record-row-item score"},f.createElement(k.Hd,{value:c.value.lb,readOnly:!0})),f.createElement("td",{className:"record-row-item period"},z.vc(c.value.Gb)),f.createElement("td",{className:"record-row-item buttons"},f.createElement("button",null,f.createElement("i",
{className:"fa fa-pencil-square-o",title:"Edit",h:c.Yb,"aria-hidden":"true"})),f.createElement("button",null,f.createElement("i",{className:"fa fa-trash","aria-hidden":"true",h:c.Cc}))))}},function(g,d,c){function a(){e.s.call(this);this.state={Ia:function(){return!0}}}function b(a){l.N.apply(this,arguments)}var e=c(0),f=c(2),k=c(4),l=c(13),h=c(14),q=c(62),r=c(28),u=c(3);G(b,l.N);G(a,e.s);a.prototype.Vd=function(a){var b=this;if(null===a.uid)throw Error("Trying to delete a record with null id");this.a.l.Ha(k.da,
f.f.M,a.uid).then(function(){b.a.m()})};a.prototype.je=function(a){this.a.l.ta(k.da,f.f.M,this.a.id,a.B())};a.prototype.rc=function(){var a=this.a.b.F.o.get("entity-"+this.a.id).value.o;this.a.b.all.H.value.find(function(b){return b.uid===a.A});var b=r.uc(a.A,this.a.b.all.H.value),c={name:"record",complete:function(){console.log("Records editor called complete")},cancel:function(){console.log("Records editor called cancel")},Y:{options:this.a.b.all.c.value.filter(function(a){return-1!==b.indexOf(a.domain)}).map(function(a){return{key:a.name,
value:a.uid,za:a}}),$d:this.a.id,A:this.a.Gf}};u.showModal.I(c)};a.prototype.K=function(){var a=this,b=this.a.rd;return e.createElement("div",null,e.createElement("div",null,e.createElement("div",null,e.createElement("label",{className:"small"},"Records"),e.createElement("div",{style:{display:"flex"}},e.createElement("div",{style:{flex:"1"}},e.createElement(h.mc,{xc:function(a){return a.name},Fc:function(b){return a.i({Ia:b})}})),e.createElement("div",{style:{padding:"0.1em 0.4em",fontSize:"2em"}},
e.createElement("i",{className:"fa fa-plus-circle add button","aria-hidden":"true",h:this.rc.bind(this),title:"Add new record"}))),e.createElement("div",null,Object.keys(this.a.kb).map(function(c){var d=b.find(function(a){if(null===a.uid)throw Error("encountered predicate with null id");return a.uid.toString()===c});if(void 0===d)throw Error("Could not find predicate");return a.state.Ia(d)?e.createElement(q.Oe,{b:a.a.b,key:"section-"+c,ae:a.a.id,l:a.a.l,Wd:"predicate",kb:a.a.kb[c],c:d,Ib:a.a.Ib,m:a.a.m}):
null})))))};d.Qe=a},function(g,d,c){var a=c(0);d.Ve=function(b){return a.createElement("input",{type:"text",value:b.value,m:function(a){return b.m(a.target.value)}})}},function(g,d,c){function a(){var a=this;b.s.call(this);this.state={na:!1};void 0!==document&&(this.nf=function(){a.kd?a.kd=!1:a.i({na:!1})},document.body.addEventListener("click",this.nf))}var b=c(0),e=c(16),f=c(1),k=c(22);G(a,b.s);a.prototype.fd=function(){this.Ja?this.Ja=!1:this.i({na:!1})};a.prototype.hd=function(){this.Ja?this.Ja=
!0:(this.zc=!0,this.i({na:!0}))};a.prototype.gd=function(){this.nd()&&!1===this.state.na?this.i({na:!0}):this.zc=!1};a.prototype.ne=function(a){var b=this;this.i({na:!1},function(){b.a.ia(a)})};a.prototype.nd=function(){var a=this.vd.Pg;return a.ownerDocument&&a===a.ownerDocument.activeElement};a.prototype.Vf=function(){this.kd=this.Ja=!0;console.log("clicked")};a.prototype.td=function(a){this.a.ia(a+this.a.value.substr(1))};a.prototype.zg=function(a){var b=9===this.a.value.length?this.a.value:"=XXXX0000";
a=a.target.value.substr(0,4).replace(/[^0-9]/g,"");for(var c=a.length;4>c;c+=1)a+="X";this.a.ia(b.substr(0,1)+a+b.substr(5))};a.prototype.Sf=function(a){this.kd=!0;var b=9===this.a.value.length?this.a.value:"=XXXX0000";this.a.ia(b.substr(0,5)+a.target.value.substr(0,2)+b.substr(7))};a.prototype.Af=function(a){var b=9===this.a.value.length?this.a.value:"=XXXX0000";a=a.target.value.substr(0,2).replace(/[^0-9]/g,"");a=f.Yf(a,2,"0");this.a.ia(b.substr(0,7)+a)};a.prototype.K=function(){function a(a){return a===
d?"range-option selected":"range-option"}var c=this,d=this.a.value.substr(0,1);-1===["<",">","="].indexOf(d)&&(d="=");var g=this.a.value.substr(1,4).replace(/X/g,""),u=this.a.value.substr(5,2),t="0"===this.a.value[7]?"0"===this.a.value[8]?"":this.a.value.substr(8,1):this.a.value.substr(7,2),p=k.vc(this.a.value);return b.createElement("div",{className:"combo-dropdown"},b.createElement("div",null,b.createElement("input",{type:"text",readOnly:!0,Xa:"datePickerDropDownInputBox",className:"search-input",
value:p,Uf:this.fd.bind(this),Wf:this.hd.bind(this),h:this.gd.bind(this)})),this.state.na?b.createElement("div",{className:"dropdown"},b.createElement("div",{className:"date-picker-dropdown",qd:this.Vf.bind(this)},b.createElement("section",{className:"range-type"},b.createElement("div",{className:a("<"),h:function(){return c.td("<")}},"Before"),b.createElement("div",{className:a("="),h:function(){return c.td("=")}},"Exactly"),b.createElement("div",{className:a(">"),h:function(){return c.td(">")}},
"After")),b.createElement("section",{className:"date-select"},b.createElement("div",{className:"date-selector day"},b.createElement("label",{className:"small"},"Day"),b.createElement("input",{type:"text",maxLength:2,value:t,m:this.Af.bind(this)})),b.createElement("div",{className:"date-selector month"},b.createElement("label",{className:"small"},"Month"),b.createElement("select",{m:this.Sf.bind(this),value:u},b.createElement("option",{value:"00"},"Unknown"),e.Tf().map(function(a,c){return b.createElement("option",
{key:"option-"+a,value:f.Yf((c+1).toString(),2,"0")},a)}))),b.createElement("div",{className:"date-selector year"},b.createElement("label",{className:"small"},"Year"),b.createElement("input",{type:"text",maxLength:4,value:g,m:this.zg.bind(this)}))))):null)};d.Ee=a},function(g,d,c){var a=c(0),b=c(1);d.Hd=function(c){var d=[1,2,3,4,5];if(c.readOnly)return a.createElement("span",{className:"score-picker"},d.map(function(b){return a.createElement("i",{key:b,className:"fa fa-star"+(b>c.value?"-o":""),
"aria-hidden":"true"})}));if(void 0===c.m)throw Error("An onChange handler is required");return a.createElement("span",{className:"score-picker editing"},b.reverse(d).map(function(b){return a.createElement("i",{key:b,className:"fa fa-star"+(b>c.value?"-o":""),h:function(){return c.m(b)},"aria-hidden":"true"})}))}},function(g,d,c){function a(){b.s.call(this);this.state={label:"",A:{key:"",value:""},Ld:[]}}var b=c(0),e=c(12);G(a,b.s);a.prototype.K=function(){var a=this;return b.createElement(e.yb,null,
b.createElement("h2",null,b.createElement("i",{className:"fa fa-exclamation-triangle warning"})," Conflict: ",this.a.message),void 0!==this.a.qa.M&&0<this.a.qa.M.length?b.createElement("span",null,b.createElement("p",null,"The following records conflict with your request change:"),b.createElement("table",{className:"table"},b.createElement("thead",null,b.createElement("tr",null,b.createElement("th",null,"Entity"),b.createElement("th",null,"Predicate"),b.createElement("th",null,"Value"))),b.createElement("tbody",
null,this.a.qa.M.map(function(c){var d=a.a.b.all.o.value.find(function(a){return a.uid==c.o}).label,e=a.a.b.all.c.value.find(function(a){return a.uid==c.c}).name;return b.createElement("tr",{key:"row-"+c.uid},b.createElement("td",null,d),b.createElement("td",null,e),b.createElement("td",null,c.value))})))):null,void 0!==this.a.qa.o&&0<this.a.qa.o.length?b.createElement("span",null,b.createElement("p",null,"The following entities conflict with your request change:"),b.createElement("table",{className:"table"},
b.createElement("thead",null,b.createElement("tr",null,b.createElement("th",null,"Entity"))),b.createElement("tbody",null,this.a.qa.o.map(function(a){return b.createElement("tr",{key:"row-"+a.uid},b.createElement("td",null,a.label))})))):null,void 0!==this.a.qa.A&&0<this.a.qa.A.length?b.createElement("span",null,b.createElement("p",null,"The following entity types conflict with your request change:"),b.createElement("table",{className:"table"},b.createElement("thead",null,b.createElement("tr",null,
b.createElement("th",null,"Entity Type"))),b.createElement("tbody",null,this.a.qa.A.map(function(a){return b.createElement("tr",{key:"row-"+a.uid},b.createElement("td",null,a.name))})))):null,void 0!==this.a.qa.source&&0<this.a.qa.source.length?b.createElement("span",null,b.createElement("p",null,"The following sources conflict with your request change:"),b.createElement("table",{className:"table"},b.createElement("thead",null,b.createElement("tr",null,b.createElement("th",null,"Sources"))),b.createElement("tbody",
null,this.a.qa.source.map(function(a){return b.createElement("tr",{key:"row-"+a.uid},b.createElement("td",null,a.name))})))):null,b.createElement("div",{className:"block-buttons"},b.createElement("button",{h:function(){return a.a.cancel()}},"Cancel"),b.createElement("button",{h:function(){return a.a.complete("addToWorkspace")}},b.createElement("i",{className:"icon-list-add"}),"Cancel and add conflicting records to workspace"),b.createElement("button",{h:function(){return a.a.complete("deleteAll")}},
b.createElement("i",{className:"fa fa-trash"})," Continue and delete all conflicting records")))};d.xe=a},function(g,d,c){function a(){b.s.call(this);this.state={label:"",A:{key:"",value:""},Ld:[]}}var b=c(0),e=c(12),f=c(4),k=c(2),l=c(7),h=c(1);G(a,b.s);a.prototype.Hc=function(){this.a.l.ha(f.Entity,k.f.o,(new f.Entity).u({label:this.state.label,A:this.state.A.value})).then(this.a.complete)};a.prototype.K=function(){var a=this;return b.createElement(e.yb,null,b.createElement("h2",null,"Create Entity"),
b.createElement("label",{className:"small"},"Label"),b.createElement("input",{type:"text",value:this.state.label,Xa:function(a){null!==a&&a.focus()},name:"new-entity-name",className:"gap",m:function(b){return a.i({label:b.target.value})}}),b.createElement("label",{className:"small"},"Type"),b.createElement(l.Pa,{options:this.state.Ld.map(function(a){return{key:a.name,value:a.uid.toString()}}),typeName:"entity type",value:this.state.A,ia:function(b){return a.i({A:b})},Ta:h.Fb,Ra:!1}),b.createElement("button",
{name:"cancel-modal",h:function(){return a.a.cancel()},className:"pull-left"},"Cancel"),b.createElement("button",{name:"create-entity",h:this.Hc.bind(this),className:"pull-right"},"Create Entity"))};d.Hc=a},function(g,d,c){function a(){b.s.call(this);this.state={Aa:""}}var b=c(0),e=c(12),f=c(4),k=c(2),l=c(17);G(a,b.s);a.prototype.xf=function(){this.a.l.ha(f.wa,k.f.H,(new f.wa).u({name:this.state.Aa})).then(this.a.complete)};a.prototype.md=function(a){null!==a?(a.focus(),this.ib=new l(a)):this.ib.Jb("return")};
a.prototype.K=function(){var a=this;return b.createElement(e.yb,null,b.createElement("h2",null,"Create Entity Type"),b.createElement("label",{className:"small"},"Name"),b.createElement("input",{type:"text",value:this.state.Aa,Xa:this.md.bind(this),m:function(b){return a.i({Aa:b.target.value})}}),b.createElement("button",{h:function(){return a.a.cancel()},className:"pull-left"},"Cancel"),b.createElement("button",{h:this.xf.bind(this),className:"pull-right"},"Create Entity Type"))};d.ye=a},function(g,
d,c){function a(){b.s.call(this);this.state={name:"",domain:{key:"",value:""},J:{key:"",value:""},sc:[],Dc:[]}}var b=c(0),e=c(12),f=c(27),k=c(4);c(30);var l=c(2);G(a,b.s);a.prototype.create=function(){var a=this,b=(new k.xa).u({name:this.state.name,domain:this.state.domain.value,J:this.state.J.value,V:"literal"!==this.state.J.za});this.a.l.ha(k.xa,l.f.c,b).then(function(c){b.uid=c[0];a.a.complete(b)})};a.prototype.K=function(){var a=this;return b.createElement(e.yb,null,b.createElement("h2",null,
b.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," Create Property"),b.createElement("label",{className:"small"},"Name"),b.createElement("input",{type:"text",className:"gap",Xa:function(a){null!==a&&a.focus()},value:this.state.name,m:function(b){return a.i({name:b.target.value})}}),b.createElement(f.Gd,{domain:this.state.domain,J:this.state.J,ad:function(b){return a.i({domain:b})},sd:function(b){return a.i({J:b})},sc:this.state.sc,Dc:this.state.Dc,mode:"editAll"}),b.createElement("div",
{className:"modal-toolbar"},b.createElement("button",{h:this.a.cancel,className:"pull-left"},"Cancel"),b.createElement("button",{h:this.create.bind(this),className:"pull-right"},"Create Property")))};d.ze=a},function(g,d,c){function a(){b.s.call(this);this.state={}}var b=c(0);c(4);c(2);c(3);G(a,b.s);a.prototype.K=function(){return null};a.lh=!0;d.Ae=a},function(g,d,c){function a(){b.s.call(this);this.state={Rd:{key:"",value:""},me:""}}var b=c(0),e=c(12),f=c(4),k=c(2),l=c(7),h=c(3);G(a,b.s);a.prototype.yf=
function(){var a=this;h.showModal.I({name:"predicate",complete:function(b){console.log("Predicate editor called complete");a.oe({key:b.name,value:b.uid.toString(),za:b})},cancel:function(){console.log("Predicate editor called cancel")},Y:{ld:this.state.me,Zg:this.a.A}})};a.prototype.oe=function(a){var b=this;this.a.l.ha(f.da,k.f.M,(new f.da).u({c:a.za.uid,o:this.a.$d,valueType:a.za.V?"entity":a.za.J,lb:3})).then(function(a){return b.a.complete(a)}).catch(this.a.cancel)};a.prototype.K=function(){var a=
this;return b.createElement(e.yb,null,b.createElement("h2",null,"Create Record"),b.createElement(l.Pa,{Xa:"comboDropDown",options:this.a.options,typeName:"predicate",value:this.state.Rd,ia:this.oe.bind(this),Ta:this.yf.bind(this),Ad:function(b){return a.i({me:b})}}))};d.Be=a},function(g,d,c){function a(){b.s.call(this);this.state={Aa:""}}var b=c(0),e=c(12),f=c(4),k=c(2),l=c(17);G(a,b.s);a.prototype.zf=function(){this.a.l.ha(f.pa,k.f.source,(new f.pa).u({name:this.state.Aa})).then(this.a.complete)};
a.prototype.md=function(a){null!==a?(a.focus(),this.ib=new l(a)):(this.ib.Jb("return"),this.ib.Jb("escape"))};a.prototype.K=function(){var a=this;return b.createElement(e.yb,null,b.createElement("h2",null,"Create Source"),b.createElement("label",{className:"small"},"Name"),b.createElement("input",{type:"text",value:this.state.Aa,Xa:this.md.bind(this),m:function(b){return a.i({Aa:b.target.value})}}),b.createElement("button",{h:function(){return a.a.cancel()},className:"pull-left"},"Cancel"),b.createElement("button",
{h:this.zf.bind(this),className:"pull-right"},"Create Source"))};a.Bf={Mf:""};d.Ce=a},function(g,d,c){function a(){e.s.call(this);this.state={entities:[],Ug:[],rd:[],$:[{c:-1,sort:"none",$a:"any",fe:!1,ab:""},{c:-1,sort:"none",$a:"any",fe:!1,ab:""},{c:-1,sort:"none",$a:"any",fe:!1,ab:""}],ke:[],A:{key:"Any",value:0}}}function b(a,b,c,d){return[0,1,2].map(function(f){var g={key:"",value:""};if(-1!==b[f].c){var l=a.find(function(a){return a.uid==b[f].c});void 0!==l&&(g.key=l.name);g.value=b[f].c}return e.createElement("td",
{key:"col-"+f},e.createElement("div",{className:"list-combo-header"},e.createElement("div",{className:"combo-wrapper"},e.createElement(h.Pa,{value:g,typeName:"predicate",Ra:!1,ia:function(a){return c(f,{c:null===a?null:a.value})},options:a.map(function(a){return{key:a.name,value:a.uid.toString()}}),Ta:q.Fb,compact:!0})),e.createElement("div",{className:"order-wrapper"},e.createElement("i",{className:p[b[f].sort],h:function(){return d(f)}}))))})}var e=c(0),f=c(115),k=c(2),l=c(4),h=c(7),q=c(1),r=c(5),
u=c(3),t=c(22),p={none:"fa fa-sort",asc:"fa fa-sort-asc",desc:"fa fa-sort-desc"};G(a,e.s);a.prototype.reload=function(){var a=this,b=this.state.$.filter(function(a){return-1!=a.c});this.a.l.hb(l.da,k.f.M,{c:b.map(function(a){return a.c}),o:this.a.b.all.o.value.map(function(a){return a.uid})}).then(function(b){return a.i({ke:b})})};a.prototype.sb=function(){u.showModal.I({name:"entity",complete:function(){},cancel:function(){console.log("cancel")},Y:{ld:""}})};a.prototype.zd=function(a,b){var c=q.Tc(this.state.$);
c[a]=Object.assign(c[a],b);this.i({$:c},this.reload.bind(this))};a.prototype.hg=function(a){var b=q.Tc(this.state.$);switch(b[a].sort){case "none":b[a].sort="asc";break;case "asc":b[a].sort="desc";break;case "desc":b[a].sort="none"}this.i({$:b},this.reload.bind(this))};a.prototype.K=function(){var a=this,c=this.a.b.all.o.value,d=this.a.b.all.c.value,g=this.a.b.all.H.value,l=g.map(function(a){return{key:a.name,value:a.uid}}),c=c.map(function(b){var c=g.find(function(a){return a.uid===b.A}),d=a.state.ke.filter(function(a){return a.o===
b.uid});return{uid:b.uid,label:b.label,A:c,$:a.state.$.map(function(b){var c="";if(void 0!==d&&-1!==b.c){var e=d.filter(function(a){return a.c==b.c});void 0!==e&&(c=e.map(function(b){return"date"===b.valueType?t.vc(b.value):"source"===b.valueType?null===b.value?"Not set":a.a.b.all.source.value.find(function(a){return a.uid===b.value}).name:"entity"===b.valueType?null===b.value?"Not set":a.a.b.all.o.value.find(function(a){return a.uid===b.value}).label:b.value}).join(", "));return c}})}}).filter(function(b){var c=
!0;a.state.$.forEach(function(a,d){"contains"===a.$a&&0<a.ab.length&&null!==a.c&&-1===b.$[d].toLowerCase().indexOf(a.ab.toLowerCase())&&(c=!1);"exists"===a.$a&&null!==a.c&&0===b.$[d].length&&(c=!1);"similar"===a.$a&&null!==a.c&&0<a.ab.length&&(new f(b.$[d],a.ab)).Rg>=a.ab.length+2&&(c=!1)});return c}).sort(function(b,c){var d=0;a.state.$.forEach(function(a,e){"none"!==a.sort&&b.$[e]!==c.$[e]&&(d+=(b.$[e]>c.$[e]?1:-1)*Math.pow(10,3-e)*("asc"===a.sort?-1:1))});return d});return e.createElement("div",
{className:"workspace-editor"},e.createElement("header",{className:"editor-header entity"},e.createElement("div",{className:"primary-toolbar"},e.createElement("div",{className:"main-toolbar"},e.createElement("h2",null,"All Entities ",e.createElement("i",{className:"fa fa-plus-circle add button",title:"Add new entity","aria-hidden":"true",h:this.sb.bind(this)}))))),e.createElement("section",{className:"editor-body"},e.createElement("table",{className:"table"},e.createElement("thead",null,e.createElement("tr",
null,e.createElement("td",null,"#"),e.createElement("td",null,"Label"),e.createElement("td",null,"Type"),b(d,this.state.$,this.zd.bind(this),this.hg.bind(this))),e.createElement("tr",null,e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,e.createElement(h.Pa,{value:this.state.A,typeName:"entity type",Ra:!1,ia:function(b){return a.i({A:b})},options:l,Ta:q.Fb,compact:!0})),this.state.$.map(function(b,c){return e.createElement("td",{key:"col-"+c},e.createElement("div",{className:"flex-fill"},
e.createElement("div",null,e.createElement("select",{value:b.$a,className:"padded",m:function(b){return a.zd(c,{$a:b.target.value})}},e.createElement("option",{value:"any"},"Any"),e.createElement("option",{value:"exists"},"Exists"),e.createElement("option",{value:"contains"},"Contains"),e.createElement("option",{value:"similar"},"Similar"))),e.createElement("div",null,e.createElement("input",{type:"text",disabled:"any"===b.$a||"exists"===b.$a,m:function(b){return a.zd(c,{ab:b.target.value})},value:b.ab}))))}))),
e.createElement("tbody",null,c.map(function(b){return e.createElement("tr",{key:"entity-"+b.uid},e.createElement("td",null,b.uid),e.createElement("td",null,b.label," ",e.createElement(r.ka,{b:a.a.b,uid:b.uid,D:"entity"})),e.createElement("td",null,b.A?b.A.name:""),[0,1,2].map(function(a){return e.createElement("td",{key:"col-val-"+a},b.$[a])}))})))))};d.Ge=a},function(g,d,c){function a(){b.s.call(this);this.state={Ia:function(){return!0}}}var b=c(0),e=c(5),f=c(3),k=c(14);G(a,b.s);a.prototype.sb=function(){f.showModal.I({name:"entity_type",
complete:function(){},cancel:function(){console.log("cancel")},Y:{}})};a.prototype.K=function(){var a=this;return b.createElement("div",{className:"workspace-editor"},b.createElement("header",{className:"editor-header entity_type"},b.createElement("div",{className:"primary-toolbar"},b.createElement("div",{className:"main-toolbar"},b.createElement("h2",null,"All Entity Types ",b.createElement("i",{className:"fa fa-plus-circle add button","aria-hidden":"true",title:"Add new entity type",h:this.sb.bind(this)}))))),
b.createElement("section",{className:"editor-body"},b.createElement(k.mc,{xc:function(a){return a.name},Fc:function(b){return a.i({Ia:b})}}),b.createElement("table",{className:"table gap"},b.createElement("thead",null,b.createElement("tr",null,b.createElement("td",null,"#"),b.createElement("td",null,"Name"),b.createElement("td",null,"Parent"),b.createElement("td",null,"Description"))),b.createElement("tbody",null,this.a.b.all.H.value.filter(this.state.Ia).map(function(c){return b.createElement("tr",
{key:"entityType-"+c.uid},b.createElement("td",null,c.uid," ",b.createElement(e.ka,{b:a.a.b,uid:c.uid,D:"entity_type"})),b.createElement("td",null,c.name),b.createElement("td",null,c.parent),b.createElement("td",null,c.description))})))))};d.He=a},function(g,d,c){function a(){b.s.call(this);this.state={Ia:function(){return!0}}}var b=c(0),e=c(5),f=c(3),k=c(14);G(a,b.s);a.prototype.sb=function(){f.showModal.I({name:"predicate",complete:function(){},cancel:function(){console.log("cancel")},Y:{ld:""}})};
a.prototype.K=function(){var a=this;return b.createElement("div",{className:"workspace-editor"},b.createElement("header",{className:"editor-header predicate"},b.createElement("div",{className:"primary-toolbar"},b.createElement("div",{className:"main-toolbar"},b.createElement("h2",null,"All Properties ",b.createElement("i",{className:"fa fa-plus-circle add button",title:"Add new property","aria-hidden":"true",h:this.sb.bind(this)}))))),b.createElement("section",{className:"editor-body"},b.createElement(k.mc,
{xc:function(a){return a.name},Fc:function(b){return a.i({Ia:b})}}),b.createElement("table",{className:"table gap"},b.createElement("thead",null,b.createElement("tr",null,b.createElement("td",null,"#"),b.createElement("td",null,"Label"),b.createElement("td",null,"Domain"),b.createElement("td",null,"Range"))),b.createElement("tbody",null,this.a.b.all.c.value.filter(this.state.Ia).map(function(c){var d=a.a.b.all.H.value.find(function(a){return a.uid===c.domain}),f=c.V?a.a.b.all.H.value.find(function(a){return a.uid===
c.J}):c.J;return b.createElement("tr",{key:"predicate-"+c.uid},b.createElement("td",null,c.uid," ",b.createElement(e.ka,{b:a.a.b,uid:c.uid,D:"predicate"})),b.createElement("td",null,c.name),b.createElement("td",null,d?d.name:""),b.createElement("td",null,c.V?f?f.name:"":f))})))))};d.Me=a},function(g,d,c){function a(){b.s.call(this);this.state={Ia:function(){return!0},mode:"list"}}var b=c(0),e=c(5),f=c(3),k=c(14);G(a,b.s);a.prototype.sb=function(){f.showModal.I({name:"source",complete:function(){},
cancel:function(){console.log("cancel")},Y:{}})};a.prototype.K=function(){var a=this;return b.createElement("div",{className:"workspace-editor"},b.createElement("header",{className:"editor-header source"},b.createElement("div",{className:"primary-toolbar"},b.createElement("div",{className:"main-toolbar"},b.createElement("h2",null,"All Sources ",b.createElement("i",{className:"fa fa-plus-circle add button","aria-hidden":"true",title:"Add new source",h:this.sb.bind(this)})))),b.createElement("div",
{className:"secondary-toolbar"},b.createElement("div",{className:"tab-bar"},b.createElement("div",{h:function(){return a.i({mode:"list"})}},"LIST"),b.createElement("div",{h:function(){return a.i({mode:"tree"})}},"TREE")))),b.createElement("section",{className:"editor-body"},b.createElement(k.mc,{xc:function(a){return a.name},Fc:function(b){return a.i({Ia:b})}}),"list"===this.state.mode?b.createElement("table",{className:"table gap"},b.createElement("thead",null,b.createElement("tr",null,b.createElement("td",
null,"#"),b.createElement("td",null,"Name"),b.createElement("td",null,"Parent"))),b.createElement("tbody",null,this.a.b.all.source.value.filter(this.state.Ia).map(function(c){return b.createElement("tr",{key:"source-"+c.uid},b.createElement("td",null,c.uid," ",b.createElement(e.ka,{b:a.a.b,uid:c.uid,D:"source"})),b.createElement("td",null,c.name),b.createElement("td",null,c.parent))}))):null))};d.Ue=a},function(g,d,c){var a=c(0),b=c(7),e=c(2);d.Id=function(c,d){var f=c.b.all.o.value.map(function(a){return{key:a.label,
value:a.uid,za:{Ac:e.f.o}}}),g=c.b.all.H.value.map(function(a){return{key:a.name,value:a.uid,za:{Ac:e.f.H}}}),k=c.b.all.c.value.map(function(a){return{key:a.name,value:a.uid,za:{Ac:e.f.c}}});c=c.b.all.source.value.map(function(a){return{key:a.name,value:a.uid,za:{Ac:e.f.source}}});return a.createElement("span",null,a.createElement("div",{className:"input-addon-formgroup"},a.createElement("span",{className:"input-addon-icon"},a.createElement("i",{className:"fa fa-search fa-fw"})),a.createElement(b.Pa,
{value:{key:"",value:""},ia:function(a){d.ma.ub("/edit/"+a.za.Ac+"/"+a.value)},typeName:"all",options:f.concat(g,k,c),Ra:!1,Ta:function(){}})))};d.Id.Ab={ma:a.zb.object.Eb}},function(g,d,c){var a=c(0);d.Gc=function(){return a.createElement("div",{className:"workspace-editor"},a.createElement("h2",null,"Advanced Search"))}},function(g,d,c){var a=c(0);d.Kc=function(){return a.createElement("div",{className:"workspace-editor"},a.createElement("h2",null,"There is nothing here"))}},function(g,d,c){function a(){f.s.call(this);
this.state={Rd:{key:"test",value:""},Ng:""}}function b(a){p.N.apply(this,arguments)}function e(a){p.N.apply(this,arguments)}var f=c(0),k=c(64),l=c(2),h=c(4),q=c(1),r=c(3),u=c(5),t=c(28),p=c(15),z=c(19);G(e,p.N);G(b,p.N);G(a,f.s);a.prototype.ra=function(){var a=this;this.a.l.Ha(h.Entity,l.f.o,this.a.id).then(function(){r.Sa.I("entity",a.a.id);a.context.ma.ub("/edit/notfound")}).catch(function(b){b.data.data.then(function(b){r.showModal.I({name:"conflict_resolution",cancel:function(){},complete:function(c){"addToWorkspace"===
c&&(b.M.forEach(function(a){r.ea.I("entity",a.o)}),b.o.forEach(function(a){r.ea.I("entity",a.uid)}));"deleteAll"===c&&Promise.all(b.M.map(function(b){return a.a.l.Ha(h.da,l.f.M,b.uid)})).then(function(){a.ra()})},Y:{qa:b,message:"Deleting Entity"}})})})};a.prototype.rc=function(){var a=this.a.b.F.o.get("entity-"+this.a.id).value.o,b=this.a.b.all.H.value.find(function(b){return b.uid===a.A}),c=t.uc(a.A,this.a.b.all.H.value),b={name:"record",complete:function(){console.log("Records editor called complete")},
cancel:function(){console.log("Records editor called cancel")},Y:{options:this.a.b.all.c.value.filter(function(a){return-1!==c.indexOf(a.domain)}).map(function(a){return{key:a.name,value:a.uid,za:a}}),$d:this.a.id,A:b.uid}};r.showModal.I(b)};a.prototype.update=function(a){this.a.l.L(h.Entity,l.f.o,this.a.id,a)};a.prototype.K=function(){var a=this,c=this.a.b.F.o.get("entity-"+this.a.id).value.o,d=this.a.b.all.H.value.find(function(a){return a.uid===c.A}),g=this.a.b.all.o.value,h=t.uc(c.A,this.a.b.all.H.value),
l=this.a.b.all.c.value.filter(function(a){return-1!==h.indexOf(a.domain)}),r=this.a.b.all.source.value,S=q.ed(this.a.b.F.o.get("entity-"+this.a.id).value.kb,"predicate");l.map(function(a){return{key:a.name,value:a.uid,za:a}});var K="";if(null!==g&&void 0!==c.parent){var L=g.find(function(a){return a.uid===c.parent});void 0!==L&&(K=L.label)}return f.createElement("div",{className:"workspace-editor"},f.createElement("header",{className:"editor-header entity"},f.createElement("div",{className:"primary-toolbar"},
f.createElement("div",{className:"main-toolbar"},f.createElement("i",{className:"fa fa-cube item-icon"}),f.createElement(e,{value:c.label,aa:p.ec,m:function(b){return a.update({label:b})}})),f.createElement("div",{className:"sub-toolbar"},f.createElement("i",{className:"fa fa-trash delete button","aria-hidden":"true",h:this.ra.bind(this)}),f.createElement("i",{className:"fa fa-clone button","aria-hidden":"true",h:function(){return console.log("copy")}})))),f.createElement("section",{className:"editor-body"},
f.createElement("div",{className:"flex-fill"},f.createElement("div",{className:"flex-fill"},f.createElement("div",null,f.createElement("label",{className:"small"},"Type"),d.name," ",f.createElement(u.ka,{b:this.a.b,uid:d.uid,D:"entity_type"}))),f.createElement("div",{style:{flex:1}},f.createElement("label",{className:"small"},"Parent"),f.createElement(b,{value:{key:K,value:c.parent},aa:z.Ic,m:function(b){return a.update({parent:b.value})},pc:{Vc:{options:g.map(function(a){return{key:a.label,value:a.uid}}),
typeName:"Entity"}}}),null!==c.parent?f.createElement(u.ka,{b:this.a.b,D:"entity",uid:c.parent}):null)),f.createElement("div",{className:"edit-group"},f.createElement(k.Qe,{Wd:"predicates",Tg:!0,id:this.a.id,l:this.a.l,kb:S,m:function(){},rd:l,Ib:r,Gf:d.uid,b:this.a.b}))))};a.Ab={ma:f.zb.object.Eb};d.Lc=a},function(g,d,c){function a(){f.s.call(this);this.state={}}function b(a){r.N.apply(this,arguments)}function e(a){r.N.apply(this,arguments)}var f=c(0),k=c(21),l=c(2),h=c(4),q=c(5),r=c(15),u=c(20),
t=c(19),p=c(3);G(e,r.N);G(b,r.N);G(a,f.s);a.prototype.update=function(a){var b=this,c=this.a.b.F.H.get("entity_type-"+this.a.id).value;this.a.l.L(h.wa,l.f.H,this.a.id,a).then(function(){return b.i({A:Object.assign({},c,a)})})};a.prototype.Yc=function(){var a=this.a.b.F.H.get("entity_type-"+this.a.id).value,a=(new h.wa).u(Object.assign({},a.B(),{name:"Copy of "+a.name}));this.a.l.ha(h.wa,l.f.H,a).then(function(a){a=F(a).next().value;p.ea.I("entity_type",a)})};a.prototype.ra=function(){var a=this;this.a.l.Ha(h.wa,
l.f.H,this.a.id).then(function(){return a.context.ma.ub("/edit/notfound")}).catch(function(a){a.data.data.then(function(a){p.showModal.I({name:"conflict_resolution",cancel:function(){},complete:function(b){"addToWorkspace"===b&&(a.A.forEach(function(a){p.ea.I("entity_type",a.uid)}),a.c.forEach(function(a){p.ea.I("predicate",a.uid)}),a.o.forEach(function(a){p.ea.I("entity",a.uid)}))},Y:{qa:a,message:"Deleting Entity Type"}})})})};a.prototype.Zc=function(){p.showModal.I({name:"entity",complete:function(a){a=
F(a).next().value;p.ea.I("entity",a)},cancel:function(){console.log("cancel")},Y:{ld:"",bh:this.a.id}})};a.prototype.K=function(){var a=this,c=this.a.b.F.H.get("entity_type-"+this.a.id).value,d=this.a.b.all.H.value,g="";if(null!==d&&void 0!==c.parent){var h=d.find(function(a){return a.uid===c.parent});void 0!==h&&(g=h.name)}return f.createElement("div",{className:"workspace-editor"},f.createElement("header",{className:"editor-header entity_type"},f.createElement("div",{className:"primary-toolbar"},
f.createElement("div",{className:"main-toolbar"},f.createElement("div",{className:"bread-crumbs"},c.Da.map(function(b){return f.createElement("span",{key:"breadcrumb-"+b.uid},f.createElement("span",null,"  ",b.name," ",f.createElement(q.ka,{b:a.a.b,D:"entity_type",uid:b.uid})," "),f.createElement("i",{className:"fa fa-angle-right"}))})),f.createElement("i",{className:"fa fa-tag item-icon"}),f.createElement(e,{value:c.name,aa:r.ec,m:function(b){return a.update({name:b})}})),f.createElement("div",{className:"sub-toolbar"},
f.createElement("i",{className:"fa fa-plus add button","aria-hidden":"true",h:this.Zc.bind(this)}),f.createElement("i",{className:"fa fa-trash delete button","aria-hidden":"true",h:this.ra.bind(this)}),f.createElement("i",{className:"fa fa-clone button","aria-hidden":"true",h:this.Yc.bind(this)})))),f.createElement("section",{className:"editor-body"},f.createElement("div",{className:"edit-group"},f.createElement("label",{className:"small"},"Parent"),f.createElement(b,{value:null===c.parent?null:{key:g,
value:c.parent},aa:t.Ic,m:function(b){return a.update({parent:null===b?null:b.value})},pc:{Vc:{options:d.map(function(a){return{key:a.name,value:a.uid}}),typeName:"EntityType"}}}),null!==c.parent?f.createElement(q.ka,{D:"entity_type",b:this.a.b,uid:c.parent}):null),f.createElement("div",{className:"edit-group"},f.createElement("label",{className:"small"},"Description"),f.createElement(e,{value:c.description,aa:u.Jc,m:function(b){return a.update({description:b})}})),f.createElement("div",{className:"edit-group"},
f.createElement(e,{value:c.W,aa:k.Pc,m:function(b){return a.update({sameAs:b})}})),f.createElement("div",null,f.createElement("h4",null,"Direct Children"),f.createElement("ul",null,c.children.map(function(b){return a.a.b.all.H.value.find(function(a){return a.uid===b})}).map(function(b){return f.createElement("li",{key:"dc-"+b.name},b.name," ",f.createElement(q.ka,{D:"entity_type",b:a.a.b,uid:b.uid}))})))))};a.Ab={ma:f.zb.object.Eb};d.Mc=a},function(g,d,c){var a=c(0),b=c(75),e=c(77),f=c(78),k=c(76);
d.Nc=function(c){return a.createElement("div",{className:"workspace-editor object-list"},function(){switch(c.Of){case "entity":return a.createElement(b.Ge,{l:c.l,query:c.query,b:c.b});case "source":return a.createElement(f.Ue,{l:c.l,b:c.b});case "predicate":return a.createElement(e.Me,{l:c.l,b:c.b});case "entity_type":return a.createElement(k.He,{l:c.l,b:c.b})}}())}},function(g,d,c){function a(){e.s.call(this);this.state={kb:[]}}function b(a){r.N.apply(this,arguments)}var e=c(0),f=c(10),k=c(21),l=
c(2),h=c(3),q=c(4),r=c(15),u=c(20),t=c(27),p=c(30);G(b,r.N);G(a,e.s);a.prototype.cc=function(a,b,c){c=void 0===c?null:c;var d=this.a.b.F.c.get("predicate-"+this.a.id).value;if(null===d)console.warn("Tried to edit unready predicate");else{c=null===c?d.V:c;var e={};this.a.l.L(q.xa,l.f.c,d.uid,(e[a]=b,e.V=c,e))}};a.prototype.Yc=function(){var a=this.a.b.F.c.get("predicate-"+this.a.id).value,a=(new q.xa).u(Object.assign({},a.B(),{name:"Copy of "+a.name}));this.a.l.ha(q.xa,l.f.c,a).then(function(a){a=
F(a).next().value;h.ea.I("predicate",a)})};a.prototype.ra=function(){var a=this;this.a.l.Ha(q.xa,l.f.c,this.a.id).then(function(){return a.context.ma.ub("/edit/notfound")}).catch(function(b){b.data.data.then(function(b){h.showModal.I({name:"conflict_resolution",cancel:function(){},complete:function(c){"addToWorkspace"===c&&b.forEach(function(a){h.ea.I("entity",a.o)});"deleteAll"===c&&Promise.all(b.M.map(function(b){return a.a.l.Ha(q.da,l.f.M,b.uid)})).then(function(){a.ra()})},Y:{qa:b,message:"Deleting Predicate"}})})})};
a.prototype.K=function(){var a=this,c=this.a.b.F.c.get("predicate-"+this.a.id).value,d=this.a.b.all.H.value,g=d.find(function(a){return a.uid==c.domain}),h="";void 0!==g&&(h=g.name);var g={key:h,value:c.domain.toString()},h={key:"",value:c.J.toString()},l=c.V?d.find(function(a){return a.uid==c.J}):p.ge.find(function(a){return a.value===c.J});void 0!==l&&(h.key=l.name);d=d.map(function(a){if(null===a.uid)throw Error("Encountered entity type with no id!");return{key:a.name,value:a.uid.toString()}});
l=p.ge.map(function(a){return{key:a.name,value:a.value,za:"literal"}});return e.createElement("div",{className:"workspace-editor"},e.createElement("header",{className:"editor-header predicate"},e.createElement("div",{className:"primary-toolbar"},e.createElement("div",{className:"main-toolbar"},e.createElement("i",{className:"fa fa-long-arrow-right item-icon"}),e.createElement(b,{value:c.name,aa:r.ec,m:function(b){return a.cc("name",b)}})),e.createElement("div",{className:"sub-toolbar"},e.createElement("i",
{className:"fa fa-trash delete button","aria-hidden":"true",h:this.ra.bind(this)}),e.createElement("i",{className:"fa fa-clone button","aria-hidden":"true",h:this.Yc.bind(this)})))),e.createElement("section",{className:"editor-body"},e.createElement("div",null,e.createElement(f.oa,{va:"/edit/entity?col1="+this.a.id+",exists"},"Uses: ",this.state.kb.length)),e.createElement("div",{className:"edit-group"},e.createElement("label",{className:"small"},"Description"),e.createElement(b,{value:c.description,
aa:u.Jc,m:function(b){return a.cc("description",b)}})),e.createElement("div",{className:"edit-group"},e.createElement("label",{className:"small"},"Typing"),e.createElement(t.Gd,{domain:g,J:h,ad:function(b){return a.cc("domain",b.value)},sd:function(b){return a.cc("range",b.value,"literal"!==b.za)},mode:"editSingle",sc:d,Dc:l.concat(d)})),e.createElement("div",null,e.createElement(b,{value:c.W,aa:k.Pc,m:function(b){return a.cc("sameAs",b)}}))))};a.Ab={ma:e.zb.object.Eb};d.Oc=a},function(g,d,c){function a(){f.s.call(this);
this.state={Ca:{}}}function b(a){q.N.apply(this,arguments)}function e(a){q.N.apply(this,arguments)}var f=c(0),k=c(21),l=c(2),h=c(4),q=c(15),r=c(20),u=c(19);c(1);var t=c(3),p=c(5);G(e,q.N);G(b,q.N);G(a,f.s);a.prototype.Bd=function(a,b){var c=this.a.b.F.source.get("source-"+this.a.id).value.source,d={};this.a.l.L(h.pa,l.f.source,c.uid,(d[a]=b,d))};a.prototype.tg=function(a,b){var c=this,d=this.a.b.F.source.get("source-"+this.a.id).value.source,e={order:["source","element"],values:{source:this.a.id,
element:a.uid}};void 0!==d.Ca[a.name]&&void 0!==d.Ca[a.name].values.find(function(a){return a.source===c.a.id})?this.a.l.L(h.Fa,l.f.Z,e,(new h.Fa).u({uid:e,element:d.Ca[a.name].Sg,source:this.a.id,value:b})):this.a.l.ha(h.Fa,l.f.Z,(new h.Fa).u({uid:e,value:b}))};a.prototype.ra=function(){var a=this;this.a.l.Ha(h.pa,l.f.source,this.a.id).then(function(){return a.context.ma.ub("/edit/notfound")}).catch(function(b){b.data.data.then(function(b){t.showModal.I({name:"conflict_resolution",cancel:function(){},
complete:function(c){"addToWorkspace"===c&&b.source.forEach(function(a){t.ea.I("source",a.uid)});"deleteAll"===c&&Promise.all(b.source.map(function(b){return a.a.l.Ha(h.pa,l.f.source,b.uid)})).then(function(){a.ra()})},Y:{qa:b,message:"Deleting Source"}})})})};a.prototype.wf=function(){var a=this.a.b.F.source.get("source-"+this.a.id).value.source,a=(new h.pa).u(Object.assign({},a.B(),{name:"Child of "+a.name,parent:this.a.id}));this.a.l.ha(h.pa,l.f.source,a).then(function(a){a=F(a).next().value;t.ea.I("source",
a)})};a.prototype.Zc=function(){var a={name:"preset_record",complete:function(a){a=F(a).next().value;t.ea.I("entity",a)},cancel:function(){},Y:{source:this.a.b.F.source.get("source-"+this.a.id).value.source}};t.showModal.I(a)};a.prototype.K=function(){var a=this,c=this.a.b.F.source.get("source-"+this.a.id).value.source,d=this.a.b.all.source.value,g="";if(null!==d&&void 0!==c.parent){var h=d.find(function(a){return a.uid===c.parent});void 0!==h&&(g=h.name)}return f.createElement("div",{className:"workspace-editor"},
f.createElement("header",{className:"editor-header source"},f.createElement("div",{className:"primary-toolbar"},f.createElement("div",{className:"main-toolbar"},f.createElement("div",{className:"bread-crumbs"},c.Da.slice().reverse().map(function(b){return a.a.b.all.source.value.find(function(a){return a.uid===b})}).map(function(b){return f.createElement("span",{key:"breadcrumb-"+b.uid},f.createElement("span",null,"  ",b.name," ",f.createElement(p.ka,{b:a.a.b,D:"source",uid:b.uid})," "),f.createElement("i",
{className:"fa fa-angle-right"}))})),f.createElement("i",{className:"fa fa-sun-o item-icon"}),f.createElement(e,{value:c.name,aa:q.ec,m:function(b){return a.Bd("name",b)}})),f.createElement("div",{className:"sub-toolbar"},f.createElement("i",{className:"fa fa-plus add button","aria-hidden":"true",h:this.Zc.bind(this)}),f.createElement("i",{className:"fa fa-trash delete button","aria-hidden":"true",h:function(){return a.ra()}}),f.createElement("i",{className:"fa fa-arrow-circle-o-down button","aria-hidden":"true",
h:this.wf.bind(this)})))),f.createElement("section",{className:"editor-body"},f.createElement("div",{className:"edit-group"},f.createElement("label",{className:"small"},"Parent"),f.createElement(b,{value:{key:g,value:c.parent},aa:u.Ic,m:function(b){return a.Bd("parent",b.value)},pc:{Vc:{options:d.map(function(a){return{key:a.name,value:a.uid}}),typeName:"Source"}}}),null!==c.parent?f.createElement(p.ka,{b:this.a.b,D:"source",uid:c.parent}):null),f.createElement("div",{className:"edit-group"},f.createElement(e,
{value:c.W,aa:k.Pc,m:function(b){return a.Bd("sameAs",b)}})),this.a.b.all.Zd.value.elements.map(function(b){var d=c.Ca.hasOwnProperty(b.name)?c.Ca[b.name].values:[{source:a.a.id,value:""}],g=d[0].source==a.a.id?d[0].value:"";return f.createElement("div",{key:b.name+"-edit"},f.createElement("h5",{className:"section-header"},b.name," ",f.createElement("small",null,f.createElement("a",{href:b.url},b.uri))),f.createElement("p",{className:"element-description"},b.description),f.createElement("ul",null,
d.map(function(c){return c.source!=a.a.id?f.createElement("li",{key:b.uid+"-"+c.source},a.a.b.all.source.value.find(function(a){return a.uid===c.source}).name,": ",c.value):null})),f.createElement(e,{value:g,aa:r.Jc,m:function(c){return a.tg(b,c)}}))}),f.createElement("div",null,f.createElement("h4",null,"Direct Children"),f.createElement("ul",null,c.children.map(function(b){return a.a.b.all.source.value.find(function(a){return a.uid===b})}).map(function(b){return f.createElement("li",{key:"dc-"+
b.uid},b.name," ",f.createElement(p.ka,{D:"source",b:a.a.b,uid:b.uid}))})))))};a.Ab={ma:f.zb.object.Eb};d.Qc=a},function(g,d,c){g=c(81);d.Kc=g.Kc;g=c(82);d.Lc=g.Lc;g=c(83);d.Mc=g.Mc;g=c(86);d.Qc=g.Qc;g=c(85);d.Oc=g.Oc;g=c(80);d.Gc=g.Gc;c=c(84);d.Nc=c.Nc},function(g,d){function c(){}c.prototype.u=function(a){this.name=a.name;this.uid=a.uid;this.cd=a.cd;this.description=a.description;this.Wc=a.Wc;return this};c.prototype.B=function(){return this};d.Element=c},function(g,d){function c(){}c.prototype.u=
function(a){this.name=a.name;this.uid=a.uid;this.uri=a.uri;this.description=a.description;this.elements=a.elements;return this};c.prototype.B=function(){return this};d.fb=c},function(g,d){function c(){}c.prototype.u=function(a){this.uid=a.uid;this.A=a.A;this.label=a.label;this.parent=a.parent;this.O=a.O;this.G=a.G;this.C=a.C;return this};c.prototype.B=function(){return this};d.Entity=c},function(g,d){function c(){}c.prototype.u=function(a){this.uid=a.uid;this.name=a.name;this.description=a.description;
this.icon=a.icon;this.Uc=a.Uc;this.W=a.W;this.parent=a.parent;this.Da=a.Da;this.O=a.O;this.children=a.children;this.G=a.G;this.C=a.C;return this};c.prototype.B=function(){return this};d.wa=c},function(g,d){function c(){}c.prototype.B=function(){return this};c.prototype.u=function(a){this.uid=a.uid;this.domain=a.domain;this.J=a.J;this.name=a.name;this.description=a.description;this.W=a.W;this.ud=a.ud;this.V=a.V;this.O=a.O;this.G=a.G;this.C=a.C;return this};d.xa=c},function(g,d){function c(){this.valueType=
null}c.prototype.u=function(a){this.uid=a.uid;this.source=a.source;this.c=a.c;this.o=a.o;this.lb=a.lb;this.valueType=a.valueType;this.value=a.value;this.O=a.O;this.Gb=a.Gb;this.G=a.G;this.C=a.C;return this};c.prototype.B=function(){return this};d.da=c},function(g,d){function c(){}c.prototype.B=function(){return this};c.prototype.u=function(a){this.name=a.name;this.uid=a.uid;this.Ca=a.Ca;this.W=a.W;this.parent=a.parent;this.Da=a.Da;this.children=a.children;this.O=a.O;this.G=a.G;this.C=a.C;return this};
d.pa=c},function(g,d){function c(){}c.prototype.u=function(a){this.uid=a.uid;this.value=a.value;this.O=a.O;this.G=a.G;this.C=a.C;return this};c.prototype.B=function(){return this};d.Fa=c},function(g,d,c){var a=c(0),b=c(10),e=c(31);d.ue=function(c){return a.createElement("div",{className:"page"},a.createElement("section",null,a.createElement("h1",null,"Welcome to the admin pages"),a.createElement("ul",{className:"links-list"},a.createElement("li",null,a.createElement(b.oa,{va:"/users"},a.createElement("i",
{className:"fa fa-users"})," Manage Users")),a.createElement("li",null,a.createElement(b.oa,{va:"/app"},a.createElement("i",{className:"fa fa-download"})," Download app")),a.createElement("li",null,a.createElement("a",{href:"/admin/snapshot"},a.createElement("i",{className:"fa fa-cloud-download"})," Download database snapshot")),a.createElement("li",null,a.createElement(b.oa,{va:"/upload"},a.createElement("i",{className:"fa fa-cloud-upload"})," Upload database file")))),null!==c.ua?a.createElement(e.Jd,
{ua:c.ua}):null)}},function(g,d,c){var a=c(0);d.we=function(){return a.createElement("div",{className:"page"},a.createElement("section",null,a.createElement("h1",null,"App Download"),a.createElement("p",null,"Use this VRE without an internet connection! Simply download the app for your platform and then download a database snapshot from the main page. When you are ready, use the upload tool to merge your offline copy with the server."),a.createElement("ul",{className:"links-list"},a.createElement("li",
null,a.createElement("a",{href:"https://github.com/digihum/imperial-entanglements-app/raw/master/bin/imperial-entanglements%20Setup%200.1.1.exe"},a.createElement("i",{className:"fa fa-windows"})," Windows")),a.createElement("li",null,a.createElement("a",{href:"https://github.com/digihum/imperial-entanglements-app/raw/master/bin/mac/imperial-entanglements-0.1.1.dmg"},a.createElement("i",{className:"fa fa-apple"})," Mac")),a.createElement("li",null,a.createElement("a",{href:"https://github.com/digihum/imperial-entanglements-app/raw/master/bin/imperial-entanglements-0.1.1-x86_64.AppImage"},
a.createElement("i",{className:"fa fa-linux"})," Linux")))))}},function(g,d,c){var a=c(0);d.De=function(){return a.createElement("div",{className:"page"},a.createElement("section",null,a.createElement("h1",null,"This is the database upload page"),a.createElement("input",{type:"file",id:"input",accept:".sqlite"}),a.createElement("button",{h:function(){alert("Work in process")}},"Upload")))}},function(g,d,c){function a(){e.s.call(this);this.state={F:[],ee:"undefined"!==typeof window,ba:[],b:p.Tc(J.Df),
od:!0,cb:!1,id:NaN,list:!1};this.jf=this.ea.bind(this);this.hf=this.Sa.bind(this);this.gf=this.cf.bind(this);this.kf=this.pf.bind(this);this.lf=this.Hb.bind(this);t.ea.add(this.jf);t.Sa.add(this.hf);t.showModal.add(this.gf);t.vb.add(this.kf);t.Hb.add(this.lf)}var b=this&&this.Rc||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},e=c(0),f=c(34),k=c(16),l=c(2),h=c(4),q=c(56),r=c(58),u=c(57),
t=c(3),p=c(1),z=c(71),x=c(73),D=c(72),P=c(74),Q=c(69),B=c(70),R=c(68),J=c(54);G(a,e.s);a.prototype.pf=function(){this.reload(this.a,!0)};a.prototype.reload=function(a,b){b=void 0===b?!1:b;var c=this,d=parseInt(a.location.pathname.substr(a.pathname.length+1)),e=a.R;-1===["entity","source","predicate","entity_type","notfound"].indexOf(e)&&this.context.ma.ub("/edit/notfound");this.state.cb&&!b?this.i({id:d,list:0===a.location.pathname.substr(a.pathname.length+1).length}):this.i({cb:!0,od:this.state.id!==
d&&!(isNaN(this.state.id)&&isNaN(d))||this.a.R!==e,id:d,list:0===a.location.pathname.substr(a.pathname.length+1).length},function(){var b=Promise.resolve(p.Tc(J.Ef));if(c.state.ee){var d=window.localStorage.getItem("open_tabs");if(null!==d){c.state.F=JSON.parse(d);c.state.list||-1===["entity","predicate","entity_type","source"].indexOf(a.R)||void 0!==p.find(c.state.F,function(b){return b.D===a.R&&b.uid==c.state.id})||(c.state.F.push({D:a.R,uid:c.state.id}),c.Xb());var e=p.ed(c.state.F,"tabType"),
b=Promise.all(Object.keys(e).map(function(b){return Promise.all(e[b].map(function(b){return c.Pf(b.D,b.uid).then(function(a){var c={};return c[b.D+"-"+b.uid]={value:a,Va:k()},c}).catch(function(){console.warn("Attempted to load missing resource "+b.D+"/"+b.uid);c.Sa(b.D,b.uid);b.D===a.R&&b.uid===c.state.id&&c.context.ma.ub("/edit/notfound")})})).then(function(a){var c={};return c[b]=f.Map(Object.assign.apply(Object,[].concat([{}],a instanceof Array?a:H(F(a))))),c})}))}}d=Promise.all([a.l.hb(h.xa,
l.f.c,{}),a.l.hb(h.pa,l.f.source,{}),a.l.hb(h.Entity,l.f.o,{}),a.l.hb(h.wa,l.f.H,{}),a.l.getItem(h.fb,l.f.Tb,1)]).then(function(a){var b=F(a);a=b.next().value;var c=b.next().value,d=b.next().value,e=b.next().value,b=b.next().value;return{c:{value:a,Va:k()},source:{value:c,Va:k()},o:{value:d,Va:k()},H:{value:e,Va:k()},Zd:{value:b,Va:k()}}});Promise.all([b,d]).then(function(a){var b=F(a);a=b.next().value;b=b.next().value;a=Object.assign.apply(Object,[].concat([{}],a instanceof Array?a:H(F(a))));c.i({b:Object.assign({},
c.state.b,{F:a,all:b}),cb:!1,od:!1})})})};a.prototype.Pf=function(a,b){switch(a){case "entity":return Promise.all([this.a.l.getItem(h.Entity,l.f.o,b),this.a.l.hb(h.da,l.f.M,{o:b})]).then(function(a){var b=F(a);a=b.next().value;b=b.next().value;return{o:a,kb:b}});case "predicate":return this.a.l.getItem(h.xa,l.f.c,b);case "entity_type":return this.a.l.getItem(h.wa,l.f.H,b);case "source":return Promise.all([this.a.l.getItem(h.pa,l.f.source,b),this.a.l.hb(h.Fa,l.f.Z,{source:b})]).then(function(a){var b=
F(a);a=b.next().value;b=b.next().value;return{source:a,Z:b}});default:throw Error("Unexpected tab type requested");}};a.prototype.ea=function(a,b,c){var d=this;void 0===p.find(this.state.F,function(c){return c.D===a&&c.uid==b})&&this.i({F:this.state.F.concat([{D:a,uid:b,data:c}])},function(){d.Xb();d.reload(d.a)})};a.prototype.Sa=function(a,b){var c=this;this.i({F:this.state.F.filter(function(c){return c.D!==a||c.uid!==b})},function(){c.Xb();c.reload(c.a)})};a.prototype.Xb=function(){var a=JSON.stringify(this.state.F);
this.state.ee&&window.localStorage.setItem("open_tabs",a)};a.prototype.tf=function(){var a=this;this.i({F:[]},function(){a.Xb();a.reload(a.a)})};a.prototype.Hb=function(a){var b=this;this.i({F:a(this.state.F)},function(){b.Xb();b.reload(b.a)})};a.prototype.cf=function(a){this.i({ba:[a].concat(this.state.ba)})};a.prototype.Rf=function(a){if(0===this.state.ba.length)throw Error("Attempted to complete non-existent modal");this.state.ba[0].complete(a);0<this.state.ba.length&&this.i({ba:p.vh(this.state.ba)})};
a.prototype.Qf=function(){if(0===this.state.ba.length)throw Error("Attempted to cancel non-existent modal");this.state.ba[0].cancel();this.i({ba:[]})};a.prototype.K=function(){var a=this;return e.createElement("section",{id:"entity-editor",className:"flex-fill"},e.createElement("span",{className:"header-colour "+this.a.R}),e.createElement("span",{className:"flex-fill"},e.createElement(q.Te,{F:this.state.F,b:this.state.b,cb:!1,vf:this.tf.bind(this),list:this.state.list,id:this.state.id,R:this.a.R}),
e.createElement(r.Ze,b({},this.a,{id:this.state.id,b:this.state.b,cb:this.state.od,list:this.state.list})),e.createElement(u.We,null),function(){if(0===a.state.ba.length)return null;var c={l:a.a.l,b:a.state.b,complete:a.Rf.bind(a),cancel:a.Qf.bind(a)};switch(a.state.ba[0].name){case "predicate":return e.createElement(z.ze,b({},c,a.state.ba[0].Y));case "record":return e.createElement(x.Be,b({},c,a.state.ba[0].Y));case "preset_record":return e.createElement(D.Ae,b({},c,a.state.ba[0].Y));case "source":return e.createElement(P.Ce,
b({},c,a.state.ba[0].Y));case "entity":return e.createElement(Q.Hc,b({},c,a.state.ba[0].Y));case "entity_type":return e.createElement(B.ye,b({},c,a.state.ba[0].Y));case "conflict_resolution":return e.createElement(R.xe,b({},c,a.state.ba[0].Y))}}()),e.createElement("span",{className:"header-colour "+this.a.R}))};a.Ab={ma:e.zb.object.Eb};d.Fd=a},function(g,d,c){var a=c(0);d.Re=function(b){return a.createElement("section",null,a.createElement("h1",null,"The page at ",b.url," does not exist :("))}},function(g,
d,c){var a=c(0);d.Xe=function(){return a.createElement("div",{className:"page"},a.createElement("section",null,a.createElement("h1",null,"This is the user page")))}},function(g,d,c){var a=c(0);d.Ye=function(){return a.createElement("div",{className:"page"},a.createElement("section",null,a.createElement("h1",null,"This is the user management page")))}},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.Element.apply(this,arguments)}var e=c(88),f=c(8);G(b,e.Element);b.prototype.ja=function(){return b.g};
b.prototype.U=function(){return this.B()};b.prototype.w=function(a){this.u(a);return this};b.g="elements";d.Lb=b;G(a,f.j);d.fc=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.fb.apply(this,arguments)}var e=c(89),f=c(8),k=c(1);G(b,e.fb);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return k.ca(this.B(),"elements")};b.prototype.w=function(a){this.u(a);return this};b.g="element_sets";d.Mb=b;G(a,f.j);a.prototype.la=function(a,b){var c=this;return f.j.prototype.la.call(this,
a,b).then(function(a){if(null===a.uid)throw Error("could not find source");return c.db.select("elements").v({element_set:a.uid}).then(function(b){a.elements=b;return a})})};d.gc=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.wa.apply(this,arguments)}var e=c(91),f=c(8),k=c(33),l=c(32),h=c(9),q=c(1);G(b,e.wa);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return Object.assign(q.ca(this.B(),"sameAs","parents","children","creationTimestamp","lastmodifiedTimestamp"),
{Oa:this.W,Ga:this.G,La:this.C})};b.prototype.w=function(a){this.u(Object.assign(a,{sameAs:a.Oa}));return this};b.g="entity_types";d.Nb=b;G(a,f.j);a.prototype.la=function(a,b){var c=this;return f.j.prototype.la.call(this,a,b).then(function(d){return Promise.all([c.db.wc(b).then(function(b){return c.db.select("entity_types").mb("uid",b).then(function(b){return b.map(function(b){return(new a).w(b)})})}),c.db.select("entity_types",["uid"]).v({parent:b})]).then(function(a){var b=F(a);a=b.next().value;
b=b.next().value;d.Da=a;d.children=b.map(function(a){return a.uid});return d})})};a.prototype.T=function(a,c){var d=this;return Promise.all([this.db.select(b.g).v("parent","=",c),this.db.select("entities").v("type","=",c),this.db.select("predicates").v("domain","=",c).Xf("range_ref","=",c)]).then(function(a){var e=F(a);a=e.next().value;var f=e.next().value,e=e.next().value;if(0===f.length+a.length+e.length)return d.db.T(d.g,c);throw new h.S({message:"The operation could not be completed as the entity is referenced in other sources",
data:Promise.resolve({A:a.map(function(a){return(new b).w(a)}),o:f.map(function(a){return(new l.nb).w(a)}),c:e.map(function(a){return(new k.qb).w(a)})})});})};d.ic=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.pa.apply(this,arguments)}var e=c(94),f=c(8),k=c(9),l=c(23),h=c(1);G(b,e.pa);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return Object.assign({},h.ca(this.B(),"metaData","sameAs","parents","children","creationTimestamp","lastmodifiedTimestamp"),{Oa:this.W,
Ga:this.G,La:this.C})};b.prototype.w=function(a){this.u(Object.assign(a,{sameAs:a.Oa}));return this};b.g="sources";d.Qb=b;G(a,f.j);a.prototype.getMetadata=function(a,b){var c=this;return this.db.query().raw("\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM sources),\n                ancestor(uid) AS (\n                SELECT parent FROM parent_of WHERE uid=?\n                UNION ALL\n                SELECT parent FROM parent_of JOIN ancestor USING(uid) )\n            \n            SELECT *\n                FROM ancestor;\n        ",
b).then(function(d){d=h.map(d,"uid");d.pop();d=[b].concat(d);return Promise.all(d.map(function(b){return c.db.query().select(a).from("source_elements").Ua("elements",function(){this.pd("source_elements.element","=","elements.uid")}).Ua("element_sets",function(){this.pd("element_sets.uid","=","elements.element_set")}).v({"source_elements.source":b})})).then(function(a){var b=h.ed(h.Lf(a),"name");return Object.keys(b).reduce(function(a,c){var e=h.ca(b[c][0],"source","value");e.values=b[c].map(function(a){return{source:a.source,
value:a.value,uid:a.uid}}).sort(function(a,b){return d.indexOf(a.source)-d.indexOf(b.source)});var f={};return Object.assign(a,(f[c]=e,f))},{})})})};a.prototype.la=function(a,b){var c=this;return f.j.prototype.la.call(this,a,b).then(function(a){if(null===a.uid)throw Error("could not find source");return Promise.all([c.getMetadata("source_elements.source as source;elements.name;source_elements.value;elements.description;element_sets.name as element_set;elements.comment;elements.uri;elements.uid as element_uid".split(";"),
a.uid),c.db.query().select("uid").from("sources").v({parent:b}),c.db.query().raw("\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM sources),\n                    ancestor(uid) AS (\n                    SELECT parent FROM parent_of WHERE uid=?\n                    UNION ALL\n                    SELECT parent FROM parent_of JOIN ancestor USING(uid) )\n                    \n                    SELECT uid\n                    FROM ancestor;\n                ",b)]).then(function(b){var c=
F(b);b=c.next().value;var d=c.next().value,c=c.next().value;a.Ca=b;a.children=d.map(function(a){return a.uid}).filter(function(a){return null!==a});a.Da=c.map(function(a){return a.uid}).filter(function(a){return null!==a});return a})})};a.prototype.ya=function(a,b){b=void 0===b?{}:b;var c=this;return f.j.prototype.ya.call(this,a,b).then(function(a){return Promise.all(a.map(function(a){if(null===a.uid)throw Error("could not find source");return c.getMetadata(["elements.name","source_elements.value"],
a.uid).then(function(b){a.Ca=b;return a})}))})};a.prototype.T=function(a,c){var d=this;return Promise.all([this.db.jb("records",{source:c}),this.db.jb("sources",{parent:c})]).then(function(a){var e=F(a);a=e.next().value;e=e.next().value;if(0===a.length+e.length)return d.db.T(d.g,c);throw new k.S({message:"The operation could not be completed as the source is used by other records",data:Promise.resolve({M:a.map(function(a){return(new l.Za).w(a)}),source:e.map(function(a){return(new b).w(a)})})});})};
d.nc=a},function(g,d,c){function a(a){f.j.call(this,a,b.g)}function b(a){e.Fa.apply(this,arguments)}var e=c(95),f=c(8),k=c(9),l=c(1);G(b,e.Fa);b.prototype.ja=function(){return b.g};b.prototype.U=function(){return Object.assign(l.ca(this.B(),"creationTimestamp","lastmodifiedTimestamp","uid"),{Ga:this.G,La:this.C,source:this.uid.values.source,element:this.uid.values.element})};b.prototype.w=function(a){this.u(Object.assign(a,{uid:{order:["source","element"],values:{source:a.source,element:a.element}}}));
return this};b.g="source_elements";d.Pb=b;G(a,f.j);a.prototype.la=function(a,b){return this.db.query().select().from(this.g).v(b.values).first().then(function(a){return void 0===a?Promise.reject(new k.ob):a}).then(function(b){return(new a).w(b)})};a.prototype.ta=function(a,b,c){return this.db.query()(this.g).v(b.values).update(l.ca(c.U(),["tableName"]))};a.prototype.L=function(a,b,c){a=(new a).u(c).U();c=Object.keys(a);for(var d={},e=0;e<c.length;e+=1)void 0!==a[c[e]]&&(d[c[e]]=a[c[e]]);return this.db.query()(this.g).v(b.values).update(d).then(function(){return!0}).catch(function(a){throw Error(a);
})};a.prototype.T=function(a,b){return this.db.query()(this.g).v(b.values).ra()};d.oc=a},function(g,d,c){g=c(104);d.gc=g.gc;d.Mb=g.Mb;g=c(32);d.hc=g.hc;d.nb=g.nb;g=c(105);d.ic=g.ic;d.Nb=g.Nb;g=c(33);d.kc=g.kc;d.qb=g.qb;g=c(23);d.lc=g.lc;d.Za=g.Za;g=c(106);d.nc=g.nc;d.Qb=g.Qb;g=c(103);d.fc=g.fc;d.Lb=g.Lb;c=c(107);d.oc=c.oc;d.Pb=c.Pb},function(g,d,c){function a(a){var c=e.Ff(a,f.ag(a)),c=new b.Ed({name:"Query",ce:{o:{type:new b.jc(c),Md:{uid:{type:b.Qa}},resolve:function(b,c){b=c.uid;return void 0===
b?a.query()("entities"):a.query()("entities").v({uid:b})}}}});this.kg=new b.Ag({query:c})}var b=c(24),e=c(111),f=c(112);a.prototype.jg=function(a){return b.Yg(this.kg,a)};d.Ne=a},function(g,d,c){function a(a,b,c,d){this.Bb=b;this.bg=c;this.Kf=d;this.db=a}var b=c(9),e=c(16),f=c(3);g=c(2);d.f=g.f;var k=c(113);a.prototype.getItem=function(a,c,d){c=this.Bb.get(c);return void 0===c?Promise.reject(new b.Ya("Controller not found")):c.la(a,d)};a.prototype.hb=function(a,c,d){c=this.Bb.get(c);return void 0===
c?Promise.reject(new b.Ya("Controller not found")):c.ya(a,d)};a.prototype.ha=function(a,c,d){c=this.Bb.get(c);return void 0===c?Promise.reject(new b.Ya("Controller not found")):c.ha(a,Object.assign(d,{G:e().toISOString(),C:e().toISOString(),O:this.Kf?0:d.O})).then(function(a){f.vb.I();return Promise.resolve(a)})};a.prototype.ta=function(a,c,d,g){c=this.Bb.get(c);return void 0===c?Promise.reject(new b.Ya("Controller not found")):c.ta(a,d,Object.assign(g,{C:e().toISOString()})).then(function(a){f.vb.I();
return Promise.resolve(a)})};a.prototype.L=function(a,c,d,g){c=this.Bb.get(c);return void 0===c?Promise.reject(new b.Ya("Controller not found")):c.L(a,d,Object.assign(g,{C:e().toISOString()})).then(function(a){f.vb.I();return Promise.resolve(a)})};a.prototype.Ha=function(a,c,d){c=this.Bb.get(c);return void 0===c?Promise.reject(new b.Ya("Controller not found")):c.T(a,d).then(function(a){f.vb.I();return Promise.resolve(a)})};a.prototype.query=function(){return Promise.resolve({})};a.prototype.getStats=
function(){return k.Je(this.db.query())};d.Se=a},function(g,d,c){var a=c(24);d.Ff=function(b,c){return new a.Ed({name:"Entity",ce:{uid:{type:a.Qa,resolve:function(a){return a.uid}},label:{type:a.Qa,resolve:function(a){return a.label}},type:{type:a.Qa,resolve:function(a){return b.query()("entity_types").v({uid:a.type}).first().then(function(a){return a.name})}},c:{type:c,Md:{name:{type:a.Qa},uid:{type:a.Qa}},resolve:function(a,c){var d=c.name;c=c.uid;if(void 0!==d)return b.query()("predicates").v({name:d}).first().then(function(b){return{c:b,
o:a}});if(void 0!==c)return b.query()("predicates").v({uid:c}).first().then(function(b){return{c:b,o:a}})}},rd:{type:new a.jc(c),Md:{names:{type:new a.jc(a.Qa)},sg:{type:new a.jc(a.Qa)}},resolve:function(a,c){var d=c.names;c=c.sg;if(void 0!==d)return b.query()("predicates").mb("name",d).then(function(b){return b.map(function(b){return{c:b,o:a}})});if(void 0!==c)return b.query()("predicates").mb("uid",c).then(function(b){return b.map(function(b){return{c:b,o:a}})})}}}})}},function(g,d,c){var a=c(24);
d.ag=function(b){return new a.Ed({name:"Predicate",ce:{uid:{type:a.Qa,resolve:function(a){return a.c.uid}},name:{type:a.Qa,resolve:function(a){return a.c.name}},values:{type:new a.jc(a.Qa),resolve:function(a){var c=a.o;a=a.c;return b.query()("records").select("value_string").v({o:c.uid,c:a.uid}).then(function(a){return a.map(function(a){return a.te})})}}}})}},function(g,d){d.Je=function(c){return Promise.all([c("entities").count(),c("entity_types").count(),c("sources").count(),c("records").count(),
c("predicates").count()]).then(function(a){var b=F(a);a=F(b.next().value).next().value;var c=F(b.next().value).next().value,d=F(b.next().value).next().value,g=F(b.next().value).next().value,b=F(b.next().value).next().value;return{o:a["count(*)"],A:c["count(*)"],source:d["count(*)"],M:g["count(*)"],c:b["count(*)"]}})}},function(g){g.fa=require("knex")},function(g){g.fa=require("levenshtein")},function(g){g.fa=require("lunr")},function(g){g.fa=require("react-sortable-hoc")},function(g){g.fa=require("signals")},
function(g,d,c){var a=c(39),b=c(0),e=c(35);g=c(36);var f=c(37),k=c(10);c=c(38);d=c.remote.Qg.uh({oh:["openFile"],filters:[{name:"Database Files",Vg:["sqlite"]}]});if(void 0!==d){c.remote.Xg().th("Imperial Entanglements ("+d[0]+")");var l=new g.Database({client:"sqlite3",wh:!0,Og:{filename:d[0]},mh:{Hg:function(a,b){a.rh("PRAGMA foreign_keys = ON",b)}}});document.addEventListener("DOMContentLoaded",function(){a.K(b.createElement(e.Ie,{l:f.yg(l),be:"app",connected:!1,ma:k.Bg,ig:{$g:["/"],ah:0}}),document.getElementById("falcon-container"))})}else c.remote.app.ph()}]);
