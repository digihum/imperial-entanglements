/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst react_dom_1 = __webpack_require__(1);\r\nconst react_1 = __webpack_require__(2);\r\nconst FalconApp_1 = __webpack_require__(3);\r\nconst Database_1 = __webpack_require__(76);\r\nconst api_1 = __webpack_require__(79);\r\nconst react_router_1 = __webpack_require__(4);\r\nconst electron = __webpack_require__(98);\r\nconst databaseFile = electron.remote.dialog.showOpenDialog({ properties: ['openFile'], filters: [\r\n        { name: 'Database Files', extensions: ['sqlite'] }\r\n    ] });\r\nif (databaseFile !== undefined) {\r\n    electron.remote.getCurrentWindow().setTitle(`Imperial Entanglements (${databaseFile[0]})`);\r\n    const db = new Database_1.Database({\r\n        client: 'sqlite3',\r\n        useNullAsDefault: true,\r\n        connection: {\r\n            filename: databaseFile[0]\r\n        },\r\n        pool: {\r\n            afterCreate: (conn, cb) => {\r\n                conn.run('PRAGMA foreign_keys = ON', cb);\r\n            }\r\n        }\r\n    });\r\n    document.addEventListener('DOMContentLoaded', (event) => {\r\n        react_dom_1.render(react_1.createElement(FalconApp_1.FalconApp, {\r\n            api: api_1.wrapDatabase(db, true),\r\n            environment: 'app',\r\n            connected: false,\r\n            router: react_router_1.MemoryRouter,\r\n            routerSettings: {\r\n                initialEntries: ['/'],\r\n                initialIndex: 0\r\n            }\r\n        }), document.getElementById('falcon-container'));\r\n    });\r\n}\r\nelse {\r\n    electron.remote.app.quit();\r\n}\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2FwcC5lbGVjdHJvbi50cz85YzM0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgsMkNBQW1DO0FBQ25DLHVDQUFzQztBQUN0QywyQ0FBZ0Q7QUFDaEQsMkNBQW1EO0FBQ25ELHNDQUFvRDtBQUNwRCw4Q0FBNEM7QUFFNUMseUNBQXFDO0FBRXJDLE1BQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFDLFVBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFHLE9BQU8sRUFBRTtRQUM1RixFQUFDLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxVQUFVLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBQztLQUNqRCxFQUFDLENBQUMsQ0FBQztBQUVOLEVBQUUsQ0FBQyxDQUFDLFlBQVksS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBRS9CLFFBQVEsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxRQUFRLENBQUMsMkJBQTJCLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFM0YsTUFBTSxFQUFFLEdBQUcsSUFBSSxtQkFBUSxDQUFDO1FBQ3RCLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLGdCQUFnQixFQUFFLElBQUk7UUFDdEIsVUFBVSxFQUFFO1lBQ1YsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUM7U0FDMUI7UUFDRCxJQUFJLEVBQUU7WUFDSixXQUFXLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUMzQyxDQUFDO1NBQ0Y7S0FFRixDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxLQUFLO1FBQ2hELGtCQUFNLENBQUMscUJBQWEsQ0FBQyxxQkFBUyxFQUFFO1lBQzVCLEdBQUcsRUFBRSxrQkFBWSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUM7WUFDM0IsV0FBVyxFQUFFLEtBQUs7WUFDbEIsU0FBUyxFQUFFLEtBQUs7WUFDaEIsTUFBTSxFQUFFLDJCQUFZO1lBQ3BCLGNBQWMsRUFBRTtnQkFDZCxjQUFjLEVBQUUsQ0FBQyxHQUFHLENBQUM7Z0JBQ3JCLFlBQVksRUFBRSxDQUFDO2FBQ2hCO1NBQ0osQ0FBQyxFQUFXLFFBQVEsQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO0lBQzlELENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUksQ0FBQyxDQUFDO0lBQ04sUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDN0IsQ0FBQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IEFic3RyYWN0IGludGVyZmFjZSBmb3Igc291cmNlc1xuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMC4xXG4gKi9cblxuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBGYWxjb25BcHAgfSBmcm9tICcuLi9jb21tb24vRmFsY29uQXBwJztcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnLi4vc2VydmVyL2NvcmUvRGF0YWJhc2UnO1xuaW1wb3J0IHsgd3JhcERhdGFiYXNlIH0gZnJvbSAnLi4vc2VydmVyL3JvdXRlcy9hcGknO1xuaW1wb3J0IHsgTWVtb3J5Um91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuaW1wb3J0ICogYXMgZWxlY3Ryb24gZnJvbSAnZWxlY3Ryb24nO1xuXG5jb25zdCBkYXRhYmFzZUZpbGUgPSBlbGVjdHJvbi5yZW1vdGUuZGlhbG9nLnNob3dPcGVuRGlhbG9nKHtwcm9wZXJ0aWVzOiBbJ29wZW5GaWxlJ10sICBmaWx0ZXJzOiBbXG4gICAge25hbWU6ICdEYXRhYmFzZSBGaWxlcycsIGV4dGVuc2lvbnM6IFsnc3FsaXRlJ119XG4gIF19KTtcblxuaWYgKGRhdGFiYXNlRmlsZSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgZWxlY3Ryb24ucmVtb3RlLmdldEN1cnJlbnRXaW5kb3coKS5zZXRUaXRsZShgSW1wZXJpYWwgRW50YW5nbGVtZW50cyAoJHtkYXRhYmFzZUZpbGVbMF19KWApO1xuXG4gIGNvbnN0IGRiID0gbmV3IERhdGFiYXNlKHtcbiAgICBjbGllbnQ6ICdzcWxpdGUzJyxcbiAgICB1c2VOdWxsQXNEZWZhdWx0OiB0cnVlLFxuICAgIGNvbm5lY3Rpb246IHtcbiAgICAgIGZpbGVuYW1lOiBkYXRhYmFzZUZpbGVbMF1cbiAgICB9LFxuICAgIHBvb2w6IHtcbiAgICAgIGFmdGVyQ3JlYXRlOiAoY29ubiwgY2IpID0+IHtcbiAgICAgICAgY29ubi5ydW4oJ1BSQUdNQSBmb3JlaWduX2tleXMgPSBPTicsIGNiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy9kZWJ1ZzogdHJ1ZVxuICB9KTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICByZW5kZXIoY3JlYXRlRWxlbWVudChGYWxjb25BcHAsIHtcbiAgICAgICAgICBhcGk6IHdyYXBEYXRhYmFzZShkYiwgdHJ1ZSksXG4gICAgICAgICAgZW52aXJvbm1lbnQ6ICdhcHAnLFxuICAgICAgICAgIGNvbm5lY3RlZDogZmFsc2UsXG4gICAgICAgICAgcm91dGVyOiBNZW1vcnlSb3V0ZXIsXG4gICAgICAgICAgcm91dGVyU2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGluaXRpYWxFbnRyaWVzOiBbJy8nXSxcbiAgICAgICAgICAgIGluaXRpYWxJbmRleDogMFxuICAgICAgICAgIH1cbiAgICAgIH0pLCA8RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmFsY29uLWNvbnRhaW5lcicpKTtcbiAgfSk7XG59IGVsc2Uge1xuICBlbGVjdHJvbi5yZW1vdGUuYXBwLnF1aXQoKTtcbn1cblxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYXBwL2FwcC5lbGVjdHJvbi50cyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("module.exports = require(\"react-dom\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyZWFjdC1kb21cIj81ZTk5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWFjdC1kb21cIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJyZWFjdC1kb21cIlxuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 2 */
/***/ function(module, exports) {

	eval("module.exports = require(\"react\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyZWFjdFwiPzNjNjIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicmVhY3RcIlxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n//https://react-router.now.sh/Match\r\nconst React = __webpack_require__(2);\r\nconst react_router_1 = __webpack_require__(4);\r\nconst RouteNotFound_1 = __webpack_require__(5);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst itemTypes_1 = __webpack_require__(7);\r\nconst Admin_1 = __webpack_require__(8);\r\nconst AdminApp_1 = __webpack_require__(10);\r\nconst User_1 = __webpack_require__(11);\r\nconst UserManagement_1 = __webpack_require__(12);\r\nconst AppDownload_1 = __webpack_require__(13);\r\nconst DatabaseUpload_1 = __webpack_require__(14);\r\nconst react_router_2 = __webpack_require__(4);\r\nconst ObjectEditor_1 = __webpack_require__(15);\r\nclass FalconApp extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            user: '',\r\n            stats: null\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.environment === 'website' && window !== undefined) {\r\n            fetch('/admin/currentuser', { credentials: 'same-origin' })\r\n                .then((response) => response.json())\r\n                .then((userData) => this.setState({ user: userData.username }));\r\n        }\r\n        this.props.api.getStats()\r\n            .then((stats) => {\r\n            this.setState({ stats });\r\n        });\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", { id: 'main', className: 'flex-fill' },\r\n            React.createElement(this.props.router, __assign({}, this.props.routerSettings, { className: 'flex-fill', basename: '/admin' }),\r\n                React.createElement(\"div\", { className: 'flex-fill', style: { flexDirection: 'column' } },\r\n                    React.createElement(\"div\", { className: 'header' },\r\n                        React.createElement(react_router_2.Link, { to: '/', className: 'logo-link' },\r\n                            React.createElement(\"div\", { className: 'logo' }, \"VRE\")),\r\n                        React.createElement(react_router_2.Link, { to: '/', className: 'header-link' }, \"Home\"),\r\n                        React.createElement(react_router_2.Link, { accessKey: 's', to: '/edit/' + ApiService_1.AppUrls.source, className: 'header-link source' }, itemTypes_1.itemTypes.source.plural),\r\n                        React.createElement(react_router_2.Link, { accessKey: 'e', to: '/edit/' + ApiService_1.AppUrls.entity, className: 'header-link entity' }, itemTypes_1.itemTypes.entity.plural),\r\n                        React.createElement(react_router_2.Link, { accessKey: 'p', to: '/edit/' + ApiService_1.AppUrls.predicate, className: 'header-link predicate' }, itemTypes_1.itemTypes.predicate.plural),\r\n                        React.createElement(react_router_2.Link, { accessKey: 't', to: '/edit/' + ApiService_1.AppUrls.entity_type, className: 'header-link entity_type' }, itemTypes_1.itemTypes.entity_type.plural),\r\n                        this.props.environment === 'website' ? (React.createElement(\"div\", { className: 'right-header' },\r\n                            React.createElement(react_router_2.Link, { to: '/user', className: 'header-link' },\r\n                                React.createElement(\"span\", { className: 'current-user' }, this.state.user)),\r\n                            React.createElement(\"a\", { href: '/admin/logout', className: 'header-link' }, \"Logout\"),\r\n                            React.createElement(\"a\", { href: '/', className: 'header-link' },\r\n                                React.createElement(\"i\", { className: 'fa fa-external-link' })))) : null),\r\n                    this.props.environment === 'website' ? (React.createElement(react_router_1.Match, { exactly: true, pattern: '/', render: (matchprops) => (React.createElement(Admin_1.Admin, __assign({}, matchprops, { stats: this.state.stats }))) })) : (React.createElement(react_router_1.Match, { exactly: true, pattern: '/', render: (matchprops) => (React.createElement(AdminApp_1.AdminApp, __assign({}, matchprops, { stats: this.state.stats }))) })),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/user', component: User_1.User }),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/users', component: UserManagement_1.UserManagement }),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/app', component: AppDownload_1.AppDownload }),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/upload', component: DatabaseUpload_1.DatabaseUpload }),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/search', render: (matchprops) => (React.createElement(ObjectEditor_1.ObjectEditor, __assign({ api: this.props.api }, matchprops, { workspace: 'search' }))) }),\r\n                    React.createElement(react_router_1.Match, { pattern: '/edit/:workspace', render: (matchprops) => (React.createElement(ObjectEditor_1.ObjectEditor, __assign({ api: this.props.api }, matchprops, { workspace: matchprops.params.workspace === 'property' ? 'predicate' : matchprops.params.workspace }))) }),\r\n                    React.createElement(react_router_1.Miss, { component: RouteNotFound_1.RouteNotFound })))));\r\n    }\r\n}\r\nexports.FalconApp = FalconApp;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL0ZhbGNvbkFwcC50c3g/YmFmNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOzs7Ozs7Ozs7O0FBRUgsbUNBQW1DO0FBRW5DLHFDQUErQjtBQUMvQiw4Q0FBMkM7QUFFM0MsK0NBQXNEO0FBRXRELDRDQUFtRDtBQUVuRCwyQ0FBd0M7QUFFeEMsdUNBQXNDO0FBQ3RDLDJDQUEyQztBQUUzQyx1Q0FBb0M7QUFDcEMsaURBQXdEO0FBQ3hELDhDQUFrRDtBQUNsRCxpREFBd0Q7QUFFeEQsOENBQW9DO0FBQ3BDLCtDQUFvRDtBQWlCcEQsZUFBdUIsU0FBUSxLQUFLLENBQUMsU0FBeUM7SUFFMUUsWUFBWSxLQUFxQjtRQUM3QixLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxLQUFLLEdBQUc7WUFDVCxJQUFJLEVBQUUsRUFBRTtZQUNSLEtBQUssRUFBRSxJQUFJO1NBQ2QsQ0FBQztJQUNOLENBQUM7SUFFTSxpQkFBaUI7UUFDcEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEtBQUssU0FBUyxJQUFJLE1BQU0sS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQy9ELEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsQ0FBQztpQkFDdEQsSUFBSSxDQUFDLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztpQkFDbkMsSUFBSSxDQUFDLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN4RSxDQUFDO1FBRUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFO2FBQ3hCLElBQUksQ0FBQyxDQUFDLEtBQUs7WUFDVixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUM7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QUFPLEVBQUMsT0FBTyxFQUFDLFNBQVMsRUFBRSxXQUFJLEdBQUk7b0JBQ2xELG9CQUFDLG9CQUFLLElBQUMsT0FBTyxRQUFDLE9BQU8sRUFBQyxRQUFRLEVBQUMsU0FBUyxFQUFFLCtCQUFjLEdBQUk7b0JBQzdELG9CQUFDLG9CQUFLLElBQUMsT0FBTyxRQUFDLE9BQU8sRUFBQyxNQUFNLEVBQUMsU0FBUyxFQUFFLHlCQUFXLEdBQUk7b0JBQ3hELG9CQUFDLG9CQUFLLElBQUMsT0FBTyxRQUFDLE9BQU8sRUFBQyxTQUFTLEVBQUMsU0FBUyxFQUFFLCtCQUFjLEdBQUk7b0JBRTlELG9CQUFDLG9CQUFLLElBQUMsT0FBTyxRQUFDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxFQUNuQyxDQUFDLFVBQVUsS0FBSyxDQUNaLG9CQUFDLDJCQUFZLGFBQ1QsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFNLFVBQVUsSUFDbkMsU0FBUyxFQUFFLFFBQVEsSUFBSSxDQUFDLEdBQ2hDO29CQUVKLG9CQUFDLG9CQUFLLElBQUMsT0FBTyxFQUFDLGtCQUFrQixFQUFDLE1BQU0sRUFDcEMsQ0FBQyxVQUFVLEtBQUssQ0FDWixvQkFBQywyQkFBWSxhQUNULEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBTSxVQUFVLElBQ25DLFNBQVMsRUFBRSxVQUFVLENBQUMsTUFBTSxDQUFDLFNBQVMsS0FBSyxVQUFVLEdBQUcsV0FBVyxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsU0FBUyxJQUMvRixDQUFDLEdBQ1g7b0JBRUosb0JBQUMsbUJBQUksSUFBQyxTQUFTLEVBQUUsNkJBQWEsR0FBSSxDQUNoQyxDQUNVLENBQ2xCLENBQUMsQ0FBQztJQUNaLENBQUM7Q0FFSjtBQXRGRCw4QkFzRkMiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyA8RGVzY3JpcHRpb24gTWlzc2luZz5cbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbi8vaHR0cHM6Ly9yZWFjdC1yb3V0ZXIubm93LnNoL01hdGNoXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IE1hdGNoLCBNaXNzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuaW1wb3J0IHsgUm91dGVOb3RGb3VuZCB9IGZyb20gJy4vdmlld3MvUm91dGVOb3RGb3VuZCc7XG5cbmltcG9ydCB7IEFwaVNlcnZpY2UsIEFwcFVybHMgfSBmcm9tICcuL0FwaVNlcnZpY2UnO1xuXG5pbXBvcnQgeyBpdGVtVHlwZXMgfSBmcm9tICcuL2l0ZW1UeXBlcyc7XG5cbmltcG9ydCB7IEFkbWluIH0gZnJvbSAnLi92aWV3cy9BZG1pbic7XG5pbXBvcnQgeyBBZG1pbkFwcCB9IGZyb20gJy4uL2FwcC9BZG1pbkFwcCc7XG5cbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuL3ZpZXdzL1VzZXInO1xuaW1wb3J0IHsgVXNlck1hbmFnZW1lbnQgfSBmcm9tICcuL3ZpZXdzL1VzZXJNYW5hZ2VtZW50JztcbmltcG9ydCB7IEFwcERvd25sb2FkIH0gZnJvbSAnLi92aWV3cy9BcHBEb3dubG9hZCc7XG5pbXBvcnQgeyBEYXRhYmFzZVVwbG9hZCB9IGZyb20gJy4vdmlld3MvRGF0YWJhc2VVcGxvYWQnO1xuXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IE9iamVjdEVkaXRvciB9IGZyb20gJy4vdmlld3MvT2JqZWN0RWRpdG9yJztcblxuaW1wb3J0IHsgR2VuZXJhbFN0YXRpc3RpY3MgfSBmcm9tICcuL3N0YXRzL0dlbmVyYWxTdGF0aXN0aWNzJztcblxuaW50ZXJmYWNlIEZhbGNvbkFwcFByb3BzIHtcbiAgICByb3V0ZXI6IGFueTtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgcm91dGVyU2V0dGluZ3M6IGFueTtcbiAgICBlbnZpcm9ubWVudDogJ2FwcCcgfCAnd2Vic2l0ZSc7XG4gICAgY29ubmVjdGVkOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgRmFsY29uQXBwU3RhdGUge1xuICAgIHVzZXI6IHN0cmluZztcbiAgICBzdGF0czogR2VuZXJhbFN0YXRpc3RpY3MgfCBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgRmFsY29uQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEZhbGNvbkFwcFByb3BzLCBGYWxjb25BcHBTdGF0ZT4ge1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IEZhbGNvbkFwcFByb3BzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB1c2VyOiAnJyxcbiAgICAgICAgICAgIHN0YXRzOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5lbnZpcm9ubWVudCA9PT0gJ3dlYnNpdGUnICYmIHdpbmRvdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmZXRjaCgnL2FkbWluL2N1cnJlbnR1c2VyJywgeyBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4gdGhpcy5zZXRTdGF0ZSh7IHVzZXI6IHVzZXJEYXRhLnVzZXJuYW1lIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvcHMuYXBpLmdldFN0YXRzKClcbiAgICAgICAgLnRoZW4oKHN0YXRzKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHN0YXRzIH0pXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgaWQ9J21haW4nIGNsYXNzTmFtZT0nZmxleC1maWxsJz5cbiAgICAgICAgICAgIDx0aGlzLnByb3BzLnJvdXRlciB7Li4udGhpcy5wcm9wcy5yb3V0ZXJTZXR0aW5nc30gY2xhc3NOYW1lPSdmbGV4LWZpbGwnIGJhc2VuYW1lPScvYWRtaW4nPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWZpbGwnIHN0eWxlPXt7IGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIH19PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPScvJyBjbGFzc05hbWU9J2xvZ28tbGluayc+PGRpdiBjbGFzc05hbWU9J2xvZ28nPlZSRTwvZGl2PjwvTGluaz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPScvJyBjbGFzc05hbWU9J2hlYWRlci1saW5rJz5Ib21lPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgYWNjZXNzS2V5PSdzJyB0bz17Jy9lZGl0LycgKyBBcHBVcmxzLnNvdXJjZX0gY2xhc3NOYW1lPSdoZWFkZXItbGluayBzb3VyY2UnPntpdGVtVHlwZXMuc291cmNlLnBsdXJhbH08L0xpbms+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGluayBhY2Nlc3NLZXk9J2UnIHRvPXsnL2VkaXQvJyArIEFwcFVybHMuZW50aXR5fSBjbGFzc05hbWU9J2hlYWRlci1saW5rIGVudGl0eSc+e2l0ZW1UeXBlcy5lbnRpdHkucGx1cmFsfTwvTGluaz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIGFjY2Vzc0tleT0ncCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17Jy9lZGl0LycgKyBBcHBVcmxzLnByZWRpY2F0ZX0gY2xhc3NOYW1lPSdoZWFkZXItbGluayBwcmVkaWNhdGUnPntpdGVtVHlwZXMucHJlZGljYXRlLnBsdXJhbH08L0xpbms+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGluayBhY2Nlc3NLZXk9J3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89eycvZWRpdC8nICsgQXBwVXJscy5lbnRpdHlfdHlwZX0gY2xhc3NOYW1lPSdoZWFkZXItbGluayBlbnRpdHlfdHlwZSc+e2l0ZW1UeXBlcy5lbnRpdHlfdHlwZS5wbHVyYWx9PC9MaW5rPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRoaXMucHJvcHMuZW52aXJvbm1lbnQgPT09ICd3ZWJzaXRlJyA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmlnaHQtaGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89Jy91c2VyJyBjbGFzc05hbWU9J2hlYWRlci1saW5rJz48c3BhbiBjbGFzc05hbWU9J2N1cnJlbnQtdXNlcic+e3RoaXMuc3RhdGUudXNlcn08L3NwYW4+PC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPScvYWRtaW4vbG9nb3V0JyBjbGFzc05hbWU9J2hlYWRlci1saW5rJz5Mb2dvdXQ8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Jy8nIGNsYXNzTmFtZT0naGVhZGVyLWxpbmsnPjxpIGNsYXNzTmFtZT0nZmEgZmEtZXh0ZXJuYWwtbGluayc+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIHsgdGhpcy5wcm9wcy5lbnZpcm9ubWVudCA9PT0gJ3dlYnNpdGUnID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPE1hdGNoIGV4YWN0bHkgcGF0dGVybj0nLycgcmVuZGVyPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIChtYXRjaHByb3BzKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxBZG1pbiB7Li4ubWF0Y2hwcm9wc30gc3RhdHM9e3RoaXMuc3RhdGUuc3RhdHN9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9Lz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxNYXRjaCBleGFjdGx5IHBhdHRlcm49Jy8nIHJlbmRlcj17XG4gICAgICAgICAgICAgICAgICAgICAgICAobWF0Y2hwcm9wcykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QWRtaW5BcHAgey4uLm1hdGNocHJvcHN9IHN0YXRzPXt0aGlzLnN0YXRlLnN0YXRzfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICApfS8+XG4gICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgPE1hdGNoIGV4YWN0bHkgcGF0dGVybj0nL3VzZXInIGNvbXBvbmVudD17VXNlcn0gLz5cbiAgICAgICAgICAgICAgICAgICAgPE1hdGNoIGV4YWN0bHkgcGF0dGVybj0nL3VzZXJzJyBjb21wb25lbnQ9e1VzZXJNYW5hZ2VtZW50fSAvPlxuICAgICAgICAgICAgICAgICAgICA8TWF0Y2ggZXhhY3RseSBwYXR0ZXJuPScvYXBwJyBjb21wb25lbnQ9e0FwcERvd25sb2FkfSAvPlxuICAgICAgICAgICAgICAgICAgICA8TWF0Y2ggZXhhY3RseSBwYXR0ZXJuPScvdXBsb2FkJyBjb21wb25lbnQ9e0RhdGFiYXNlVXBsb2FkfSAvPlxuXG4gICAgICAgICAgICAgICAgICAgIDxNYXRjaCBleGFjdGx5IHBhdHRlcm49Jy9zZWFyY2gnIHJlbmRlcj17XG4gICAgICAgICAgICAgICAgICAgICAgICAobWF0Y2hwcm9wcykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxPYmplY3RFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpPXt0aGlzLnByb3BzLmFwaX0gey4uLm1hdGNocHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZT17J3NlYXJjaCd9IC8+KVxuICAgICAgICAgICAgICAgICAgICB9IC8+XG5cbiAgICAgICAgICAgICAgICAgICAgPE1hdGNoIHBhdHRlcm49Jy9lZGl0Lzp3b3Jrc3BhY2UnIHJlbmRlcj17XG4gICAgICAgICAgICAgICAgICAgICAgICAobWF0Y2hwcm9wcykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxPYmplY3RFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpPXt0aGlzLnByb3BzLmFwaX0gey4uLm1hdGNocHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZT17bWF0Y2hwcm9wcy5wYXJhbXMud29ya3NwYWNlID09PSAncHJvcGVydHknID8gJ3ByZWRpY2F0ZScgOiBtYXRjaHByb3BzLnBhcmFtcy53b3Jrc3BhY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+KVxuICAgICAgICAgICAgICAgICAgICB9IC8+XG5cbiAgICAgICAgICAgICAgICAgICAgPE1pc3MgY29tcG9uZW50PXtSb3V0ZU5vdEZvdW5kfSAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC90aGlzLnByb3BzLnJvdXRlcj5cbiAgICAgICAgPC9kaXY+KTtcbiAgICB9XG5cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vRmFsY29uQXBwLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 4 */
/***/ function(module, exports) {

	eval("module.exports = require(\"react-router\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyZWFjdC1yb3V0ZXJcIj9lZTE2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWFjdC1yb3V0ZXJcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJyZWFjdC1yb3V0ZXJcIlxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.RouteNotFound = (props) => (React.createElement(\"section\", null,\r\n    React.createElement(\"h1\", null,\r\n        \"The page at \",\r\n        props.url,\r\n        \" does not exist :(\")));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZpZXdzL1JvdXRlTm90Rm91bmQudHN4P2ExYzAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFFbEIscUJBQWEsR0FBRyxDQUFDLEtBQXNCLEtBQUssQ0FDckQ7SUFDSTs7UUFBaUIsS0FBSyxDQUFDLEdBQUc7NkJBQXdCLENBQzVDLENBQ2IsQ0FBRSIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IDxEZXNjcmlwdGlvbiBNaXNzaW5nPlxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgY29uc3QgUm91dGVOb3RGb3VuZCA9IChwcm9wczogeyB1cmw6IHN0cmluZyB9KSA9PiAoXG4gICAgPHNlY3Rpb24+XG4gICAgICAgIDxoMT5UaGUgcGFnZSBhdCB7cHJvcHMudXJsfSBkb2VzIG5vdCBleGlzdCA6KDwvaDE+XG4gICAgPC9zZWN0aW9uPlxuKSA7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL3ZpZXdzL1JvdXRlTm90Rm91bmQudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst itemTypes_1 = __webpack_require__(7);\r\nexports.AppUrls = {\r\n    element_set: itemTypes_1.itemTypes.element_set.machineName,\r\n    record: itemTypes_1.itemTypes.record.machineName,\r\n    entity: itemTypes_1.itemTypes.entity.machineName,\r\n    entity_type: itemTypes_1.itemTypes.entity_type.machineName,\r\n    predicate: itemTypes_1.itemTypes.predicate.machineName,\r\n    source: itemTypes_1.itemTypes.source.machineName,\r\n    source_element: itemTypes_1.itemTypes.source_element.machineName,\r\n    element: 'element'\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL0FwaVNlcnZpY2UudHM/MDM1OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUlILDJDQUF3QztBQUUzQixlQUFPLEdBU2hCO0lBQ0EsV0FBVyxFQUFFLHFCQUFTLENBQUMsV0FBVyxDQUFDLFdBQVc7SUFDOUMsTUFBTSxFQUFHLHFCQUFTLENBQUMsTUFBTSxDQUFDLFdBQVc7SUFDckMsTUFBTSxFQUFHLHFCQUFTLENBQUMsTUFBTSxDQUFDLFdBQVc7SUFDckMsV0FBVyxFQUFHLHFCQUFTLENBQUMsV0FBVyxDQUFDLFdBQVc7SUFDL0MsU0FBUyxFQUFHLHFCQUFTLENBQUMsU0FBUyxDQUFDLFdBQVc7SUFDM0MsTUFBTSxFQUFHLHFCQUFTLENBQUMsTUFBTSxDQUFDLFdBQVc7SUFDckMsY0FBYyxFQUFHLHFCQUFTLENBQUMsY0FBYyxDQUFDLFdBQVc7SUFDckQsT0FBTyxFQUFFLFNBQVM7Q0FDckIsQ0FBQyIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IDxEZXNjcmlwdGlvbiBNaXNzaW5nPlxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0IHsgRmFsY29uSXRlbSwgQ29tcG9zaXRlS2V5IH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuXG5pbXBvcnQgeyBpdGVtVHlwZXMgfSBmcm9tICcuL2l0ZW1UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBBcHBVcmxzIDoge1xuICAgIGVsZW1lbnRfc2V0OiBzdHJpbmcsXG4gICAgcmVjb3JkOiBzdHJpbmcsXG4gICAgZW50aXR5OiBzdHJpbmcsXG4gICAgZW50aXR5X3R5cGU6IHN0cmluZyxcbiAgICBwcmVkaWNhdGU6IHN0cmluZyxcbiAgICBzb3VyY2U6IHN0cmluZyxcbiAgICBzb3VyY2VfZWxlbWVudDogc3RyaW5nLFxuICAgIGVsZW1lbnQ6IHN0cmluZ1xufSA9IHtcbiAgICBlbGVtZW50X3NldDogaXRlbVR5cGVzLmVsZW1lbnRfc2V0Lm1hY2hpbmVOYW1lLFxuICAgIHJlY29yZDogIGl0ZW1UeXBlcy5yZWNvcmQubWFjaGluZU5hbWUsXG4gICAgZW50aXR5OiAgaXRlbVR5cGVzLmVudGl0eS5tYWNoaW5lTmFtZSxcbiAgICBlbnRpdHlfdHlwZTogIGl0ZW1UeXBlcy5lbnRpdHlfdHlwZS5tYWNoaW5lTmFtZSxcbiAgICBwcmVkaWNhdGU6ICBpdGVtVHlwZXMucHJlZGljYXRlLm1hY2hpbmVOYW1lLFxuICAgIHNvdXJjZTogIGl0ZW1UeXBlcy5zb3VyY2UubWFjaGluZU5hbWUsXG4gICAgc291cmNlX2VsZW1lbnQ6ICBpdGVtVHlwZXMuc291cmNlX2VsZW1lbnQubWFjaGluZU5hbWUsXG4gICAgZWxlbWVudDogJ2VsZW1lbnQnXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEFwaVNlcnZpY2Uge1xuICAgIGdldEl0ZW08VCBleHRlbmRzIEZhbGNvbkl0ZW0+KG9iajogeyBuZXcoKTogVDsgfSwgYmFzZVVybCA6IHN0cmluZywgdWlkOiBudW1iZXIgfCBDb21wb3NpdGVLZXkpIDogUHJvbWlzZUxpa2U8VD47XG4gICAgZ2V0Q29sbGVjdGlvbjxUIGV4dGVuZHMgRmFsY29uSXRlbT4ob2JqOiB7IG5ldygpOiBUOyB9LCBiYXNlVXJsIDogc3RyaW5nLCBwYXJhbXM6IGFueSkgOiBQcm9taXNlTGlrZTxUW10+O1xuXG4gICAgcG9zdEl0ZW08VCBleHRlbmRzIEZhbGNvbkl0ZW0+KG9iajogeyBuZXcoKTogVDsgfSwgYmFzZVVybCA6IHN0cmluZywgZGF0YTogVCkgOiBQcm9taXNlTGlrZTxhbnk+O1xuICAgIHB1dEl0ZW08VCBleHRlbmRzIEZhbGNvbkl0ZW0+KG9iajogeyBuZXcoKTogVDsgfSwgYmFzZVVybCA6IHN0cmluZywgdWlkOiBudW1iZXIgfCBDb21wb3NpdGVLZXksIGRhdGE6IFQpIDogUHJvbWlzZUxpa2U8YW55PjtcblxuICAgIC8vVE9ETzogcGF0Y2ggaXRlbSB0YWtlcyBhIHN1YnNldCBvZiBhbiBvYmplY3RzIHByb3BlcnRpZXMuIFRoaXMgaXMgY3VycmVudGx5IGJlaW5nIGxvb2tlZCBhdCBpbiBUUyBpbiB0aGVcbiAgICAvL2NvbnRleHQgb2YgdGhlICdzZXRTdGF0ZScgZnVuY3Rpb24gaW4gcmVhY3RcbiAgICBwYXRjaEl0ZW08VCBleHRlbmRzIEZhbGNvbkl0ZW0+KG9iajogeyBuZXcoKTogVDsgfSwgYmFzZVVybCA6IHN0cmluZywgdWlkOiBudW1iZXIgfCBDb21wb3NpdGVLZXksIGRhdGEgOiBhbnkpIDogUHJvbWlzZUxpa2U8YW55PjtcbiAgICBkZWxJdGVtPFQgZXh0ZW5kcyBGYWxjb25JdGVtPihvYmo6IHsgbmV3KCk6IFQ7IH0sIGJhc2VVcmwgOiBzdHJpbmcsIHVpZDogbnVtYmVyIHwgQ29tcG9zaXRlS2V5KSA6IFByb21pc2VMaWtlPGFueT47XG5cbiAgICBxdWVyeShncmFwaFFMUXVlcnk6IHN0cmluZykgOiBQcm9taXNlTGlrZTxhbnk+O1xuICAgIGdldFN0YXRzKCkgOiBQcm9taXNlTGlrZTxhbnk+O1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9BcGlTZXJ2aWNlLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 7 */
/***/ function(module, exports) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nexports.itemTypes = {\r\n    element_set: {\r\n        machineName: 'element_set',\r\n        name: 'Element Set',\r\n        plural: 'Element Sets',\r\n        workspace: ''\r\n    },\r\n    record: {\r\n        machineName: 'record',\r\n        name: 'Record',\r\n        plural: 'Records',\r\n        workspace: ''\r\n    },\r\n    entity: {\r\n        machineName: 'entity',\r\n        name: 'Entity',\r\n        plural: 'Entities',\r\n        workspace: 'entity'\r\n    },\r\n    entity_type: {\r\n        machineName: 'entity_type',\r\n        name: 'Entity Type',\r\n        plural: 'Entity Types',\r\n        workspace: 'entity_type'\r\n    },\r\n    predicate: {\r\n        machineName: 'property',\r\n        name: 'Property',\r\n        plural: 'Properties',\r\n        workspace: 'predicate'\r\n    },\r\n    source: {\r\n        machineName: 'source',\r\n        name: 'Source',\r\n        plural: 'Sources',\r\n        workspace: 'source'\r\n    },\r\n    source_element: {\r\n        machineName: 'source_element',\r\n        name: 'Source Element',\r\n        plural: 'Source Elements',\r\n        workspace: ''\r\n    }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2l0ZW1UeXBlcy50cz8wMTVmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBbUJVLGlCQUFTLEdBQWU7SUFFakMsV0FBVyxFQUFFO1FBQ1QsV0FBVyxFQUFFLGFBQWE7UUFDMUIsSUFBSSxFQUFFLGFBQWE7UUFDbkIsTUFBTSxFQUFFLGNBQWM7UUFDdEIsU0FBUyxFQUFFLEVBQUU7S0FDaEI7SUFFRCxNQUFNLEVBQUU7UUFDSixXQUFXLEVBQUUsUUFBUTtRQUNyQixJQUFJLEVBQUUsUUFBUTtRQUNkLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLFNBQVMsRUFBRSxFQUFFO0tBQ2hCO0lBRUQsTUFBTSxFQUFHO1FBQ0wsV0FBVyxFQUFFLFFBQVE7UUFDckIsSUFBSSxFQUFFLFFBQVE7UUFDZCxNQUFNLEVBQUUsVUFBVTtRQUNsQixTQUFTLEVBQUUsUUFBUTtLQUN0QjtJQUVELFdBQVcsRUFBRTtRQUNULFdBQVcsRUFBRSxhQUFhO1FBQzFCLElBQUksRUFBRSxhQUFhO1FBQ25CLE1BQU0sRUFBRSxjQUFjO1FBQ3RCLFNBQVMsRUFBRSxhQUFhO0tBQzNCO0lBRUQsU0FBUyxFQUFFO1FBQ1AsV0FBVyxFQUFFLFVBQVU7UUFDdkIsSUFBSSxFQUFFLFVBQVU7UUFDaEIsTUFBTSxFQUFFLFlBQVk7UUFDcEIsU0FBUyxFQUFFLFdBQVc7S0FDekI7SUFFRCxNQUFNLEVBQUU7UUFDSixXQUFXLEVBQUUsUUFBUTtRQUNyQixJQUFJLEVBQUUsUUFBUTtRQUNkLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLFNBQVMsRUFBRSxRQUFRO0tBQ3RCO0lBRUQsY0FBYyxFQUFFO1FBQ1osV0FBVyxFQUFFLGdCQUFnQjtRQUM3QixJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCLE1BQU0sRUFBRSxpQkFBaUI7UUFDekIsU0FBUyxFQUFFLEVBQUU7S0FDaEI7Q0FDSixDQUFDIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbnRlcmZhY2UgSXRlbURlc2NyaXB0aW9uIHtcbiAgICBtYWNoaW5lTmFtZTogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBwbHVyYWw6IHN0cmluZztcbiAgICB3b3Jrc3BhY2U6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEl0ZW1UeXBlcyB7XG4gICAgZWxlbWVudF9zZXQ6IEl0ZW1EZXNjcmlwdGlvbjtcbiAgICByZWNvcmQ6IEl0ZW1EZXNjcmlwdGlvbjtcbiAgICBlbnRpdHk6IEl0ZW1EZXNjcmlwdGlvbjtcbiAgICBlbnRpdHlfdHlwZTogSXRlbURlc2NyaXB0aW9uO1xuICAgIHByZWRpY2F0ZTogSXRlbURlc2NyaXB0aW9uO1xuICAgIHNvdXJjZTogSXRlbURlc2NyaXB0aW9uO1xuICAgIHNvdXJjZV9lbGVtZW50OiBJdGVtRGVzY3JpcHRpb247XG59XG5cbmV4cG9ydCBjb25zdCBpdGVtVHlwZXMgOiBJdGVtVHlwZXMgPSB7XG5cbiAgICBlbGVtZW50X3NldDoge1xuICAgICAgICBtYWNoaW5lTmFtZTogJ2VsZW1lbnRfc2V0JyxcbiAgICAgICAgbmFtZTogJ0VsZW1lbnQgU2V0JyxcbiAgICAgICAgcGx1cmFsOiAnRWxlbWVudCBTZXRzJyxcbiAgICAgICAgd29ya3NwYWNlOiAnJ1xuICAgIH0sXG5cbiAgICByZWNvcmQ6IHtcbiAgICAgICAgbWFjaGluZU5hbWU6ICdyZWNvcmQnLFxuICAgICAgICBuYW1lOiAnUmVjb3JkJyxcbiAgICAgICAgcGx1cmFsOiAnUmVjb3JkcycsXG4gICAgICAgIHdvcmtzcGFjZTogJydcbiAgICB9LFxuXG4gICAgZW50aXR5OiAge1xuICAgICAgICBtYWNoaW5lTmFtZTogJ2VudGl0eScsXG4gICAgICAgIG5hbWU6ICdFbnRpdHknLFxuICAgICAgICBwbHVyYWw6ICdFbnRpdGllcycsXG4gICAgICAgIHdvcmtzcGFjZTogJ2VudGl0eSdcbiAgICB9LFxuXG4gICAgZW50aXR5X3R5cGU6IHtcbiAgICAgICAgbWFjaGluZU5hbWU6ICdlbnRpdHlfdHlwZScsXG4gICAgICAgIG5hbWU6ICdFbnRpdHkgVHlwZScsXG4gICAgICAgIHBsdXJhbDogJ0VudGl0eSBUeXBlcycsXG4gICAgICAgIHdvcmtzcGFjZTogJ2VudGl0eV90eXBlJ1xuICAgIH0sXG5cbiAgICBwcmVkaWNhdGU6IHtcbiAgICAgICAgbWFjaGluZU5hbWU6ICdwcm9wZXJ0eScsXG4gICAgICAgIG5hbWU6ICdQcm9wZXJ0eScsXG4gICAgICAgIHBsdXJhbDogJ1Byb3BlcnRpZXMnLFxuICAgICAgICB3b3Jrc3BhY2U6ICdwcmVkaWNhdGUnXG4gICAgfSxcblxuICAgIHNvdXJjZToge1xuICAgICAgICBtYWNoaW5lTmFtZTogJ3NvdXJjZScsXG4gICAgICAgIG5hbWU6ICdTb3VyY2UnLFxuICAgICAgICBwbHVyYWw6ICdTb3VyY2VzJyxcbiAgICAgICAgd29ya3NwYWNlOiAnc291cmNlJ1xuICAgIH0sXG5cbiAgICBzb3VyY2VfZWxlbWVudDoge1xuICAgICAgICBtYWNoaW5lTmFtZTogJ3NvdXJjZV9lbGVtZW50JyxcbiAgICAgICAgbmFtZTogJ1NvdXJjZSBFbGVtZW50JyxcbiAgICAgICAgcGx1cmFsOiAnU291cmNlIEVsZW1lbnRzJyxcbiAgICAgICAgd29ya3NwYWNlOiAnJ1xuICAgIH1cbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9pdGVtVHlwZXMudHMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 8 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst react_router_1 = __webpack_require__(4);\r\nconst StatsGrid_1 = __webpack_require__(9);\r\nexports.Admin = (props) => (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"Welcome to the admin pages\"),\r\n        React.createElement(\"ul\", { className: 'links-list' },\r\n            React.createElement(\"li\", null,\r\n                React.createElement(react_router_1.Link, { to: '/users' },\r\n                    React.createElement(\"i\", { className: 'fa fa-users' }),\r\n                    \" Manage Users\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(react_router_1.Link, { to: '/app' },\r\n                    React.createElement(\"i\", { className: 'fa fa-download' }),\r\n                    \" Download app\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"a\", { href: '/admin/snapshot' },\r\n                    React.createElement(\"i\", { className: 'fa fa-cloud-download' }),\r\n                    \" Download database snapshot\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(react_router_1.Link, { to: '/upload' },\r\n                    React.createElement(\"i\", { className: 'fa fa-cloud-upload' }),\r\n                    \" Upload database file\")))),\r\n    props.stats !== null ? (React.createElement(StatsGrid_1.StatsGrid, { stats: props.stats })) : null));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZpZXdzL0FkbWluLnRzeD81MDFmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBQy9CLDhDQUFvQztBQUVwQywyQ0FBK0M7QUFNbEMsYUFBSyxHQUFHLENBQUMsS0FBa0IsS0FBSyxDQUN6Qyw2QkFBSyxTQUFTLEVBQUMsTUFBTTtJQUNqQjtRQUNJLDZEQUFtQztRQUNuQyw0QkFBSSxTQUFTLEVBQUMsWUFBWTtZQUN0QjtnQkFBSSxvQkFBQyxtQkFBSSxJQUFDLEVBQUUsRUFBQyxRQUFRO29CQUFDLDJCQUFHLFNBQVMsRUFBQyxhQUFhLEdBQUs7b0NBQW9CLENBQUs7WUFDOUU7Z0JBQUksb0JBQUMsbUJBQUksSUFBQyxFQUFFLEVBQUMsTUFBTTtvQkFBQywyQkFBRyxTQUFTLEVBQUMsZ0JBQWdCLEdBQUs7b0NBQW9CLENBQUs7WUFDL0U7Z0JBQUksMkJBQUcsSUFBSSxFQUFDLGlCQUFpQjtvQkFBQywyQkFBRyxTQUFTLEVBQUMsc0JBQXNCLEdBQUs7a0RBQStCLENBQUs7WUFDMUc7Z0JBQUksb0JBQUMsbUJBQUksSUFBQyxFQUFFLEVBQUMsU0FBUztvQkFBQywyQkFBRyxTQUFTLEVBQUMsb0JBQW9CLEdBQUs7NENBQTRCLENBQUssQ0FDN0YsQ0FDQztJQUNULEtBQUssQ0FBQyxLQUFLLEtBQUssSUFBSSxHQUFHLENBQ3RCLG9CQUFDLHFCQUFTLElBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEdBQUksQ0FDbEMsR0FBRyxJQUFJLENBRUwsQ0FDVixDQUFDIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IEdlbmVyYWxTdGF0aXN0aWNzIH0gZnJvbSAnLi4vc3RhdHMvR2VuZXJhbFN0YXRpc3RpY3MnO1xuaW1wb3J0IHsgU3RhdHNHcmlkIH0gZnJvbSAnLi4vc3RhdHMvU3RhdHNHcmlkJztcblxuaW50ZXJmYWNlIEFkbWluUHJvcHMge1xuICBzdGF0czogR2VuZXJhbFN0YXRpc3RpY3MgfCBudWxsO1xufVxuXG5leHBvcnQgY29uc3QgQWRtaW4gPSAocHJvcHMgOiBBZG1pblByb3BzKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3BhZ2UnPlxuICAgICAgICA8c2VjdGlvbj5cbiAgICAgICAgICAgIDxoMT5XZWxjb21lIHRvIHRoZSBhZG1pbiBwYWdlczwvaDE+XG4gICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSdsaW5rcy1saXN0Jz5cbiAgICAgICAgICAgICAgICA8bGk+PExpbmsgdG89Jy91c2Vycyc+PGkgY2xhc3NOYW1lPSdmYSBmYS11c2Vycyc+PC9pPiBNYW5hZ2UgVXNlcnM8L0xpbms+PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+PExpbmsgdG89Jy9hcHAnPjxpIGNsYXNzTmFtZT0nZmEgZmEtZG93bmxvYWQnPjwvaT4gRG93bmxvYWQgYXBwPC9MaW5rPjwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9Jy9hZG1pbi9zbmFwc2hvdCc+PGkgY2xhc3NOYW1lPSdmYSBmYS1jbG91ZC1kb3dubG9hZCc+PC9pPiBEb3dubG9hZCBkYXRhYmFzZSBzbmFwc2hvdDwvYT48L2xpPlxuICAgICAgICAgICAgICAgIDxsaT48TGluayB0bz0nL3VwbG9hZCc+PGkgY2xhc3NOYW1lPSdmYSBmYS1jbG91ZC11cGxvYWQnPjwvaT4gVXBsb2FkIGRhdGFiYXNlIGZpbGU8L0xpbms+PC9saT5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAge3Byb3BzLnN0YXRzICE9PSBudWxsID8gKFxuICAgICAgICAgIDxTdGF0c0dyaWQgc3RhdHM9e3Byb3BzLnN0YXRzfSAvPlxuICAgICAgICApIDogbnVsbH1cblxuICAgICA8L2Rpdj5cbik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL3ZpZXdzL0FkbWluLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 9 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst react_router_1 = __webpack_require__(4);\r\nexports.StatsGrid = (props) => {\r\n    return (React.createElement(\"section\", { className: 'stats-grid' },\r\n        React.createElement(react_router_1.Link, { to: '/edit/entity' },\r\n            React.createElement(\"div\", { className: 'entity' },\r\n                React.createElement(\"span\", { className: 'item-name' }, \"Entities\"),\r\n                React.createElement(\"span\", { className: 'item-count' }, props.stats.entity))),\r\n        React.createElement(react_router_1.Link, { to: '/edit/entity_type' },\r\n            React.createElement(\"div\", { className: 'entity_type' },\r\n                React.createElement(\"span\", { className: 'item-name' }, \"Entity Types\"),\r\n                React.createElement(\"span\", { className: 'item-count' }, props.stats.entityType))),\r\n        React.createElement(react_router_1.Link, { to: '/edit/source' },\r\n            React.createElement(\"div\", { className: 'source' },\r\n                React.createElement(\"span\", { className: 'item-name' }, \"Sources\"),\r\n                React.createElement(\"span\", { className: 'item-count' }, props.stats.source))),\r\n        React.createElement(react_router_1.Link, { to: '/edit/predicate' },\r\n            React.createElement(\"div\", { className: 'predicate' },\r\n                React.createElement(\"span\", { className: 'item-name' }, \"Properties\"),\r\n                React.createElement(\"span\", { className: 'item-count' }, props.stats.predicate))),\r\n        React.createElement(\"div\", { className: 'record' },\r\n            React.createElement(\"span\", { className: 'item-name' }, \"Records\"),\r\n            React.createElement(\"span\", { className: 'item-count' }, props.stats.record))));\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3N0YXRzL1N0YXRzR3JpZC50c3g/OGNlNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUMvQiw4Q0FBb0M7QUFPdkIsaUJBQVMsR0FDaEIsQ0FBQyxLQUFxQjtJQUV4QixNQUFNLENBQUMsQ0FDUCxpQ0FBUyxTQUFTLEVBQUMsWUFBWTtRQUU3QixvQkFBQyxtQkFBSSxJQUFDLEVBQUUsRUFBQyxjQUFjO1lBQ3JCLDZCQUFLLFNBQVMsRUFBQyxRQUFRO2dCQUNyQiw4QkFBTSxTQUFTLEVBQUMsV0FBVyxlQUFnQjtnQkFBQSw4QkFBTSxTQUFTLEVBQUMsWUFBWSxJQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFRLENBQy9GLENBQ0Q7UUFFUCxvQkFBQyxtQkFBSSxJQUFDLEVBQUUsRUFBQyxtQkFBbUI7WUFDMUIsNkJBQUssU0FBUyxFQUFDLGFBQWE7Z0JBQzFCLDhCQUFNLFNBQVMsRUFBQyxXQUFXLG1CQUFvQjtnQkFBQSw4QkFBTSxTQUFTLEVBQUMsWUFBWSxJQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFRLENBQ3ZHLENBQ0Q7UUFFUCxvQkFBQyxtQkFBSSxJQUFDLEVBQUUsRUFBQyxjQUFjO1lBQ3JCLDZCQUFLLFNBQVMsRUFBQyxRQUFRO2dCQUNyQiw4QkFBTSxTQUFTLEVBQUMsV0FBVyxjQUFlO2dCQUFBLDhCQUFNLFNBQVMsRUFBQyxZQUFZLElBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQVEsQ0FDOUYsQ0FDRDtRQUVQLG9CQUFDLG1CQUFJLElBQUMsRUFBRSxFQUFDLGlCQUFpQjtZQUN4Qiw2QkFBSyxTQUFTLEVBQUMsV0FBVztnQkFDeEIsOEJBQU0sU0FBUyxFQUFDLFdBQVcsaUJBQWtCO2dCQUFBLDhCQUFNLFNBQVMsRUFBQyxZQUFZLElBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQVEsQ0FDcEcsQ0FDRDtRQUVQLDZCQUFLLFNBQVMsRUFBQyxRQUFRO1lBQ3JCLDhCQUFNLFNBQVMsRUFBQyxXQUFXLGNBQWU7WUFBQSw4QkFBTSxTQUFTLEVBQUMsWUFBWSxJQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFRLENBQzlGLENBRUUsQ0FDVCxDQUFDO0FBQ04sQ0FBQyxDQUFDIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgU2lkZWJhciBmb3IgZWRpdG9yXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IEdlbmVyYWxTdGF0aXN0aWNzIH0gZnJvbSAnLi9HZW5lcmFsU3RhdGlzdGljcyc7XG5cbmludGVyZmFjZSBTdGF0c0dyaWRQcm9wcyB7XG4gIHN0YXRzOiBHZW5lcmFsU3RhdGlzdGljcztcbn1cblxuZXhwb3J0IGNvbnN0IFN0YXRzR3JpZCA6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxTdGF0c0dyaWRQcm9wcz5cbiAgICA9IChwcm9wczogU3RhdHNHcmlkUHJvcHMpID0+IHtcblxuICAgIHJldHVybiAoXG4gICAgPHNlY3Rpb24gY2xhc3NOYW1lPSdzdGF0cy1ncmlkJz5cblxuICAgICAgPExpbmsgdG89Jy9lZGl0L2VudGl0eSc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlbnRpdHknPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naXRlbS1uYW1lJz5FbnRpdGllczwvc3Bhbj48c3BhbiBjbGFzc05hbWU9J2l0ZW0tY291bnQnPntwcm9wcy5zdGF0cy5lbnRpdHl9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTGluaz5cblxuICAgICAgPExpbmsgdG89Jy9lZGl0L2VudGl0eV90eXBlJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VudGl0eV90eXBlJz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2l0ZW0tbmFtZSc+RW50aXR5IFR5cGVzPC9zcGFuPjxzcGFuIGNsYXNzTmFtZT0naXRlbS1jb3VudCc+e3Byb3BzLnN0YXRzLmVudGl0eVR5cGV9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTGluaz5cblxuICAgICAgPExpbmsgdG89Jy9lZGl0L3NvdXJjZSc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzb3VyY2UnPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naXRlbS1uYW1lJz5Tb3VyY2VzPC9zcGFuPjxzcGFuIGNsYXNzTmFtZT0naXRlbS1jb3VudCc+e3Byb3BzLnN0YXRzLnNvdXJjZX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9MaW5rPlxuXG4gICAgICA8TGluayB0bz0nL2VkaXQvcHJlZGljYXRlJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByZWRpY2F0ZSc+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdpdGVtLW5hbWUnPlByb3BlcnRpZXM8L3NwYW4+PHNwYW4gY2xhc3NOYW1lPSdpdGVtLWNvdW50Jz57cHJvcHMuc3RhdHMucHJlZGljYXRlfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0xpbms+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWNvcmQnPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2l0ZW0tbmFtZSc+UmVjb3Jkczwvc3Bhbj48c3BhbiBjbGFzc05hbWU9J2l0ZW0tY291bnQnPntwcm9wcy5zdGF0cy5yZWNvcmR9PC9zcGFuPlxuICAgICAgPC9kaXY+XG5cbiAgICA8L3NlY3Rpb24+XG4gICAgKTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL3N0YXRzL1N0YXRzR3JpZC50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 10 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst StatsGrid_1 = __webpack_require__(9);\r\nexports.AdminApp = (props) => (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"VRE App\"),\r\n        props.stats !== null ? (React.createElement(StatsGrid_1.StatsGrid, { stats: props.stats })) : null)));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXBwL0FkbWluQXBwLnRzeD9lMDYxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRy9CLDJDQUFzRDtBQVd6QyxnQkFBUSxHQUFHLENBQUMsS0FBb0IsS0FBSyxDQUM5Qyw2QkFBSyxTQUFTLEVBQUMsTUFBTTtJQUNqQjtRQUNJLDBDQUFnQjtRQUNmLEtBQUssQ0FBQyxLQUFLLEtBQUssSUFBSSxHQUFHLENBQ3RCLG9CQUFDLHFCQUFTLElBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEdBQUksQ0FDbEMsR0FBRyxJQUFJLENBQ0YsQ0FDUCxDQUNWLENBQUMiLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEdlbmVyYWxTdGF0aXN0aWNzIH0gZnJvbSAnLi4vY29tbW9uL3N0YXRzL0dlbmVyYWxTdGF0aXN0aWNzJztcbmltcG9ydCB7IFN0YXRzR3JpZCB9IGZyb20gJy4uL2NvbW1vbi9zdGF0cy9TdGF0c0dyaWQnO1xuXG4vLyBpZGVhbGx5OlxuLy8gLSBPcGVuIGZpbGVcbi8vIC0gUmVjZW50IGZpbGVzXG4vLyAtIE1ldHJpY3NcblxuaW50ZXJmYWNlIEFkbWluQXBwUHJvcHMge1xuICBzdGF0czogR2VuZXJhbFN0YXRpc3RpY3MgfCBudWxsO1xufVxuXG5leHBvcnQgY29uc3QgQWRtaW5BcHAgPSAocHJvcHM6IEFkbWluQXBwUHJvcHMpID0+IChcbiAgICA8ZGl2IGNsYXNzTmFtZT0ncGFnZSc+XG4gICAgICAgIDxzZWN0aW9uPlxuICAgICAgICAgICAgPGgxPlZSRSBBcHA8L2gxPlxuICAgICAgICAgICAge3Byb3BzLnN0YXRzICE9PSBudWxsID8gKFxuICAgICAgICAgICAgICA8U3RhdHNHcmlkIHN0YXRzPXtwcm9wcy5zdGF0c30gLz5cbiAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICA8L3NlY3Rpb24+XG4gICAgIDwvZGl2PlxuKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9hcHAvQWRtaW5BcHAudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.User = (props) => (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"This is the user page\"))));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZpZXdzL1VzZXIudHN4P2Q0NWYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFHbEIsWUFBSSxHQUFHLENBQUMsS0FBSyxLQUFLLENBQzNCLDZCQUFLLFNBQVMsRUFBQyxNQUFNO0lBQ2pCO1FBQ0ksd0RBQThCLENBQ3hCLENBQ1IsQ0FDVCxDQUFDIiwiZmlsZSI6IjExLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IDxEZXNjcmlwdGlvbiBNaXNzaW5nPlxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5cbmV4cG9ydCBjb25zdCBVc2VyID0gKHByb3BzKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3BhZ2UnPlxuICAgICAgICA8c2VjdGlvbj5cbiAgICAgICAgICAgIDxoMT5UaGlzIGlzIHRoZSB1c2VyIHBhZ2U8L2gxPlxuICAgICAgICA8L3NlY3Rpb24+XG4gICAgPC9kaXY+XG4pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi92aWV3cy9Vc2VyLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 12 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.UserManagement = (props) => (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"This is the user management page\"))));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZpZXdzL1VzZXJNYW5hZ2VtZW50LnRzeD9lNDM5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBR2xCLHNCQUFjLEdBQUcsQ0FBQyxLQUFLLEtBQUssQ0FDckMsNkJBQUssU0FBUyxFQUFDLE1BQU07SUFDakI7UUFDSSxtRUFBeUMsQ0FDbkMsQ0FDUixDQUNULENBQUMiLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuZXhwb3J0IGNvbnN0IFVzZXJNYW5hZ2VtZW50ID0gKHByb3BzKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3BhZ2UnPlxuICAgICAgICA8c2VjdGlvbj5cbiAgICAgICAgICAgIDxoMT5UaGlzIGlzIHRoZSB1c2VyIG1hbmFnZW1lbnQgcGFnZTwvaDE+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICA8L2Rpdj5cbik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL3ZpZXdzL1VzZXJNYW5hZ2VtZW50LnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 13 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.AppDownload = (props) => (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"App Download\"),\r\n        React.createElement(\"p\", null, \"Use this VRE without an internet connection! Simply download the app for your platform and then\" + \" \" + \"download a database snapshot from the main page. When you are ready, use the upload tool to merge\" + \" \" + \"your offline copy with the server.\"),\r\n        React.createElement(\"ul\", { className: 'links-list' },\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"a\", { href: 'https://github.com/digihum/imperial-entanglements-app/raw/master/bin/imperial-entanglements%20Setup%200.1.1.exe' },\r\n                    React.createElement(\"i\", { className: 'fa fa-windows' }),\r\n                    \" Windows\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"a\", { href: 'https://github.com/digihum/imperial-entanglements-app/raw/master/bin/mac/imperial-entanglements-0.1.1.dmg' },\r\n                    React.createElement(\"i\", { className: 'fa fa-apple' }),\r\n                    \" Mac\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"a\", { href: 'https://github.com/digihum/imperial-entanglements-app/raw/master/bin/imperial-entanglements-0.1.1-x86_64.AppImage' },\r\n                    React.createElement(\"i\", { className: 'fa fa-linux' }),\r\n                    \" Linux\"))))));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZpZXdzL0FwcERvd25sb2FkLnRzeD8wMjc5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBR2xCLG1CQUFXLEdBQUcsQ0FBQyxLQUFLLEtBQUssQ0FDbEMsNkJBQUssU0FBUyxFQUFDLE1BQU07SUFDakI7UUFDSSwrQ0FBcUI7UUFDckIsMFJBRXNDO1FBQ3RDLDRCQUFJLFNBQVMsRUFBQyxZQUFZO1lBQ3hCO2dCQUFJLDJCQUFHLElBQUksRUFBQyxpSEFBaUg7b0JBQUMsMkJBQUcsU0FBUyxFQUFDLGVBQWUsR0FBSzsrQkFBWSxDQUFLO1lBQ2hMO2dCQUFJLDJCQUFHLElBQUksRUFBQywyR0FBMkc7b0JBQUMsMkJBQUcsU0FBUyxFQUFDLGFBQWEsR0FBSzsyQkFBUSxDQUFLO1lBQ3BLO2dCQUFJLDJCQUFHLElBQUksRUFBQyxtSEFBbUg7b0JBQUMsMkJBQUcsU0FBUyxFQUFDLGFBQWEsR0FBSzs2QkFBVSxDQUFLLENBQzNLLENBQ0MsQ0FDUixDQUNULENBQUMiLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuZXhwb3J0IGNvbnN0IEFwcERvd25sb2FkID0gKHByb3BzKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3BhZ2UnPlxuICAgICAgICA8c2VjdGlvbj5cbiAgICAgICAgICAgIDxoMT5BcHAgRG93bmxvYWQ8L2gxPlxuICAgICAgICAgICAgPHA+VXNlIHRoaXMgVlJFIHdpdGhvdXQgYW4gaW50ZXJuZXQgY29ubmVjdGlvbiEgU2ltcGx5IGRvd25sb2FkIHRoZSBhcHAgZm9yIHlvdXIgcGxhdGZvcm0gYW5kIHRoZW5cbiAgICAgICAgICAgIGRvd25sb2FkIGEgZGF0YWJhc2Ugc25hcHNob3QgZnJvbSB0aGUgbWFpbiBwYWdlLiBXaGVuIHlvdSBhcmUgcmVhZHksIHVzZSB0aGUgdXBsb2FkIHRvb2wgdG8gbWVyZ2VcbiAgICAgICAgICAgIHlvdXIgb2ZmbGluZSBjb3B5IHdpdGggdGhlIHNlcnZlci48L3A+XG4gICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSdsaW5rcy1saXN0Jz5cbiAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9kaWdpaHVtL2ltcGVyaWFsLWVudGFuZ2xlbWVudHMtYXBwL3Jhdy9tYXN0ZXIvYmluL2ltcGVyaWFsLWVudGFuZ2xlbWVudHMlMjBTZXR1cCUyMDAuMS4xLmV4ZSc+PGkgY2xhc3NOYW1lPSdmYSBmYS13aW5kb3dzJz48L2k+IFdpbmRvd3M8L2E+PC9saT5cbiAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9kaWdpaHVtL2ltcGVyaWFsLWVudGFuZ2xlbWVudHMtYXBwL3Jhdy9tYXN0ZXIvYmluL21hYy9pbXBlcmlhbC1lbnRhbmdsZW1lbnRzLTAuMS4xLmRtZyc+PGkgY2xhc3NOYW1lPSdmYSBmYS1hcHBsZSc+PC9pPiBNYWM8L2E+PC9saT5cbiAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9kaWdpaHVtL2ltcGVyaWFsLWVudGFuZ2xlbWVudHMtYXBwL3Jhdy9tYXN0ZXIvYmluL2ltcGVyaWFsLWVudGFuZ2xlbWVudHMtMC4xLjEteDg2XzY0LkFwcEltYWdlJz48aSBjbGFzc05hbWU9J2ZhIGZhLWxpbnV4Jz48L2k+IExpbnV4PC9hPjwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICA8L3NlY3Rpb24+XG4gICAgPC9kaXY+XG4pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi92aWV3cy9BcHBEb3dubG9hZC50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 14 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.DatabaseUpload = (props) => (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"This is the database upload page\"),\r\n        React.createElement(\"input\", { type: 'file', id: 'input', accept: '.sqlite' }),\r\n        React.createElement(\"button\", { onClick: () => { alert('Work in process'); } }, \"Upload\"))));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZpZXdzL0RhdGFiYXNlVXBsb2FkLnRzeD83NDAwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBR2xCLHNCQUFjLEdBQUcsQ0FBQyxLQUFLLEtBQUssQ0FDckMsNkJBQUssU0FBUyxFQUFDLE1BQU07SUFDakI7UUFDSSxtRUFBeUM7UUFDekMsK0JBQU8sSUFBSSxFQUFDLE1BQU0sRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFDLE1BQU0sRUFBQyxTQUFTLEdBQUc7UUFDakQsZ0NBQVEsT0FBTyxFQUFFLFFBQVEsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUMsYUFBaUIsQ0FDN0QsQ0FDUixDQUNULENBQUMiLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuZXhwb3J0IGNvbnN0IERhdGFiYXNlVXBsb2FkID0gKHByb3BzKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3BhZ2UnPlxuICAgICAgICA8c2VjdGlvbj5cbiAgICAgICAgICAgIDxoMT5UaGlzIGlzIHRoZSBkYXRhYmFzZSB1cGxvYWQgcGFnZTwvaDE+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT0nZmlsZScgaWQ9J2lucHV0JyBhY2NlcHQ9Jy5zcWxpdGUnIC8+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgYWxlcnQoJ1dvcmsgaW4gcHJvY2VzcycpfX0+VXBsb2FkPC9idXR0b24+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICA8L2Rpdj5cbik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL3ZpZXdzL0RhdGFiYXNlVXBsb2FkLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 15 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nconst React = __webpack_require__(2);\r\nconst Sidebar_1 = __webpack_require__(16);\r\nconst Workspace_1 = __webpack_require__(24);\r\nconst Toast_1 = __webpack_require__(64);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst CreatePredicate_1 = __webpack_require__(65);\r\nconst CreateRecord_1 = __webpack_require__(67);\r\nconst CreatePresetRecord_1 = __webpack_require__(68);\r\nconst CreateSource_1 = __webpack_require__(69);\r\nconst CreateEntity_1 = __webpack_require__(70);\r\nconst CreateEntityType_1 = __webpack_require__(71);\r\nconst ConflictResolution_1 = __webpack_require__(72);\r\nconst DataStore_1 = __webpack_require__(73);\r\nconst DataController_1 = __webpack_require__(75);\r\nclass ObjectEditor extends React.Component {\r\n    constructor(props, context) {\r\n        super();\r\n        let tabs = [];\r\n        if (typeof window !== 'undefined') {\r\n            const tabString = window.localStorage.getItem('open_tabs');\r\n            if (tabString !== null) {\r\n                tabs = JSON.parse(tabString);\r\n            }\r\n        }\r\n        this.state = {\r\n            tabs,\r\n            inBrowser: (typeof window !== 'undefined'),\r\n            modalQueue: [],\r\n            dataStore: lodash_1.cloneDeep(DataStore_1.emptyDataStore),\r\n            loadingWheel: true,\r\n            loading: true,\r\n            id: NaN,\r\n            list: false\r\n        };\r\n        this.boundCreateTab = this.createTab.bind(this);\r\n        this.boundCloseTab = this.closeTab.bind(this);\r\n        this.boundAddModal = this.addModal.bind(this);\r\n        this.boundReload = this.callReload.bind(this);\r\n        this.boundReorderTabs = this.reorderTabs.bind(this);\r\n        Signaller_1.createTab.add(this.boundCreateTab);\r\n        Signaller_1.closeTab.add(this.boundCloseTab);\r\n        Signaller_1.showModal.add(this.boundAddModal);\r\n        Signaller_1.triggerReload.add(this.boundReload);\r\n        Signaller_1.reorderTabs.add(this.boundReorderTabs);\r\n    }\r\n    componentDidMount() {\r\n        this.reload(this.props, false, true);\r\n    }\r\n    callReload() {\r\n        this.reload(this.props, true);\r\n    }\r\n    reload(props, force = false, initialLoad = false) {\r\n        const oldId = parseInt(this.props.location.pathname.substr(this.props.pathname.length + 1));\r\n        const newId = parseInt(props.location.pathname.substr(props.pathname.length + 1));\r\n        const workspaceChanged = props.workspace !== this.props.workspace;\r\n        const idChanged = isNaN(oldId) ? !isNaN(newId) : isNaN(newId) ? true : oldId !== newId;\r\n        const queryChanged = props.location.search !== this.props.location.search;\r\n        const newWorkspace = props.workspace;\r\n        // if we are in the browser, load tabs!\r\n        // if there is not a tab for the current URL - create it\r\n        // if the url is invalid, relocate to /edit/notfound\r\n        if (['entity', 'source', 'predicate', 'entity_type', 'notfound'].indexOf(newWorkspace) === -1) {\r\n            this.context.router.transitionTo('/edit/notfound');\r\n        }\r\n        let updatedTabs = this.state.tabs;\r\n        const isList = isNaN(newId);\r\n        if (this.state.inBrowser) {\r\n            if (isList) {\r\n            }\r\n            else {\r\n                if (lodash_1.find(updatedTabs, (tab) => tab.tabType === newWorkspace && tab.uid == newId) === undefined) {\r\n                    updatedTabs = updatedTabs.concat([{ tabType: newWorkspace, uid: newId, tabClass: 'item' }]);\r\n                }\r\n            }\r\n        }\r\n        // this state always updates\r\n        this.setState({\r\n            id: newId,\r\n            list: props.location.pathname.substr(props.pathname.length + 1).length === 0,\r\n            tabs: updatedTabs\r\n        }, () => {\r\n            if (!initialLoad && this.state.loading && !force) {\r\n                return;\r\n            }\r\n            this.setState({\r\n                loading: true,\r\n                loadingWheel: initialLoad\r\n            }, () => {\r\n                DataController_1.DataController.reload(props.api, this.state.tabs, force, (failWorkspace, failUid) => {\r\n                    if (newWorkspace === failWorkspace && failUid == newId) {\r\n                        this.context.router.transitionTo('/edit/notfound');\r\n                    }\r\n                })\r\n                    .then((dataStore) => {\r\n                    this.setState({\r\n                        dataStore,\r\n                        loading: false,\r\n                        loadingWheel: false\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    }\r\n    createTab(tabType, uid, tabClass, data) {\r\n        // don't add a tab if it already exists\r\n        if (lodash_1.find(this.state.tabs, (tab) => tab.tabType === tabType && tab.uid == uid) === undefined) {\r\n            this.setState({\r\n                tabs: [{ tabType, uid, data, tabClass }].concat(this.state.tabs)\r\n            }, () => {\r\n                this.saveTabs();\r\n                this.reload(this.props);\r\n            });\r\n        }\r\n    }\r\n    updateTab(tabType, uid, data) {\r\n        const tabs = lodash_1.cloneDeep(this.state.tabs);\r\n        const tabId = lodash_1.findIndex(tabs, (tab) => tab.tabType === tabType && tab.uid === uid);\r\n        if (tabId !== -1) {\r\n            tabs[tabId].data = data;\r\n            this.setState({ tabs });\r\n        }\r\n    }\r\n    closeTab(tabType, uid) {\r\n        this.setState({\r\n            tabs: this.state.tabs.filter((a) => a.tabType !== tabType || a.uid !== uid)\r\n        }, () => {\r\n            this.saveTabs();\r\n            this.reload(this.props);\r\n        });\r\n    }\r\n    saveTabs() {\r\n        const tabsString = JSON.stringify(this.state.tabs);\r\n        if (this.state.inBrowser) {\r\n            window.localStorage.setItem('open_tabs', tabsString);\r\n        }\r\n    }\r\n    clearAllTabs() {\r\n        this.setState({ tabs: [] }, () => {\r\n            this.saveTabs();\r\n            this.reload(this.props);\r\n        });\r\n    }\r\n    reorderTabs(reorderFunc) {\r\n        this.setState({ tabs: reorderFunc(this.state.tabs) }, () => {\r\n            this.saveTabs();\r\n            this.reload(this.props);\r\n        });\r\n    }\r\n    addModal(def) {\r\n        this.setState({ modalQueue: [def].concat(this.state.modalQueue) });\r\n    }\r\n    modalComplete(data) {\r\n        if (this.state.modalQueue.length === 0) {\r\n            throw new Error('Attempted to complete non-existent modal');\r\n        }\r\n        this.state.modalQueue[0].complete(data);\r\n        if (this.state.modalQueue.length > 0) {\r\n            this.setState({ modalQueue: lodash_1.tail(this.state.modalQueue) });\r\n        }\r\n    }\r\n    modalCancel() {\r\n        if (this.state.modalQueue.length === 0) {\r\n            throw new Error('Attempted to cancel non-existent modal');\r\n        }\r\n        this.state.modalQueue[0].cancel();\r\n        this.setState({\r\n            modalQueue: []\r\n        });\r\n    }\r\n    componentWillUnmount() {\r\n        this.saveTabs();\r\n        Signaller_1.createTab.remove(this.boundCreateTab);\r\n        Signaller_1.closeTab.remove(this.boundCloseTab);\r\n        Signaller_1.showModal.remove(this.boundAddModal);\r\n        Signaller_1.triggerReload.remove(this.boundReload);\r\n        Signaller_1.reorderTabs.remove(this.boundReorderTabs);\r\n    }\r\n    componentWillReceiveProps(props) {\r\n        this.reload(props);\r\n    }\r\n    render() {\r\n        return (React.createElement(\"section\", { id: 'entity-editor', className: 'flex-fill' },\r\n            React.createElement(\"span\", { className: 'header-colour ' + this.props.workspace }),\r\n            React.createElement(\"span\", { className: 'flex-fill' },\r\n                React.createElement(Sidebar_1.Sidebar, { tabs: this.state.tabs, dataStore: this.state.dataStore, loading: false, clearTabs: this.clearAllTabs.bind(this), list: this.state.list, id: this.state.id, workspace: this.props.workspace }),\r\n                React.createElement(Workspace_1.Workspace, __assign({}, this.props, { id: this.state.id, dataStore: this.state.dataStore, loading: this.state.loadingWheel, list: this.state.list })),\r\n                React.createElement(Toast_1.Toast, null),\r\n                (() => {\r\n                    if (this.state.modalQueue.length === 0) {\r\n                        return null;\r\n                    }\r\n                    const sharedProps = {\r\n                        api: this.props.api,\r\n                        dataStore: this.state.dataStore,\r\n                        complete: this.modalComplete.bind(this),\r\n                        cancel: this.modalCancel.bind(this)\r\n                    };\r\n                    switch (this.state.modalQueue[0].name) {\r\n                        case 'predicate':\r\n                            return (React.createElement(CreatePredicate_1.CreatePredicate, __assign({}, sharedProps, this.state.modalQueue[0].settings)));\r\n                        case 'record':\r\n                            return (React.createElement(CreateRecord_1.CreateRecord, __assign({}, sharedProps, this.state.modalQueue[0].settings)));\r\n                        case 'preset_record':\r\n                            return (React.createElement(CreatePresetRecord_1.CreatePresetRecord, __assign({}, sharedProps, this.state.modalQueue[0].settings)));\r\n                        case 'source':\r\n                            return (React.createElement(CreateSource_1.CreateSource, __assign({}, sharedProps, this.state.modalQueue[0].settings)));\r\n                        case 'entity':\r\n                            return (React.createElement(CreateEntity_1.CreateEntity, __assign({}, sharedProps, this.state.modalQueue[0].settings)));\r\n                        case 'entity_type':\r\n                            return (React.createElement(CreateEntityType_1.CreateEntityType, __assign({}, sharedProps, this.state.modalQueue[0].settings)));\r\n                        case 'conflict_resolution':\r\n                            return (React.createElement(ConflictResolution_1.ConflictResolution, __assign({}, sharedProps, this.state.modalQueue[0].settings)));\r\n                    }\r\n                })()),\r\n            React.createElement(\"span\", { className: 'header-colour ' + this.props.workspace })));\r\n    }\r\n}\r\nObjectEditor.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.ObjectEditor = ObjectEditor;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZpZXdzL09iamVjdEVkaXRvci50c3g/ODg5OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOzs7Ozs7Ozs7O0FBRUgscUNBQStCO0FBSS9CLDBDQUFxRDtBQUNyRCw0Q0FBb0Q7QUFDcEQsd0NBQTRDO0FBRTVDLDRDQUEwRjtBQUMxRix5Q0FBMEQ7QUFFMUQsa0RBQXNFO0FBQ3RFLCtDQUFnRTtBQUNoRSxxREFBNEU7QUFDNUUsK0NBQWdFO0FBQ2hFLCtDQUFnRTtBQUNoRSxtREFBd0U7QUFDeEUscURBQTRFO0FBSTVFLDRDQUF5RDtBQUV6RCxpREFBbUQ7QUEwQm5ELGtCQUEwQixTQUFRLEtBQUssQ0FBQyxTQUErQztJQVluRixZQUFZLEtBQXdCLEVBQUUsT0FBWTtRQUM5QyxLQUFLLEVBQUUsQ0FBQztRQUVSLElBQUksSUFBSSxHQUFXLEVBQUUsQ0FBQztRQUV0QixFQUFFLENBQUMsQ0FBQyxPQUFPLE1BQU0sS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzNELEVBQUUsQ0FBQyxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMvQixDQUFDO1FBQ0gsQ0FBQztRQUVELElBQUksQ0FBQyxLQUFLLEdBQUc7WUFDVCxJQUFJO1lBQ0osU0FBUyxFQUFFLENBQUMsT0FBTyxNQUFNLEtBQUssV0FBVyxDQUFDO1lBQzFDLFVBQVUsRUFBRSxFQUFFO1lBQ2QsU0FBUyxFQUFFLGtCQUFTLENBQUMsMEJBQWMsQ0FBQztZQUNwQyxZQUFZLEVBQUUsSUFBSTtZQUNsQixPQUFPLEVBQUUsSUFBSTtZQUNiLEVBQUUsRUFBRSxHQUFHO1lBQ1AsSUFBSSxFQUFFLEtBQUs7U0FD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QUcsQ0FBQyxDQUFDO3dCQUV6RixLQUFLLHFCQUFxQjs0QkFDdEIsTUFBTSxDQUFDLENBQUMsb0JBQUMsdUNBQWtCLGVBQUssV0FBVyxFQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBSSxDQUFDLENBQUM7b0JBQ2hHLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDLEVBQUUsQ0FDRDtZQUNQLDhCQUFNLFNBQVMsRUFBRSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBUyxDQUMzRCxDQUNiLENBQUM7SUFDTixDQUFDOztBQWxSYSx5QkFBWSxHQUFHO0lBQ3pCLE1BQU0sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO0NBQzVDLENBQUM7QUFKTixvQ0FxUkMiLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICcuLi9BcGlTZXJ2aWNlJztcblxuaW1wb3J0IHsgU2lkZWJhciwgVGFiIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TaWRlYmFyJztcbmltcG9ydCB7IFdvcmtzcGFjZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvV29ya3NwYWNlJztcbmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9Ub2FzdCc7XG5cbmltcG9ydCB7IGNyZWF0ZVRhYiwgY2xvc2VUYWIsIHNob3dNb2RhbCwgdHJpZ2dlclJlbG9hZCwgcmVvcmRlclRhYnMgfSBmcm9tICcuLi9TaWduYWxsZXInO1xuaW1wb3J0IHsgZmluZCwgdGFpbCwgY2xvbmVEZWVwLCBmaW5kSW5kZXggfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBDcmVhdGVQcmVkaWNhdGUgfSBmcm9tICcuLi9jb21wb25lbnRzL21vZGFsL0NyZWF0ZVByZWRpY2F0ZSc7XG5pbXBvcnQgeyBDcmVhdGVSZWNvcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL21vZGFsL0NyZWF0ZVJlY29yZCc7XG5pbXBvcnQgeyBDcmVhdGVQcmVzZXRSZWNvcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL21vZGFsL0NyZWF0ZVByZXNldFJlY29yZCc7XG5pbXBvcnQgeyBDcmVhdGVTb3VyY2UgfSBmcm9tICcuLi9jb21wb25lbnRzL21vZGFsL0NyZWF0ZVNvdXJjZSc7XG5pbXBvcnQgeyBDcmVhdGVFbnRpdHkgfSBmcm9tICcuLi9jb21wb25lbnRzL21vZGFsL0NyZWF0ZUVudGl0eSc7XG5pbXBvcnQgeyBDcmVhdGVFbnRpdHlUeXBlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9tb2RhbC9DcmVhdGVFbnRpdHlUeXBlJztcbmltcG9ydCB7IENvbmZsaWN0UmVzb2x1dGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvbW9kYWwvQ29uZmxpY3RSZXNvbHV0aW9uJztcblxuaW1wb3J0IHsgTW9kYWxEZWZpbml0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9tb2RhbC9Nb2RhbERlZmluaXRpb24nO1xuXG5pbXBvcnQgeyBEYXRhU3RvcmUsIGVtcHR5RGF0YVN0b3JlIH0gZnJvbSAnLi4vRGF0YVN0b3JlJztcblxuaW1wb3J0IHsgRGF0YUNvbnRyb2xsZXIgfSBmcm9tICcuLi9EYXRhQ29udHJvbGxlcic7XG5cbmludGVyZmFjZSBFeHBlY3RlZFBhcmFtcyB7XG4gICAgaWQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEVudGl0eUVkaXRvclByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgcGFyYW1zOiBFeHBlY3RlZFBhcmFtcztcbiAgICB3b3Jrc3BhY2U6IHN0cmluZztcbiAgICBsb2NhdGlvbjogeyBwYXRobmFtZTogc3RyaW5nLCBzZWFyY2g6IHN0cmluZyB9O1xuICAgIHBhdGhuYW1lOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBFbnRpdHlFZGl0b3JTdGF0ZSB7XG4gICAgdGFiczogVGFiW107XG4gICAgaW5Ccm93c2VyOiBib29sZWFuO1xuICAgIG1vZGFsUXVldWU6IE1vZGFsRGVmaW5pdGlvbltdO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xuICAgIGxvYWRpbmc6IGJvb2xlYW47XG4gICAgbG9hZGluZ1doZWVsOiBib29sZWFuO1xuXG4gICAgaWQ6IG51bWJlcjtcbiAgICBsaXN0OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgT2JqZWN0RWRpdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEVudGl0eUVkaXRvclByb3BzLCBFbnRpdHlFZGl0b3JTdGF0ZT4ge1xuXG4gICAgcHVibGljIHN0YXRpYyBjb250ZXh0VHlwZXMgPSB7XG4gICAgICAgIHJvdXRlcjogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHByaXZhdGUgYm91bmRDcmVhdGVUYWI6IGFueTtcbiAgICBwcml2YXRlIGJvdW5kQ2xvc2VUYWI6IGFueTtcbiAgICBwcml2YXRlIGJvdW5kQWRkTW9kYWw6IGFueTtcbiAgICBwcml2YXRlIGJvdW5kUmVsb2FkOiBhbnk7XG4gICAgcHJpdmF0ZSBib3VuZFJlb3JkZXJUYWJzOiBhbnk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogRW50aXR5RWRpdG9yUHJvcHMsIGNvbnRleHQ6IGFueSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIGxldCB0YWJzIDogVGFiW10gPSBbXTtcblxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCB0YWJTdHJpbmcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ29wZW5fdGFicycpO1xuICAgICAgICAgIGlmICh0YWJTdHJpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRhYnMgPSBKU09OLnBhcnNlKHRhYlN0cmluZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHRhYnMsXG4gICAgICAgICAgICBpbkJyb3dzZXI6ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyksXG4gICAgICAgICAgICBtb2RhbFF1ZXVlOiBbXSxcbiAgICAgICAgICAgIGRhdGFTdG9yZTogY2xvbmVEZWVwKGVtcHR5RGF0YVN0b3JlKSxcbiAgICAgICAgICAgIGxvYWRpbmdXaGVlbDogdHJ1ZSxcbiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICBpZDogTmFOLFxuICAgICAgICAgICAgbGlzdDogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmJvdW5kQ3JlYXRlVGFiID0gdGhpcy5jcmVhdGVUYWIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5ib3VuZENsb3NlVGFiID0gdGhpcy5jbG9zZVRhYi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJvdW5kQWRkTW9kYWwgPSB0aGlzLmFkZE1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYm91bmRSZWxvYWQgPSB0aGlzLmNhbGxSZWxvYWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5ib3VuZFJlb3JkZXJUYWJzID0gdGhpcy5yZW9yZGVyVGFicy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIGNyZWF0ZVRhYi5hZGQodGhpcy5ib3VuZENyZWF0ZVRhYik7XG4gICAgICAgIGNsb3NlVGFiLmFkZCh0aGlzLmJvdW5kQ2xvc2VUYWIpO1xuICAgICAgICBzaG93TW9kYWwuYWRkKHRoaXMuYm91bmRBZGRNb2RhbCk7XG4gICAgICAgIHRyaWdnZXJSZWxvYWQuYWRkKHRoaXMuYm91bmRSZWxvYWQpO1xuICAgICAgICByZW9yZGVyVGFicy5hZGQodGhpcy5ib3VuZFJlb3JkZXJUYWJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMucmVsb2FkKHRoaXMucHJvcHMsIGZhbHNlLCB0cnVlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsbFJlbG9hZCgpIHtcbiAgICAgICAgdGhpcy5yZWxvYWQodGhpcy5wcm9wcywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbG9hZChwcm9wczogRW50aXR5RWRpdG9yUHJvcHMsIGZvcmNlOiBib29sZWFuID0gZmFsc2UsIGluaXRpYWxMb2FkIDogYm9vbGVhbiA9IGZhbHNlKSB7XG5cbiAgICAgIGNvbnN0IG9sZElkID0gcGFyc2VJbnQodGhpcy5wcm9wcy5sb2NhdGlvbi5wYXRobmFtZS5zdWJzdHIodGhpcy5wcm9wcy5wYXRobmFtZS5sZW5ndGggKyAxKSk7XG4gICAgICBjb25zdCBuZXdJZCA9IHBhcnNlSW50KHByb3BzLmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cihwcm9wcy5wYXRobmFtZS5sZW5ndGggKyAxKSk7XG5cbiAgICAgIGNvbnN0IHdvcmtzcGFjZUNoYW5nZWQgPSBwcm9wcy53b3Jrc3BhY2UgIT09IHRoaXMucHJvcHMud29ya3NwYWNlO1xuICAgICAgY29uc3QgaWRDaGFuZ2VkID0gaXNOYU4ob2xkSWQpID8gIWlzTmFOKG5ld0lkKSA6IGlzTmFOKG5ld0lkKSA/IHRydWUgOiBvbGRJZCAhPT0gbmV3SWQ7XG4gICAgICBjb25zdCBxdWVyeUNoYW5nZWQgPSBwcm9wcy5sb2NhdGlvbi5zZWFyY2ggIT09IHRoaXMucHJvcHMubG9jYXRpb24uc2VhcmNoO1xuXG4gICAgICBjb25zdCBuZXdXb3Jrc3BhY2UgPSBwcm9wcy53b3Jrc3BhY2U7XG5cbiAgICAgIC8vIGlmIHdlIGFyZSBpbiB0aGUgYnJvd3NlciwgbG9hZCB0YWJzIVxuXG4gICAgICAvLyBpZiB0aGVyZSBpcyBub3QgYSB0YWIgZm9yIHRoZSBjdXJyZW50IFVSTCAtIGNyZWF0ZSBpdFxuICAgICAgLy8gaWYgdGhlIHVybCBpcyBpbnZhbGlkLCByZWxvY2F0ZSB0byAvZWRpdC9ub3Rmb3VuZFxuICAgICAgaWYgKFsnZW50aXR5JywgJ3NvdXJjZScsICdwcmVkaWNhdGUnLCAnZW50aXR5X3R5cGUnLCAnbm90Zm91bmQnXS5pbmRleE9mKG5ld1dvcmtzcGFjZSkgPT09IC0xKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5yb3V0ZXIudHJhbnNpdGlvblRvKCcvZWRpdC9ub3Rmb3VuZCcpO1xuICAgICAgfVxuXG4gICAgICBsZXQgdXBkYXRlZFRhYnMgPSB0aGlzLnN0YXRlLnRhYnM7XG4gICAgICBjb25zdCBpc0xpc3QgPSBpc05hTihuZXdJZCk7XG5cbiAgICAgICBpZiAodGhpcy5zdGF0ZS5pbkJyb3dzZXIpIHtcbiAgICAgICAgIGlmIChpc0xpc3QpIHtcbiAgICAgICAgICAvLyAgaWYgKFxuICAgICAgICAgIC8vICAgIGZpbmQodXBkYXRlZFRhYnMsICh0YWIpID0+IHRhYi50YWJUeXBlID09PSBuZXdXb3Jrc3BhY2UgJiYgdGFiLnRhYkNsYXNzID09ICdsaXN0JykgPT09IHVuZGVmaW5lZCB8fCAvLyBpZiBubyBsaXN0IGV4aXN0cywgZGVmaW5pdGVseSBhZGQgb25lXG4gICAgICAgICAgLy8gICAgICh3b3Jrc3BhY2VDaGFuZ2VkICYmIGlkQ2hhbmdlZCAmJiAhcXVlcnlDaGFuZ2VkKSkge1xuICAgICAgICAgIC8vICAgICAgdXBkYXRlZFRhYnMgPSB1cGRhdGVkVGFicy5jb25jYXQoW3sgdGFiVHlwZTogbmV3V29ya3NwYWNlLCB1aWQ6IERhdGUubm93KCksIHRhYkNsYXNzOiAnbGlzdCd9XSk7XG4gICAgICAgICAgLy8gIH1cbiAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGZpbmQodXBkYXRlZFRhYnMsICh0YWIpID0+IHRhYi50YWJUeXBlID09PSBuZXdXb3Jrc3BhY2UgJiYgdGFiLnVpZCA9PSBuZXdJZCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWJzID0gdXBkYXRlZFRhYnMuY29uY2F0KFt7IHRhYlR5cGU6IG5ld1dvcmtzcGFjZSwgdWlkOiBuZXdJZCwgdGFiQ2xhc3M6ICdpdGVtJ31dKTtcbiAgICAgICAgICB9XG4gICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgLy8gdGhpcyBzdGF0ZSBhbHdheXMgdXBkYXRlc1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlkOiBuZXdJZCxcbiAgICAgICAgbGlzdDogcHJvcHMubG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyKHByb3BzLnBhdGhuYW1lLmxlbmd0aCArIDEpLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgdGFiczogdXBkYXRlZFRhYnNcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgIGlmICghaW5pdGlhbExvYWQgJiYgdGhpcy5zdGF0ZS5sb2FkaW5nICYmICFmb3JjZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICBsb2FkaW5nV2hlZWw6IGluaXRpYWxMb2FkXG4gICAgICAgIH0sICgpID0+IHtcblxuICAgICAgICAgIERhdGFDb250cm9sbGVyLnJlbG9hZChwcm9wcy5hcGksIHRoaXMuc3RhdGUudGFicywgZm9yY2UsIChmYWlsV29ya3NwYWNlLCBmYWlsVWlkKSA9PiB7XG4gICAgICAgICAgICBpZiAobmV3V29ya3NwYWNlID09PSBmYWlsV29ya3NwYWNlICYmIGZhaWxVaWQgPT0gbmV3SWQpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnJvdXRlci50cmFuc2l0aW9uVG8oJy9lZGl0L25vdGZvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKGRhdGFTdG9yZSkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZGF0YVN0b3JlLFxuICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBsb2FkaW5nV2hlZWw6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVRhYih0YWJUeXBlOiBzdHJpbmcsIHVpZDogbnVtYmVyLCB0YWJDbGFzczogc3RyaW5nLCBkYXRhPzogYW55KSB7XG4gICAgICAgIC8vIGRvbid0IGFkZCBhIHRhYiBpZiBpdCBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBpZiAoZmluZCh0aGlzLnN0YXRlLnRhYnMsICh0YWIpID0+IHRhYi50YWJUeXBlID09PSB0YWJUeXBlICYmIHRhYi51aWQgPT0gdWlkKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB0YWJzOiBbeyB0YWJUeXBlLCB1aWQsIGRhdGEsIHRhYkNsYXNzIH1dLmNvbmNhdCh0aGlzLnN0YXRlLnRhYnMpXG4gICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlVGFicygpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVsb2FkKHRoaXMucHJvcHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlVGFiKHRhYlR5cGU6IHN0cmluZywgdWlkOiBudW1iZXIsIGRhdGE6IGFueSkge1xuICAgICAgICBjb25zdCB0YWJzID0gY2xvbmVEZWVwKHRoaXMuc3RhdGUudGFicyk7XG4gICAgICAgIGNvbnN0IHRhYklkID0gZmluZEluZGV4KHRhYnMsICh0YWIpID0+IHRhYi50YWJUeXBlID09PSB0YWJUeXBlICYmIHRhYi51aWQgPT09IHVpZCk7XG4gICAgICAgIGlmICh0YWJJZCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRhYnNbdGFiSWRdLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRhYnMgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2xvc2VUYWIodGFiVHlwZTogc3RyaW5nLCB1aWQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHRhYnM6IHRoaXMuc3RhdGUudGFicy5maWx0ZXIoKGEpID0+IGEudGFiVHlwZSAhPT0gdGFiVHlwZSB8fCBhLnVpZCAhPT0gdWlkKVxuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNhdmVUYWJzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbG9hZCh0aGlzLnByb3BzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNhdmVUYWJzKCkge1xuICAgICAgICBjb25zdCB0YWJzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0ZS50YWJzKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5Ccm93c2VyKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29wZW5fdGFicycsIHRhYnNTdHJpbmcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNsZWFyQWxsVGFicygpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dGFiczogW119LCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNhdmVUYWJzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbG9hZCh0aGlzLnByb3BzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlb3JkZXJUYWJzKHJlb3JkZXJGdW5jOiAodGFiczogVGFiW10pID0+IFRhYltdKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHt0YWJzOiByZW9yZGVyRnVuYyh0aGlzLnN0YXRlLnRhYnMpfSwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zYXZlVGFicygpO1xuICAgICAgICAgICAgdGhpcy5yZWxvYWQodGhpcy5wcm9wcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRNb2RhbChkZWY6IE1vZGFsRGVmaW5pdGlvbikge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbW9kYWxRdWV1ZTogW2RlZl0uY29uY2F0KHRoaXMuc3RhdGUubW9kYWxRdWV1ZSl9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbW9kYWxDb21wbGV0ZShkYXRhOiBhbnkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubW9kYWxRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXR0ZW1wdGVkIHRvIGNvbXBsZXRlIG5vbi1leGlzdGVudCBtb2RhbCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUubW9kYWxRdWV1ZVswXS5jb21wbGV0ZShkYXRhKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubW9kYWxRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbW9kYWxRdWV1ZTogdGFpbCh0aGlzLnN0YXRlLm1vZGFsUXVldWUpIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG1vZGFsQ2FuY2VsKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tb2RhbFF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0ZWQgdG8gY2FuY2VsIG5vbi1leGlzdGVudCBtb2RhbCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUubW9kYWxRdWV1ZVswXS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBtb2RhbFF1ZXVlOiBbXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuc2F2ZVRhYnMoKTtcbiAgICAgICAgY3JlYXRlVGFiLnJlbW92ZSh0aGlzLmJvdW5kQ3JlYXRlVGFiKTtcbiAgICAgICAgY2xvc2VUYWIucmVtb3ZlKHRoaXMuYm91bmRDbG9zZVRhYik7XG4gICAgICAgIHNob3dNb2RhbC5yZW1vdmUodGhpcy5ib3VuZEFkZE1vZGFsKTtcbiAgICAgICAgdHJpZ2dlclJlbG9hZC5yZW1vdmUodGhpcy5ib3VuZFJlbG9hZCk7XG4gICAgICAgIHJlb3JkZXJUYWJzLnJlbW92ZSh0aGlzLmJvdW5kUmVvcmRlclRhYnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKHByb3BzOiBFbnRpdHlFZGl0b3JQcm9wcykge1xuICAgICAgICB0aGlzLnJlbG9hZChwcm9wcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzZWN0aW9uIGlkPSdlbnRpdHktZWRpdG9yJyBjbGFzc05hbWU9J2ZsZXgtZmlsbCc+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXsnaGVhZGVyLWNvbG91ciAnICsgdGhpcy5wcm9wcy53b3Jrc3BhY2V9Pjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdmbGV4LWZpbGwnPlxuICAgICAgICAgICAgICAgICAgICA8U2lkZWJhclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFicz17dGhpcy5zdGF0ZS50YWJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXt0aGlzLnN0YXRlLmRhdGFTdG9yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUYWJzPXt0aGlzLmNsZWFyQWxsVGFicy5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17dGhpcy5zdGF0ZS5saXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e3RoaXMuc3RhdGUuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2U9e3RoaXMucHJvcHMud29ya3NwYWNlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgIDxXb3Jrc3BhY2Ugey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17dGhpcy5zdGF0ZS5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdG9yZT17dGhpcy5zdGF0ZS5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXt0aGlzLnN0YXRlLmxvYWRpbmdXaGVlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q9e3RoaXMuc3RhdGUubGlzdH0vPlxuXG4gICAgICAgICAgICAgICAgICAgIDxUb2FzdCAvPlxuXG4gICAgICAgICAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubW9kYWxRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hhcmVkUHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpOiB0aGlzLnByb3BzLmFwaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhU3RvcmU6IHRoaXMuc3RhdGUuZGF0YVN0b3JlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB0aGlzLm1vZGFsQ29tcGxldGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWw6IHRoaXMubW9kYWxDYW5jZWwuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHRoaXMuc3RhdGUubW9kYWxRdWV1ZVswXS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJlZGljYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICg8Q3JlYXRlUHJlZGljYXRlIHsuLi5zaGFyZWRQcm9wc30gey4uLnRoaXMuc3RhdGUubW9kYWxRdWV1ZVswXS5zZXR0aW5nc30gLz4pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVjb3JkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICg8Q3JlYXRlUmVjb3JkIHsuLi5zaGFyZWRQcm9wc30gey4uLnRoaXMuc3RhdGUubW9kYWxRdWV1ZVswXS5zZXR0aW5nc30vPik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwcmVzZXRfcmVjb3JkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICg8Q3JlYXRlUHJlc2V0UmVjb3JkIHsuLi5zaGFyZWRQcm9wc30gey4uLnRoaXMuc3RhdGUubW9kYWxRdWV1ZVswXS5zZXR0aW5nc30vPik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDxDcmVhdGVTb3VyY2Ugey4uLnNoYXJlZFByb3BzfSB7Li4udGhpcy5zdGF0ZS5tb2RhbFF1ZXVlWzBdLnNldHRpbmdzfS8+KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudGl0eSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoPENyZWF0ZUVudGl0eSB7Li4uc2hhcmVkUHJvcHN9IHsuLi50aGlzLnN0YXRlLm1vZGFsUXVldWVbMF0uc2V0dGluZ3N9Lz4pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW50aXR5X3R5cGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDxDcmVhdGVFbnRpdHlUeXBlIHsuLi5zaGFyZWRQcm9wc30gey4uLnRoaXMuc3RhdGUubW9kYWxRdWV1ZVswXS5zZXR0aW5nc30vPik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjb25mbGljdF9yZXNvbHV0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICg8Q29uZmxpY3RSZXNvbHV0aW9uIHsuLi5zaGFyZWRQcm9wc30gey4uLnRoaXMuc3RhdGUubW9kYWxRdWV1ZVswXS5zZXR0aW5nc30gLz4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9eydoZWFkZXItY29sb3VyICcgKyB0aGlzLnByb3BzLndvcmtzcGFjZX0+PC9zcGFuPlxuICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vdmlld3MvT2JqZWN0RWRpdG9yLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 16 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst SearchBox_1 = __webpack_require__(17);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst react_router_1 = __webpack_require__(4);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst react_sortable_hoc_1 = __webpack_require__(23);\r\nconst Handle = react_sortable_hoc_1.SortableHandle((props) => (React.createElement(\"div\", { className: 'badge-container' },\r\n    React.createElement(\"div\", { className: 'badge ' + props.tabType },\r\n        React.createElement(\"span\", null, props.tabType[0].toUpperCase())))));\r\nconst onCloseTab = (e, tabType, uid) => {\r\n    Signaller_1.closeTab.dispatch(tabType, uid);\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    e.nativeEvent.stopImmediatePropagation();\r\n};\r\nconst Card = react_sortable_hoc_1.SortableElement((props) => (React.createElement(\"li\", { key: `${props.url}` },\r\n    React.createElement(\"div\", { className: ((currentTab) => {\r\n            const classes = ['sidebar-card', props.tab.tabClass];\r\n            if (currentTab) {\r\n                classes.push('current');\r\n            }\r\n            if (props.compact) {\r\n                classes.push('compact');\r\n            }\r\n            return classes.join(' ');\r\n        })(props.currentTab) },\r\n        React.createElement(Handle, { tabType: props.tab.tabType, index: props.index, collection: props.collection, disabled: props.disabled }),\r\n        React.createElement(\"div\", { className: 'description' },\r\n            React.createElement(react_router_1.Link, { to: props.url },\r\n                React.createElement(\"span\", { className: 'entity-name' }, props.title),\r\n                props.compact ? null : lodash_1.isArray(props.subtitle) ? (React.createElement(\"ul\", null, props.subtitle.map((sub, i) => (React.createElement(\"li\", { key: `tab-${props.index}-${i}` }, sub))))) : (React.createElement(\"span\", { className: 'entity-type' }, props.subtitle)))),\r\n        !props.currentTab ? (React.createElement(\"span\", { className: 'close-button' },\r\n            React.createElement(\"i\", { className: 'fa fa-times', onClick: (e) => onCloseTab(e, props.tab.tabType, props.tab.uid) }))) : null))));\r\nconst CardList = react_sortable_hoc_1.SortableContainer((props) => {\r\n    return (React.createElement(\"ul\", { className: 'card-list' }, !props.loading ? props.tabs.map((tab, index) => {\r\n        // TODO: shouldn't be ==\r\n        const item = props.dataStore.all[tab.tabType].value\r\n            .find((item) => item.uid == tab.uid);\r\n        let url = null;\r\n        if (tab.tabClass === 'item') {\r\n            url = `/edit/${ApiService_1.AppUrls[tab.tabType]}/${tab.uid}`;\r\n        }\r\n        else {\r\n            if (tab.tabClass === 'view') {\r\n                url = {\r\n                    pathname: `/edit/${ApiService_1.AppUrls[tab.tabType]}`,\r\n                    query: tab.data\r\n                };\r\n            }\r\n        }\r\n        const subtitle = tab.tabClass === 'item' ?\r\n            lodash_1.capitalize(ApiService_1.AppUrls[tab.tabType]).replace('_', ' ') + ' ' + tab.uid\r\n            : Object.keys(tab.data).map((title) => `${title}: ${tab.data[title]}`);\r\n        const title = item === undefined ? `${tab.tabType} list` : item.label;\r\n        const currentTab = !props.list && tab.tabType === props.workspace && tab.uid == props.id;\r\n        return (React.createElement(Card, { key: `tab-${index}`, currentTab: currentTab, url: url, tab: tab, title: title, subtitle: subtitle, index: index, compact: props.compact }));\r\n    }) : null));\r\n});\r\nclass Sidebar extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.onSortEnd = ({ oldIndex, newIndex }) => {\r\n            Signaller_1.reorderTabs.dispatch((tabs) => {\r\n                return react_sortable_hoc_1.arrayMove(tabs, oldIndex, newIndex);\r\n            });\r\n        };\r\n        this.state = {\r\n            searchString: '',\r\n            compactMode: false\r\n        };\r\n    }\r\n    render() {\r\n        return (React.createElement(\"section\", { id: 'sidebar' },\r\n            React.createElement(SearchBox_1.SearchBox, { searchString: this.state.searchString, dataStore: this.props.dataStore, onChange: (evt) => this.setState({ searchString: evt.currentTarget.value }) }),\r\n            React.createElement(\"div\", { className: 'sidebar-toolbar' },\r\n                React.createElement(\"button\", { onClick: this.props.clearTabs },\r\n                    React.createElement(\"i\", { className: 'fa fa-trash' }),\r\n                    \" Clear All\"),\r\n                React.createElement(\"button\", { onClick: () => this.setState({ compactMode: !this.state.compactMode }) },\r\n                    React.createElement(\"i\", { className: 'fa fa-compress' }),\r\n                    \" Compact\")),\r\n            React.createElement(\"div\", { className: 'card-list-container' },\r\n                React.createElement(CardList, { dataStore: this.props.dataStore, loading: this.props.loading, tabs: this.props.tabs, list: this.props.list, workspace: this.props.workspace, id: this.props.id, compact: this.state.compactMode, onSortEnd: this.onSortEnd, useDragHandle: true }))));\r\n    }\r\n}\r\nexports.Sidebar = Sidebar;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvU2lkZWJhci50c3g/YWVlYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUMvQiw0Q0FBZ0Q7QUFDaEQsNENBQXdDO0FBQ3hDLDhDQUFvQztBQUVwQyw0Q0FBcUQ7QUFFckQseUNBQTZDO0FBRTdDLHFEQUFpRztBQVVqRyxNQUFNLE1BQU0sR0FBRyxtQ0FBYyxDQUFDLENBQUMsS0FBd0IsS0FBSyxDQUMxRCw2QkFBSyxTQUFTLEVBQUMsaUJBQWlCO0lBQzVCLDZCQUFLLFNBQVMsRUFBRSxRQUFRLEdBQUcsS0FBSyxDQUFDLE9BQU87UUFDcEMsa0NBQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBUSxDQUMzQyxDQUNKLENBQ1AsQ0FBQyxDQUFDO0FBRUgsTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFtQixFQUFFLE9BQWUsRUFBRSxHQUFXO0lBQ2pFLG9CQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNoQyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDcEIsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ25CLENBQUMsQ0FBQyxXQUFXLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztBQUM3QyxDQUFDO0FBRUQsTUFBTSxJQUFJLEdBQUcsb0NBQWUsQ0FBQyxDQUFDLEtBQ0QsS0FBSyxDQUM1Qiw0QkFBSSxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBRyxFQUFFO0lBQ25CLDZCQUFLLFNBQVMsRUFBRSxDQUFDLENBQUMsVUFBVTtZQUN4QixNQUFNLE9BQU8sR0FBRyxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3JELEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQ2IsT0FBTyxDQUFDLElBQUks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LENBQUMsSUFBSSxFQUNyQixJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQ3JCLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFDL0IsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUNqQixPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQy9CLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUN6QixhQUFhLEVBQUUsSUFBSSxHQUNuQixDQUNFLENBQ0EsQ0FDYixDQUFDO0lBQ04sQ0FBQztDQUNKO0FBM0NELDBCQTJDQyIsImZpbGUiOiIxNi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNlYXJjaEJveCB9IGZyb20gJy4vc2lkZWJhci9TZWFyY2hCb3gnO1xuaW1wb3J0IHsgQXBwVXJscyB9IGZyb20gJy4uL0FwaVNlcnZpY2UnO1xuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuLi9EYXRhU3RvcmUnO1xuaW1wb3J0IHsgY2xvc2VUYWIsIHJlb3JkZXJUYWJzIH0gZnJvbSAnLi4vU2lnbmFsbGVyJztcblxuaW1wb3J0IHsgY2FwaXRhbGl6ZSwgaXNBcnJheSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7U29ydGFibGVDb250YWluZXIsIFNvcnRhYmxlRWxlbWVudCwgU29ydGFibGVIYW5kbGUsIGFycmF5TW92ZX0gZnJvbSAncmVhY3Qtc29ydGFibGUtaG9jJztcblxuZXhwb3J0IGludGVyZmFjZSBUYWIge1xuICAgIHRhYlR5cGU6IHN0cmluZztcbiAgICB0YWJDbGFzczogc3RyaW5nO1xuICAgIHVpZDogbnVtYmVyO1xuICAgIHF1ZXJ5PzogeyBbczogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgZGF0YT86IGFueTtcbn1cblxuY29uc3QgSGFuZGxlID0gU29ydGFibGVIYW5kbGUoKHByb3BzOiB7dGFiVHlwZTogc3RyaW5nfSkgPT4gKFxuICA8ZGl2IGNsYXNzTmFtZT0nYmFkZ2UtY29udGFpbmVyJz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXsnYmFkZ2UgJyArIHByb3BzLnRhYlR5cGV9PlxuICAgICAgICAgIDxzcGFuPntwcm9wcy50YWJUeXBlWzBdLnRvVXBwZXJDYXNlKCl9PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gIDwvZGl2PlxuKSk7XG5cbmNvbnN0IG9uQ2xvc2VUYWIgPSAoZTogUmVhY3QuTW91c2VFdmVudCwgdGFiVHlwZTogc3RyaW5nLCB1aWQ6IG51bWJlcikgPT4ge1xuICAgIGNsb3NlVGFiLmRpc3BhdGNoKHRhYlR5cGUsIHVpZCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5uYXRpdmVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbn1cblxuY29uc3QgQ2FyZCA9IFNvcnRhYmxlRWxlbWVudCgocHJvcHM6IHtjdXJyZW50VGFiOiBib29sZWFuLCB1cmw6IGFueSwgaW5kZXg6IG51bWJlciwgdGFiOiBUYWIsIHRpdGxlOiBzdHJpbmcsIHN1YnRpdGxlOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICAgICAgICAgIGNvbXBhY3Q6IGJvb2xlYW59KSA9PiAoXG4gICAgICA8bGkga2V5PXtgJHtwcm9wcy51cmx9YH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9eygoY3VycmVudFRhYikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjbGFzc2VzID0gWydzaWRlYmFyLWNhcmQnLCBwcm9wcy50YWIudGFiQ2xhc3NdO1xuICAgICAgICAgICAgICBpZiAoY3VycmVudFRhYikge1xuICAgICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHByb3BzLmNvbXBhY3QpIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnY29tcGFjdCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcbiAgICAgICAgICB9KShwcm9wcy5jdXJyZW50VGFiKX0+XG4gICAgICAgICAgICAgIDxIYW5kbGUgdGFiVHlwZT17cHJvcHMudGFiLnRhYlR5cGV9IGluZGV4PXtwcm9wcy5pbmRleH0gY29sbGVjdGlvbj17cHJvcHMuY29sbGVjdGlvbn0gZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfS8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkZXNjcmlwdGlvbic+XG4gICAgICAgICAgICAgICAgICA8TGluayB0bz17cHJvcHMudXJsfT5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2VudGl0eS1uYW1lJz57cHJvcHMudGl0bGV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIHtwcm9wcy5jb21wYWN0ID8gbnVsbCA6IGlzQXJyYXkocHJvcHMuc3VidGl0bGUpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsPntwcm9wcy5zdWJ0aXRsZS5tYXAoKHN1YiwgaSkgPT4gKDxsaSBrZXk9e2B0YWItJHtwcm9wcy5pbmRleH0tJHtpfWB9PntzdWJ9PC9saT4pKX08L3VsPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZW50aXR5LXR5cGUnPntwcm9wcy5zdWJ0aXRsZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHshcHJvcHMuY3VycmVudFRhYiA/IChcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nY2xvc2UtYnV0dG9uJz5cbiAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXRpbWVzJyBvbkNsaWNrPXsoZSkgPT4gb25DbG9zZVRhYihlLCBwcm9wcy50YWIudGFiVHlwZSwgcHJvcHMudGFiLnVpZCl9PjwvaT5cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICA8L2xpPlxuICApKTtcblxuY29uc3QgQ2FyZExpc3QgPSBTb3J0YWJsZUNvbnRhaW5lcigocHJvcHM6IHtcbiAgICBkYXRhU3RvcmU6IERhdGFTdG9yZSxcbiAgICBsb2FkaW5nOiBib29sZWFuLFxuICAgIHRhYnM6IFRhYltdLFxuICAgIGxpc3Q6IGJvb2xlYW4sXG4gICAgd29ya3NwYWNlOiBzdHJpbmcsXG4gICAgaWQ6IG51bWJlcixcbiAgICBjb21wYWN0OiBib29sZWFufSkgPT4ge1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDx1bCBjbGFzc05hbWU9J2NhcmQtbGlzdCc+XG4gICAgICAgICAgICB7IXByb3BzLmxvYWRpbmcgPyBwcm9wcy50YWJzLm1hcCgodGFiLCBpbmRleCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogc2hvdWxkbid0IGJlID09XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHByb3BzLmRhdGFTdG9yZS5hbGxbdGFiLnRhYlR5cGVdLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKChpdGVtKSA9PiBpdGVtLnVpZCA9PSB0YWIudWlkKTtcblxuICAgICAgICAgICAgICAgIGxldCB1cmwgOiBzdHJpbmcgfCBPYmplY3QgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodGFiLnRhYkNsYXNzID09PSAnaXRlbScpIHtcbiAgICAgICAgICAgICAgICAgIHVybCA9IGAvZWRpdC8ke0FwcFVybHNbdGFiLnRhYlR5cGVdfS8ke3RhYi51aWR9YDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaWYgKHRhYi50YWJDbGFzcyA9PT0gJ3ZpZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICBwYXRobmFtZTogYC9lZGl0LyR7QXBwVXJsc1t0YWIudGFiVHlwZV19YCxcbiAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogdGFiLmRhdGFcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdWJ0aXRsZSA9IHRhYi50YWJDbGFzcyA9PT0gJ2l0ZW0nID9cbiAgICAgICAgICAgICAgICAgIGNhcGl0YWxpemUoQXBwVXJsc1t0YWIudGFiVHlwZV0pLnJlcGxhY2UoJ18nLCAnICcpICsgJyAnICsgdGFiLnVpZFxuICAgICAgICAgICAgICAgICAgOiBPYmplY3Qua2V5cyh0YWIuZGF0YSkubWFwKCh0aXRsZSkgPT4gYCR7dGl0bGV9OiAke3RhYi5kYXRhW3RpdGxlXX1gKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gaXRlbSA9PT0gdW5kZWZpbmVkID8gYCR7dGFiLnRhYlR5cGV9IGxpc3RgIDogaXRlbS5sYWJlbDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUYWIgPSAhcHJvcHMubGlzdCAmJiB0YWIudGFiVHlwZSA9PT0gcHJvcHMud29ya3NwYWNlICYmIHRhYi51aWQgPT0gcHJvcHMuaWQ7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgPENhcmRcbiAgICAgICAgICAgICAgICAgIGtleT17YHRhYi0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICBjdXJyZW50VGFiPXtjdXJyZW50VGFifVxuICAgICAgICAgICAgICAgICAgdXJsPXt1cmx9XG4gICAgICAgICAgICAgICAgICB0YWI9e3RhYn1cbiAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICAgIHN1YnRpdGxlPXtzdWJ0aXRsZX1cbiAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgIGNvbXBhY3Q9e3Byb3BzLmNvbXBhY3R9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgfSkgOiBudWxsfVxuICAgICAgICA8L3VsPlxuICAgICk7XG59KTtcblxuXG5pbnRlcmZhY2UgU2lkZWJhclByb3BzIHtcbiAgICB0YWJzOiBUYWJbXTtcbiAgICBkYXRhU3RvcmU6IERhdGFTdG9yZTtcbiAgICBsb2FkaW5nOiBib29sZWFuO1xuICAgIGNsZWFyVGFiczogYW55O1xuICAgIHdvcmtzcGFjZTogc3RyaW5nO1xuICAgIGxpc3Q6IGJvb2xlYW47XG4gICAgaWQ6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFNpZGViYXJTdGF0ZSB7XG4gICAgc2VhcmNoU3RyaW5nOiBzdHJpbmc7XG4gICAgY29tcGFjdE1vZGU6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBTaWRlYmFyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFNpZGViYXJQcm9wcywgU2lkZWJhclN0YXRlPiB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlYXJjaFN0cmluZzogJycsXG4gICAgICAgICAgICBjb21wYWN0TW9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25Tb3J0RW5kID0gKHtvbGRJbmRleCwgbmV3SW5kZXh9KSA9PiB7XG4gICAgICByZW9yZGVyVGFicy5kaXNwYXRjaCgodGFicykgPT4ge1xuICAgICAgICByZXR1cm4gYXJyYXlNb3ZlKHRhYnMsIG9sZEluZGV4LCBuZXdJbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8c2VjdGlvbiBpZD0nc2lkZWJhcic+XG4gICAgICAgICAgICAgICAgPFNlYXJjaEJveCBzZWFyY2hTdHJpbmc9e3RoaXMuc3RhdGUuc2VhcmNoU3RyaW5nfVxuICAgICAgICAgICAgICAgIGRhdGFTdG9yZT17dGhpcy5wcm9wcy5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhldnQpID0+IHRoaXMuc2V0U3RhdGUoe3NlYXJjaFN0cmluZzogZXZ0LmN1cnJlbnRUYXJnZXQudmFsdWV9KX0gLz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZWJhci10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLnByb3BzLmNsZWFyVGFic30+PGkgY2xhc3NOYW1lPSdmYSBmYS10cmFzaCc+PC9pPiBDbGVhciBBbGw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHtjb21wYWN0TW9kZTogIXRoaXMuc3RhdGUuY29tcGFjdE1vZGV9KX0+PGkgY2xhc3NOYW1lPSdmYSBmYS1jb21wcmVzcyc+PC9pPiBDb21wYWN0PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NhcmQtbGlzdC1jb250YWluZXInPlxuICAgICAgICAgICAgICAgICA8Q2FyZExpc3RcbiAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXt0aGlzLnByb3BzLmRhdGFTdG9yZX1cbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17dGhpcy5wcm9wcy5sb2FkaW5nfVxuICAgICAgICAgICAgICAgICAgICB0YWJzPXt0aGlzLnByb3BzLnRhYnN9XG4gICAgICAgICAgICAgICAgICAgIGxpc3Q9e3RoaXMucHJvcHMubGlzdH1cbiAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlPXt0aGlzLnByb3BzLndvcmtzcGFjZX1cbiAgICAgICAgICAgICAgICAgICAgaWQ9e3RoaXMucHJvcHMuaWR9XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhY3Q9e3RoaXMuc3RhdGUuY29tcGFjdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgIG9uU29ydEVuZD17dGhpcy5vblNvcnRFbmR9XG4gICAgICAgICAgICAgICAgICAgIHVzZURyYWdIYW5kbGU9e3RydWV9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9TaWRlYmFyLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 17 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Searchboc for sidebar\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst ComboDropdown_1 = __webpack_require__(18);\r\nconst ApiService_1 = __webpack_require__(6);\r\nexports.SearchBox = (props, context) => {\r\n    const entities = props.dataStore.all.entity.value.map((entity) => ({ key: entity.label, value: entity.uid, meta: { itemType: ApiService_1.AppUrls.entity } }));\r\n    const entityTypes = props.dataStore.all.entity_type.value.map((entityType) => ({ key: entityType.label, value: entityType.uid, meta: { itemType: ApiService_1.AppUrls.entity_type } }));\r\n    const predicates = props.dataStore.all.predicate.value.map((predicate) => ({ key: predicate.label, value: predicate.uid, meta: { itemType: ApiService_1.AppUrls.predicate } }));\r\n    const sources = props.dataStore.all.source.value.map((source) => ({ key: source.label, value: source.uid, meta: { itemType: ApiService_1.AppUrls.source } }));\r\n    const all = entities.concat(entityTypes, predicates, sources);\r\n    return (React.createElement(\"span\", null,\r\n        React.createElement(\"div\", { className: 'input-addon-formgroup' },\r\n            React.createElement(\"span\", { className: 'input-addon-icon' },\r\n                React.createElement(\"i\", { className: 'fa fa-search fa-fw' })),\r\n            React.createElement(ComboDropdown_1.ComboDropdown, { value: { key: '', value: '' }, setValue: (val) => {\r\n                    context.router.transitionTo(`/edit/${val.meta.itemType}/${val.value}`);\r\n                }, typeName: 'all', options: all, allowNew: false, createNewValue: () => { } }))));\r\n};\r\nexports.SearchBox.contextTypes = { router: React.PropTypes.object.isRequired };\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvc2lkZWJhci9TZWFyY2hCb3gudHN4PzUyNjQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFDL0IsZ0RBQWlEO0FBR2pELDRDQUEyQztBQVE5QixpQkFBUyxHQUFHLENBQUMsS0FBc0IsRUFBRSxPQUFZO0lBRTFELE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxLQUN6RCxDQUFDLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsUUFBUSxFQUFFLG9CQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFcEYsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxVQUFVLEtBQ3JFLENBQUMsRUFBRSxHQUFHLEVBQUUsVUFBVSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxRQUFRLEVBQUUsb0JBQU8sQ0FBQyxXQUFXLEVBQUUsRUFBRyxDQUFDLENBQUMsQ0FBQztJQUVsRyxNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsS0FDakUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxTQUFTLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLFFBQVEsRUFBRSxvQkFBTyxDQUFDLFNBQVMsRUFBRSxFQUFHLENBQUMsQ0FBQyxDQUFDO0lBRTlGLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxLQUN4RCxDQUFDLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsUUFBUSxFQUFFLG9CQUFPLENBQUMsTUFBTSxFQUFFLEVBQUcsQ0FBQyxDQUFDLENBQUM7SUFFckYsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRzlELE1BQU0sQ0FBQyxDQUNIO1FBQ0ksNkJBQUssU0FBUyxFQUFDLHVCQUF1QjtZQUNsQyw4QkFBTSxTQUFTLEVBQUMsa0JBQWtCO2dCQUFDLDJCQUFHLFNBQVMsRUFBQyxvQkFBb0IsR0FBSyxDQUFPO1lBQ2hGLG9CQUFDLDZCQUFhLElBQ1YsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDLEVBQzVCLFFBQVEsRUFBRSxDQUFDLEdBQUc7b0JBQ1YsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQzFFLENBQUMsRUFDRCxRQUFRLEVBQUMsS0FBSyxFQUNkLE9BQU8sRUFBRSxHQUFHLEVBQ1osUUFBUSxFQUFFLEtBQUssRUFDZixjQUFjLEVBQUUsUUFBTyxDQUFDLEdBQzFCLENBQ0EsQ0FDSCxDQUNWLENBQUM7QUFFTixDQUFDLENBQUU7QUFFSCxpQkFBUyxDQUFDLFlBQVksR0FBRyxFQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUMsQ0FBQyIsImZpbGUiOiIxNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTZWFyY2hib2MgZm9yIHNpZGViYXJcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENvbWJvRHJvcGRvd24gfSBmcm9tICcuLi9Db21ib0Ryb3Bkb3duJztcbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uL0RhdGFTdG9yZSc7XG5cbmltcG9ydCB7IEFwcFVybHMgfSBmcm9tICcuLi8uLi9BcGlTZXJ2aWNlJztcblxuaW50ZXJmYWNlIFNlYXJjaEJveFByb3BzIHtcbiAgICBvbkNoYW5nZSA6IFJlYWN0LkV2ZW50SGFuZGxlcjxSZWFjdC5Gb3JtRXZlbnQ+O1xuICAgIHNlYXJjaFN0cmluZzogc3RyaW5nO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xufVxuXG5leHBvcnQgY29uc3QgU2VhcmNoQm94ID0gKHByb3BzIDogU2VhcmNoQm94UHJvcHMsIGNvbnRleHQ6IGFueSkgPT4ge1xuXG4gICAgY29uc3QgZW50aXRpZXMgPSBwcm9wcy5kYXRhU3RvcmUuYWxsLmVudGl0eS52YWx1ZS5tYXAoKGVudGl0eSkgPT5cbiAgICAgICAgKHsga2V5OiBlbnRpdHkubGFiZWwsIHZhbHVlOiBlbnRpdHkudWlkLCBtZXRhOiB7IGl0ZW1UeXBlOiBBcHBVcmxzLmVudGl0eSB9IH0pKTtcblxuICAgIGNvbnN0IGVudGl0eVR5cGVzID0gcHJvcHMuZGF0YVN0b3JlLmFsbC5lbnRpdHlfdHlwZS52YWx1ZS5tYXAoKGVudGl0eVR5cGUpID0+XG4gICAgICAgICh7IGtleTogZW50aXR5VHlwZS5sYWJlbCwgdmFsdWU6IGVudGl0eVR5cGUudWlkLCBtZXRhOiB7IGl0ZW1UeXBlOiBBcHBVcmxzLmVudGl0eV90eXBlIH0gIH0pKTtcblxuICAgIGNvbnN0IHByZWRpY2F0ZXMgPSBwcm9wcy5kYXRhU3RvcmUuYWxsLnByZWRpY2F0ZS52YWx1ZS5tYXAoKHByZWRpY2F0ZSkgPT5cbiAgICAgICAgKHsga2V5OiBwcmVkaWNhdGUubGFiZWwsIHZhbHVlOiBwcmVkaWNhdGUudWlkLCBtZXRhOiB7IGl0ZW1UeXBlOiBBcHBVcmxzLnByZWRpY2F0ZSB9ICB9KSk7XG5cbiAgICBjb25zdCBzb3VyY2VzID0gcHJvcHMuZGF0YVN0b3JlLmFsbC5zb3VyY2UudmFsdWUubWFwKChzb3VyY2UpID0+XG4gICAgICAgICh7IGtleTogc291cmNlLmxhYmVsLCB2YWx1ZTogc291cmNlLnVpZCwgbWV0YTogeyBpdGVtVHlwZTogQXBwVXJscy5zb3VyY2UgfSAgfSkpO1xuXG4gICAgY29uc3QgYWxsID0gZW50aXRpZXMuY29uY2F0KGVudGl0eVR5cGVzLCBwcmVkaWNhdGVzLCBzb3VyY2VzKTtcblxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naW5wdXQtYWRkb24tZm9ybWdyb3VwJz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2lucHV0LWFkZG9uLWljb24nPjxpIGNsYXNzTmFtZT0nZmEgZmEtc2VhcmNoIGZhLWZ3Jz48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxDb21ib0Ryb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt7IGtleTogJycsIHZhbHVlOiAnJ319XG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlPXsodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJvdXRlci50cmFuc2l0aW9uVG8oYC9lZGl0LyR7dmFsLm1ldGEuaXRlbVR5cGV9LyR7dmFsLnZhbHVlfWApXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHR5cGVOYW1lPSdhbGwnXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e2FsbH1cbiAgICAgICAgICAgICAgICAgICAgYWxsb3dOZXc9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVOZXdWYWx1ZT17KCkgPT4ge319XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3NwYW4+XG4gICAgKTtcblxufSA7XG5cblNlYXJjaEJveC5jb250ZXh0VHlwZXMgPSB7cm91dGVyOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWR9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL3NpZGViYXIvU2VhcmNoQm94LnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 18 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst lunr = __webpack_require__(19);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass ComboDropdown extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            searchString: '',\r\n            showingDropDown: false,\r\n            filteredOptions: [],\r\n            highlightedIndex: null,\r\n            dropDownHeight: 0\r\n        };\r\n    }\r\n    componentWillMount() {\r\n        this.ignoreBlur = false;\r\n        this.ignoreClick = false;\r\n        this.recalculateHeight = true;\r\n        this.dropDownBoxElement = null;\r\n        this.setState({\r\n            filteredOptions: this.props.options,\r\n            searchString: this.props.value === null || this.props.value.key === null ? '' : this.props.value.key\r\n        });\r\n    }\r\n    componentWillReceiveProps(newProps) {\r\n        let filterString = '';\r\n        if (this.props.value === null) {\r\n            if (newProps.value === null) {\r\n                // change nothing\r\n                filterString = this.state.searchString;\r\n            }\r\n            else {\r\n                // set to newProps value\r\n                filterString = newProps.value.key;\r\n            }\r\n        }\r\n        else {\r\n            if (newProps.value === null) {\r\n                // set to ''\r\n                filterString = '';\r\n            }\r\n            else {\r\n                if (newProps.value === this.props.value) {\r\n                    // change nothing\r\n                    filterString = this.state.searchString;\r\n                }\r\n                else {\r\n                    // set to newProps value\r\n                    filterString = newProps.value.key;\r\n                }\r\n            }\r\n        }\r\n        //const filterString = newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString;\r\n        this.updateFilter(filterString, newProps);\r\n        this.setState({\r\n            searchString: filterString\r\n        });\r\n    }\r\n    changeSearchString(event) {\r\n        this.setState({\r\n            searchString: event.target.value,\r\n            showingDropDown: true\r\n        }, () => {\r\n            this.updateFilter(this.state.searchString, this.props);\r\n            if (this.props.updateSearchString !== undefined) {\r\n                this.props.updateSearchString(this.state.searchString);\r\n            }\r\n        });\r\n    }\r\n    updateSearchString(s) {\r\n        if (this.props.updateSearchString !== undefined) {\r\n            this.props.updateSearchString(s);\r\n        }\r\n    }\r\n    updateFilter(filter, props) {\r\n        let filtered = [];\r\n        if (filter.length > 0) {\r\n            const idx = lunr(function () {\r\n                this.field('key', { boost: 10 });\r\n            });\r\n            props.options.forEach((opt, i) => idx.add(Object.assign({}, opt, { id: i })));\r\n            const result = idx.search(filter);\r\n            for (let i = 0; i < result.length; i += 1) {\r\n                filtered.push(props.options[result[i].ref]);\r\n            }\r\n        }\r\n        else {\r\n            filtered = props.options;\r\n        }\r\n        if (this.dropDownBoxElement !== null) {\r\n            this.recalculateHeight = true;\r\n            this.calculateDropdownHeight(this.dropDownBoxElement);\r\n        }\r\n        this.setState({\r\n            filteredOptions: filtered\r\n        });\r\n    }\r\n    addNewAction(option) {\r\n        this.props.createNewValue(option);\r\n    }\r\n    selectOption(option) {\r\n        this.props.setValue(option);\r\n        this.ignoreBlur = false;\r\n        this.recalculateHeight = true;\r\n        this.setState({ showingDropDown: false, searchString: option.key });\r\n        this.updateSearchString(option.key);\r\n    }\r\n    handleInputBlur() {\r\n        if (!this.ignoreBlur) {\r\n            if (this.state.searchString.length === 0) {\r\n                this.setState({ searchString: '' });\r\n            }\r\n            else {\r\n                if (lodash_1.findIndex(this.props.options, (option) => option.key === this.state.searchString) === -1) {\r\n                    this.setState({ searchString: this.props.value === null ? '' : this.props.value.key }, () => {\r\n                        this.updateFilter(this.props.value === null ? '' : this.props.value.key, this.props);\r\n                    });\r\n                }\r\n            }\r\n            this.recalculateHeight = true;\r\n            this.setState({\r\n                showingDropDown: false\r\n            });\r\n        }\r\n    }\r\n    handleInputFocus() {\r\n        if (this.ignoreBlur) {\r\n            this.ignoreBlur = true;\r\n            return;\r\n        }\r\n        // We don't want `selectItemFromMouse` to trigger when\r\n        // the user clicks into the input to focus it, so set this\r\n        // flag to cancel out the logic in `handleInputClick`.\r\n        // The event order is:  MouseDown -> Focus -> MouseUp -> Click\r\n        this.ignoreClick = true;\r\n        this.setState({ showingDropDown: true });\r\n    }\r\n    handleInputClick() {\r\n        // Input will not be focused if it's disabled\r\n        if (this.isInputFocused() && this.state.showingDropDown === false) {\r\n            this.setState({ showingDropDown: true });\r\n        }\r\n        else {\r\n            if (this.state.highlightedIndex !== null && !this.ignoreClick) {\r\n                this.selectItemFromMouse(this.state.filteredOptions[this.state.highlightedIndex]);\r\n            }\r\n            else {\r\n                this.ignoreClick = false;\r\n            }\r\n        }\r\n    }\r\n    selectItemFromMouse(item) {\r\n        this.recalculateHeight = true;\r\n        this.setState({\r\n            showingDropDown: false,\r\n            highlightedIndex: null\r\n        }, () => {\r\n            this.props.setValue(item);\r\n            this.refs[ComboDropdown.comboDropdownInputBoxRef].focus();\r\n        });\r\n    }\r\n    isInputFocused() {\r\n        const el = this.refs[ComboDropdown.comboDropdownInputBoxRef];\r\n        return el.ownerDocument && (el === el.ownerDocument.activeElement);\r\n    }\r\n    clearSearchBox() {\r\n        this.props.setValue(null);\r\n        this.setState({ searchString: '' });\r\n        this.refs[ComboDropdown.comboDropdownInputBoxRef].focus();\r\n    }\r\n    calculateDropdownHeight(val) {\r\n        this.dropDownBoxElement = val;\r\n        if (val === null || !this.recalculateHeight) {\r\n            return;\r\n        }\r\n        else {\r\n            this.setState({\r\n                dropDownHeight: window.document.body.getBoundingClientRect().bottom - val.getBoundingClientRect().top - 32\r\n            });\r\n            this.recalculateHeight = false;\r\n        }\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", { className: this.props.compact ? 'compact combo-dropdown' : 'combo-dropdown' },\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"input\", { type: 'text', ref: 'comboDropDownInputBox', className: 'search-input', value: this.state.searchString, placeholder: 'Click here and start typing..', onBlur: this.handleInputBlur.bind(this), onFocus: this.handleInputFocus.bind(this), onChange: this.changeSearchString.bind(this), onClick: this.handleInputClick.bind(this) }),\r\n                this.state.searchString.length > 0 ? (React.createElement(\"i\", { className: 'fa fa-times clear-button', onClick: this.clearSearchBox.bind(this) })) : null),\r\n            this.state.showingDropDown ? (React.createElement(\"div\", { className: 'dropdown', style: { maxHeight: this.state.dropDownHeight, overflowY: 'auto' }, ref: this.calculateDropdownHeight.bind(this) },\r\n                React.createElement(\"ul\", null,\r\n                    this.state.searchString.length === 0 && this.props.allowNew ? (React.createElement(\"li\", { className: 'add', onMouseDown: () => this.ignoreBlur = true, onClick: () => this.addNewAction('') },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus', \"aria-hidden\": 'true' }),\r\n                        \"Add new \",\r\n                        this.props.typeName)) : null,\r\n                    this.state.filteredOptions.map((opt, i) => (React.createElement(\"li\", { key: `opt-${opt.key}-${i}`, onMouseDown: () => this.ignoreBlur = true, onClick: () => this.selectOption(opt) }, opt.key))),\r\n                    this.state.searchString.length > 0 && this.props.allowNew ? (React.createElement(\"li\", { className: 'add', onMouseDown: () => this.ignoreBlur = true, onClick: () => this.addNewAction(this.state.searchString) },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus', \"aria-hidden\": 'true' }),\r\n                        \"Add new \",\r\n                        this.props.typeName,\r\n                        \": '\",\r\n                        this.state.searchString,\r\n                        \"'\")) : null))) : null));\r\n    }\r\n}\r\nComboDropdown.defaultProps = {\r\n    allowNew: true,\r\n    compact: false,\r\n    updateSearchString: lodash_1.noop\r\n};\r\nComboDropdown.comboDropdownInputBoxRef = 'comboDropDownInputBox';\r\nexports.ComboDropdown = ComboDropdown;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvQ29tYm9Ecm9wZG93bi50c3g/ZGQyNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUMvQixxQ0FBNkI7QUFFN0IseUNBQXlDO0FBMkJ6QyxtQkFBOEIsU0FBUSxLQUFLLENBQUMsU0FBaUQ7SUFnQnpGO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFFUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsWUFBWSxFQUFFLEVBQUU7WUFDaEIsZUFBZSxFQUFFLEtBQUs7WUFDdEIsZUFBZSxFQUFFLEVBQUU7WUFDbkIsZ0JBQWdCLEVBQUUsSUFBSTtZQUN0QixjQUFjLEVBQUUsQ0FBQztTQUNwQixDQUFDO0lBQ04sQ0FBQztJQUVNLGtCQUFrQjtRQUNyQixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUN4QixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO1FBQzlCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7UUFFOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNYLGVBQWUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU87WUFDbkMsWUFBWSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHO1NBQ3ZHLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFTSx5QkFBeUIsQ0FBQyxRQUE0QjtRQUV6RCxJQUFJLFlBQVksR0FBRyxFQUFFLENBQUM7UUFFdEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FB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RyxJQUFJLENBQ04sQ0FDVCxDQUFDO0lBQ04sQ0FBQzs7QUF0UWEsMEJBQVksR0FBaUM7SUFDeEQsUUFBUSxFQUFFLElBQUk7SUFDZCxPQUFPLEVBQUUsS0FBSztJQUNkLGtCQUFrQixFQUFFLGFBQUk7Q0FDMUIsQ0FBQztBQVFzQixzQ0FBd0IsR0FBWSx1QkFBdUIsQ0FBQztBQWR4RixzQ0F5UUMiLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgU2lkZWJhciBmb3IgZWRpdG9yXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBsdW5yIGZyb20gJ2x1bnInO1xuXG5pbXBvcnQgeyBmaW5kSW5kZXgsIG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbWJvRHJvcGRvd25PcHRpb24ge1xuICAgIGtleTogc3RyaW5nO1xuICAgIHZhbHVlOiBzdHJpbmcgfCBudWxsO1xuICAgIG1ldGE/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tYm9Ecm9wZG93blByb3BzIHtcbiAgICBvcHRpb25zOiBDb21ib0Ryb3Bkb3duT3B0aW9uW107XG4gICAgdHlwZU5hbWU6IHN0cmluZztcbiAgICB2YWx1ZTogQ29tYm9Ecm9wZG93bk9wdGlvbiB8IG51bGw7XG4gICAgc2V0VmFsdWU6IChzOiBDb21ib0Ryb3Bkb3duT3B0aW9uIHwgbnVsbCkgPT4gdm9pZDtcbiAgICBjcmVhdGVOZXdWYWx1ZTogKHM6IHN0cmluZykgPT4gdm9pZDtcbiAgICB1cGRhdGVTZWFyY2hTdHJpbmc/OiAoczogc3RyaW5nKSA9PiB2b2lkO1xuICAgIGFsbG93TmV3PzogYm9vbGVhbjtcbiAgICBjb21wYWN0PzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIENvbWJvRHJvcGRvd25TdGF0ZSB7XG4gICAgc2VhcmNoU3RyaW5nOiBzdHJpbmc7XG4gICAgc2hvd2luZ0Ryb3BEb3duOiBib29sZWFuO1xuICAgIGZpbHRlcmVkT3B0aW9uczogQ29tYm9Ecm9wZG93bk9wdGlvbltdO1xuICAgIGhpZ2hsaWdodGVkSW5kZXg6IG51bGwgfCBudW1iZXI7XG4gICAgZHJvcERvd25IZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENvbWJvRHJvcGRvd248VD4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Q29tYm9Ecm9wZG93blByb3BzLCBDb21ib0Ryb3Bkb3duU3RhdGU+IHtcblxuICAgIHB1YmxpYyBzdGF0aWMgZGVmYXVsdFByb3BzIDogUGFydGlhbDxDb21ib0Ryb3Bkb3duUHJvcHM+ID0ge1xuICAgICAgIGFsbG93TmV3OiB0cnVlLFxuICAgICAgIGNvbXBhY3Q6IGZhbHNlLFxuICAgICAgIHVwZGF0ZVNlYXJjaFN0cmluZzogbm9vcFxuICAgIH07XG5cbiAgICBwcml2YXRlIGlnbm9yZUJsdXI7XG4gICAgcHJpdmF0ZSBpZ25vcmVDbGljaztcbiAgICBwcml2YXRlIHJlY2FsY3VsYXRlSGVpZ2h0O1xuXG4gICAgcHJpdmF0ZSBkcm9wRG93bkJveEVsZW1lbnQ7XG5cbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBjb21ib0Ryb3Bkb3duSW5wdXRCb3hSZWYgOiBzdHJpbmcgPSAnY29tYm9Ecm9wRG93bklucHV0Qm94JztcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWFyY2hTdHJpbmc6ICcnLFxuICAgICAgICAgICAgc2hvd2luZ0Ryb3BEb3duOiBmYWxzZSxcbiAgICAgICAgICAgIGZpbHRlcmVkT3B0aW9uczogW10sXG4gICAgICAgICAgICBoaWdobGlnaHRlZEluZGV4OiBudWxsLFxuICAgICAgICAgICAgZHJvcERvd25IZWlnaHQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLmlnbm9yZUJsdXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pZ25vcmVDbGljayA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlY2FsY3VsYXRlSGVpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kcm9wRG93bkJveEVsZW1lbnQgPSBudWxsO1xuXG4gICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGZpbHRlcmVkT3B0aW9uczogdGhpcy5wcm9wcy5vcHRpb25zLFxuICAgICAgICAgICAgc2VhcmNoU3RyaW5nOiB0aGlzLnByb3BzLnZhbHVlID09PSBudWxsIHx8IHRoaXMucHJvcHMudmFsdWUua2V5ID09PSBudWxsID8gJycgOiB0aGlzLnByb3BzLnZhbHVlLmtleVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXdQcm9wczogQ29tYm9Ecm9wZG93blByb3BzKSB7XG5cbiAgICAgICAgbGV0IGZpbHRlclN0cmluZyA9ICcnO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAobmV3UHJvcHMudmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2Ugbm90aGluZ1xuICAgICAgICAgICAgICAgIGZpbHRlclN0cmluZyA9IHRoaXMuc3RhdGUuc2VhcmNoU3RyaW5nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdG8gbmV3UHJvcHMgdmFsdWVcbiAgICAgICAgICAgICAgICBmaWx0ZXJTdHJpbmcgPSBuZXdQcm9wcy52YWx1ZS5rZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobmV3UHJvcHMudmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdG8gJydcbiAgICAgICAgICAgICAgICBmaWx0ZXJTdHJpbmcgPSAnJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1Byb3BzLnZhbHVlID09PSB0aGlzLnByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoYW5nZSBub3RoaW5nXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclN0cmluZyA9IHRoaXMuc3RhdGUuc2VhcmNoU3RyaW5nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB0byBuZXdQcm9wcyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJTdHJpbmcgPSBuZXdQcm9wcy52YWx1ZS5rZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9jb25zdCBmaWx0ZXJTdHJpbmcgPSBuZXdQcm9wcy52YWx1ZS5rZXkgIT09IHRoaXMucHJvcHMudmFsdWUua2V5ID8gbmV3UHJvcHMudmFsdWUua2V5IDogdGhpcy5zdGF0ZS5zZWFyY2hTdHJpbmc7XG5cbiAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXIoZmlsdGVyU3RyaW5nLCBuZXdQcm9wcyk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VhcmNoU3RyaW5nOiBmaWx0ZXJTdHJpbmdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNoYW5nZVNlYXJjaFN0cmluZyhldmVudCA6IFJlYWN0LkZvcm1FdmVudCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNlYXJjaFN0cmluZzogKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSxcbiAgICAgICAgICAgIHNob3dpbmdEcm9wRG93bjogdHJ1ZX0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyKHRoaXMuc3RhdGUuc2VhcmNoU3RyaW5nLCB0aGlzLnByb3BzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnVwZGF0ZVNlYXJjaFN0cmluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VhcmNoU3RyaW5nKHRoaXMuc3RhdGUuc2VhcmNoU3RyaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVNlYXJjaFN0cmluZyhzOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudXBkYXRlU2VhcmNoU3RyaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlYXJjaFN0cmluZyhzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVGaWx0ZXIoZmlsdGVyOiBzdHJpbmcsIHByb3BzOiBDb21ib0Ryb3Bkb3duUHJvcHMpIHtcblxuICAgICAgICBsZXQgZmlsdGVyZWQgOiBhbnlbXSA9IFtdO1xuXG4gICAgICAgIGlmIChmaWx0ZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gbHVucihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZCgna2V5JywgeyBib29zdDogMTAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHJvcHMub3B0aW9ucy5mb3JFYWNoKChvcHQsIGkpID0+IGlkeC5hZGQoT2JqZWN0LmFzc2lnbih7fSwgb3B0LCB7IGlkOiBpfSkpKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaWR4LnNlYXJjaChmaWx0ZXIpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2gocHJvcHMub3B0aW9uc1tyZXN1bHRbaV0ucmVmXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaWx0ZXJlZCA9IHByb3BzLm9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kcm9wRG93bkJveEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVIZWlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVEcm9wZG93bkhlaWdodCh0aGlzLmRyb3BEb3duQm94RWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGZpbHRlcmVkT3B0aW9uczogZmlsdGVyZWRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZE5ld0FjdGlvbihvcHRpb246IHN0cmluZykge1xuICAgICAgICB0aGlzLnByb3BzLmNyZWF0ZU5ld1ZhbHVlKG9wdGlvbik7XG4gICAgfVxuXG4gICAgcHVibGljIHNlbGVjdE9wdGlvbihvcHRpb246IENvbWJvRHJvcGRvd25PcHRpb24pIHtcbiAgICAgICAgdGhpcy5wcm9wcy5zZXRWYWx1ZShvcHRpb24pO1xuICAgICAgICB0aGlzLmlnbm9yZUJsdXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZUhlaWdodCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93aW5nRHJvcERvd246IGZhbHNlLCBzZWFyY2hTdHJpbmc6IG9wdGlvbi5rZXkgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlU2VhcmNoU3RyaW5nKG9wdGlvbi5rZXkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBoYW5kbGVJbnB1dEJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5pZ25vcmVCbHVyKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNlYXJjaFN0cmluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNlYXJjaFN0cmluZzogJycgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICBpZiAoZmluZEluZGV4KHRoaXMucHJvcHMub3B0aW9ucywgKG9wdGlvbikgPT4gb3B0aW9uLmtleSA9PT0gdGhpcy5zdGF0ZS5zZWFyY2hTdHJpbmcpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2VhcmNoU3RyaW5nOiB0aGlzLnByb3BzLnZhbHVlID09PSBudWxsID8gJycgOiB0aGlzLnByb3BzLnZhbHVlLmtleSB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcih0aGlzLnByb3BzLnZhbHVlID09PSBudWxsID8gJycgOiB0aGlzLnByb3BzLnZhbHVlLmtleSwgdGhpcy5wcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVIZWlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2hvd2luZ0Ryb3BEb3duOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaGFuZGxlSW5wdXRGb2N1cyAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlnbm9yZUJsdXIpIHtcbiAgICAgICAgdGhpcy5pZ25vcmVCbHVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGRvbid0IHdhbnQgYHNlbGVjdEl0ZW1Gcm9tTW91c2VgIHRvIHRyaWdnZXIgd2hlblxuICAgICAgICAvLyB0aGUgdXNlciBjbGlja3MgaW50byB0aGUgaW5wdXQgdG8gZm9jdXMgaXQsIHNvIHNldCB0aGlzXG4gICAgICAgIC8vIGZsYWcgdG8gY2FuY2VsIG91dCB0aGUgbG9naWMgaW4gYGhhbmRsZUlucHV0Q2xpY2tgLlxuICAgICAgICAvLyBUaGUgZXZlbnQgb3JkZXIgaXM6ICBNb3VzZURvd24gLT4gRm9jdXMgLT4gTW91c2VVcCAtPiBDbGlja1xuICAgICAgICB0aGlzLmlnbm9yZUNsaWNrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dpbmdEcm9wRG93bjogdHJ1ZSB9KTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVJbnB1dENsaWNrICgpIHtcbiAgICAvLyBJbnB1dCB3aWxsIG5vdCBiZSBmb2N1c2VkIGlmIGl0J3MgZGlzYWJsZWRcbiAgICBpZiAodGhpcy5pc0lucHV0Rm9jdXNlZCgpICYmIHRoaXMuc3RhdGUuc2hvd2luZ0Ryb3BEb3duID09PSBmYWxzZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd2luZ0Ryb3BEb3duOiB0cnVlIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgICAgIGlmICh0aGlzLnN0YXRlLmhpZ2hsaWdodGVkSW5kZXggIT09IG51bGwgJiYgIXRoaXMuaWdub3JlQ2xpY2spIHtcbiAgICAgICAgICAgICB0aGlzLnNlbGVjdEl0ZW1Gcm9tTW91c2UodGhpcy5zdGF0ZS5maWx0ZXJlZE9wdGlvbnNbdGhpcy5zdGF0ZS5oaWdobGlnaHRlZEluZGV4XSk7XG4gICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgIHRoaXMuaWdub3JlQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0SXRlbUZyb21Nb3VzZSAoaXRlbSkge1xuICAgICAgIHRoaXMucmVjYWxjdWxhdGVIZWlnaHQgPSB0cnVlO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2hvd2luZ0Ryb3BEb3duOiBmYWxzZSxcbiAgICAgIGhpZ2hsaWdodGVkSW5kZXg6IG51bGxcbiAgICB9LCAoKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLnNldFZhbHVlKGl0ZW0pO1xuICAgICAgKHRoaXMucmVmc1tDb21ib0Ryb3Bkb3duLmNvbWJvRHJvcGRvd25JbnB1dEJveFJlZl0gYXMgSFRNTEVsZW1lbnQpLmZvY3VzKCk7XG4gICAgfSk7XG4gIH1cblxuICAgcHVibGljIGlzSW5wdXRGb2N1c2VkICgpIHtcbiAgICBjb25zdCBlbCA9IHRoaXMucmVmc1tDb21ib0Ryb3Bkb3duLmNvbWJvRHJvcGRvd25JbnB1dEJveFJlZl0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgcmV0dXJuIGVsLm93bmVyRG9jdW1lbnQgJiYgKGVsID09PSBlbC5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyU2VhcmNoQm94KCkge1xuICAgICAgdGhpcy5wcm9wcy5zZXRWYWx1ZShudWxsKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBzZWFyY2hTdHJpbmc6ICcnIH0pO1xuICAgICAgKHRoaXMucmVmc1tDb21ib0Ryb3Bkb3duLmNvbWJvRHJvcGRvd25JbnB1dEJveFJlZl0gYXMgSFRNTEVsZW1lbnQpLmZvY3VzKCk7XG4gIH1cblxuICBwdWJsaWMgY2FsY3VsYXRlRHJvcGRvd25IZWlnaHQodmFsOiBudWxsIHwgSFRNTEVsZW1lbnQpIHtcblxuICAgIHRoaXMuZHJvcERvd25Cb3hFbGVtZW50ID0gdmFsO1xuXG4gICAgICBpZiAodmFsID09PSBudWxsIHx8ICF0aGlzLnJlY2FsY3VsYXRlSGVpZ2h0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgZHJvcERvd25IZWlnaHQ6IHdpbmRvdy5kb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSAtIHZhbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSAzMlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVIZWlnaHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG5cbiAgICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jb21wYWN0ID8gJ2NvbXBhY3QgY29tYm8tZHJvcGRvd24nIDogJ2NvbWJvLWRyb3Bkb3duJ30+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J2NvbWJvRHJvcERvd25JbnB1dEJveCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2VhcmNoLWlucHV0J1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuc2VhcmNoU3RyaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J0NsaWNrIGhlcmUgYW5kIHN0YXJ0IHR5cGluZy4uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25CbHVyPXt0aGlzLmhhbmRsZUlucHV0Qmx1ci5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5oYW5kbGVJbnB1dEZvY3VzLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5jaGFuZ2VTZWFyY2hTdHJpbmcuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlSW5wdXRDbGljay5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zZWFyY2hTdHJpbmcubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtdGltZXMgY2xlYXItYnV0dG9uJyBvbkNsaWNrPXt0aGlzLmNsZWFyU2VhcmNoQm94LmJpbmQodGhpcyl9PjwvaT5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuc2hvd2luZ0Ryb3BEb3duID8gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZHJvcGRvd24nXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21heEhlaWdodDogdGhpcy5zdGF0ZS5kcm9wRG93bkhlaWdodCwgb3ZlcmZsb3dZOiAnYXV0byd9fVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXt0aGlzLmNhbGN1bGF0ZURyb3Bkb3duSGVpZ2h0LmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNlYXJjaFN0cmluZy5sZW5ndGggPT09IDAgJiYgdGhpcy5wcm9wcy5hbGxvd05ldyA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0nYWRkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17KCkgPT4gdGhpcy5pZ25vcmVCbHVyID0gdHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuYWRkTmV3QWN0aW9uKCcnKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXBsdXMnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGQgbmV3IHt0aGlzLnByb3BzLnR5cGVOYW1lfTwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGwgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmZpbHRlcmVkT3B0aW9ucy5tYXAoKG9wdCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkga2V5PXtgb3B0LSR7b3B0LmtleX0tJHtpfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoKSA9PiB0aGlzLmlnbm9yZUJsdXIgPSB0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnNlbGVjdE9wdGlvbihvcHQpfT57b3B0LmtleX08L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNlYXJjaFN0cmluZy5sZW5ndGggPiAwICYmIHRoaXMucHJvcHMuYWxsb3dOZXcgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9J2FkZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZURvd249eygpID0+IHRoaXMuaWdub3JlQmx1ciA9IHRydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuYWRkTmV3QWN0aW9uKHRoaXMuc3RhdGUuc2VhcmNoU3RyaW5nKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXBsdXMnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGQgbmV3IHt0aGlzLnByb3BzLnR5cGVOYW1lfTogJ3t0aGlzLnN0YXRlLnNlYXJjaFN0cmluZ30nPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbCB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL0NvbWJvRHJvcGRvd24udHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 19 */
/***/ function(module, exports) {

	eval("module.exports = require(\"lunr\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJsdW5yXCI/Y2UyYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImx1bnJcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJsdW5yXCJcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 20 */
/***/ function(module, exports) {

	eval("module.exports = require(\"lodash\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJsb2Rhc2hcIj8wYzhiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibG9kYXNoXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwibG9kYXNoXCJcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 21 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst signals = __webpack_require__(22);\r\nexports.createTab = new signals.Signal();\r\nexports.closeTab = new signals.Signal();\r\nexports.showModal = new signals.Signal();\r\nexports.triggerReload = new signals.Signal();\r\nexports.showToast = new signals.Signal();\r\nexports.reorderTabs = new signals.Signal();\r\nexports.Signaller = {\r\n    createTab: exports.createTab,\r\n    closeTab: exports.closeTab,\r\n    showModal: exports.showModal,\r\n    triggerReload: exports.triggerReload,\r\n    showToast: exports.showToast,\r\n    reorderTabs: exports.reorderTabs\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL1NpZ25hbGxlci50cz83OWRhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgsd0NBQW1DO0FBRXRCLGlCQUFTLEdBQUcsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDakMsZ0JBQVEsR0FBRyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNoQyxpQkFBUyxHQUFHLElBQUksT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ2pDLHFCQUFhLEdBQUcsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDckMsaUJBQVMsR0FBSSxJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNsQyxtQkFBVyxHQUFJLElBQUksT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBRXBDLGlCQUFTLEdBQUc7SUFDckIsU0FBUyxFQUFULGlCQUFTO0lBQ1QsUUFBUSxFQUFSLGdCQUFRO0lBQ1IsU0FBUyxFQUFULGlCQUFTO0lBQ1QsYUFBYSxFQUFiLHFCQUFhO0lBQ2IsU0FBUyxFQUFULGlCQUFTO0lBQ1QsV0FBVyxFQUFYLG1CQUFXO0NBQ2QsQ0FBQyIsImZpbGUiOiIyMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyA8RGVzY3JpcHRpb24gTWlzc2luZz5cbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIHNpZ25hbHMgZnJvbSAnc2lnbmFscyc7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVUYWIgPSBuZXcgc2lnbmFscy5TaWduYWwoKTtcbmV4cG9ydCBjb25zdCBjbG9zZVRhYiA9IG5ldyBzaWduYWxzLlNpZ25hbCgpO1xuZXhwb3J0IGNvbnN0IHNob3dNb2RhbCA9IG5ldyBzaWduYWxzLlNpZ25hbCgpO1xuZXhwb3J0IGNvbnN0IHRyaWdnZXJSZWxvYWQgPSBuZXcgc2lnbmFscy5TaWduYWwoKTtcbmV4cG9ydCBjb25zdCBzaG93VG9hc3QgID0gbmV3IHNpZ25hbHMuU2lnbmFsKCk7XG5leHBvcnQgY29uc3QgcmVvcmRlclRhYnMgID0gbmV3IHNpZ25hbHMuU2lnbmFsKCk7XG5cbmV4cG9ydCBjb25zdCBTaWduYWxsZXIgPSB7XG4gICAgY3JlYXRlVGFiLFxuICAgIGNsb3NlVGFiLFxuICAgIHNob3dNb2RhbCxcbiAgICB0cmlnZ2VyUmVsb2FkLFxuICAgIHNob3dUb2FzdCxcbiAgICByZW9yZGVyVGFic1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vU2lnbmFsbGVyLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 22 */
/***/ function(module, exports) {

	eval("module.exports = require(\"signals\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJzaWduYWxzXCI/MmU5YSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIyMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInNpZ25hbHNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJzaWduYWxzXCJcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 23 */
/***/ function(module, exports) {

	eval("module.exports = require(\"react-sortable-hoc\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyZWFjdC1zb3J0YWJsZS1ob2NcIj8wYzIzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVhY3Qtc29ydGFibGUtaG9jXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicmVhY3Qtc29ydGFibGUtaG9jXCJcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 24 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Loading_1 = __webpack_require__(25);\r\nconst workspace_1 = __webpack_require__(26);\r\nclass Workspace extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            searchString: ''\r\n        };\r\n    }\r\n    render() {\r\n        if (this.props.loading) {\r\n            return (React.createElement(Loading_1.Loading, null));\r\n        }\r\n        if (this.props.list) {\r\n            return (React.createElement(workspace_1.ObjectListWorkspace, { api: this.props.api, name: this.props.name, query: this.props.location.query, listType: this.props.workspace, dataStore: this.props.dataStore }));\r\n        }\r\n        let workspaceComponent = workspace_1.EmptyWorkspace;\r\n        switch (this.props.workspace) {\r\n            case 'entity':\r\n                workspaceComponent = workspace_1.EntityEditorWorkspace;\r\n                break;\r\n            case 'predicate':\r\n                workspaceComponent = workspace_1.PredicateEditorWorkspace;\r\n                break;\r\n            case 'source':\r\n                workspaceComponent = workspace_1.SourceEditorWorkspace;\r\n                break;\r\n            case 'entity_type':\r\n                workspaceComponent = workspace_1.EntityTypeWorkspace;\r\n                break;\r\n            case 'search':\r\n                workspaceComponent = workspace_1.AdvancedSearchWorkspace;\r\n                break;\r\n        }\r\n        return (React.createElement(\"div\", { className: 'flex-fill workspace-outer-wrapper' },\r\n            React.createElement(\"div\", { className: 'workspace-inner-wrapper flex-fill' }, React.createElement(workspaceComponent, { api: this.props.api, dataStore: this.props.dataStore, id: this.props.id }))));\r\n    }\r\n}\r\nexports.Workspace = Workspace;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvV29ya3NwYWNlLnRzeD8xNzEyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRy9CLDBDQUFvQztBQUVwQyw0Q0FPdUQ7QUFnQnZELGVBQXVCLFNBQVEsS0FBSyxDQUFDLFNBQXlDO0lBRTFFO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsWUFBWSxFQUFFLEVBQUU7U0FDbkIsQ0FBQztJQUNOLENBQUM7SUFFTSxNQUFNO1FBRVQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxDQUFDLG9CQUFDLGlCQUFPLE9BQUcsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbEIsTUFBTSxDQUFDLENBQUMsb0JBQUMsK0JBQW1CLElBQ3hCLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFDbkIsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUNyQixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUNoQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQzlCLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBSSxDQUFDLENBQUM7UUFDN0MsQ0FBQztRQUVELElBQUksa0JBQWtCLEdBQVMsMEJBQWMsQ0FBQztRQUU5QyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDM0IsS0FBSyxRQUFRO2dCQUNULGtCQUFrQixHQUFHLGlDQUFxQixDQUFDO2dCQUMzQyxLQUFLLENBQUM7WUFDVixLQUFLLFdBQVc7Z0JBQ1osa0JBQWtCLEdBQUcsb0NBQXdCLENBQUM7Z0JBQzlDLEtBQUssQ0FBQztZQUNWLEtBQUssUUFBUTtnQkFDVCxrQkFBa0IsR0FBRyxpQ0FBcUIsQ0FBQztnQkFDM0MsS0FBSyxDQUFDO1lBQ1YsS0FBSyxhQUFhO2dCQUNkLGtCQUFrQixHQUFHLCtCQUFtQixDQUFDO2dCQUN6QyxLQUFLLENBQUM7WUFDVixLQUFLLFFBQVE7Z0JBQ1Qsa0JBQWtCLEdBQUcsbUNBQXVCLENBQUM7Z0JBQzdDLEtBQUssQ0FBQztRQUNkLENBQUM7UUFFRCxNQUFNLENBQUMsQ0FDSCw2QkFBSyxTQUFTLEVBQUMsbUNBQW1DO1lBQzlDLDZCQUFLLFNBQVMsRUFBQyxtQ0FBbUMsSUFDN0MsS0FBSyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsRUFBRSxFQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFDLENBQUMsQ0FDaEgsQ0FDSixDQUNULENBQUM7SUFHTixDQUFDO0NBQ0o7QUF0REQsOEJBc0RDIiwiZmlsZSI6IjI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFNpZGViYXIgZm9yIGVkaXRvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gJy4uL0FwaVNlcnZpY2UnO1xuaW1wb3J0IHsgRGF0YVN0b3JlIH0gZnJvbSAnLi4vRGF0YVN0b3JlJztcbmltcG9ydCB7IExvYWRpbmcgfSBmcm9tICcuL0xvYWRpbmcnO1xuXG5pbXBvcnQge1xuICAgIEVtcHR5V29ya3NwYWNlLFxuICAgIFNvdXJjZUVkaXRvcldvcmtzcGFjZSxcbiAgICBFbnRpdHlFZGl0b3JXb3Jrc3BhY2UsXG4gICAgRW50aXR5VHlwZVdvcmtzcGFjZSxcbiAgICBQcmVkaWNhdGVFZGl0b3JXb3Jrc3BhY2UsXG4gICAgQWR2YW5jZWRTZWFyY2hXb3Jrc3BhY2UsXG4gICAgT2JqZWN0TGlzdFdvcmtzcGFjZSB9IGZyb20gJy4vd29ya3NwYWNlL3dvcmtzcGFjZSc7XG5cbmludGVyZmFjZSBXb3Jrc3BhY2VQcm9wcyB7XG4gICAgYXBpOiBBcGlTZXJ2aWNlO1xuICAgIHdvcmtzcGFjZTogc3RyaW5nO1xuICAgIGlkOiBudW1iZXI7XG4gICAgbmFtZT86IHN0cmluZztcbiAgICBsaXN0OiBib29sZWFuO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xuICAgIGxvYWRpbmc6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBXb3Jrc3BhY2VTdGF0ZSB7XG4gICAgc2VhcmNoU3RyaW5nOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBXb3Jrc3BhY2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8V29ya3NwYWNlUHJvcHMsIFdvcmtzcGFjZVN0YXRlPiB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlYXJjaFN0cmluZzogJydcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxvYWRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiAoPExvYWRpbmcgLz4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMubGlzdCkge1xuICAgICAgICAgICAgcmV0dXJuICg8T2JqZWN0TGlzdFdvcmtzcGFjZVxuICAgICAgICAgICAgICAgIGFwaT17dGhpcy5wcm9wcy5hcGl9XG4gICAgICAgICAgICAgICAgbmFtZT17dGhpcy5wcm9wcy5uYW1lfVxuICAgICAgICAgICAgICAgIHF1ZXJ5PXt0aGlzLnByb3BzLmxvY2F0aW9uLnF1ZXJ5fVxuICAgICAgICAgICAgICAgIGxpc3RUeXBlPXt0aGlzLnByb3BzLndvcmtzcGFjZX1cbiAgICAgICAgICAgICAgICBkYXRhU3RvcmU9e3RoaXMucHJvcHMuZGF0YVN0b3JlfSAvPik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgd29ya3NwYWNlQ29tcG9uZW50IDogYW55ID0gRW1wdHlXb3Jrc3BhY2U7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnByb3BzLndvcmtzcGFjZSkge1xuICAgICAgICAgICAgY2FzZSAnZW50aXR5JzpcbiAgICAgICAgICAgICAgICB3b3Jrc3BhY2VDb21wb25lbnQgPSBFbnRpdHlFZGl0b3JXb3Jrc3BhY2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwcmVkaWNhdGUnOlxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUNvbXBvbmVudCA9IFByZWRpY2F0ZUVkaXRvcldvcmtzcGFjZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NvdXJjZSc6XG4gICAgICAgICAgICAgICAgd29ya3NwYWNlQ29tcG9uZW50ID0gU291cmNlRWRpdG9yV29ya3NwYWNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZW50aXR5X3R5cGUnOlxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUNvbXBvbmVudCA9IEVudGl0eVR5cGVXb3Jrc3BhY2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzZWFyY2gnOlxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUNvbXBvbmVudCA9IEFkdmFuY2VkU2VhcmNoV29ya3NwYWNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWZpbGwgd29ya3NwYWNlLW91dGVyLXdyYXBwZXInPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3b3Jrc3BhY2UtaW5uZXItd3JhcHBlciBmbGV4LWZpbGwnPlxuICAgICAgICAgICAgICAgICAgICB7UmVhY3QuY3JlYXRlRWxlbWVudCh3b3Jrc3BhY2VDb21wb25lbnQsIHthcGk6IHRoaXMucHJvcHMuYXBpLCBkYXRhU3RvcmU6IHRoaXMucHJvcHMuZGF0YVN0b3JlLCBpZDp0aGlzLnByb3BzLmlkfSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcblxuXG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL1dvcmtzcGFjZS50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 25 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.Loading = (props) => {\r\n    return (React.createElement(\"div\", { className: 'loader-wrapper' },\r\n        React.createElement(\"div\", { className: 'loader' })));\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvTG9hZGluZy50c3g/MWJmNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUtsQixlQUFPLEdBQ2QsQ0FBQyxLQUFtQjtJQUV0QixNQUFNLENBQUMsQ0FDUCw2QkFBSyxTQUFTLEVBQUMsZ0JBQWdCO1FBQzNCLDZCQUFLLFNBQVMsRUFBQyxRQUFRLEdBQU8sQ0FDNUIsQ0FBQyxDQUFDO0FBQ1osQ0FBQyxDQUFDIiwiZmlsZSI6IjI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFNpZGViYXIgZm9yIGVkaXRvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgTG9hZGluZ1Byb3BzIHtcbn1cblxuZXhwb3J0IGNvbnN0IExvYWRpbmcgOiBSZWFjdC5TdGF0ZWxlc3NDb21wb25lbnQ8TG9hZGluZ1Byb3BzPlxuICAgID0gKHByb3BzOiBMb2FkaW5nUHJvcHMpID0+IHtcblxuICAgIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2xvYWRlci13cmFwcGVyJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2xvYWRlcic+PC9kaXY+XG4gICAgPC9kaXY+KTtcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL0xvYWRpbmcudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 26 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Unified export of workspaces\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\" />Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nvar EmptyWorkspace_1 = __webpack_require__(27);\r\nexports.EmptyWorkspace = EmptyWorkspace_1.EmptyWorkspace;\r\nvar EntityEditorWorkspace_1 = __webpack_require__(28);\r\nexports.EntityEditorWorkspace = EntityEditorWorkspace_1.EntityEditorWorkspace;\r\nvar EntityTypeWorkspace_1 = __webpack_require__(49);\r\nexports.EntityTypeWorkspace = EntityTypeWorkspace_1.EntityTypeWorkspace;\r\nvar SourceEditorWorkspace_1 = __webpack_require__(53);\r\nexports.SourceEditorWorkspace = SourceEditorWorkspace_1.SourceEditorWorkspace;\r\nvar PredicateEditorWorkspace_1 = __webpack_require__(54);\r\nexports.PredicateEditorWorkspace = PredicateEditorWorkspace_1.PredicateEditorWorkspace;\r\nvar AdvancedSearchWorkspace_1 = __webpack_require__(57);\r\nexports.AdvancedSearchWorkspace = AdvancedSearchWorkspace_1.AdvancedSearchWorkspace;\r\nvar ObjectListWorkspace_1 = __webpack_require__(58);\r\nexports.ObjectListWorkspace = ObjectListWorkspace_1.ObjectListWorkspace;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL3dvcmtzcGFjZS50cz9jYWRjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgsK0NBQWtEO0FBQXpDLHdEQUFjO0FBQ3ZCLHNEQUFnRTtBQUF2RCw2RUFBcUI7QUFDOUIsb0RBQTREO0FBQW5ELHVFQUFtQjtBQUM1QixzREFBZ0U7QUFBdkQsNkVBQXFCO0FBQzlCLHlEQUFzRTtBQUE3RCxzRkFBd0I7QUFDakMsd0RBQW9FO0FBQTNELG1GQUF1QjtBQUNoQyxvREFBNEQ7QUFBbkQsdUVBQW1CIiwiZmlsZSI6IjI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFVuaWZpZWQgZXhwb3J0IG9mIHdvcmtzcGFjZXNcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCIgLz5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuZXhwb3J0IHsgRW1wdHlXb3Jrc3BhY2UgfSBmcm9tICcuL0VtcHR5V29ya3NwYWNlJztcbmV4cG9ydCB7IEVudGl0eUVkaXRvcldvcmtzcGFjZSB9IGZyb20gJy4vRW50aXR5RWRpdG9yV29ya3NwYWNlJztcbmV4cG9ydCB7IEVudGl0eVR5cGVXb3Jrc3BhY2UgfSBmcm9tICcuL0VudGl0eVR5cGVXb3Jrc3BhY2UnO1xuZXhwb3J0IHsgU291cmNlRWRpdG9yV29ya3NwYWNlIH0gZnJvbSAnLi9Tb3VyY2VFZGl0b3JXb3Jrc3BhY2UnO1xuZXhwb3J0IHsgUHJlZGljYXRlRWRpdG9yV29ya3NwYWNlIH0gZnJvbSAnLi9QcmVkaWNhdGVFZGl0b3JXb3Jrc3BhY2UnO1xuZXhwb3J0IHsgQWR2YW5jZWRTZWFyY2hXb3Jrc3BhY2UgfSBmcm9tICcuL0FkdmFuY2VkU2VhcmNoV29ya3NwYWNlJztcbmV4cG9ydCB7IE9iamVjdExpc3RXb3Jrc3BhY2UgfSBmcm9tICcuL09iamVjdExpc3RXb3Jrc3BhY2UnO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy93b3Jrc3BhY2Uvd29ya3NwYWNlLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 27 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.EmptyWorkspace = () => (React.createElement(\"div\", { className: 'workspace-editor' },\r\n    React.createElement(\"h2\", null, \"There is nothing here\")));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL0VtcHR5V29ya3NwYWNlLnRzeD9iMDg5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRWxCLHNCQUFjLEdBQUcsTUFBTSxDQUNoQyw2QkFBSyxTQUFTLEVBQUMsa0JBQWtCO0lBQzdCLHdEQUE4QixDQUM1QixDQUNULENBQUMiLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgRW1wdHkgd29ya3NwYWNlIGZvciB3aGVuIG5vdGhpbmcgaXMgb3BlbiFcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGNvbnN0IEVtcHR5V29ya3NwYWNlID0gKCkgPT4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSd3b3Jrc3BhY2UtZWRpdG9yJz5cbiAgICAgICAgPGgyPlRoZXJlIGlzIG5vdGhpbmcgaGVyZTwvaDI+XG4gICAgPC9kaXY+XG4pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy93b3Jrc3BhY2UvRW1wdHlXb3Jrc3BhY2UudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 28 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst findParentTree_1 = __webpack_require__(30);\r\nconst EditableHeader_1 = __webpack_require__(31);\r\nconst EntityWorkspaceCoreView_1 = __webpack_require__(33);\r\nconst EntityWorkspaceReferenceView_1 = __webpack_require__(48);\r\nclass StringEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\nclass ComboEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\n// What can I do?\r\n// Entity Operations\r\n// - Delete the entity\r\n// - Merge the entity\r\n// - Split the entity\r\n// - Add 'same-as-ses' to the entity\r\n// Records\r\n// - Order records by type, source and date\r\n// - Add new records\r\n// - Adding a new predicate creates a new record with the\r\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\r\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\r\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\r\n//   to one of its parents. The range MUST be set.\r\n// Visualisations:\r\n// - Network graph of entity relationships\r\nclass EntityEditorWorkspace extends React.Component {\r\n    constructor(props, context) {\r\n        super();\r\n        this.state = {\r\n            comboValue: { key: 'test', value: '' },\r\n            comboSearchValue: '',\r\n            tab: 0\r\n        };\r\n    }\r\n    del() {\r\n        this.props.api.delItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, this.props.id)\r\n            .then(() => {\r\n            Signaller_1.closeTab.dispatch('entity', this.props.id);\r\n            this.context.router.transitionTo('/edit/notfound');\r\n        })\r\n            .catch((e) => {\r\n            e.data.data.then((data) => {\r\n                const conflictResolutionModal = {\r\n                    name: 'conflict_resolution',\r\n                    cancel: () => { },\r\n                    complete: (result) => {\r\n                        if (result === 'addToWorkspace') {\r\n                            data.record.forEach((datum) => {\r\n                                Signaller_1.createTab.dispatch('entity', datum.entity, 'item');\r\n                            });\r\n                            data.entity.forEach((datum) => {\r\n                                Signaller_1.createTab.dispatch('entity', datum.uid, 'item');\r\n                            });\r\n                        }\r\n                        if (result === 'deleteAll') {\r\n                            Promise.all(data.record.map((datum) => this.props.api.delItem(falcon_core_1.Record, ApiService_1.AppUrls.record, datum.uid)))\r\n                                .then(() => {\r\n                                this.del();\r\n                            });\r\n                        }\r\n                    },\r\n                    settings: {\r\n                        conflictingItems: data,\r\n                        message: 'Deleting Entity'\r\n                    }\r\n                };\r\n                Signaller_1.showModal.dispatch(conflictResolutionModal);\r\n            });\r\n        });\r\n    }\r\n    createNewRecord() {\r\n        const entity = this.props.dataStore.tabs.entity.get('entity-' + this.props.id).value.entity;\r\n        const entityType = this.props.dataStore.all.entity_type.value.find((t) => t.uid === entity.entityType);\r\n        const entityTypeParents = findParentTree_1.findParentTree(entity.entityType, this.props.dataStore.all.entity_type.value);\r\n        const predicates = this.props.dataStore.all.predicate\r\n            .value.filter((pred) => entityTypeParents.indexOf(pred.domain) !== -1);\r\n        const modalDef = {\r\n            name: 'record',\r\n            complete: (data) => {\r\n                console.log('Records editor called complete');\r\n                //this.loadData(this.props);\r\n            },\r\n            cancel: () => {\r\n                console.log('Records editor called cancel');\r\n            },\r\n            settings: {\r\n                options: predicates.map((pred) => ({ key: pred.label, value: pred.uid, meta: pred })),\r\n                entityUid: this.props.id,\r\n                entityType: entityType.uid\r\n            }\r\n        };\r\n        Signaller_1.showModal.dispatch(modalDef);\r\n    }\r\n    update(data) {\r\n        this.props.api.patchItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, this.props.id, data);\r\n    }\r\n    render() {\r\n        const entity = this.props.dataStore.tabs.entity.get('entity-' + this.props.id).value.entity;\r\n        const entityType = this.props.dataStore.all.entity_type.value.find((t) => t.uid === entity.entityType);\r\n        const potentialParents = this.props.dataStore.all.entity.value;\r\n        const entityTypeParents = findParentTree_1.findParentTree(entity.entityType, this.props.dataStore.all.entity_type.value);\r\n        const predicates = this.props.dataStore.all.predicate\r\n            .value.filter((pred) => entityTypeParents.indexOf(pred.domain) !== -1);\r\n        const sources = this.props.dataStore.all.source.value;\r\n        const records = lodash_1.groupBy(this.props.dataStore.tabs.entity.get('entity-' + this.props.id).value.records, 'predicate');\r\n        const options = predicates.map((pred) => ({ key: pred.label, value: pred.uid, meta: pred }));\r\n        let parentName = '';\r\n        if (potentialParents !== null && entity.parent !== undefined) {\r\n            const found = potentialParents.find((par) => par.uid === entity.parent);\r\n            if (found !== undefined) {\r\n                parentName = found.label;\r\n            }\r\n        }\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header entity' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-cube item-icon' }),\r\n                        React.createElement(StringEditableFieldComponent, { value: entity.label, component: EditableHeader_1.EditableHeader, onChange: (value) => this.update({ 'label': value }) })),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-trash delete button', \"aria-hidden\": 'true', onClick: this.del.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-clone button', \"aria-hidden\": 'true', onClick: () => console.log('copy') }))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'entity ' + (this.state.tab === 0 ? 'selected' : ''), onClick: () => this.setState({ tab: 0 }) }, \"CORE\"),\r\n                        React.createElement(\"div\", { className: 'entity ' + (this.state.tab === 1 ? 'selected' : ''), onClick: () => this.setState({ tab: 1 }) }, \"REFERENCED BY\")))),\r\n            this.state.tab === 0 ? (React.createElement(EntityWorkspaceCoreView_1.EntityWorkspaceCoreView, { dataStore: this.props.dataStore, api: this.props.api, id: this.props.id })) : (React.createElement(EntityWorkspaceReferenceView_1.EntityWorkspaceReferenceView, { dataStore: this.props.dataStore, api: this.props.api, id: this.props.id }))));\r\n    }\r\n}\r\nEntityEditorWorkspace.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.EntityEditorWorkspace = EntityEditorWorkspace;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL0VudGl0eUVkaXRvcldvcmtzcGFjZS50c3g/ODM3MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUcvQiw0Q0FBdUQ7QUFFdkQsOENBQTZDO0FBSzdDLHlDQUE2QztBQUU3Qyw0Q0FBaUU7QUFHakUsaURBQTZEO0FBRzdELGlEQUFrRjtBQUtsRiwwREFBMkU7QUFDM0UsK0RBQXFGO0FBRXJGLGtDQUFtQyxTQUFRLHVDQUE4QjtDQUFHO0FBQzVFLGlDQUFrQyxTQUFRLHVDQUEyQztDQUFHO0FBWXhGLGlCQUFpQjtBQUNqQixvQkFBb0I7QUFDcEIsc0JBQXNCO0FBQ3RCLHFCQUFxQjtBQUNyQixxQkFBcUI7QUFDckIsb0NBQW9DO0FBQ3BDLFVBQVU7QUFDViwyQ0FBMkM7QUFDM0Msb0JBQW9CO0FBQ3BCLHlEQUF5RDtBQUN6RCxrR0FBa0c7QUFDbEcsZ0dBQWdHO0FBQ2hHLG9HQUFvRztBQUNwRyxrREFBa0Q7QUFDbEQsa0JBQWtCO0FBQ2xCLDBDQUEwQztBQUMxQywyQkFBbUMsU0FBUSxLQUFLLENBQUMsU0FBK0M7SUFNNUYsWUFBWSxLQUF5QixFQUFFLE9BQVk7UUFDL0MsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO1lBQ3JDLGdCQUFnQixFQUFFLEVBQUU7WUFDcEIsR0FBRyxFQUFFLENBQUM7U0FDVCxDQUFDO0lBQ04sQ0FBQztJQUVNLEdBQUc7UUFDTixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsb0JBQU0sRUFBRSxvQkFBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQzthQUM1RCxJQUFJLENBQUM7WUFDRixvQkFBUSxDQUFD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R0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxVQUFVLEdBQUcsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxXQUFZO3dCQUMxSCw2QkFBSyxTQUFTLEVBQUUsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLFVBQVUsR0FBRyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLG9CQUFxQixDQUMvSCxDQUNKLENBQ0M7WUFFUixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FDdEIsb0JBQUMsaURBQXVCLElBQ3hCLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFDL0IsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUNuQixFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQ2hCLENBQ0YsR0FBRyxDQUNGLG9CQUFDLDJEQUE0QixJQUM3QixTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQy9CLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFDbkIsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUNoQixDQUNGLENBRUMsQ0FDVCxDQUFDO0lBQ04sQ0FBQzs7QUFsS2Esa0NBQVksR0FBRztJQUN6QixNQUFNLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVTtDQUM1QyxDQUFDO0FBSk4sc0RBcUtDIiwiZmlsZSI6IjI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IEVtcHR5IHdvcmtzcGFjZSBmb3Igd2hlbiBub3RoaW5nIGlzIG9wZW4hXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IFJlY29yZHNFZGl0b3IgfSBmcm9tICcuLi9lbnRpdHlfZWRpdG9yL1JlY29yZHNFZGl0b3InO1xuaW1wb3J0IHsgQXBpU2VydmljZSwgQXBwVXJscyB9IGZyb20gJy4uLy4uL0FwaVNlcnZpY2UnO1xuXG5pbXBvcnQgeyBFbnRpdHksIFJlY29yZCB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcblxuaW1wb3J0IHsgQ29tYm9Ecm9wZG93biwgQ29tYm9Ecm9wZG93bk9wdGlvbiB9IGZyb20gJy4uL0NvbWJvRHJvcGRvd24nO1xuaW1wb3J0IHsgTW9kYWxEZWZpbml0aW9uIH0gZnJvbSAnLi4vbW9kYWwvTW9kYWxEZWZpbml0aW9uJztcblxuaW1wb3J0IHsgRGljdGlvbmFyeSwgZ3JvdXBCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IHNob3dNb2RhbCwgY3JlYXRlVGFiLCBjbG9zZVRhYiB9IGZyb20gJy4uLy4uL1NpZ25hbGxlcic7XG5pbXBvcnQgeyBBZGRUYWJCdXR0b24gfSBmcm9tICcuLi9BZGRUYWJCdXR0b24nO1xuXG5pbXBvcnQgeyBmaW5kUGFyZW50VHJlZSB9IGZyb20gJy4uLy4uL2hlbHBlci9maW5kUGFyZW50VHJlZSc7XG5cblxuaW1wb3J0IHsgRWRpdGFibGVIZWFkZXIsIEVkaXRhYmxlRmllbGRDb21wb25lbnQgfSBmcm9tICcuLi9maWVsZHMvRWRpdGFibGVIZWFkZXInO1xuaW1wb3J0IHsgRWRpdGFibGVDb21ib0Ryb3Bkb3duIH0gZnJvbSAnLi4vZmllbGRzL0VkaXRhYmxlQ29tYm9Ecm9wZG93bic7XG5cbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uL0RhdGFTdG9yZSc7XG5cbmltcG9ydCB7IEVudGl0eVdvcmtzcGFjZUNvcmVWaWV3IH0gZnJvbSAnLi9lbnRpdHkvRW50aXR5V29ya3NwYWNlQ29yZVZpZXcnO1xuaW1wb3J0IHsgRW50aXR5V29ya3NwYWNlUmVmZXJlbmNlVmlldyB9IGZyb20gJy4vZW50aXR5L0VudGl0eVdvcmtzcGFjZVJlZmVyZW5jZVZpZXcnO1xuXG5jbGFzcyBTdHJpbmdFZGl0YWJsZUZpZWxkQ29tcG9uZW50IGV4dGVuZHMgRWRpdGFibGVGaWVsZENvbXBvbmVudDxzdHJpbmc+IHt9XG5jbGFzcyBDb21ib0VkaXRhYmxlRmllbGRDb21wb25lbnQgZXh0ZW5kcyBFZGl0YWJsZUZpZWxkQ29tcG9uZW50PENvbWJvRHJvcGRvd25PcHRpb24+IHt9XG5cbmludGVyZmFjZSBFbnRpdHlFZGl0b3JQcm9wcyB7XG4gICAgYXBpOiBBcGlTZXJ2aWNlO1xuICAgIGlkOiBudW1iZXI7XG4gICAgZGF0YVN0b3JlOiBEYXRhU3RvcmU7XG59XG5cbmludGVyZmFjZSBFbnRpdHlFZGl0b3JTdGF0ZSB7XG4gICAgdGFiOiBudW1iZXI7XG59XG5cbi8vIFdoYXQgY2FuIEkgZG8/XG4vLyBFbnRpdHkgT3BlcmF0aW9uc1xuLy8gLSBEZWxldGUgdGhlIGVudGl0eVxuLy8gLSBNZXJnZSB0aGUgZW50aXR5XG4vLyAtIFNwbGl0IHRoZSBlbnRpdHlcbi8vIC0gQWRkICdzYW1lLWFzLXNlcycgdG8gdGhlIGVudGl0eVxuLy8gUmVjb3Jkc1xuLy8gLSBPcmRlciByZWNvcmRzIGJ5IHR5cGUsIHNvdXJjZSBhbmQgZGF0ZVxuLy8gLSBBZGQgbmV3IHJlY29yZHNcbi8vIC0gQWRkaW5nIGEgbmV3IHByZWRpY2F0ZSBjcmVhdGVzIGEgbmV3IHJlY29yZCB3aXRoIHRoZVxuLy8gICBlbnRpdHkgc2V0LCB0aGUgcHJlZGljYXRlIHNldCwgdGhlIHNjb3JlIHNldCB0byAzLCB0aGUgcGVyaW9kIHNldCB0byBudWxsLCBzb3VyY2Ugc2V0IHRvIG51bGxcbi8vICAgaXQgYWxzbyBjcmVhdGVzIGEgYmxhbmsgZW50cnkgaW4gdGhlIHJlY29yZHMgc3ViIHRhYmxlIGJhc2VkIG9uIHRoZSByYW5nZSBvZiB0aGUgcHJlZGljYXRlLlxuLy8gLSBOZXcgcHJlZGljYXRlcyBtdXN0IGhhdmUgYSBuYW1lLiBUaGUgZG9tYWluIGlzIHNldCB0byB0aGUgY3VycmVudCBlbnRpdHl0eXBlIGJ1dCBjYW4gYmUgY2hhbmdlZFxuLy8gICB0byBvbmUgb2YgaXRzIHBhcmVudHMuIFRoZSByYW5nZSBNVVNUIGJlIHNldC5cbi8vIFZpc3VhbGlzYXRpb25zOlxuLy8gLSBOZXR3b3JrIGdyYXBoIG9mIGVudGl0eSByZWxhdGlvbnNoaXBzXG5leHBvcnQgY2xhc3MgRW50aXR5RWRpdG9yV29ya3NwYWNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEVudGl0eUVkaXRvclByb3BzLCBFbnRpdHlFZGl0b3JTdGF0ZT4ge1xuXG4gICAgcHVibGljIHN0YXRpYyBjb250ZXh0VHlwZXMgPSB7XG4gICAgICAgIHJvdXRlcjogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzIDogRW50aXR5RWRpdG9yUHJvcHMsIGNvbnRleHQ6IGFueSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgY29tYm9WYWx1ZTogeyBrZXk6ICd0ZXN0JywgdmFsdWU6ICcnfSxcbiAgICAgICAgICAgIGNvbWJvU2VhcmNoVmFsdWU6ICcnLFxuICAgICAgICAgICAgdGFiOiAwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGRlbCgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hcGkuZGVsSXRlbShFbnRpdHksIEFwcFVybHMuZW50aXR5LCB0aGlzLnByb3BzLmlkKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjbG9zZVRhYi5kaXNwYXRjaCgnZW50aXR5JywgdGhpcy5wcm9wcy5pZCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucm91dGVyLnRyYW5zaXRpb25UbygnL2VkaXQvbm90Zm91bmQnKTtcbiAgICAgICAgfSlcbiAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgZS5kYXRhLmRhdGEudGhlbigoZGF0YSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmxpY3RSZXNvbHV0aW9uTW9kYWwgOiBNb2RhbERlZmluaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjb25mbGljdF9yZXNvbHV0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB7fSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdhZGRUb1dvcmtzcGFjZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnJlY29yZC5mb3JFYWNoKChkYXR1bSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFiLmRpc3BhdGNoKCdlbnRpdHknLCBkYXR1bS5lbnRpdHksICdpdGVtJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5lbnRpdHkuZm9yRWFjaCgoZGF0dW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRhYi5kaXNwYXRjaCgnZW50aXR5JywgZGF0dW0udWlkLCAnaXRlbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSAnZGVsZXRlQWxsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnJlY29yZC5tYXAoKGRhdHVtKSA9PiB0aGlzLnByb3BzLmFwaS5kZWxJdGVtKFJlY29yZCwgQXBwVXJscy5yZWNvcmQsIGRhdHVtLnVpZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0aW5nSXRlbXM6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVsZXRpbmcgRW50aXR5J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNob3dNb2RhbC5kaXNwYXRjaChjb25mbGljdFJlc29sdXRpb25Nb2RhbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZU5ld1JlY29yZCgpIHtcblxuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS50YWJzLmVudGl0eS5nZXQoJ2VudGl0eS0nICsgdGhpcy5wcm9wcy5pZCkudmFsdWUuZW50aXR5O1xuXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5X3R5cGUudmFsdWUuZmluZCgodCkgPT4gdC51aWQgPT09IGVudGl0eS5lbnRpdHlUeXBlKTtcblxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlUGFyZW50cyA9IGZpbmRQYXJlbnRUcmVlKGVudGl0eS5lbnRpdHlUeXBlLCB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5X3R5cGUudmFsdWUpO1xuICAgICAgICBjb25zdCBwcmVkaWNhdGVzID0gdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLnByZWRpY2F0ZVxuICAgICAgICAgICAgLnZhbHVlLmZpbHRlcigocHJlZCkgPT4gZW50aXR5VHlwZVBhcmVudHMuaW5kZXhPZihwcmVkLmRvbWFpbikgIT09IC0xKTtcblxuICAgICAgICBjb25zdCBtb2RhbERlZjogTW9kYWxEZWZpbml0aW9uID0ge1xuICAgICAgICAgICAgbmFtZTogJ3JlY29yZCcsXG4gICAgICAgICAgICBjb21wbGV0ZTogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVjb3JkcyBlZGl0b3IgY2FsbGVkIGNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgLy90aGlzLmxvYWREYXRhKHRoaXMucHJvcHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWNvcmRzIGVkaXRvciBjYWxsZWQgY2FuY2VsJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBwcmVkaWNhdGVzLm1hcCgocHJlZCkgPT4gKHsga2V5OiBwcmVkLmxhYmVsLCB2YWx1ZTogcHJlZC51aWQsIG1ldGE6IHByZWR9KSksXG4gICAgICAgICAgICAgICAgZW50aXR5VWlkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICAgIGVudGl0eVR5cGU6IGVudGl0eVR5cGUudWlkXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2hvd01vZGFsLmRpc3BhdGNoKG1vZGFsRGVmKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLnByb3BzLmFwaS5wYXRjaEl0ZW0oRW50aXR5LCBBcHBVcmxzLmVudGl0eSwgdGhpcy5wcm9wcy5pZCwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcblxuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS50YWJzLmVudGl0eS5nZXQoJ2VudGl0eS0nICsgdGhpcy5wcm9wcy5pZCkudmFsdWUuZW50aXR5O1xuXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5X3R5cGUudmFsdWUuZmluZCgodCkgPT4gdC51aWQgPT09IGVudGl0eS5lbnRpdHlUeXBlKTtcbiAgICAgICAgY29uc3QgcG90ZW50aWFsUGFyZW50cyA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5lbnRpdHkudmFsdWU7XG5cbiAgICAgICAgY29uc3QgZW50aXR5VHlwZVBhcmVudHMgPSBmaW5kUGFyZW50VHJlZShlbnRpdHkuZW50aXR5VHlwZSwgdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLmVudGl0eV90eXBlLnZhbHVlKTtcbiAgICAgICAgY29uc3QgcHJlZGljYXRlcyA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5wcmVkaWNhdGVcbiAgICAgICAgICAgIC52YWx1ZS5maWx0ZXIoKHByZWQpID0+IGVudGl0eVR5cGVQYXJlbnRzLmluZGV4T2YocHJlZC5kb21haW4pICE9PSAtMSk7XG5cbiAgICAgICAgY29uc3Qgc291cmNlcyA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5zb3VyY2UudmFsdWU7XG4gICAgICAgIGNvbnN0IHJlY29yZHMgPSBncm91cEJ5KHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMuZW50aXR5LmdldCgnZW50aXR5LScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZS5yZWNvcmRzLCAncHJlZGljYXRlJyk7XG5cblxuICAgICAgICBjb25zdCBvcHRpb25zID0gcHJlZGljYXRlcy5tYXAoKHByZWQpID0+ICh7IGtleTogcHJlZC5sYWJlbCwgdmFsdWU6IHByZWQudWlkLCBtZXRhOiBwcmVkfSkpO1xuXG4gICAgICAgIGxldCBwYXJlbnROYW1lID0gJyc7XG4gICAgICAgIGlmIChwb3RlbnRpYWxQYXJlbnRzICE9PSBudWxsICYmIGVudGl0eS5wYXJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZm91bmQgPSBwb3RlbnRpYWxQYXJlbnRzLmZpbmQoKHBhcikgPT4gcGFyLnVpZCA9PT0gZW50aXR5LnBhcmVudCk7XG4gICAgICAgICAgICBpZiAoZm91bmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBmb3VuZC5sYWJlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nd29ya3NwYWNlLWVkaXRvcic+XG4gICAgICAgICAgICAgICAgPGhlYWRlciBjbGFzc05hbWU9J2VkaXRvci1oZWFkZXIgZW50aXR5Jz5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmltYXJ5LXRvb2xiYXInPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWFpbi10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtY3ViZSBpdGVtLWljb24nPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTdHJpbmdFZGl0YWJsZUZpZWxkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2VudGl0eS5sYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9e0VkaXRhYmxlSGVhZGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHRoaXMudXBkYXRlKHsgJ2xhYmVsJzogdmFsdWUgfSl9ICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3ViLXRvb2xiYXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZhIGZhLXRyYXNoIGRlbGV0ZSBidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5kZWwuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmEgZmEtY2xvbmUgYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGNvbnNvbGUubG9nKCdjb3B5Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NlY29uZGFyeS10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGFiLWJhcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J2VudGl0eSAnICsgKHRoaXMuc3RhdGUudGFiID09PSAwID8gJ3NlbGVjdGVkJyA6ICcnKX0gb25DbGljaz17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7IHRhYjogMCB9KX0+Q09SRTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eydlbnRpdHkgJyArICh0aGlzLnN0YXRlLnRhYiA9PT0gMSA/ICdzZWxlY3RlZCcgOiAnJyl9IG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoeyB0YWI6IDEgfSl9PlJFRkVSRU5DRUQgQlk8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUudGFiID09PSAwID8gKFxuICAgICAgICAgICAgICAgICAgPEVudGl0eVdvcmtzcGFjZUNvcmVWaWV3XG4gICAgICAgICAgICAgICAgICBkYXRhU3RvcmU9e3RoaXMucHJvcHMuZGF0YVN0b3JlfVxuICAgICAgICAgICAgICAgICAgYXBpPXt0aGlzLnByb3BzLmFwaX1cbiAgICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlkfVxuICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8RW50aXR5V29ya3NwYWNlUmVmZXJlbmNlVmlld1xuICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXt0aGlzLnByb3BzLmRhdGFTdG9yZX1cbiAgICAgICAgICAgICAgICAgIGFwaT17dGhpcy5wcm9wcy5hcGl9XG4gICAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5pZH1cbiAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL0VudGl0eUVkaXRvcldvcmtzcGFjZS50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 29 */
/***/ function(module, exports) {

	eval("module.exports = require(\"falcon-core\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJmYWxjb24tY29yZVwiPzU1NzQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmYWxjb24tY29yZVwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImZhbGNvbi1jb3JlXCJcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 30 */
/***/ function(module, exports) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nexports.findParentTree = (uid, data, ancestors = []) => {\r\n    const current = data.find((datum) => datum.uid === uid);\r\n    if (current === undefined) {\r\n        console.warn('Couldn\\'t find parent');\r\n        return ancestors;\r\n    }\r\n    else {\r\n        if (current.parent === null || current.uid === null) {\r\n            if (current.uid === null) {\r\n                console.warn('Found entity will null uid');\r\n                return ancestors;\r\n            }\r\n            else {\r\n                return ancestors.concat([current.uid]);\r\n            }\r\n        }\r\n        else {\r\n            return exports.findParentTree(current.parent, data, ancestors.concat([current.uid]));\r\n        }\r\n    }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2hlbHBlci9maW5kUGFyZW50VHJlZS50cz8zMDg3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRVUsc0JBQWMsR0FDdEIsQ0FBQyxHQUFXLEVBQUUsSUFBNkQsRUFBRSxZQUF1QixFQUFFO0lBQ3ZHLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztJQUN4RCxFQUFFLENBQUMsQ0FBQyxPQUFPLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUN4QixPQUFPLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDdEMsTUFBTSxDQUFDLFNBQVMsQ0FBQztJQUNyQixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDSixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLElBQUksSUFBSSxPQUFPLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbEQsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixPQUFPLENBQUMsSUFBSSxDQUFDLDRCQUE0QixDQUFDLENBQUM7Z0JBQzNDLE1BQU0sQ0FBQyxTQUFTLENBQUM7WUFDckIsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNKLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDM0MsQ0FBQztRQUNMLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLE1BQU0sQ0FBQyxzQkFBYyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLENBQUM7SUFDTCxDQUFDO0FBQ0wsQ0FBQyxDQUFDIiwiZmlsZSI6IjMwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IDxEZXNjcmlwdGlvbiBNaXNzaW5nPlxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuZXhwb3J0IGNvbnN0IGZpbmRQYXJlbnRUcmVlID1cbiAgICAgKHVpZDogbnVtYmVyLCBkYXRhOiB7IFsncGFyZW50J106IG51bWJlciB8IG51bGwsIFsndWlkJ106IG51bWJlciB8IG51bGwgfVtdLCBhbmNlc3RvcnMgOiBudW1iZXJbXSA9IFtdKSA9PiB7XG4gICAgY29uc3QgY3VycmVudCA9IGRhdGEuZmluZCgoZGF0dW0pID0+IGRhdHVtLnVpZCA9PT0gdWlkKTtcbiAgICBpZiAoY3VycmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQ291bGRuXFwndCBmaW5kIHBhcmVudCcpO1xuICAgICAgICByZXR1cm4gYW5jZXN0b3JzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjdXJyZW50LnBhcmVudCA9PT0gbnVsbCB8fCBjdXJyZW50LnVpZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQudWlkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdGb3VuZCBlbnRpdHkgd2lsbCBudWxsIHVpZCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhbmNlc3RvcnM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhbmNlc3RvcnMuY29uY2F0KFtjdXJyZW50LnVpZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmRQYXJlbnRUcmVlKGN1cnJlbnQucGFyZW50LCBkYXRhLCBhbmNlc3RvcnMuY29uY2F0KFtjdXJyZW50LnVpZF0pKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9oZWxwZXIvZmluZFBhcmVudFRyZWUudHMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 31 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nvar EditableFieldComponent_1 = __webpack_require__(32);\r\nexports.EditableFieldComponent = EditableFieldComponent_1.EditableFieldComponent;\r\nexports.EditableHeader = (props) => {\r\n    if (!props.edit || props.value == null) {\r\n        return (React.createElement(\"h2\", null,\r\n            props.value,\r\n            React.createElement(\"sup\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: props.setEdit }))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"span\", null,\r\n            React.createElement(\"input\", { type: 'text', value: props.value, className: 'text-edit-header', onChange: (e) => props.onChange(e.target.value) }),\r\n            React.createElement(\"button\", { onClick: props.acceptChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n            React.createElement(\"button\", { onClick: props.cancelChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' }))));\r\n    }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL0VkaXRhYmxlSGVhZGVyLnRzeD9iMWYzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRS9CLHVEQUFrRTtBQUF6RCxnRkFBc0I7QUFFbEIsc0JBQWMsR0FDckIsQ0FBQyxLQUFvQztJQUNsQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxDQUNIO1lBQ0ssS0FBSyxDQUFDLEtBQUs7WUFDWjtnQkFDSSwyQkFBRyxTQUFTLEVBQUMsdUJBQXVCLEVBQ2hDLEtBQUssRUFBQyxNQUFNLGlCQUNBLE1BQU0sRUFDbEIsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPLEdBQ3RCLENBQ0YsQ0FDTCxDQUNSLENBQUM7SUFDTixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDSixNQUFNLENBQUMsQ0FDSDtZQUNJLCtCQUFPLElBQUksRUFBQyxNQUFNLEVBQ2QsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQ2xCLFNBQVMsRUFBQyxrQkFBa0IsRUFDNUIsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBSTtZQUN2RCxnQ0FBUSxPQUFPLEVBQUUsS0FBSyxDQUFDLGFBQWE7Z0JBQUUsMkJBQUcsU0FBUyxFQUFDLGFBQWEsaUJBQWEsTUFBTSxHQUFLLENBQVM7WUFDakcsZ0NBQVEsT0FBTyxFQUFFLEtBQUssQ0FBQyxhQUFhO2dCQUFFLDJCQUFHLFNBQVMsRUFBQyxhQUFhLGlCQUFhLE1BQU0sR0FBSyxDQUFTLENBQzlGLENBQ1YsQ0FBQztJQUNOLENBQUM7QUFDVCxDQUFDLENBQUMiLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgU2lkZWJhciBmb3IgZWRpdG9yXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBFZGl0YWJsZVN1YmZpZWxkUHJvcHMgfSBmcm9tICcuL0VkaXRhYmxlRmllbGRDb21wb25lbnQnO1xuZXhwb3J0IHsgRWRpdGFibGVGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vRWRpdGFibGVGaWVsZENvbXBvbmVudCc7XG5cbmV4cG9ydCBjb25zdCBFZGl0YWJsZUhlYWRlciA6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxFZGl0YWJsZVN1YmZpZWxkUHJvcHM8c3RyaW5nPj5cbiAgICA9IChwcm9wczogRWRpdGFibGVTdWJmaWVsZFByb3BzPHN0cmluZz4pID0+IHtcbiAgICAgICAgIGlmICghcHJvcHMuZWRpdCB8fCBwcm9wcy52YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxoMj5cbiAgICAgICAgICAgICAgICAgICAge3Byb3BzLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICA8c3VwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1wZW5jaWwtc3F1YXJlLW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9J0VkaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMuc2V0RWRpdH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgICAgIDwvc3VwPlxuICAgICAgICAgICAgICAgIDwvaDI+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJvcHMudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RleHQtZWRpdC1oZWFkZXInXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHByb3BzLm9uQ2hhbmdlKGUudGFyZ2V0LnZhbHVlKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtwcm9wcy5hY2NlcHRDaGFuZ2VzfT48aSBjbGFzc05hbWU9J2ZhIGZhLWNoZWNrJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3Byb3BzLmNhbmNlbENoYW5nZXN9PjxpIGNsYXNzTmFtZT0nZmEgZmEtdGltZXMnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL0VkaXRhYmxlSGVhZGVyLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 32 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nconst React = __webpack_require__(2);\r\nclass EditableFieldComponent extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            edit: false,\r\n            internalValue: null\r\n        };\r\n    }\r\n    componentWillMount() {\r\n        this.setState({ internalValue: this.props.value === undefined ? null : this.props.value });\r\n    }\r\n    componentWillReceiveProps(newProps) {\r\n        this.setState({ internalValue: newProps.value });\r\n    }\r\n    switchToEditState() {\r\n        this.setState({ edit: true, internalValue: this.props.value });\r\n    }\r\n    setInternalValue(internalValue) {\r\n        this.setState({ internalValue });\r\n    }\r\n    acceptChanges() {\r\n        this.props.onChange(this.state.internalValue);\r\n        this.setState({ edit: false });\r\n    }\r\n    cancelChanges() {\r\n        this.setState({ edit: false, internalValue: this.props.value });\r\n    }\r\n    render() {\r\n        return (React.createElement(this.props.component, __assign({ edit: this.state.edit, value: this.state.internalValue, onChange: this.setInternalValue.bind(this), setEdit: this.switchToEditState.bind(this), acceptChanges: this.acceptChanges.bind(this), cancelChanges: this.cancelChanges.bind(this), onDelete: (e) => this.props.onDelete !== undefined ? this.props.onDelete(this.props.value) : null }, this.props.additionalProps)));\r\n    }\r\n}\r\nexports.EditableFieldComponent = EditableFieldComponent;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL0VkaXRhYmxlRmllbGRDb21wb25lbnQudHN4P2Q1N2UiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7Ozs7Ozs7OztBQUVILHFDQUErQjtBQXlCL0IsNEJBQXVDLFNBQVEsS0FBSyxDQUFDLFNBQXVEO0lBRXhHO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsSUFBSSxFQUFFLEtBQUs7WUFDWCxhQUFhLEVBQUUsSUFBSTtTQUN0QixDQUFDO0lBQ04sQ0FBQztJQUVNLGtCQUFrQjtRQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLFNBQVMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUMsQ0FBQyxDQUFDO0lBQzdGLENBQUM7SUFFTSx5QkFBeUIsQ0FBQyxRQUErQjtRQUM1RCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUMsYUFBYSxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUMsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFTSxpQkFBaUI7UUFDcEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRU0sZ0JBQWdCLENBQUMsYUFBZ0I7UUFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVNLGFBQWE7UUFDaEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVNLGFBQWE7UUFDaEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRU0sTUFBTTtRQUNWLE1BQU0sQ0FBQyxDQUFDLG9CQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxhQUM1QixJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQ3JCLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFDL0IsUUFBUSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQzFDLE9BQU8sRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUMxQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQzVDLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDNUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksSUFDN0YsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUksQ0FBQyxDQUFDO0lBQ3hDLENBQUM7Q0FDSjtBQTlDRCx3REE4Q0MiLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgU2lkZWJhciBmb3IgZWRpdG9yXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdGFibGVTdWJmaWVsZFByb3BzPFQ+IHtcbiAgICBlZGl0OiBib29sZWFuO1xuICAgIHZhbHVlOiBUIHwgbnVsbDtcbiAgICBvbkNoYW5nZTogKHVwZGF0ZWQ6IFQpID0+IHZvaWQ7XG4gICAgc2V0RWRpdDogKCkgPT4gdm9pZDtcbiAgICBhY2NlcHRDaGFuZ2VzOiAoKSA9PiB2b2lkO1xuICAgIGNhbmNlbENoYW5nZXM6ICgpID0+IHZvaWQ7XG4gICAgb25EZWxldGU6IFJlYWN0LkV2ZW50SGFuZGxlcjxSZWFjdC5Gb3JtRXZlbnQ+O1xufVxuXG5pbnRlcmZhY2UgRWRpdGFibGVGaWVsZFByb3BzPFQ+IHtcbiAgICB2YWx1ZTogVDtcbiAgICBvbkNoYW5nZTogKHM6IFQpID0+IHZvaWQ7XG4gICAgb25EZWxldGU/OiAodmFsOiBUKSA9PiB2b2lkO1xuICAgIGNvbXBvbmVudDogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PEVkaXRhYmxlU3ViZmllbGRQcm9wczxUPj4gfCBSZWFjdC5Db21wb25lbnQ8RWRpdGFibGVTdWJmaWVsZFByb3BzPFQ+LCBhbnk+O1xuICAgIGFkZGl0aW9uYWxQcm9wcz86IGFueTtcbn1cblxuaW50ZXJmYWNlIEVkaXRhYmxlRmllbGRTdGF0ZTxUPiB7XG4gICAgZWRpdDogYm9vbGVhbjtcbiAgICBpbnRlcm5hbFZhbHVlOiBUIHwgbnVsbDtcbn1cblxuZXhwb3J0IGNsYXNzIEVkaXRhYmxlRmllbGRDb21wb25lbnQ8VD4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RWRpdGFibGVGaWVsZFByb3BzPFQ+LCBFZGl0YWJsZUZpZWxkU3RhdGU8VD4+IHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZWRpdDogZmFsc2UsXG4gICAgICAgICAgICBpbnRlcm5hbFZhbHVlOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aW50ZXJuYWxWYWx1ZTogdGhpcy5wcm9wcy52YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRoaXMucHJvcHMudmFsdWV9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXdQcm9wczogRWRpdGFibGVGaWVsZFByb3BzPFQ+KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2ludGVybmFsVmFsdWU6IG5ld1Byb3BzLnZhbHVlfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN3aXRjaFRvRWRpdFN0YXRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtlZGl0OiB0cnVlLCBpbnRlcm5hbFZhbHVlOiB0aGlzLnByb3BzLnZhbHVlfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEludGVybmFsVmFsdWUoaW50ZXJuYWxWYWx1ZTogVCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaW50ZXJuYWxWYWx1ZSB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWNjZXB0Q2hhbmdlcygpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLnN0YXRlLmludGVybmFsVmFsdWUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtlZGl0OiBmYWxzZX0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYW5jZWxDaGFuZ2VzKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtlZGl0OiBmYWxzZSwgaW50ZXJuYWxWYWx1ZTogdGhpcy5wcm9wcy52YWx1ZX0pO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgcmV0dXJuICg8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgZWRpdD17dGhpcy5zdGF0ZS5lZGl0fVxuICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5pbnRlcm5hbFZhbHVlfVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRJbnRlcm5hbFZhbHVlLmJpbmQodGhpcyl9XG4gICAgICAgIHNldEVkaXQ9e3RoaXMuc3dpdGNoVG9FZGl0U3RhdGUuYmluZCh0aGlzKX1cbiAgICAgICAgYWNjZXB0Q2hhbmdlcz17dGhpcy5hY2NlcHRDaGFuZ2VzLmJpbmQodGhpcyl9XG4gICAgICAgIGNhbmNlbENoYW5nZXM9e3RoaXMuY2FuY2VsQ2hhbmdlcy5iaW5kKHRoaXMpfVxuICAgICAgICBvbkRlbGV0ZT17KGUpID0+IHRoaXMucHJvcHMub25EZWxldGUgIT09IHVuZGVmaW5lZCA/IHRoaXMucHJvcHMub25EZWxldGUodGhpcy5wcm9wcy52YWx1ZSkgOiBudWxsfVxuICAgICAgICB7Li4udGhpcy5wcm9wcy5hZGRpdGlvbmFsUHJvcHN9IC8+KTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL2ZpZWxkcy9FZGl0YWJsZUZpZWxkQ29tcG9uZW50LnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 33 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst RecordsEditor_1 = __webpack_require__(34);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nconst findParentTree_1 = __webpack_require__(30);\r\nconst EditableHeader_1 = __webpack_require__(31);\r\nconst EditableComboDropdown_1 = __webpack_require__(47);\r\nclass StringEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\nclass ComboEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\n// What can I do?\r\n// Entity Operations\r\n// - Delete the entity\r\n// - Merge the entity\r\n// - Split the entity\r\n// - Add 'same-as-ses' to the entity\r\n// Records\r\n// - Order records by type, source and date\r\n// - Add new records\r\n// - Adding a new predicate creates a new record with the\r\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\r\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\r\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\r\n//   to one of its parents. The range MUST be set.\r\n// Visualisations:\r\n// - Network graph of entity relationships\r\nclass EntityWorkspaceCoreView extends React.Component {\r\n    constructor(props, context) {\r\n        super();\r\n        this.state = {\r\n            comboValue: { key: 'test', value: '' },\r\n            comboSearchValue: ''\r\n        };\r\n    }\r\n    update(data) {\r\n        this.props.api.patchItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, this.props.id, data);\r\n    }\r\n    render() {\r\n        const entity = this.props.dataStore.tabs.entity.get('entity-' + this.props.id).value.entity;\r\n        const entityType = this.props.dataStore.all.entity_type.value.find((t) => t.uid === entity.entityType);\r\n        const potentialParents = this.props.dataStore.all.entity.value;\r\n        const entityTypeParents = findParentTree_1.findParentTree(entity.entityType, this.props.dataStore.all.entity_type.value);\r\n        const predicates = this.props.dataStore.all.predicate\r\n            .value.filter((pred) => entityTypeParents.indexOf(pred.domain) !== -1);\r\n        const sources = this.props.dataStore.all.source.value;\r\n        const records = lodash_1.groupBy(this.props.dataStore.tabs.entity.get('entity-' + this.props.id).value.records, 'predicate');\r\n        const options = predicates.map((pred) => ({ key: pred.label, value: pred.uid, meta: pred }));\r\n        let parentName = '';\r\n        if (potentialParents !== null && entity.parent !== undefined) {\r\n            const found = potentialParents.find((par) => par.uid === entity.parent);\r\n            if (found !== undefined) {\r\n                parentName = found.label;\r\n            }\r\n        }\r\n        return (React.createElement(\"section\", { className: 'editor-body' },\r\n            React.createElement(\"div\", { className: 'flex-fill' },\r\n                React.createElement(\"div\", { className: 'flex-fill' },\r\n                    React.createElement(\"div\", null,\r\n                        React.createElement(\"label\", { className: 'small' }, \"Type\"),\r\n                        entityType.label,\r\n                        \" \",\r\n                        React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, uid: entityType.uid, tabType: 'entity_type' }))),\r\n                React.createElement(\"div\", { style: { flex: 1 } },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Parent\"),\r\n                    React.createElement(ComboEditableFieldComponent, { value: { key: parentName, value: entity.parent }, component: EditableComboDropdown_1.EditableComboDropdown, onChange: (value) => this.update({ 'parent': value.value }), additionalProps: { comboSettings: {\r\n                                options: potentialParents.map((par) => ({ key: par.label, value: par.uid })),\r\n                                typeName: 'Entity'\r\n                            } } }),\r\n                    entity.parent !== null ? (React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, tabType: 'entity', uid: entity.parent })) : null)),\r\n            React.createElement(\"div\", { className: 'edit-group' },\r\n                React.createElement(RecordsEditor_1.RecordsEditor, { dimension: 'predicates', entityExists: true, id: this.props.id, api: this.props.api, records: records, onChange: () => { }, predicates: predicates, sources: sources, entityTypeId: entityType.uid, dataStore: this.props.dataStore }))));\r\n    }\r\n}\r\nEntityWorkspaceCoreView.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.EntityWorkspaceCoreView = EntityWorkspaceCoreView;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL2VudGl0eS9FbnRpdHlXb3Jrc3BhY2VDb3JlVmlldy50c3g/MjliZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUUvQixnREFBa0U7QUFDbEUsNENBQTBEO0FBRTFELDhDQUFxQztBQUlyQyx5Q0FBaUM7QUFFakMsK0NBQWtEO0FBRWxELGlEQUFnRTtBQUdoRSxpREFBcUU7QUFDckUsd0RBQTJFO0FBSTNFLGtDQUFtQyxTQUFRLHVDQUE4QjtDQUFHO0FBQzVFLGlDQUFrQyxTQUFRLHVDQUEyQztDQUFHO0FBYXhGLGlCQUFpQjtBQUNqQixvQkFBb0I7QUFDcEIsc0JBQXNCO0FBQ3RCLHFCQUFxQjtBQUNyQixxQkFBcUI7QUFDckIsb0NBQW9DO0FBQ3BDLFVBQVU7QUFDViwyQ0FBMkM7QUFDM0Msb0JBQW9CO0FBQ3BCLHlEQUF5RDtBQUN6RCxrR0FBa0c7QUFDbEcsZ0dBQWdHO0FBQ2hHLG9HQUFvRztBQUNwRyxrREFBa0Q7QUFDbEQsa0JBQWtCO0FBQ2xCLDBDQUEwQztBQUMxQyw2QkFBcUMsU0FBUSxLQUFLLENBQUMsU0FBcUU7SUFNcEgsWUFBWSxLQUFvQyxFQUFFLE9BQVk7UUFDMUQsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO1lBQ3JDLGdCQUFnQixFQUFFLEVBQUU7U0FDdkIsQ0FBQztJQUNOLENBQUM7SUFFTSxNQUFNLENBQUMsSUFBUztRQUNuQixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsb0JBQU0sRUFBRSxvQkFBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBRU0s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LENBQ0EsQ0FDRSxDQUNYLENBQUM7SUFDTixDQUFDOztBQXJGYSxvQ0FBWSxHQUFHO0lBQ3pCLE1BQU0sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO0NBQzVDLENBQUM7QUFKTiwwREF3RkMiLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgRW1wdHkgd29ya3NwYWNlIGZvciB3aGVuIG5vdGhpbmcgaXMgb3BlbiFcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgUmVjb3Jkc0VkaXRvciB9IGZyb20gJy4uLy4uL2VudGl0eV9lZGl0b3IvUmVjb3Jkc0VkaXRvcic7XG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vLi4vQXBpU2VydmljZSc7XG5cbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcblxuaW1wb3J0IHsgQ29tYm9Ecm9wZG93bk9wdGlvbiB9IGZyb20gJy4uLy4uL0NvbWJvRHJvcGRvd24nO1xuXG5pbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgQWRkVGFiQnV0dG9uIH0gZnJvbSAnLi4vLi4vQWRkVGFiQnV0dG9uJztcblxuaW1wb3J0IHsgZmluZFBhcmVudFRyZWUgfSBmcm9tICcuLi8uLi8uLi9oZWxwZXIvZmluZFBhcmVudFRyZWUnO1xuXG5cbmltcG9ydCB7IEVkaXRhYmxlRmllbGRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9maWVsZHMvRWRpdGFibGVIZWFkZXInO1xuaW1wb3J0IHsgRWRpdGFibGVDb21ib0Ryb3Bkb3duIH0gZnJvbSAnLi4vLi4vZmllbGRzL0VkaXRhYmxlQ29tYm9Ecm9wZG93bic7XG5cbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uLy4uL0RhdGFTdG9yZSc7XG5cbmNsYXNzIFN0cmluZ0VkaXRhYmxlRmllbGRDb21wb25lbnQgZXh0ZW5kcyBFZGl0YWJsZUZpZWxkQ29tcG9uZW50PHN0cmluZz4ge31cbmNsYXNzIENvbWJvRWRpdGFibGVGaWVsZENvbXBvbmVudCBleHRlbmRzIEVkaXRhYmxlRmllbGRDb21wb25lbnQ8Q29tYm9Ecm9wZG93bk9wdGlvbj4ge31cblxuaW50ZXJmYWNlIEVudGl0eVdvcmtzcGFjZUNvcmVWaWV3UHJvcHMge1xuICAgIGFwaTogQXBpU2VydmljZTtcbiAgICBpZDogbnVtYmVyO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xufVxuXG5pbnRlcmZhY2UgRW50aXR5V29ya3NwYWNlQ29yZVZpZXdTdGF0ZSB7XG4gICAgY29tYm9WYWx1ZTogQ29tYm9Ecm9wZG93bk9wdGlvbjtcbiAgICBjb21ib1NlYXJjaFZhbHVlOiBzdHJpbmc7XG59XG5cbi8vIFdoYXQgY2FuIEkgZG8/XG4vLyBFbnRpdHkgT3BlcmF0aW9uc1xuLy8gLSBEZWxldGUgdGhlIGVudGl0eVxuLy8gLSBNZXJnZSB0aGUgZW50aXR5XG4vLyAtIFNwbGl0IHRoZSBlbnRpdHlcbi8vIC0gQWRkICdzYW1lLWFzLXNlcycgdG8gdGhlIGVudGl0eVxuLy8gUmVjb3Jkc1xuLy8gLSBPcmRlciByZWNvcmRzIGJ5IHR5cGUsIHNvdXJjZSBhbmQgZGF0ZVxuLy8gLSBBZGQgbmV3IHJlY29yZHNcbi8vIC0gQWRkaW5nIGEgbmV3IHByZWRpY2F0ZSBjcmVhdGVzIGEgbmV3IHJlY29yZCB3aXRoIHRoZVxuLy8gICBlbnRpdHkgc2V0LCB0aGUgcHJlZGljYXRlIHNldCwgdGhlIHNjb3JlIHNldCB0byAzLCB0aGUgcGVyaW9kIHNldCB0byBudWxsLCBzb3VyY2Ugc2V0IHRvIG51bGxcbi8vICAgaXQgYWxzbyBjcmVhdGVzIGEgYmxhbmsgZW50cnkgaW4gdGhlIHJlY29yZHMgc3ViIHRhYmxlIGJhc2VkIG9uIHRoZSByYW5nZSBvZiB0aGUgcHJlZGljYXRlLlxuLy8gLSBOZXcgcHJlZGljYXRlcyBtdXN0IGhhdmUgYSBuYW1lLiBUaGUgZG9tYWluIGlzIHNldCB0byB0aGUgY3VycmVudCBlbnRpdHl0eXBlIGJ1dCBjYW4gYmUgY2hhbmdlZFxuLy8gICB0byBvbmUgb2YgaXRzIHBhcmVudHMuIFRoZSByYW5nZSBNVVNUIGJlIHNldC5cbi8vIFZpc3VhbGlzYXRpb25zOlxuLy8gLSBOZXR3b3JrIGdyYXBoIG9mIGVudGl0eSByZWxhdGlvbnNoaXBzXG5leHBvcnQgY2xhc3MgRW50aXR5V29ya3NwYWNlQ29yZVZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RW50aXR5V29ya3NwYWNlQ29yZVZpZXdQcm9wcywgRW50aXR5V29ya3NwYWNlQ29yZVZpZXdTdGF0ZT4ge1xuXG4gICAgcHVibGljIHN0YXRpYyBjb250ZXh0VHlwZXMgPSB7XG4gICAgICAgIHJvdXRlcjogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzIDogRW50aXR5V29ya3NwYWNlQ29yZVZpZXdQcm9wcywgY29udGV4dDogYW55KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjb21ib1ZhbHVlOiB7IGtleTogJ3Rlc3QnLCB2YWx1ZTogJyd9LFxuICAgICAgICAgICAgY29tYm9TZWFyY2hWYWx1ZTogJydcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLnByb3BzLmFwaS5wYXRjaEl0ZW0oRW50aXR5LCBBcHBVcmxzLmVudGl0eSwgdGhpcy5wcm9wcy5pZCwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcblxuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS50YWJzLmVudGl0eS5nZXQoJ2VudGl0eS0nICsgdGhpcy5wcm9wcy5pZCkudmFsdWUuZW50aXR5O1xuXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5X3R5cGUudmFsdWUuZmluZCgodCkgPT4gdC51aWQgPT09IGVudGl0eS5lbnRpdHlUeXBlKTtcbiAgICAgICAgY29uc3QgcG90ZW50aWFsUGFyZW50cyA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5lbnRpdHkudmFsdWU7XG5cbiAgICAgICAgY29uc3QgZW50aXR5VHlwZVBhcmVudHMgPSBmaW5kUGFyZW50VHJlZShlbnRpdHkuZW50aXR5VHlwZSwgdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLmVudGl0eV90eXBlLnZhbHVlKTtcbiAgICAgICAgY29uc3QgcHJlZGljYXRlcyA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5wcmVkaWNhdGVcbiAgICAgICAgICAgIC52YWx1ZS5maWx0ZXIoKHByZWQpID0+IGVudGl0eVR5cGVQYXJlbnRzLmluZGV4T2YocHJlZC5kb21haW4pICE9PSAtMSk7XG5cbiAgICAgICAgY29uc3Qgc291cmNlcyA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5zb3VyY2UudmFsdWU7XG4gICAgICAgIGNvbnN0IHJlY29yZHMgPSBncm91cEJ5KHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMuZW50aXR5LmdldCgnZW50aXR5LScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZS5yZWNvcmRzLCAncHJlZGljYXRlJyk7XG5cblxuICAgICAgICBjb25zdCBvcHRpb25zID0gcHJlZGljYXRlcy5tYXAoKHByZWQpID0+ICh7IGtleTogcHJlZC5sYWJlbCwgdmFsdWU6IHByZWQudWlkLCBtZXRhOiBwcmVkfSkpO1xuXG4gICAgICAgIGxldCBwYXJlbnROYW1lID0gJyc7XG4gICAgICAgIGlmIChwb3RlbnRpYWxQYXJlbnRzICE9PSBudWxsICYmIGVudGl0eS5wYXJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZm91bmQgPSBwb3RlbnRpYWxQYXJlbnRzLmZpbmQoKHBhcikgPT4gcGFyLnVpZCA9PT0gZW50aXR5LnBhcmVudCk7XG4gICAgICAgICAgICBpZiAoZm91bmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBmb3VuZC5sYWJlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPSdlZGl0b3ItYm9keSc+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWZpbGwnPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWZpbGwnPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PjxsYWJlbCBjbGFzc05hbWU9J3NtYWxsJz5UeXBlPC9sYWJlbD57ZW50aXR5VHlwZS5sYWJlbH0gPEFkZFRhYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXt0aGlzLnByb3BzLmRhdGFTdG9yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVpZD17ZW50aXR5VHlwZS51aWR9XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPSdlbnRpdHlfdHlwZSdcbiAgICAgICAgICAgICAgICAgICAgLz48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSB9fT5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPlBhcmVudDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxDb21ib0VkaXRhYmxlRmllbGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt7a2V5OiBwYXJlbnROYW1lLCB2YWx1ZTogZW50aXR5LnBhcmVudH19XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9e0VkaXRhYmxlQ29tYm9Ecm9wZG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHRoaXMudXBkYXRlKHsncGFyZW50JzogdmFsdWUudmFsdWV9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wcz17eyBjb21ib1NldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogcG90ZW50aWFsUGFyZW50cy5tYXAoKHBhcikgPT4gKHsga2V5OiBwYXIubGFiZWwsIHZhbHVlOiBwYXIudWlkfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVOYW1lOiAnRW50aXR5J1xuICAgICAgICAgICAgICAgICAgICAgICAgfX19IC8+XG4gICAgICAgICAgICAgICAgICAgIHtlbnRpdHkucGFyZW50ICE9PSBudWxsID8gKDxBZGRUYWJCdXR0b24gZGF0YVN0b3JlPXt0aGlzLnByb3BzLmRhdGFTdG9yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYlR5cGU9J2VudGl0eSdcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpZD17ZW50aXR5LnBhcmVudH0gLz4pIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZWRpdC1ncm91cCc+XG4gICAgICAgICAgICAgICAgPFJlY29yZHNFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgZGltZW5zaW9uPSdwcmVkaWNhdGVzJ1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHlFeGlzdHM9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlkfVxuICAgICAgICAgICAgICAgICAgICBhcGk9e3RoaXMucHJvcHMuYXBpfVxuICAgICAgICAgICAgICAgICAgICByZWNvcmRzPXtyZWNvcmRzfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319XG4gICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZXM9e3ByZWRpY2F0ZXN9XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXM9e3NvdXJjZXN9XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eVR5cGVJZD17ZW50aXR5VHlwZS51aWR9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFTdG9yZT17dGhpcy5wcm9wcy5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL2VudGl0eS9FbnRpdHlXb3Jrc3BhY2VDb3JlVmlldy50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 34 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst EditableFieldComponent_1 = __webpack_require__(32);\r\nconst SearchBar_1 = __webpack_require__(35);\r\nconst RecordPredicate_1 = __webpack_require__(36);\r\nconst findParentTree_1 = __webpack_require__(30);\r\nconst Signaller_1 = __webpack_require__(21);\r\nclass RecordEditableFieldComponent extends EditableFieldComponent_1.EditableFieldComponent {\r\n}\r\nclass RecordsEditor extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            filterFunc: () => true\r\n        };\r\n    }\r\n    deleteRecord(record) {\r\n        if (record.uid === null) {\r\n            throw new Error('Trying to delete a record with null id');\r\n        }\r\n        this.props.api.delItem(falcon_core_1.Record, ApiService_1.AppUrls.record, record.uid)\r\n            .then(() => {\r\n            this.props.onChange();\r\n        });\r\n    }\r\n    recordChanged(record) {\r\n        this.props.api.putItem(falcon_core_1.Record, ApiService_1.AppUrls.record, this.props.id, record.serialize());\r\n    }\r\n    createNewRecord() {\r\n        const entity = this.props.dataStore.tabs.entity.get('entity-' + this.props.id).value.entity;\r\n        const entityType = this.props.dataStore.all.entity_type.value.find((t) => t.uid === entity.entityType);\r\n        const entityTypeParents = findParentTree_1.findParentTree(entity.entityType, this.props.dataStore.all.entity_type.value);\r\n        const predicates = this.props.dataStore.all.predicate\r\n            .value.filter((pred) => entityTypeParents.indexOf(pred.domain) !== -1);\r\n        const modalDef = {\r\n            name: 'record',\r\n            complete: (data) => {\r\n                console.log('Records editor called complete');\r\n                //this.loadData(this.props);\r\n            },\r\n            cancel: () => {\r\n                console.log('Records editor called cancel');\r\n            },\r\n            settings: {\r\n                options: predicates.map((pred) => ({ key: pred.label, value: pred.uid, meta: pred })),\r\n                entityUid: this.props.id,\r\n                entityType: this.props.entityTypeId\r\n            }\r\n        };\r\n        Signaller_1.showModal.dispatch(modalDef);\r\n    }\r\n    render() {\r\n        const predicates = this.props.predicates;\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(\"label\", { className: 'small' }, \"Records\"),\r\n                    React.createElement(\"div\", { style: { display: 'flex' } },\r\n                        React.createElement(\"div\", { style: { flex: '1' } },\r\n                            React.createElement(SearchBar_1.SearchBar, { getValue: (p) => p.label, setFilterFunc: (filterFunc) => this.setState({ filterFunc }) })),\r\n                        React.createElement(\"div\", { style: { padding: '0.1em 0.4em', fontSize: '2em' } },\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', \"aria-hidden\": 'true', onClick: this.createNewRecord.bind(this), title: 'Add new record' }))),\r\n                    React.createElement(\"div\", null, Object.keys(this.props.records).map((section) => {\r\n                        const currentPredicate = predicates.find((pred) => {\r\n                            if (pred.uid === null) {\r\n                                throw new Error('encountered predicate with null id');\r\n                            }\r\n                            return pred.uid.toString() === section;\r\n                        });\r\n                        if (currentPredicate === undefined) {\r\n                            throw new Error('Could not find predicate');\r\n                        }\r\n                        if (!this.state.filterFunc(currentPredicate)) {\r\n                            return null;\r\n                        }\r\n                        return (React.createElement(RecordPredicate_1.RecordPredicate, { dataStore: this.props.dataStore, key: `section-${section}`, entity_id: this.props.id, api: this.props.api, dimension: 'predicate', records: this.props.records[section], predicate: currentPredicate, sources: this.props.sources, onChange: this.props.onChange }));\r\n                    }))))));\r\n    }\r\n}\r\nexports.RecordsEditor = RecordsEditor;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9SZWNvcmRzRWRpdG9yLnRzeD9iYzllIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBQy9CLDRDQUF1RDtBQUV2RCw4Q0FBd0Q7QUFDeEQseURBQTBFO0FBRTFFLDRDQUF5QztBQUV6QyxrREFBb0Q7QUFFcEQsaURBQTZEO0FBQzdELDRDQUE0QztBQU01QyxrQ0FBbUMsU0FBUSwrQ0FBOEI7Q0FBRztBQW1CNUUsbUJBQTJCLFNBQVEsS0FBSyxDQUFDLFNBQWlEO0lBRXpGO1FBQ0MsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1osVUFBVSxFQUFFLE1BQU0sSUFBSTtTQUN0QixDQUFDO0lBQ0gsQ0FBQztJQUVNLFlBQVksQ0FBQyxNQUFjO1FBRWpDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLElBQUksS0FBSyxDQUFDLHdDQUF3QyxDQUFDLENBQUM7UUFDM0QsQ0FBQztRQUVELElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxvQkFBTSxFQUFFLG9CQUFPLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUM7YUFDekQsSUFBSSxDQUFDO1lBQ0wsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFTSxhQUFhLENBQUMsTUFBYztRQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsb0JBQU0sRUFBRSxvQkFBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztJQUNuRixDQUFDO0lBRU0sZUFBZTtR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c0NBcUhDIiwiZmlsZSI6IjM0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IDxEZXNjcmlwdGlvbiBNaXNzaW5nPlxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQXBpU2VydmljZSwgQXBwVXJscyB9IGZyb20gJy4uLy4uL0FwaVNlcnZpY2UnO1xuaW1wb3J0IHsgRGF0YVN0b3JlIH0gZnJvbSAnLi4vLi4vRGF0YVN0b3JlJztcbmltcG9ydCB7IFJlY29yZCwgUHJlZGljYXRlLCBTb3VyY2UgfSBmcm9tICdmYWxjb24tY29yZSc7XG5pbXBvcnQgeyBFZGl0YWJsZUZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi4vZmllbGRzL0VkaXRhYmxlRmllbGRDb21wb25lbnQnO1xuXG5pbXBvcnQgeyBTZWFyY2hCYXIgfSBmcm9tICcuLi9TZWFyY2hCYXInO1xuXG5pbXBvcnQgeyBSZWNvcmRQcmVkaWNhdGUgfSBmcm9tICcuL1JlY29yZFByZWRpY2F0ZSc7XG5cbmltcG9ydCB7IGZpbmRQYXJlbnRUcmVlIH0gZnJvbSAnLi4vLi4vaGVscGVyL2ZpbmRQYXJlbnRUcmVlJztcbmltcG9ydCB7IHNob3dNb2RhbCB9IGZyb20gJy4uLy4uL1NpZ25hbGxlcic7XG5cbmltcG9ydCB7IE1vZGFsRGVmaW5pdGlvbiB9IGZyb20gJy4uL21vZGFsL01vZGFsRGVmaW5pdGlvbic7XG5cbmltcG9ydCB7IGdyb3VwQnksIERpY3Rpb25hcnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5jbGFzcyBSZWNvcmRFZGl0YWJsZUZpZWxkQ29tcG9uZW50IGV4dGVuZHMgRWRpdGFibGVGaWVsZENvbXBvbmVudDxSZWNvcmQ+IHt9XG5cbmludGVyZmFjZSBSZWNvcmRzRWRpdG9yUHJvcHMge1xuICAgIGlkOiBudW1iZXI7XG5cdGFwaTogQXBpU2VydmljZTtcblx0ZGltZW5zaW9uOiBzdHJpbmc7XG5cdGVudGl0eVR5cGVJZDogbnVtYmVyO1xuXHRlbnRpdHlFeGlzdHM6IGJvb2xlYW47XG5cdHJlY29yZHM6IERpY3Rpb25hcnk8UmVjb3JkW10+O1xuXHRvbkNoYW5nZTogKCkgPT4gdm9pZDtcblx0cHJlZGljYXRlcyA6IFByZWRpY2F0ZVtdO1xuXHRzb3VyY2VzOiBTb3VyY2VbXTtcblx0ZGF0YVN0b3JlOiBEYXRhU3RvcmU7XG59XG5cbmludGVyZmFjZSBSZWNvcmRzRWRpdG9yU3RhdGUge1xuXHRmaWx0ZXJGdW5jOiAocDogUHJlZGljYXRlKSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgUmVjb3Jkc0VkaXRvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxSZWNvcmRzRWRpdG9yUHJvcHMsIFJlY29yZHNFZGl0b3JTdGF0ZT4ge1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdGZpbHRlckZ1bmM6ICgpID0+IHRydWVcblx0XHR9O1xuXHR9XG5cblx0cHVibGljIGRlbGV0ZVJlY29yZChyZWNvcmQ6IFJlY29yZCkge1xuXG5cdFx0aWYgKHJlY29yZC51aWQgPT09IG51bGwpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignVHJ5aW5nIHRvIGRlbGV0ZSBhIHJlY29yZCB3aXRoIG51bGwgaWQnKTtcblx0XHR9XG5cblx0XHR0aGlzLnByb3BzLmFwaS5kZWxJdGVtKFJlY29yZCwgQXBwVXJscy5yZWNvcmQsIHJlY29yZC51aWQpXG5cdFx0LnRoZW4oKCkgPT4ge1xuXHRcdFx0dGhpcy5wcm9wcy5vbkNoYW5nZSgpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJlY29yZENoYW5nZWQocmVjb3JkOiBSZWNvcmQpIHtcblx0XHR0aGlzLnByb3BzLmFwaS5wdXRJdGVtKFJlY29yZCwgQXBwVXJscy5yZWNvcmQsIHRoaXMucHJvcHMuaWQsIHJlY29yZC5zZXJpYWxpemUoKSk7XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlTmV3UmVjb3JkKCkge1xuXG4gICAgICAgIGNvbnN0IGVudGl0eSA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMuZW50aXR5LmdldCgnZW50aXR5LScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZS5lbnRpdHk7XG5cbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5lbnRpdHlfdHlwZS52YWx1ZS5maW5kKCh0KSA9PiB0LnVpZCA9PT0gZW50aXR5LmVudGl0eVR5cGUpO1xuXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGVQYXJlbnRzID0gZmluZFBhcmVudFRyZWUoZW50aXR5LmVudGl0eVR5cGUsIHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5lbnRpdHlfdHlwZS52YWx1ZSk7XG4gICAgICAgIGNvbnN0IHByZWRpY2F0ZXMgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwucHJlZGljYXRlXG4gICAgICAgICAgICAudmFsdWUuZmlsdGVyKChwcmVkKSA9PiBlbnRpdHlUeXBlUGFyZW50cy5pbmRleE9mKHByZWQuZG9tYWluKSAhPT0gLTEpO1xuXG4gICAgICAgIGNvbnN0IG1vZGFsRGVmOiBNb2RhbERlZmluaXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiAncmVjb3JkJyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWNvcmRzIGVkaXRvciBjYWxsZWQgY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAvL3RoaXMubG9hZERhdGEodGhpcy5wcm9wcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlY29yZHMgZWRpdG9yIGNhbGxlZCBjYW5jZWwnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHByZWRpY2F0ZXMubWFwKChwcmVkKSA9PiAoeyBrZXk6IHByZWQubGFiZWwsIHZhbHVlOiBwcmVkLnVpZCwgbWV0YTogcHJlZH0pKSxcbiAgICAgICAgICAgICAgICBlbnRpdHlVaWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgZW50aXR5VHlwZTogdGhpcy5wcm9wcy5lbnRpdHlUeXBlSWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzaG93TW9kYWwuZGlzcGF0Y2gobW9kYWxEZWYpO1xuICAgIH1cblxuXHRwdWJsaWMgcmVuZGVyKCkge1xuXG5cdFx0Y29uc3QgcHJlZGljYXRlcyA9IHRoaXMucHJvcHMucHJlZGljYXRlcztcblxuXHRcdHJldHVybiAoXG5cdFx0PGRpdj5cblx0XHRcdDxkaXY+XG5cdFx0XHRcdDxkaXY+XG5cdFx0XHRcdFx0PGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPlJlY29yZHM8L2xhYmVsPlxuXHRcdFx0XHRcdDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnIH19PlxuXHRcdFx0XHRcdFx0PGRpdiBzdHlsZT17eyBmbGV4OiAnMScgfX0+XG5cdFx0XHRcdFx0XHRcdDxTZWFyY2hCYXJcblx0XHRcdFx0XHRcdFx0XHRnZXRWYWx1ZT17KHA6IFByZWRpY2F0ZSkgPT4gcC5sYWJlbH1cblx0XHRcdFx0XHRcdFx0XHRzZXRGaWx0ZXJGdW5jPXsoZmlsdGVyRnVuYykgPT4gdGhpcy5zZXRTdGF0ZSh7IGZpbHRlckZ1bmMgfSl9XG5cdFx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDxkaXYgc3R5bGU9e3twYWRkaW5nOiAnMC4xZW0gMC40ZW0nLCBmb250U2l6ZTogJzJlbSd9fT5cblx0XHRcdFx0XHRcdFx0PGlcblx0XHRcdFx0XHRcdFx0XHRjbGFzc05hbWU9J2ZhIGZhLXBsdXMtY2lyY2xlIGFkZCBidXR0b24nXG5cdFx0XHRcdFx0XHRcdFx0YXJpYS1oaWRkZW49J3RydWUnXG5cdFx0XHRcdFx0XHRcdFx0b25DbGljaz17dGhpcy5jcmVhdGVOZXdSZWNvcmQuYmluZCh0aGlzKX1cblx0XHRcdFx0XHRcdFx0XHR0aXRsZT0nQWRkIG5ldyByZWNvcmQnXG5cdFx0XHRcdFx0XHRcdD5cbiAgICAgICAgICAgICAgICAgICAgXHRcdDwvaT5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdCA8L2Rpdj5cblx0XHRcdFx0XHQ8ZGl2PlxuXHRcdFx0XHRcdFx0e09iamVjdC5rZXlzKHRoaXMucHJvcHMucmVjb3JkcykubWFwKChzZWN0aW9uKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudFByZWRpY2F0ZSA9IHByZWRpY2F0ZXMuZmluZCgocHJlZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChwcmVkLnVpZCA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdlbmNvdW50ZXJlZCBwcmVkaWNhdGUgd2l0aCBudWxsIGlkJyk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBwcmVkLnVpZC50b1N0cmluZygpID09PSBzZWN0aW9uO1xuXHRcdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0XHRpZihjdXJyZW50UHJlZGljYXRlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIHByZWRpY2F0ZScpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLnN0YXRlLmZpbHRlckZ1bmMoY3VycmVudFByZWRpY2F0ZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHJldHVybiAoPFJlY29yZFByZWRpY2F0ZVxuXHRcdFx0XHRcdFx0XHRcdGRhdGFTdG9yZT17dGhpcy5wcm9wcy5kYXRhU3RvcmV9XG5cdFx0XHRcdFx0XHRcdFx0a2V5PXtgc2VjdGlvbi0ke3NlY3Rpb259YH1cblx0XHRcdFx0XHRcdFx0XHRlbnRpdHlfaWQ9e3RoaXMucHJvcHMuaWR9XG5cdFx0XHRcdFx0XHRcdFx0YXBpPXt0aGlzLnByb3BzLmFwaX1cblx0XHRcdFx0XHRcdFx0XHRkaW1lbnNpb249J3ByZWRpY2F0ZSdcblx0XHRcdFx0XHRcdFx0XHRyZWNvcmRzPXt0aGlzLnByb3BzLnJlY29yZHNbc2VjdGlvbl19XG5cdFx0XHRcdFx0XHRcdFx0cHJlZGljYXRlPXtjdXJyZW50UHJlZGljYXRlfVxuXHRcdFx0XHRcdFx0XHRcdHNvdXJjZXM9e3RoaXMucHJvcHMuc291cmNlc31cblx0XHRcdFx0XHRcdFx0XHRvbkNoYW5nZT17dGhpcy5wcm9wcy5vbkNoYW5nZX1cblx0XHRcdFx0XHRcdFx0IC8+KTtcblxuXHRcdFx0XHRcdFx0fSl9XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+XG5cdFx0PC9kaXY+XG5cdFx0KTtcblx0fVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL2VudGl0eV9lZGl0b3IvUmVjb3Jkc0VkaXRvci50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 35 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.SearchBar = (props) => {\r\n    const filterFunc = (s) => {\r\n        return (a) => {\r\n            if (s.length === 0) {\r\n                return true;\r\n            }\r\n            return props.getValue(a).toLowerCase().indexOf(s.toLowerCase()) !== -1;\r\n        };\r\n    };\r\n    return (React.createElement(\"div\", null,\r\n        React.createElement(\"div\", { className: 'input-addon-formgroup' },\r\n            React.createElement(\"span\", { className: 'input-addon-icon' },\r\n                React.createElement(\"i\", { className: 'fa fa-search fa-fw' })),\r\n            React.createElement(\"input\", { type: 'text', className: 'form-control with-addon', onChange: (e) => props.setFilterFunc(filterFunc(e.target.value)) }))));\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvU2VhcmNoQmFyLnRzeD9hMGIyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBT2xCLGlCQUFTLEdBQ2hCLENBQUMsS0FBcUI7SUFFeEIsTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFTO1FBQ3pCLE1BQU0sQ0FBQyxDQUFDLENBQU07WUFDVixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pCLE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDaEIsQ0FBQztZQUNELE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMzRSxDQUFDLENBQUM7SUFDTixDQUFDLENBQUM7SUFFRixNQUFNLENBQUMsQ0FDSDtRQUNJLDZCQUFLLFNBQVMsRUFBQyx1QkFBdUI7WUFDbEMsOEJBQU0sU0FBUyxFQUFDLGtCQUFrQjtnQkFBQywyQkFBRyxTQUFTLEVBQUMsb0JBQW9CLEdBQUssQ0FBTztZQUNoRiwrQkFBTyxJQUFJLEVBQUMsTUFBTSxFQUNkLFNBQVMsRUFBQyx5QkFBeUIsRUFDbkMsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUNyRSxDQUVKLENBQ1QsQ0FBQztBQUNOLENBQUMsQ0FBQyIsImZpbGUiOiIzNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFNlYXJjaEJhclByb3BzIHtcbiAgICBzZXRGaWx0ZXJGdW5jOiAoZjogKGEgOiBhbnkpID0+IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgZ2V0VmFsdWU6IChhOiBhbnkpID0+IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IFNlYXJjaEJhciA6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxTZWFyY2hCYXJQcm9wcz5cbiAgICA9IChwcm9wczogU2VhcmNoQmFyUHJvcHMpID0+IHtcblxuICAgIGNvbnN0IGZpbHRlckZ1bmMgPSAoczogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiAoYTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5nZXRWYWx1ZShhKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yocy50b0xvd2VyQ2FzZSgpKSAhPT0gLTE7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naW5wdXQtYWRkb24tZm9ybWdyb3VwJz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2lucHV0LWFkZG9uLWljb24nPjxpIGNsYXNzTmFtZT0nZmEgZmEtc2VhcmNoIGZhLWZ3Jz48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tY29udHJvbCB3aXRoLWFkZG9uJ1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHByb3BzLnNldEZpbHRlckZ1bmMoZmlsdGVyRnVuYyhlLnRhcmdldC52YWx1ZSkpfS8+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvU2VhcmNoQmFyLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 36 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst EditableFieldComponent_1 = __webpack_require__(32);\r\nconst RecordRow_1 = __webpack_require__(37);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nclass RecordEditableFieldComponent extends EditableFieldComponent_1.EditableFieldComponent {\r\n}\r\nclass RecordPredicate extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            potentialValues: []\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.predicate.rangeIsReference) {\r\n            this.props.api.getCollection(falcon_core_1.Entity, ApiService_1.AppUrls.entity, { type: this.props.predicate.range })\r\n                .then((potentialValues) => this.setState({ potentialValues }));\r\n        }\r\n    }\r\n    createNewRecord() {\r\n        this.props.api.postItem(falcon_core_1.Record, ApiService_1.AppUrls.record, falcon_core_1.Serializer.fromJson(falcon_core_1.Record, {\r\n            predicate: this.props.predicate.uid,\r\n            entity: this.props.entity_id,\r\n            valueType: this.props.predicate.rangeIsReference ? 'entity' : this.props.predicate.range,\r\n            score: 3\r\n        }));\r\n    }\r\n    deleteRecord(record) {\r\n        if (record.uid === null) {\r\n            throw new Error('Trying to delete a record with null id');\r\n        }\r\n        this.props.api.delItem(falcon_core_1.Record, ApiService_1.AppUrls.record, record.uid)\r\n            .then(() => {\r\n            this.props.onChange();\r\n        });\r\n    }\r\n    recordChanged(record) {\r\n        this.props.api.putItem(falcon_core_1.Record, ApiService_1.AppUrls.record, this.props.entity_id, falcon_core_1.Serializer.toJson(record));\r\n    }\r\n    render() {\r\n        return (React.createElement(\"section\", null,\r\n            React.createElement(\"h5\", { className: 'section-header' },\r\n                this.props.predicate.label,\r\n                \" \",\r\n                React.createElement(\"i\", { className: 'fa fa-plus-circle add button', \"aria-hidden\": 'true', onClick: this.createNewRecord.bind(this), title: `Add new ${this.props.predicate.label} record` }),\r\n                React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, uid: this.props.predicate.uid, tabType: 'predicate' })),\r\n            React.createElement(\"table\", { className: 'record-editing-table' },\r\n                React.createElement(\"thead\", null,\r\n                    React.createElement(\"tr\", { className: 'record-row title' },\r\n                        React.createElement(\"th\", { className: 'record-row-item uid' }, \"ID\"),\r\n                        this.props.predicate.range !== 'source' ? (React.createElement(\"th\", { className: 'record-row-item' }, \"Value\")) : null,\r\n                        React.createElement(\"th\", { className: 'record-row-item' }, \"Source\"),\r\n                        React.createElement(\"th\", { className: 'record-row-item score' }, \"Score\"),\r\n                        React.createElement(\"th\", { className: 'record-row-item score' }, \"Period\"),\r\n                        React.createElement(\"th\", { className: 'record-row-item buttons' }, \"Actions\"))),\r\n                React.createElement(\"tbody\", null, this.props.records.map((record) => (React.createElement(RecordEditableFieldComponent, { key: `row-${record.uid}`, value: record, onChange: this.recordChanged.bind(this), onDelete: this.deleteRecord.bind(this), component: RecordRow_1.RecordRow, additionalProps: {\r\n                        dimension: 'predicates',\r\n                        sources: this.props.sources,\r\n                        entities: this.state.potentialValues,\r\n                        dataStore: this.props.dataStore\r\n                    } })))))));\r\n    }\r\n}\r\nexports.RecordPredicate = RecordPredicate;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9SZWNvcmRQcmVkaWNhdGUudHN4PzYxZjEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFDL0IsNENBQXVEO0FBRXZELDhDQUE0RTtBQUM1RSx5REFBMEU7QUFFMUUsNENBQXdDO0FBRXhDLCtDQUErQztBQUUvQyxrQ0FBbUMsU0FBUSwrQ0FBOEI7Q0FBRztBQWlCNUUscUJBQTZCLFNBQVEsS0FBSyxDQUFDLFNBQXFEO0lBRTVGO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsZUFBZSxFQUFFLEVBQUU7U0FDdEIsQ0FBQztJQUNOLENBQUM7SUFFTSxpQkFBaUI7UUFDcEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxvQkFBTSxFQUFFLG9CQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO2lCQUN6RixJQUFJLENBQUMsQ0FBQyxlQUFlLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRSxDQUFDO0lBQ0wsQ0FBQztJQUVNLGVBQWU7UUFDbEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLG9CQUFNLEVBQUUsb0JBQU8sQ0FBQyxNQUFNLEVBQzlDLHdCQUFVLENBQUMsUUFBUSxDQUFDLG9CQUFNLEVBQUU7WUFDeEIsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUc7WUFDbkMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFL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RSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWU7d0JBQ3BDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVM7cUJBQ2xDLEdBQ0gsQ0FDTCxDQUFDLENBQ0UsQ0FDSixDQUNGLENBQ2IsQ0FBQztJQUNMLENBQUM7Q0FDRDtBQXhGRCwwQ0F3RkMiLCJmaWxlIjoiMzYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuLi8uLi9kYXRhU3RvcmUnO1xuaW1wb3J0IHsgUmVjb3JkLCBQcmVkaWNhdGUsIFNvdXJjZSwgRW50aXR5LCBTZXJpYWxpemVyIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuaW1wb3J0IHsgRWRpdGFibGVGaWVsZENvbXBvbmVudCB9IGZyb20gJy4uL2ZpZWxkcy9FZGl0YWJsZUZpZWxkQ29tcG9uZW50JztcblxuaW1wb3J0IHsgUmVjb3JkUm93IH0gZnJvbSAnLi9SZWNvcmRSb3cnO1xuXG5pbXBvcnQgeyBBZGRUYWJCdXR0b24gfSBmcm9tICcuLi9BZGRUYWJCdXR0b24nO1xuXG5jbGFzcyBSZWNvcmRFZGl0YWJsZUZpZWxkQ29tcG9uZW50IGV4dGVuZHMgRWRpdGFibGVGaWVsZENvbXBvbmVudDxSZWNvcmQ+IHt9XG5cbmludGVyZmFjZSBSZWNvcmRQcmVkaWNhdGVQcm9wcyB7XG4gICAgZW50aXR5X2lkOiBudW1iZXI7XG5cdGFwaTogQXBpU2VydmljZTtcblx0ZGltZW5zaW9uOiBzdHJpbmc7XG5cdHJlY29yZHM6IFJlY29yZFtdO1xuXHRwcmVkaWNhdGUgOiBQcmVkaWNhdGU7XG5cdHNvdXJjZXM6IFNvdXJjZVtdO1xuICAgIG9uQ2hhbmdlOiAoKSA9PiB2b2lkO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xufVxuXG5pbnRlcmZhY2UgUmVjb3JkUHJlZGljYXRlU3RhdGUge1xuXHRwb3RlbnRpYWxWYWx1ZXM6IEVudGl0eVtdO1xufVxuXG5leHBvcnQgY2xhc3MgUmVjb3JkUHJlZGljYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFJlY29yZFByZWRpY2F0ZVByb3BzLCBSZWNvcmRQcmVkaWNhdGVTdGF0ZT4ge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBwb3RlbnRpYWxWYWx1ZXM6IFtdXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5wcmVkaWNhdGUucmFuZ2VJc1JlZmVyZW5jZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5hcGkuZ2V0Q29sbGVjdGlvbihFbnRpdHksIEFwcFVybHMuZW50aXR5LCB7IHR5cGU6IHRoaXMucHJvcHMucHJlZGljYXRlLnJhbmdlIH0pXG4gICAgICAgICAgICAudGhlbigocG90ZW50aWFsVmFsdWVzKSA9PiB0aGlzLnNldFN0YXRlKHsgcG90ZW50aWFsVmFsdWVzIH0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVOZXdSZWNvcmQoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYXBpLnBvc3RJdGVtKFJlY29yZCwgQXBwVXJscy5yZWNvcmQsXG4gICAgICAgIFNlcmlhbGl6ZXIuZnJvbUpzb24oUmVjb3JkLCB7XG4gICAgICAgICAgICBwcmVkaWNhdGU6IHRoaXMucHJvcHMucHJlZGljYXRlLnVpZCxcbiAgICAgICAgICAgIGVudGl0eTogdGhpcy5wcm9wcy5lbnRpdHlfaWQsXG4gICAgICAgICAgICB2YWx1ZVR5cGU6IHRoaXMucHJvcHMucHJlZGljYXRlLnJhbmdlSXNSZWZlcmVuY2UgPyAnZW50aXR5JyA6IHRoaXMucHJvcHMucHJlZGljYXRlLnJhbmdlLFxuICAgICAgICAgICAgc2NvcmU6IDNcbiAgICAgICAgfSkpO1xuICAgIH1cblxuXHRwdWJsaWMgZGVsZXRlUmVjb3JkKHJlY29yZDogUmVjb3JkKSB7XG5cblx0XHRpZiAocmVjb3JkLnVpZCA9PT0gbnVsbCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdUcnlpbmcgdG8gZGVsZXRlIGEgcmVjb3JkIHdpdGggbnVsbCBpZCcpO1xuXHRcdH1cblxuXHRcdHRoaXMucHJvcHMuYXBpLmRlbEl0ZW0oUmVjb3JkLCBBcHBVcmxzLnJlY29yZCwgcmVjb3JkLnVpZClcblx0XHQudGhlbigoKSA9PiB7XG5cdFx0XHR0aGlzLnByb3BzLm9uQ2hhbmdlKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcmVjb3JkQ2hhbmdlZChyZWNvcmQ6IFJlY29yZCkge1xuXHRcdHRoaXMucHJvcHMuYXBpLnB1dEl0ZW0oUmVjb3JkLCBBcHBVcmxzLnJlY29yZCwgdGhpcy5wcm9wcy5lbnRpdHlfaWQsIFNlcmlhbGl6ZXIudG9Kc29uKHJlY29yZCkpO1xuXHR9XG5cblx0cHVibGljIHJlbmRlcigpIHtcblxuICAgICAgICByZXR1cm4gKDxzZWN0aW9uPlxuICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT0nc2VjdGlvbi1oZWFkZXInPnt0aGlzLnByb3BzLnByZWRpY2F0ZS5sYWJlbH0gPGlcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmYSBmYS1wbHVzLWNpcmNsZSBhZGQgYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNyZWF0ZU5ld1JlY29yZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBZGQgbmV3ICR7dGhpcy5wcm9wcy5wcmVkaWNhdGUubGFiZWx9IHJlY29yZGB9XG4gICAgICAgICAgICAgICAgPjwvaT5cbiAgICAgICAgICAgIDxBZGRUYWJCdXR0b25cbiAgICAgICAgICAgICAgICBkYXRhU3RvcmU9e3RoaXMucHJvcHMuZGF0YVN0b3JlfVxuICAgICAgICAgICAgICAgIHVpZD17dGhpcy5wcm9wcy5wcmVkaWNhdGUudWlkfVxuICAgICAgICAgICAgICAgIHRhYlR5cGU9J3ByZWRpY2F0ZScgLz5cbiAgICAgICAgICAgIDwvaDU+XG4gICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPSdyZWNvcmQtZWRpdGluZy10YWJsZSc+XG4gICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3NOYW1lPSdyZWNvcmQtcm93IHRpdGxlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9J3JlY29yZC1yb3ctaXRlbSB1aWQnPklEPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnByZWRpY2F0ZS5yYW5nZSAhPT0gJ3NvdXJjZScgPyAoPHRoIGNsYXNzTmFtZT0ncmVjb3JkLXJvdy1pdGVtJz5WYWx1ZTwvdGg+KSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSdyZWNvcmQtcm93LWl0ZW0nPlNvdXJjZTwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSdyZWNvcmQtcm93LWl0ZW0gc2NvcmUnPlNjb3JlPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9J3JlY29yZC1yb3ctaXRlbSBzY29yZSc+UGVyaW9kPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9J3JlY29yZC1yb3ctaXRlbSBidXR0b25zJz5BY3Rpb25zPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMucmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFJlY29yZEVkaXRhYmxlRmllbGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Byb3ctJHtyZWNvcmQudWlkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3JlY29yZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5yZWNvcmRDaGFuZ2VkLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EZWxldGU9e3RoaXMuZGVsZXRlUmVjb3JkLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PXtSZWNvcmRSb3d9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpbWVuc2lvbjogJ3ByZWRpY2F0ZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiB0aGlzLnByb3BzLnNvdXJjZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzOiB0aGlzLnN0YXRlLnBvdGVudGlhbFZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlOiB0aGlzLnByb3BzLmRhdGFTdG9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgICk7XG5cdH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9lbnRpdHlfZWRpdG9yL1JlY29yZFByZWRpY2F0ZS50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 37 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nvar EditableFieldComponent_1 = __webpack_require__(32);\r\nexports.EditableFieldComponent = EditableFieldComponent_1.EditableFieldComponent;\r\nconst ScorePicker_1 = __webpack_require__(38);\r\nconst ComboDropdown_1 = __webpack_require__(18);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst StringFieldEditor_1 = __webpack_require__(39);\r\nconst EntityFieldEditor_1 = __webpack_require__(40);\r\nconst DateFieldEditor_1 = __webpack_require__(41);\r\nconst IntegerFieldEditor_1 = __webpack_require__(45);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nconst formatDate_1 = __webpack_require__(44);\r\nconst createNewSource = (initialValue) => {\r\n    const a = {\r\n        name: 'source',\r\n        complete: () => {\r\n            // TODO : Automatically reload sources\r\n        },\r\n        cancel: () => { console.log('cancel'); },\r\n        settings: {\r\n            initialValue\r\n        }\r\n    };\r\n    Signaller_1.showModal.dispatch(a);\r\n};\r\nconst recordEditor = (props, record) => {\r\n    switch (record.valueType) {\r\n        case 'string':\r\n            return (React.createElement(StringFieldEditor_1.StringFieldEditor, { value: record.value || '', onChange: (value) => props.onChange(Object.assign(record, { value })) }));\r\n        case 'date':\r\n            return (React.createElement(DateFieldEditor_1.DateFieldEditor, { value: record.value || '', onChange: (value) => props.onChange(Object.assign(record, { value })) }));\r\n        case 'integer':\r\n            return (React.createElement(IntegerFieldEditor_1.IntegerFieldEditor, { value: record.value || '', onChange: (value) => props.onChange(Object.assign(record, { value })) }));\r\n        case 'entity':\r\n            return (React.createElement(EntityFieldEditor_1.EntityFieldEditor, { value: record.value === null ? 0 : parseInt(record.value), onChange: (value) => props.onChange(Object.assign(record, { value })), entities: props.entities }));\r\n        default:\r\n            return (React.createElement(\"div\", null, \"Missing editor\"));\r\n    }\r\n};\r\nconst formatValue = (props, record) => {\r\n    if (record.valueType === 'entity') {\r\n        const entity = props.entities.find((entity) => entity.uid == record.value);\r\n        if (entity !== undefined) {\r\n            if (entity.uid === null) {\r\n                throw Error('Unexpected null ID on entity');\r\n            }\r\n            return (React.createElement(\"span\", null,\r\n                entity.label,\r\n                \" \",\r\n                React.createElement(AddTabButton_1.AddTabButton, { dataStore: props.dataStore, uid: entity.uid, tabType: 'entity' })));\r\n        }\r\n        else {\r\n            return (React.createElement(\"em\", null, \"Missing Entity\"));\r\n        }\r\n    }\r\n    if (record.valueType === 'date') {\r\n        return (React.createElement(\"span\", null, formatDate_1.formatDate(record.value)));\r\n    }\r\n    return (React.createElement(\"span\", null, record.value));\r\n};\r\nexports.RecordRow = (props) => {\r\n    const recordValue = props.value;\r\n    if (recordValue === null) {\r\n        throw new Error('Should not be null!!');\r\n    }\r\n    const currentSource = props.sources.find((source) => source.uid === recordValue.source);\r\n    const dropDownValue = {\r\n        key: '', value: recordValue.source\r\n    };\r\n    if (currentSource !== undefined) {\r\n        dropDownValue.key = currentSource.label;\r\n    }\r\n    if (props.edit) {\r\n        return (React.createElement(\"tr\", { className: 'record-row' },\r\n            React.createElement(\"td\", { className: 'record-row-item uid' }, recordValue.uid),\r\n            recordValue.valueType !== 'source' ? (React.createElement(\"td\", { className: 'record-row-item' }, recordEditor(props, recordValue))) : null,\r\n            React.createElement(\"td\", { className: 'record-row-item' },\r\n                React.createElement(ComboDropdown_1.ComboDropdown, { options: props.sources.map((source) => ({ key: source.label, value: source.uid })), typeName: 'source', value: dropDownValue, setValue: (combo) => props.onChange(Object.assign(recordValue, { source: combo === null ? combo : combo.value })), createNewValue: createNewSource })),\r\n            React.createElement(\"td\", { className: 'record-row-item score' },\r\n                React.createElement(ScorePicker_1.ScorePicker, { value: recordValue.score, readOnly: false, onChange: (score) => props.onChange(Object.assign(recordValue, { score })) })),\r\n            React.createElement(\"td\", { className: 'record-row-item period' },\r\n                React.createElement(DateFieldEditor_1.DateFieldEditor, { value: recordValue.period || '', onChange: (period) => props.onChange(Object.assign(props.value, { period })) })),\r\n            React.createElement(\"td\", { className: 'record-row-item buttons' },\r\n                React.createElement(\"button\", null,\r\n                    React.createElement(\"i\", { className: 'fa fa-check', onClick: props.acceptChanges, \"aria-hidden\": 'true' })),\r\n                React.createElement(\"button\", null,\r\n                    React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true', onClick: props.cancelChanges })))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"tr\", { className: 'record-row' },\r\n            React.createElement(\"td\", { className: 'record-row-item uid' },\r\n                \"#\",\r\n                recordValue.uid),\r\n            recordValue.valueType !== 'source' ? (React.createElement(\"td\", { className: 'record-row-item' }, formatValue(props, recordValue))) : null,\r\n            React.createElement(\"td\", { className: 'record-row-item' },\r\n                dropDownValue.key,\r\n                dropDownValue.key.length > 0 ? (React.createElement(AddTabButton_1.AddTabButton, { dataStore: props.dataStore, uid: dropDownValue.value, tabType: 'source' })) : null),\r\n            React.createElement(\"td\", { className: 'record-row-item score' },\r\n                React.createElement(ScorePicker_1.ScorePicker, { value: recordValue.score, readOnly: true })),\r\n            React.createElement(\"td\", { className: 'record-row-item period' }, formatDate_1.formatDate(recordValue.period)),\r\n            React.createElement(\"td\", { className: 'record-row-item buttons' },\r\n                React.createElement(\"button\", null,\r\n                    React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', onClick: props.setEdit, \"aria-hidden\": 'true' })),\r\n                React.createElement(\"button\", null,\r\n                    React.createElement(\"i\", { className: 'fa fa-trash', \"aria-hidden\": 'true', onClick: props.onDelete })))));\r\n    }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9SZWNvcmRSb3cudHN4Pzc3ZjciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFJL0IsdURBQTBFO0FBQWpFLGdGQUFzQjtBQUMvQiw4Q0FBb0Q7QUFDcEQsZ0RBQWlEO0FBQ2pELDRDQUE0QztBQUk1QyxvREFBd0Q7QUFDeEQsb0RBQXdEO0FBQ3hELGtEQUFvRDtBQUNwRCxxREFBMEQ7QUFFMUQsK0NBQStDO0FBRS9DLDZDQUFxRDtBQVNyRCxNQUFNLGVBQWUsR0FBRyxDQUFDLFlBQW9CO0lBQ3JDLE1BQU0sQ0FBQyxHQUFxQjtRQUN4QixJQUFJLEVBQUUsUUFBUTtRQUNkLFFBQVEsRUFBRTtZQUNOLHNDQUFzQztRQUMxQyxDQUFDO1FBQ0QsTUFBTSxFQUFFLFFBQVEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBQztRQUN0QyxRQUFRLEVBQUU7WUFDTixZQUFZO1NBQ2Y7S0FDSixDQUFDO0lBRUYscUJBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUIsQ0FBQyxDQUFDO0FBRU4sTUFBTSxZQUFZLEdBQUcsQ0FBQyxLQUFxQixFQUFFLE1BQWM7SUFDdkQsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsS0FBSyxRQUFRO1lBQ1QsTUFBTSxDQUFDLENBQUMsb0JBQUMscUNBQWlCLElBQ3RCLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxJQUFJLEVBQUUsRUFDekIsUUFBUSxFQUFFLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEdBQUksQ0FBQyxDQUFDO1FBQ25GLEtBQUssTUFBTTtZQUNQLE1BQU0sQ0FBQyxDQUFDLG9CQUFDLGlD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VyxDQUFDLENBQzlCLENBQ1IsR0FBRyxJQUFJO1lBQ1IsNEJBQUksU0FBUyxFQUFDLGlCQUFpQjtnQkFBRSxhQUFhLENBQUMsR0FBRztnQkFDN0MsYUFBYSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQzVCLG9CQUFDLDJCQUFZLElBQ1QsU0FBUyxFQUFFLEtBQUssQ0FBQyxTQUFTLEVBQzFCLEdBQUcsRUFBRSxhQUFhLENBQUMsS0FBSyxFQUN4QixPQUFPLEVBQUMsUUFBUSxHQUFHLENBQzFCLEdBQUcsSUFBSSxDQUNoQjtZQUNJLDRCQUFJLFNBQVMsRUFBQyx1QkFBdUI7Z0JBQ2hDLG9CQUFDLHlCQUFXLElBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBSSxDQUN6RDtZQUNMLDRCQUFJLFNBQVMsRUFBQyx3QkFBd0IsSUFDaEMsdUJBQVUsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQy9CO1lBQ0wsNEJBQUksU0FBUyxFQUFDLHlCQUF5QjtnQkFDbkM7b0JBQVEsMkJBQUcsU0FBUyxFQUFDLHVCQUF1QixFQUFDLEtBQUssRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPLGlCQUFjLE1BQU0sR0FBSyxDQUFTO2dCQUNsSDtvQkFBUSwyQkFBRyxTQUFTLEVBQUMsYUFBYSxpQkFBYSxNQUFNLEVBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxRQUFRLEdBQU0sQ0FBUyxDQUMzRixDQUNKLENBQ0osQ0FBQztJQUNOLENBQUM7QUFDTCxDQUFDLENBQUMiLCJmaWxlIjoiMzcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IFJlY29yZCwgU291cmNlLCBFbnRpdHkgfSBmcm9tICdmYWxjb24tY29yZSc7XG5pbXBvcnQgeyBFZGl0YWJsZVN1YmZpZWxkUHJvcHMgfSBmcm9tICcuLi9maWVsZHMvRWRpdGFibGVGaWVsZENvbXBvbmVudCc7XG5leHBvcnQgeyBFZGl0YWJsZUZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi4vZmllbGRzL0VkaXRhYmxlRmllbGRDb21wb25lbnQnO1xuaW1wb3J0IHsgU2NvcmVQaWNrZXIgfSBmcm9tICcuLi9maWVsZHMvU2NvcmVQaWNrZXInO1xuaW1wb3J0IHsgQ29tYm9Ecm9wZG93biB9IGZyb20gJy4uL0NvbWJvRHJvcGRvd24nO1xuaW1wb3J0IHsgc2hvd01vZGFsIH0gZnJvbSAnLi4vLi4vU2lnbmFsbGVyJztcbmltcG9ydCB7IE1vZGFsRGVmaW5pdGlvbiB9IGZyb20gJy4uL21vZGFsL01vZGFsRGVmaW5pdGlvbic7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuLi8uLi9EYXRhU3RvcmUnO1xuXG5pbXBvcnQgeyBTdHJpbmdGaWVsZEVkaXRvciB9IGZyb20gJy4vU3RyaW5nRmllbGRFZGl0b3InO1xuaW1wb3J0IHsgRW50aXR5RmllbGRFZGl0b3IgfSBmcm9tICcuL0VudGl0eUZpZWxkRWRpdG9yJztcbmltcG9ydCB7IERhdGVGaWVsZEVkaXRvciB9IGZyb20gJy4vRGF0ZUZpZWxkRWRpdG9yJztcbmltcG9ydCB7IEludGVnZXJGaWVsZEVkaXRvciB9IGZyb20gJy4vSW50ZWdlckZpZWxkRWRpdG9yJztcblxuaW1wb3J0IHsgQWRkVGFiQnV0dG9uIH0gZnJvbSAnLi4vQWRkVGFiQnV0dG9uJztcblxuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJy4uLy4uL2hlbHBlci9mb3JtYXREYXRlJztcblxuaW50ZXJmYWNlIFJlY29yZFJvd1Byb3BzIGV4dGVuZHMgRWRpdGFibGVTdWJmaWVsZFByb3BzPFJlY29yZD4ge1xuICAgIGRpbWVuc2lvbjogc3RyaW5nO1xuICAgIHNvdXJjZXM6IFNvdXJjZVtdO1xuICAgIGVudGl0aWVzOiBFbnRpdHlbXTtcbiAgICBkYXRhU3RvcmU6IERhdGFTdG9yZTtcbn1cblxuY29uc3QgY3JlYXRlTmV3U291cmNlID0gKGluaXRpYWxWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGEgOiBNb2RhbERlZmluaXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiAnc291cmNlJyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyA6IEF1dG9tYXRpY2FsbHkgcmVsb2FkIHNvdXJjZXNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWw6ICgpID0+IHsgY29uc29sZS5sb2coJ2NhbmNlbCcpfSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2hvd01vZGFsLmRpc3BhdGNoKGEpO1xuICAgIH07XG5cbmNvbnN0IHJlY29yZEVkaXRvciA9IChwcm9wczogUmVjb3JkUm93UHJvcHMsIHJlY29yZDogUmVjb3JkKSA9PiB7XG4gICAgc3dpdGNoIChyZWNvcmQudmFsdWVUeXBlKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICByZXR1cm4gKDxTdHJpbmdGaWVsZEVkaXRvclxuICAgICAgICAgICAgICAgIHZhbHVlPXtyZWNvcmQudmFsdWUgfHwgJyd9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gcHJvcHMub25DaGFuZ2UoT2JqZWN0LmFzc2lnbihyZWNvcmQsIHsgdmFsdWUgfSkpfSAvPik7XG4gICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgcmV0dXJuICg8RGF0ZUZpZWxkRWRpdG9yXG4gICAgICAgICAgICAgICAgdmFsdWU9e3JlY29yZC52YWx1ZSB8fCAnJ31cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiBwcm9wcy5vbkNoYW5nZShPYmplY3QuYXNzaWduKHJlY29yZCwgeyB2YWx1ZSB9KSl9IC8+KTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gKDxJbnRlZ2VyRmllbGRFZGl0b3JcbiAgICAgICAgICAgICAgICB2YWx1ZT17cmVjb3JkLnZhbHVlIHx8ICcnfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHByb3BzLm9uQ2hhbmdlKE9iamVjdC5hc3NpZ24ocmVjb3JkLCB7IHZhbHVlIH0pKX0gLz4pO1xuICAgICAgICBjYXNlICdlbnRpdHknOlxuICAgICAgICAgICAgcmV0dXJuICg8RW50aXR5RmllbGRFZGl0b3JcbiAgICAgICAgICAgICAgICB2YWx1ZT17cmVjb3JkLnZhbHVlID09PSBudWxsID8gMCA6IHBhcnNlSW50KHJlY29yZC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gcHJvcHMub25DaGFuZ2UoT2JqZWN0LmFzc2lnbihyZWNvcmQsIHsgdmFsdWUgfSkpfVxuICAgICAgICAgICAgICAgIGVudGl0aWVzPXtwcm9wcy5lbnRpdGllc30gLz4pO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICg8ZGl2Pk1pc3NpbmcgZWRpdG9yPC9kaXY+KTtcbiAgICB9XG59O1xuXG5jb25zdCBmb3JtYXRWYWx1ZSA9IChwcm9wczogUmVjb3JkUm93UHJvcHMsIHJlY29yZDogUmVjb3JkKSA9PiB7XG4gICAgaWYgKHJlY29yZC52YWx1ZVR5cGUgPT09ICdlbnRpdHknKSB7XG4gICAgICAgIGNvbnN0IGVudGl0eSA9IHByb3BzLmVudGl0aWVzLmZpbmQoKGVudGl0eSkgPT4gZW50aXR5LnVpZCA9PSByZWNvcmQudmFsdWUpO1xuICAgICAgICBpZiAoZW50aXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChlbnRpdHkudWlkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIHRocm93IEVycm9yKCdVbmV4cGVjdGVkIG51bGwgSUQgb24gZW50aXR5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKDxzcGFuPlxuICAgICAgICAgICAgICAgIHtlbnRpdHkubGFiZWx9IDxBZGRUYWJCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXtwcm9wcy5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgICAgIHVpZD17ZW50aXR5LnVpZH1cbiAgICAgICAgICAgICAgICAgICAgdGFiVHlwZT0nZW50aXR5JyAvPlxuICAgICAgICAgICAgPC9zcGFuPik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKDxlbT5NaXNzaW5nIEVudGl0eTwvZW0+KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZWNvcmQudmFsdWVUeXBlID09PSAnZGF0ZScpIHtcbiAgICAgICByZXR1cm4gKDxzcGFuPntmb3JtYXREYXRlKHJlY29yZC52YWx1ZSl9PC9zcGFuPik7XG4gICAgfVxuXG4gICAgcmV0dXJuICg8c3Bhbj57cmVjb3JkLnZhbHVlfTwvc3Bhbj4pO1xufTtcblxuZXhwb3J0IGNvbnN0IFJlY29yZFJvdyA9IChwcm9wczogUmVjb3JkUm93UHJvcHMpID0+IHtcblxuICAgIGNvbnN0IHJlY29yZFZhbHVlID0gcHJvcHMudmFsdWU7XG5cbiAgICBpZiAocmVjb3JkVmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgbm90IGJlIG51bGwhIScpO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRTb3VyY2UgPSBwcm9wcy5zb3VyY2VzLmZpbmQoKHNvdXJjZSkgPT4gc291cmNlLnVpZCA9PT0gcmVjb3JkVmFsdWUuc291cmNlKTtcbiAgICBjb25zdCBkcm9wRG93blZhbHVlID0ge1xuICAgICAgICBrZXk6ICcnLCB2YWx1ZTogcmVjb3JkVmFsdWUuc291cmNlXG4gICAgfTtcblxuICAgIGlmIChjdXJyZW50U291cmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHJvcERvd25WYWx1ZS5rZXkgPSBjdXJyZW50U291cmNlLmxhYmVsO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5lZGl0KSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDx0ciBjbGFzc05hbWU9J3JlY29yZC1yb3cnPlxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0ncmVjb3JkLXJvdy1pdGVtIHVpZCc+e3JlY29yZFZhbHVlLnVpZH08L3RkPlxuICAgICAgICAgICAge3JlY29yZFZhbHVlLnZhbHVlVHlwZSAhPT0gJ3NvdXJjZScgPyAoXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0ncmVjb3JkLXJvdy1pdGVtJz5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZEVkaXRvcihwcm9wcywgcmVjb3JkVmFsdWUpfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9J3JlY29yZC1yb3ctaXRlbSc+XG4gICAgICAgICAgICAgICAgPENvbWJvRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17cHJvcHMuc291cmNlcy5tYXAoKHNvdXJjZSkgPT4gKHsga2V5OiBzb3VyY2UubGFiZWwgLCB2YWx1ZTogc291cmNlLnVpZH0pKX1cbiAgICAgICAgICAgICAgICAgICAgdHlwZU5hbWU9J3NvdXJjZSdcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2Ryb3BEb3duVmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlPXsoY29tYm8pID0+IHByb3BzLm9uQ2hhbmdlKE9iamVjdC5hc3NpZ24ocmVjb3JkVmFsdWUsIHsgc291cmNlOiBjb21ibyA9PT0gbnVsbCA/IGNvbWJvIDogY29tYm8udmFsdWUgfSkpfVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVOZXdWYWx1ZT17Y3JlYXRlTmV3U291cmNlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0ncmVjb3JkLXJvdy1pdGVtIHNjb3JlJz5cbiAgICAgICAgICAgICAgICA8U2NvcmVQaWNrZXIgdmFsdWU9e3JlY29yZFZhbHVlLnNjb3JlfSByZWFkT25seT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoc2NvcmUpID0+IHByb3BzLm9uQ2hhbmdlKE9iamVjdC5hc3NpZ24ocmVjb3JkVmFsdWUsIHsgc2NvcmUgfSkpfSAvPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9J3JlY29yZC1yb3ctaXRlbSBwZXJpb2QnPlxuICAgICAgICAgICAgICAgIDxEYXRlRmllbGRFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3JlY29yZFZhbHVlLnBlcmlvZCB8fCAnJ31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhwZXJpb2QpID0+IHByb3BzLm9uQ2hhbmdlKE9iamVjdC5hc3NpZ24ocHJvcHMudmFsdWUsIHsgcGVyaW9kIH0pKX0gLz5cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSdyZWNvcmQtcm93LWl0ZW0gYnV0dG9ucyc+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbj48aSBjbGFzc05hbWU9J2ZhIGZhLWNoZWNrJyBvbkNsaWNrPXtwcm9wcy5hY2NlcHRDaGFuZ2VzfSBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24+PGkgY2xhc3NOYW1lPSdmYSBmYS10aW1lcycgYXJpYS1oaWRkZW49J3RydWUnIG9uQ2xpY2s9e3Byb3BzLmNhbmNlbENoYW5nZXN9PjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICA8dHIgY2xhc3NOYW1lPSdyZWNvcmQtcm93Jz5cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9J3JlY29yZC1yb3ctaXRlbSB1aWQnPiN7cmVjb3JkVmFsdWUudWlkfTwvdGQ+XG4gICAgICAgICAgICB7cmVjb3JkVmFsdWUudmFsdWVUeXBlICE9PSAnc291cmNlJyA/IChcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSdyZWNvcmQtcm93LWl0ZW0nPlxuICAgICAgICAgICAgICAgICAgIHtmb3JtYXRWYWx1ZShwcm9wcywgcmVjb3JkVmFsdWUpfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICApIDogbnVsbCB9XG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSdyZWNvcmQtcm93LWl0ZW0nPntkcm9wRG93blZhbHVlLmtleX1cbiAgICAgICAgICAgICAgICB7ZHJvcERvd25WYWx1ZS5rZXkubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgICAgICAgICAgPEFkZFRhYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXtwcm9wcy5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICB1aWQ9e2Ryb3BEb3duVmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPSdzb3VyY2UnIC8+XG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG5cdFx0XHQ8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0ncmVjb3JkLXJvdy1pdGVtIHNjb3JlJz5cbiAgICAgICAgICAgICAgICAgPFNjb3JlUGlja2VyIHZhbHVlPXtyZWNvcmRWYWx1ZS5zY29yZX0gcmVhZE9ubHk9e3RydWV9IC8+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0ncmVjb3JkLXJvdy1pdGVtIHBlcmlvZCc+XG4gICAgICAgICAgICAgICAgIHtmb3JtYXREYXRlKHJlY29yZFZhbHVlLnBlcmlvZCl9XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0ncmVjb3JkLXJvdy1pdGVtIGJ1dHRvbnMnPlxuICAgICAgICAgICAgICAgIDxidXR0b24+PGkgY2xhc3NOYW1lPSdmYSBmYS1wZW5jaWwtc3F1YXJlLW8nIHRpdGxlPSdFZGl0JyBvbkNsaWNrPXtwcm9wcy5zZXRFZGl0fSBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24+PGkgY2xhc3NOYW1lPSdmYSBmYS10cmFzaCcgYXJpYS1oaWRkZW49J3RydWUnIG9uQ2xpY2s9e3Byb3BzLm9uRGVsZXRlfT48L2k+PC9idXR0b24+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICApO1xuICAgIH1cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9SZWNvcmRSb3cudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 38 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst lodash_1 = __webpack_require__(20);\r\nexports.ScorePicker = (props) => {\r\n    const values = [1, 2, 3, 4, 5];\r\n    if (props.readOnly) {\r\n        return (React.createElement(\"span\", { className: 'score-picker' }, values.map((val) => (React.createElement(\"i\", { key: val, className: 'fa fa-star' + (val > props.value ? '-o' : ''), \"aria-hidden\": 'true' })))));\r\n    }\r\n    else {\r\n        if (props.onChange === undefined) {\r\n            throw new Error('An onChange handler is required');\r\n        }\r\n        return (React.createElement(\"span\", { className: 'score-picker editing' }, lodash_1.reverse(values).map((val) => (React.createElement(\"i\", { key: val, className: 'fa fa-star' + (val > props.value ? '-o' : ''), onClick: () => props.onChange(val), \"aria-hidden\": 'true' })))));\r\n    }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL1Njb3JlUGlja2VyLnRzeD9mNzYyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBQy9CLHlDQUFpQztBQVFwQixtQkFBVyxHQUNwQixDQUFDLEtBQXVCO0lBRXBCLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRS9CLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2pCLE1BQU0sQ0FBQyxDQUNQLDhCQUFNLFNBQVMsRUFBQyxjQUFjLElBQ3pCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQywyQkFBRyxHQUFHLEVBQUUsR0FBRyxFQUM3QixTQUFTLEVBQUUsWUFBWSxHQUFHLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQyxpQkFDN0MsTUFBTSxHQUFLLENBQUMsQ0FBQyxDQUMxQixDQUNOLENBQUM7SUFDTixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDSixFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxJQUFJLEtBQUssQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO1FBQ3ZELENBQUM7UUFDRCxNQUFNLENBQUMsQ0FDUCw4QkFBTSxTQUFTLEVBQUMsc0JBQXNCLElBQ2pDLGdCQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsMkJBQUcsR0FBRyxFQUFFLEdBQUcsRUFDdEMsU0FBUyxFQUFFLFlBQVksR0FBRyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUMsRUFDekQsT0FBTyxFQUFFLE1BQU0sS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsaUJBQ3RCLE1BQU0sR0FBSyxDQUFDLENBQUMsQ0FDMUIsQ0FDTixDQUFDO0lBQ04sQ0FBQztBQUdMLENBQUMsQ0FBQyIsImZpbGUiOiIzOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJldmVyc2UgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbnRlcmZhY2UgU2NvcmVQaWNrZXJQcm9wcyB7XG4gICAgdmFsdWU6IG51bWJlcjtcbiAgICBvbkNoYW5nZT86ICh2YWw6IG51bWJlcikgPT4gdm9pZDtcbiAgICByZWFkT25seTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IFNjb3JlUGlja2VyIDogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PFNjb3JlUGlja2VyUHJvcHM+ID1cbiAgICAocHJvcHM6IFNjb3JlUGlja2VyUHJvcHMpID0+IHtcblxuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbMSwgMiwgMywgNCwgNV07XG5cbiAgICAgICAgaWYgKHByb3BzLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzY29yZS1waWNrZXInPlxuICAgICAgICAgICAgICAgIHt2YWx1ZXMubWFwKCh2YWwpID0+ICg8aSBrZXk9e3ZhbH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsnZmEgZmEtc3RhcicgKyAodmFsID4gcHJvcHMudmFsdWUgPyAnLW8nIDogJycpfVxuICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPikpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcm9wcy5vbkNoYW5nZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbiBvbkNoYW5nZSBoYW5kbGVyIGlzIHJlcXVpcmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzY29yZS1waWNrZXIgZWRpdGluZyc+XG4gICAgICAgICAgICAgICAge3JldmVyc2UodmFsdWVzKS5tYXAoKHZhbCkgPT4gKDxpIGtleT17dmFsfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eydmYSBmYS1zdGFyJyArICh2YWwgPiBwcm9wcy52YWx1ZSA/ICctbycgOiAnJyl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHByb3BzLm9uQ2hhbmdlKHZhbCl9XG4gICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+KSl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cblxuICAgIH07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL2ZpZWxkcy9TY29yZVBpY2tlci50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 39 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.StringFieldEditor = (props) => {\r\n    return (React.createElement(\"input\", { type: 'text', value: props.value, onChange: (e) => props.onChange(e.target.value) }));\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9TdHJpbmdGaWVsZEVkaXRvci50c3g/NjMwMSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQU9sQix5QkFBaUIsR0FDMUIsQ0FBQyxLQUE2QjtJQUMxQixNQUFNLENBQUMsQ0FBQywrQkFBTyxJQUFJLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUksQ0FBQyxDQUFDO0FBQ3hHLENBQUMsQ0FBQyIsImZpbGUiOiIzOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyA8RGVzY3JpcHRpb24gTWlzc2luZz5cbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFN0cmluZ0ZpZWxkRWRpdG9yUHJvcHMge1xuICAgIG9uQ2hhbmdlOiAoczogc3RyaW5nKSA9PiB2b2lkO1xuICAgIHZhbHVlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBTdHJpbmdGaWVsZEVkaXRvciA6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxTdHJpbmdGaWVsZEVkaXRvclByb3BzPiA9XG4gICAgKHByb3BzOiBTdHJpbmdGaWVsZEVkaXRvclByb3BzKSAgPT4ge1xuICAgICAgICByZXR1cm4gKDxpbnB1dCB0eXBlPSd0ZXh0JyB2YWx1ZT17cHJvcHMudmFsdWV9IG9uQ2hhbmdlPXsoZSkgPT4gcHJvcHMub25DaGFuZ2UoZS50YXJnZXQudmFsdWUpfSAvPik7XG4gICAgfTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9TdHJpbmdGaWVsZEVkaXRvci50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 40 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst ComboDropdown_1 = __webpack_require__(18);\r\nconst lodash_1 = __webpack_require__(20);\r\nexports.EntityFieldEditor = (props) => {\r\n    const options = props.entities.map((entity) => ({ key: entity.label, value: entity.uid }));\r\n    let selectedOption = options.find((opt) => parseInt(opt.value) === props.value);\r\n    if (selectedOption === undefined) {\r\n        selectedOption = { key: '', value: '' };\r\n    }\r\n    return (React.createElement(ComboDropdown_1.ComboDropdown, { options: options, typeName: 'entity type', allowNew: false, value: selectedOption, setValue: (val) => val !== null ? props.onChange(parseInt(val.value)) : props.onChange(null), createNewValue: lodash_1.noop }));\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9FbnRpdHlGaWVsZEVkaXRvci50c3g/ODhhNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUMvQixnREFBc0U7QUFFdEUseUNBQThCO0FBU2pCLHlCQUFpQixHQUMxQixDQUFDLEtBQTZCO0lBRTFCLE1BQU0sT0FBTyxHQUEyQixLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbEgsSUFBSSxjQUFjLEdBQXFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEtBQUssUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFbEgsRUFBRSxDQUFDLENBQUMsY0FBYyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDL0IsY0FBYyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELE1BQU0sQ0FBQyxDQUNGLG9CQUFDLDZCQUFhLElBQ1gsT0FBTyxFQUFFLE9BQU8sRUFDaEIsUUFBUSxFQUFDLGFBQWEsRUFDdEIsUUFBUSxFQUFFLEtBQUssRUFDZixLQUFLLEVBQUUsY0FBYyxFQUNyQixRQUFRLEVBQUUsQ0FBQyxHQUFHLEtBQUssR0FBRyxLQUFLLElBQUksR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUM1RixjQUFjLEVBQUUsYUFBSSxHQUFJLENBQy9CLENBQUM7QUFDTixDQUFDLENBQUMiLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDb21ib0Ryb3Bkb3duLCBDb21ib0Ryb3Bkb3duT3B0aW9uIH0gZnJvbSAnLi4vQ29tYm9Ecm9wZG93bic7XG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICdmYWxjb24tY29yZSc7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuXG5pbnRlcmZhY2UgRW50aXR5RmllbGRFZGl0b3JQcm9wcyB7XG4gICAgb25DaGFuZ2U6ICh2YWw6IG51bWJlciB8IG51bGwpID0+IHZvaWQ7XG4gICAgdmFsdWU6IG51bWJlcjtcbiAgICBlbnRpdGllczogRW50aXR5W107XG59XG5cbmV4cG9ydCBjb25zdCBFbnRpdHlGaWVsZEVkaXRvciA6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxFbnRpdHlGaWVsZEVkaXRvclByb3BzPiA9XG4gICAgKHByb3BzOiBFbnRpdHlGaWVsZEVkaXRvclByb3BzKSAgPT4ge1xuXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgOiBDb21ib0Ryb3Bkb3duT3B0aW9uW10gPSBwcm9wcy5lbnRpdGllcy5tYXAoKGVudGl0eSkgPT4gKHsga2V5OiBlbnRpdHkubGFiZWwsIHZhbHVlOiBlbnRpdHkudWlkfSkpO1xuXG4gICAgICAgIGxldCBzZWxlY3RlZE9wdGlvbiA6IENvbWJvRHJvcGRvd25PcHRpb24gfCB1bmRlZmluZWQgPSBvcHRpb25zLmZpbmQoKG9wdCkgPT4gcGFyc2VJbnQob3B0LnZhbHVlKSA9PT0gcHJvcHMudmFsdWUpO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxlY3RlZE9wdGlvbiA9IHsga2V5OiAnJywgdmFsdWU6ICcnfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgPENvbWJvRHJvcGRvd25cbiAgICAgICAgICAgICAgICBvcHRpb25zPXtvcHRpb25zfVxuICAgICAgICAgICAgICAgIHR5cGVOYW1lPSdlbnRpdHkgdHlwZSdcbiAgICAgICAgICAgICAgICBhbGxvd05ldz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkT3B0aW9ufVxuICAgICAgICAgICAgICAgIHNldFZhbHVlPXsodmFsKSA9PiB2YWwgIT09IG51bGwgPyBwcm9wcy5vbkNoYW5nZShwYXJzZUludCh2YWwudmFsdWUpKSA6IHByb3BzLm9uQ2hhbmdlKG51bGwpfVxuICAgICAgICAgICAgICAgIGNyZWF0ZU5ld1ZhbHVlPXtub29wfSAvPlxuICAgICAgICApO1xuICAgIH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9FbnRpdHlGaWVsZEVkaXRvci50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 41 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst DatePickerDropdown_1 = __webpack_require__(42);\r\nexports.DateFieldEditor = (props) => {\r\n    return (React.createElement(\"div\", { className: 'date-selector' },\r\n        React.createElement(DatePickerDropdown_1.DatePickerDropdown, { value: props.value, setValue: props.onChange })));\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9EYXRlRmllbGRFZGl0b3IudHN4Pzc1YjciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFFL0IscURBQWtFO0FBT3JELHVCQUFlLEdBQ3hCLENBQUMsS0FBMkI7SUFDeEIsTUFBTSxDQUFDLENBQ1AsNkJBQUssU0FBUyxFQUFDLGVBQWU7UUFDMUIsb0JBQUMsdUNBQWtCLElBQ2YsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQ2xCLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUSxHQUMxQixDQUNBLENBQUMsQ0FBQztBQUNaLENBQUMsQ0FBQyIsImZpbGUiOiI0MS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyA8RGVzY3JpcHRpb24gTWlzc2luZz5cbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgRGF0ZVBpY2tlckRyb3Bkb3duIH0gZnJvbSAnLi4vZmllbGRzL0RhdGVQaWNrZXJEcm9wZG93bic7XG5cbmludGVyZmFjZSBEYXRlRmllbGRFZGl0b3JQcm9wcyB7XG4gICAgb25DaGFuZ2U6IChzOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgdmFsdWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IERhdGVGaWVsZEVkaXRvciA6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxEYXRlRmllbGRFZGl0b3JQcm9wcz4gPVxuICAgIChwcm9wczogRGF0ZUZpZWxkRWRpdG9yUHJvcHMpICA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkYXRlLXNlbGVjdG9yJz5cbiAgICAgICAgICAgIDxEYXRlUGlja2VyRHJvcGRvd25cbiAgICAgICAgICAgICAgICB2YWx1ZT17cHJvcHMudmFsdWV9XG4gICAgICAgICAgICAgICAgc2V0VmFsdWU9e3Byb3BzLm9uQ2hhbmdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+KTtcbiAgICB9O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9lbnRpdHlfZWRpdG9yL0RhdGVGaWVsZEVkaXRvci50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 42 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst moment = __webpack_require__(43);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst formatDate_1 = __webpack_require__(44);\r\nclass DatePickerDropdown extends React.Component {\r\n    constructor() {\r\n        super();\r\n        //TODO: should be false\r\n        this.state = {\r\n            showingDropDown: false\r\n        };\r\n        if (document !== undefined) {\r\n            this.boundWindowClick = () => {\r\n                if (!this.ignoreGlobalClick) {\r\n                    this.setState({\r\n                        showingDropDown: false\r\n                    });\r\n                }\r\n                else {\r\n                    this.ignoreGlobalClick = false;\r\n                }\r\n            };\r\n            document.body.addEventListener('click', this.boundWindowClick);\r\n        }\r\n    }\r\n    componentWillMount() {\r\n        this.ignoreBlur = false;\r\n        this.ignoreClick = false;\r\n        this.ignoreGlobalClick = false;\r\n    }\r\n    componentWillUnmount() {\r\n        document.body.removeEventListener('click', this.boundWindowClick);\r\n    }\r\n    componentWillReceiveProps(newProps) {\r\n        // this.updateFilter(newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString, newProps);\r\n        // this.setState({\r\n        //     searchString: newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString,\r\n        //     selected: newProps.value,\r\n        //     options: newProps.options\r\n        // });\r\n    }\r\n    //should be false\r\n    handleInputBlur() {\r\n        if (!this.ignoreBlur) {\r\n            this.setState({\r\n                showingDropDown: false\r\n            });\r\n        }\r\n        else {\r\n            this.ignoreBlur = false;\r\n        }\r\n    }\r\n    handleInputFocus() {\r\n        if (this.ignoreBlur) {\r\n            this.ignoreBlur = true;\r\n            return;\r\n        }\r\n        // We don't want `selectItemFromMouse` to trigger when\r\n        // the user clicks into the input to focus it, so set this\r\n        // flag to cancel out the logic in `handleInputClick`.\r\n        // The event order is:  MouseDown -> Focus -> MouseUp -> Click\r\n        this.ignoreClick = true;\r\n        this.setState({ showingDropDown: true });\r\n    }\r\n    handleInputClick() {\r\n        // Input will not be focused if it's disabled\r\n        if (this.isInputFocused() && this.state.showingDropDown === false) {\r\n            this.setState({ showingDropDown: true });\r\n        }\r\n        else {\r\n            //  if (this.state.highlightedIndex !== null && !this.ignoreClick) {\r\n            //      this.selectItemFromMouse(this.state.filteredOptions[this.state.highlightedIndex]);\r\n            //  } else {\r\n            this.ignoreClick = false;\r\n        }\r\n    }\r\n    selectItemFromMouse(item) {\r\n        this.setState({\r\n            showingDropDown: false\r\n        }, () => {\r\n            this.props.setValue(item);\r\n        });\r\n    }\r\n    isInputFocused() {\r\n        const el = this.refs.datePickerDropDownInputBox;\r\n        return el.ownerDocument && (el === el.ownerDocument.activeElement);\r\n    }\r\n    onDropdownClick() {\r\n        this.ignoreBlur = true;\r\n        this.ignoreGlobalClick = true;\r\n        console.log('clicked');\r\n    }\r\n    rangeTypeChanged(rangeType) {\r\n        this.props.setValue(rangeType + this.props.value.substr(1));\r\n    }\r\n    yearChanged(e) {\r\n        const base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\r\n        let yearVal = e.target.value.substr(0, 4).replace(/[^0-9]/g, '');\r\n        for (let i = yearVal.length; i < 4; i += 1) {\r\n            yearVal += 'X';\r\n        }\r\n        this.props.setValue(base.substr(0, 1) + yearVal + base.substr(5));\r\n    }\r\n    monthChanged(e) {\r\n        this.ignoreGlobalClick = true;\r\n        const base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\r\n        let monthVal = e.target.value.substr(0, 2);\r\n        this.props.setValue(base.substr(0, 5) + monthVal + base.substr(7));\r\n    }\r\n    dayChanged(e) {\r\n        const base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\r\n        let dayVal = e.target.value.substr(0, 2).replace(/[^0-9]/g, '');\r\n        dayVal = lodash_1.padStart(dayVal, 2, '0');\r\n        this.props.setValue(base.substr(0, 7) + dayVal);\r\n    }\r\n    render() {\r\n        let rangeOption = this.props.value.substr(0, 1);\r\n        if (['<', '>', '='].indexOf(rangeOption) === -1) {\r\n            rangeOption = '=';\r\n        }\r\n        const rangeOptionClassName = (val) => {\r\n            if (val === rangeOption) {\r\n                return 'range-option selected';\r\n            }\r\n            else {\r\n                return 'range-option';\r\n            }\r\n        };\r\n        const year = this.props.value.substr(1, 4).replace(/X/g, '');\r\n        const month = this.props.value.substr(5, 2);\r\n        const day = this.props.value[7] === '0' ? this.props.value[8] === '0' ?\r\n            ''\r\n            : this.props.value.substr(8, 1)\r\n            : this.props.value.substr(7, 2);\r\n        const displayValue = formatDate_1.formatDate(this.props.value);\r\n        return (React.createElement(\"div\", { className: 'combo-dropdown' },\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"input\", { type: 'text', readOnly: true, ref: 'datePickerDropDownInputBox', className: 'search-input', value: displayValue, onBlur: this.handleInputBlur.bind(this), onFocus: this.handleInputFocus.bind(this), onClick: this.handleInputClick.bind(this) })),\r\n            this.state.showingDropDown ? (React.createElement(\"div\", { className: 'dropdown' },\r\n                React.createElement(\"div\", { className: 'date-picker-dropdown', onMouseDown: this.onDropdownClick.bind(this) },\r\n                    React.createElement(\"section\", { className: 'range-type' },\r\n                        React.createElement(\"div\", { className: rangeOptionClassName('<'), onClick: () => this.rangeTypeChanged('<') }, \"Before\"),\r\n                        React.createElement(\"div\", { className: rangeOptionClassName('='), onClick: () => this.rangeTypeChanged('=') }, \"Exactly\"),\r\n                        React.createElement(\"div\", { className: rangeOptionClassName('>'), onClick: () => this.rangeTypeChanged('>') }, \"After\")),\r\n                    React.createElement(\"section\", { className: 'date-select' },\r\n                        React.createElement(\"div\", { className: 'date-selector day' },\r\n                            React.createElement(\"label\", { className: 'small' }, \"Day\"),\r\n                            React.createElement(\"input\", { type: 'text', maxLength: 2, value: day, onChange: this.dayChanged.bind(this) })),\r\n                        React.createElement(\"div\", { className: 'date-selector month' },\r\n                            React.createElement(\"label\", { className: 'small' }, \"Month\"),\r\n                            React.createElement(\"select\", { onChange: this.monthChanged.bind(this), value: month },\r\n                                React.createElement(\"option\", { value: '00' }, \"Unknown\"),\r\n                                moment.months().map((month, i) => (React.createElement(\"option\", { key: `option-${month}`, value: lodash_1.padStart((i + 1).toString(), 2, '0') }, month))))),\r\n                        React.createElement(\"div\", { className: 'date-selector year' },\r\n                            React.createElement(\"label\", { className: 'small' }, \"Year\"),\r\n                            React.createElement(\"input\", { type: 'text', maxLength: 4, value: year, onChange: this.yearChanged.bind(this) })))))) : null));\r\n    }\r\n}\r\nexports.DatePickerDropdown = DatePickerDropdown;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL0RhdGVQaWNrZXJEcm9wZG93bi50c3g/YmQyZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUMvQix1Q0FBaUM7QUFFakMseUNBQWtDO0FBRWxDLDZDQUFxRDtBQVdyRCx3QkFBbUMsU0FBUSxLQUFLLENBQUMsU0FBMkQ7SUFPeEc7UUFDSSxLQUFLLEVBQUUsQ0FBQztRQUVSLHVCQUF1QjtRQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsZUFBZSxFQUFFLEtBQUs7U0FDekIsQ0FBQztRQUVGLEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRztnQkFDcEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO29CQUMxQixJQUFJLENBQUMsUUFBUSxDQUFDO3dCQUNWLGVBQWUsRUFBRSxLQUFLO3FCQUN6QixDQUFDLENBQUM7Z0JBQ1AsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDSixJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO2dCQUNuQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDO1lBRUYsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDbkUsQ0FBQztJQUNMLENBQUM7SUFFTSxrQkFBa0I7UUFDckIsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDeEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDekIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztJQUNuQyxDQUFDO0lBRU0sb0JBQW9CO1FBQ3ZCLFFBQVEsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFF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QVMsRUFBQyxPQUFPLFdBQWE7NEJBQ3JDLCtCQUFPLElBQUksRUFBQyxNQUFNLEVBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBSSxDQUNyRixDQUNBLENBQ1IsQ0FDSixDQUNULEdBQUcsSUFBSSxDQUNOLENBQ1QsQ0FBQztJQUNOLENBQUM7Q0FDSjtBQTNNRCxnREEyTUMiLCJmaWxlIjoiNDIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgU2lkZWJhciBmb3IgZWRpdG9yXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuaW1wb3J0IHsgcGFkU3RhcnQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnLi4vLi4vaGVscGVyL2Zvcm1hdERhdGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhdGVQaWNrZXJEcm9wZG93blByb3BzIHtcbiAgICB2YWx1ZTogc3RyaW5nO1xuICAgIHNldFZhbHVlOiAoczogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgRGF0ZVBpY2tlckRyb3Bkb3duU3RhdGUge1xuICAgIHNob3dpbmdEcm9wRG93bjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGVQaWNrZXJEcm9wZG93bjxUPiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxEYXRlUGlja2VyRHJvcGRvd25Qcm9wcywgRGF0ZVBpY2tlckRyb3Bkb3duU3RhdGU+IHtcblxuICAgIHByaXZhdGUgaWdub3JlQmx1cjtcbiAgICBwcml2YXRlIGlnbm9yZUNsaWNrO1xuICAgIHByaXZhdGUgaWdub3JlR2xvYmFsQ2xpY2s7XG4gICAgcHJpdmF0ZSBib3VuZFdpbmRvd0NsaWNrO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgLy9UT0RPOiBzaG91bGQgYmUgZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNob3dpbmdEcm9wRG93bjogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZG9jdW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5ib3VuZFdpbmRvd0NsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pZ25vcmVHbG9iYWxDbGljaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dpbmdEcm9wRG93bjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZ25vcmVHbG9iYWxDbGljayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmJvdW5kV2luZG93Q2xpY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgdGhpcy5pZ25vcmVCbHVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaWdub3JlQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pZ25vcmVHbG9iYWxDbGljayA9IGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYm91bmRXaW5kb3dDbGljayk7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHM6IERhdGVQaWNrZXJEcm9wZG93blByb3BzKSB7XG4gICAgICAgIC8vIHRoaXMudXBkYXRlRmlsdGVyKG5ld1Byb3BzLnZhbHVlLmtleSAhPT0gdGhpcy5wcm9wcy52YWx1ZS5rZXkgPyBuZXdQcm9wcy52YWx1ZS5rZXkgOiB0aGlzLnN0YXRlLnNlYXJjaFN0cmluZywgbmV3UHJvcHMpO1xuICAgICAgICAvLyB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgLy8gICAgIHNlYXJjaFN0cmluZzogbmV3UHJvcHMudmFsdWUua2V5ICE9PSB0aGlzLnByb3BzLnZhbHVlLmtleSA/IG5ld1Byb3BzLnZhbHVlLmtleSA6IHRoaXMuc3RhdGUuc2VhcmNoU3RyaW5nLFxuICAgICAgICAvLyAgICAgc2VsZWN0ZWQ6IG5ld1Byb3BzLnZhbHVlLFxuICAgICAgICAvLyAgICAgb3B0aW9uczogbmV3UHJvcHMub3B0aW9uc1xuICAgICAgICAvLyB9KTtcbiAgICB9XG5cbiAgICAvL3Nob3VsZCBiZSBmYWxzZVxuICAgIHB1YmxpYyBoYW5kbGVJbnB1dEJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5pZ25vcmVCbHVyKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzaG93aW5nRHJvcERvd246IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlQmx1ciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGhhbmRsZUlucHV0Rm9jdXMgKCkge1xuICAgICAgICBpZiAodGhpcy5pZ25vcmVCbHVyKSB7XG4gICAgICAgIHRoaXMuaWdub3JlQmx1ciA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBkb24ndCB3YW50IGBzZWxlY3RJdGVtRnJvbU1vdXNlYCB0byB0cmlnZ2VyIHdoZW5cbiAgICAgICAgLy8gdGhlIHVzZXIgY2xpY2tzIGludG8gdGhlIGlucHV0IHRvIGZvY3VzIGl0LCBzbyBzZXQgdGhpc1xuICAgICAgICAvLyBmbGFnIHRvIGNhbmNlbCBvdXQgdGhlIGxvZ2ljIGluIGBoYW5kbGVJbnB1dENsaWNrYC5cbiAgICAgICAgLy8gVGhlIGV2ZW50IG9yZGVyIGlzOiAgTW91c2VEb3duIC0+IEZvY3VzIC0+IE1vdXNlVXAgLT4gQ2xpY2tcbiAgICAgICAgdGhpcy5pZ25vcmVDbGljayA9IHRydWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93aW5nRHJvcERvd246IHRydWUgfSk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlSW5wdXRDbGljayAoKSB7XG4gICAgLy8gSW5wdXQgd2lsbCBub3QgYmUgZm9jdXNlZCBpZiBpdCdzIGRpc2FibGVkXG4gICAgaWYgKHRoaXMuaXNJbnB1dEZvY3VzZWQoKSAmJiB0aGlzLnN0YXRlLnNob3dpbmdEcm9wRG93biA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dpbmdEcm9wRG93bjogdHJ1ZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyAgaWYgKHRoaXMuc3RhdGUuaGlnaGxpZ2h0ZWRJbmRleCAhPT0gbnVsbCAmJiAhdGhpcy5pZ25vcmVDbGljaykge1xuICAgICAgICAvLyAgICAgIHRoaXMuc2VsZWN0SXRlbUZyb21Nb3VzZSh0aGlzLnN0YXRlLmZpbHRlcmVkT3B0aW9uc1t0aGlzLnN0YXRlLmhpZ2hsaWdodGVkSW5kZXhdKTtcbiAgICAgICAgLy8gIH0gZWxzZSB7XG4gICAgICAgICAgICAgdGhpcy5pZ25vcmVDbGljayA9IGZhbHNlO1xuICAgICAgICAvLyAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3RJdGVtRnJvbU1vdXNlIChpdGVtKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzaG93aW5nRHJvcERvd246IGZhbHNlXG4gICAgfSwgKCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy5zZXRWYWx1ZShpdGVtKTtcbiAgICB9KVxuICB9XG5cbiAgIHB1YmxpYyBpc0lucHV0Rm9jdXNlZCAoKSB7XG4gICAgY29uc3QgZWwgPSB0aGlzLnJlZnMuZGF0ZVBpY2tlckRyb3BEb3duSW5wdXRCb3g7XG4gICAgcmV0dXJuIGVsLm93bmVyRG9jdW1lbnQgJiYgKGVsID09PSBlbC5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIG9uRHJvcGRvd25DbGljaygpIHtcbiAgICAgIHRoaXMuaWdub3JlQmx1ciA9IHRydWU7XG4gICAgICB0aGlzLmlnbm9yZUdsb2JhbENsaWNrID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUubG9nKCdjbGlja2VkJyk7XG4gIH1cblxuICBwdWJsaWMgcmFuZ2VUeXBlQ2hhbmdlZChyYW5nZVR5cGU6IHN0cmluZykge1xuICAgICAgIHRoaXMucHJvcHMuc2V0VmFsdWUocmFuZ2VUeXBlICsgdGhpcy5wcm9wcy52YWx1ZS5zdWJzdHIoMSkpO1xuICB9XG5cbiAgcHVibGljIHllYXJDaGFuZ2VkKGU6IFJlYWN0LkZvcm1FdmVudCkge1xuICAgICAgY29uc3QgYmFzZSA9IHRoaXMucHJvcHMudmFsdWUubGVuZ3RoID09PSA5ID8gdGhpcy5wcm9wcy52YWx1ZSA6ICc9WFhYWDAwMDAnO1xuICAgICAgbGV0IHllYXJWYWwgOiBzdHJpbmcgPSBlLnRhcmdldC52YWx1ZS5zdWJzdHIoMCwgNCkucmVwbGFjZSgvW14wLTldL2csICcnKTtcbiAgICAgIGZvciAobGV0IGkgPSB5ZWFyVmFsLmxlbmd0aDsgaSA8IDQ7IGkgKz0gMSkge1xuICAgICAgICAgIHllYXJWYWwgKz0gJ1gnO1xuICAgICAgfVxuICAgICAgdGhpcy5wcm9wcy5zZXRWYWx1ZShiYXNlLnN1YnN0cigwLCAxKSArIHllYXJWYWwgKyBiYXNlLnN1YnN0cig1KSk7XG4gIH1cblxuICBwdWJsaWMgbW9udGhDaGFuZ2VkKGU6IFJlYWN0LkZvcm1FdmVudCkge1xuICAgICAgdGhpcy5pZ25vcmVHbG9iYWxDbGljayA9IHRydWU7XG4gICAgICBjb25zdCBiYXNlID0gdGhpcy5wcm9wcy52YWx1ZS5sZW5ndGggPT09IDkgPyB0aGlzLnByb3BzLnZhbHVlIDogJz1YWFhYMDAwMCc7XG4gICAgICBsZXQgbW9udGhWYWwgOiBzdHJpbmcgPSBlLnRhcmdldC52YWx1ZS5zdWJzdHIoMCwgMik7XG4gICAgICB0aGlzLnByb3BzLnNldFZhbHVlKGJhc2Uuc3Vic3RyKDAsIDUpICsgbW9udGhWYWwgKyBiYXNlLnN1YnN0cig3KSk7XG4gIH1cblxuICBwdWJsaWMgZGF5Q2hhbmdlZChlOiBSZWFjdC5Gb3JtRXZlbnQpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSB0aGlzLnByb3BzLnZhbHVlLmxlbmd0aCA9PT0gOSA/IHRoaXMucHJvcHMudmFsdWUgOiAnPVhYWFgwMDAwJztcbiAgICAgIGxldCBkYXlWYWwgOiBzdHJpbmcgPSBlLnRhcmdldC52YWx1ZS5zdWJzdHIoMCwgMikucmVwbGFjZSgvW14wLTldL2csICcnKTtcbiAgICAgIGRheVZhbCA9IHBhZFN0YXJ0KGRheVZhbCwgMiwgJzAnKTtcbiAgICAgIHRoaXMucHJvcHMuc2V0VmFsdWUoIGJhc2Uuc3Vic3RyKDAsIDcpICsgZGF5VmFsKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG5cbiAgICAgIGxldCByYW5nZU9wdGlvbiA9IHRoaXMucHJvcHMudmFsdWUuc3Vic3RyKDAsIDEpO1xuXG4gICAgICBpZiAoWyc8JywgJz4nLCAnPSddLmluZGV4T2YocmFuZ2VPcHRpb24pID09PSAtMSkge1xuICAgICAgICAgIHJhbmdlT3B0aW9uID0gJz0nO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByYW5nZU9wdGlvbkNsYXNzTmFtZSA9ICh2YWw6IHN0cmluZykgPT4ge1xuICAgICAgICAgIGlmICh2YWwgPT09IHJhbmdlT3B0aW9uKSB7XG4gICAgICAgICAgICAgIHJldHVybiAncmFuZ2Utb3B0aW9uIHNlbGVjdGVkJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gJ3JhbmdlLW9wdGlvbic7XG4gICAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY29uc3QgeWVhciA9IHRoaXMucHJvcHMudmFsdWUuc3Vic3RyKDEsIDQpLnJlcGxhY2UoL1gvZywgJycpO1xuICAgICAgY29uc3QgbW9udGggPSB0aGlzLnByb3BzLnZhbHVlLnN1YnN0cig1LCAyKTtcbiAgICAgIGNvbnN0IGRheSA9IHRoaXMucHJvcHMudmFsdWVbN10gPT09ICcwJyA/IHRoaXMucHJvcHMudmFsdWVbOF0gPT09ICcwJyA/XG4gICAgICAgICcnXG4gICAgICAgIDogdGhpcy5wcm9wcy52YWx1ZS5zdWJzdHIoOCwgMSlcbiAgICAgICAgOiB0aGlzLnByb3BzLnZhbHVlLnN1YnN0cig3LCAyKTtcblxuICAgICAgIGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGZvcm1hdERhdGUodGhpcy5wcm9wcy52YWx1ZSk7XG5cbiAgICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29tYm8tZHJvcGRvd24nPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J2RhdGVQaWNrZXJEcm9wRG93bklucHV0Qm94J1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWFyY2gtaW5wdXQnXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZGlzcGxheVZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25CbHVyPXt0aGlzLmhhbmRsZUlucHV0Qmx1ci5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5oYW5kbGVJbnB1dEZvY3VzLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUlucHV0Q2xpY2suYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zaG93aW5nRHJvcERvd24gPyAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkcm9wZG93bic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGF0ZS1waWNrZXItZHJvcGRvd24nIG9uTW91c2VEb3duPXt0aGlzLm9uRHJvcGRvd25DbGljay5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9J3JhbmdlLXR5cGUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cmFuZ2VPcHRpb25DbGFzc05hbWUoJzwnKX0gb25DbGljaz17KCkgPT4gdGhpcy5yYW5nZVR5cGVDaGFuZ2VkKCc8Jyl9PkJlZm9yZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cmFuZ2VPcHRpb25DbGFzc05hbWUoJz0nKX0gb25DbGljaz17KCkgPT4gdGhpcy5yYW5nZVR5cGVDaGFuZ2VkKCc9Jyl9PkV4YWN0bHk8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3JhbmdlT3B0aW9uQ2xhc3NOYW1lKCc+Jyl9IG9uQ2xpY2s9eygpID0+IHRoaXMucmFuZ2VUeXBlQ2hhbmdlZCgnPicpfT5BZnRlcjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9J2RhdGUtc2VsZWN0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RhdGUtc2VsZWN0b3IgZGF5Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J3NtYWxsJz5EYXk8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIG1heExlbmd0aD17Mn0gdmFsdWU9e2RheX0gb25DaGFuZ2U9e3RoaXMuZGF5Q2hhbmdlZC5iaW5kKHRoaXMpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RhdGUtc2VsZWN0b3IgbW9udGgnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPk1vbnRoPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25DaGFuZ2U9e3RoaXMubW9udGhDaGFuZ2VkLmJpbmQodGhpcyl9IHZhbHVlPXttb250aH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nMDAnPlVua25vd248L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9tZW50Lm1vbnRocygpLm1hcCgobW9udGgsIGkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2BvcHRpb24tJHttb250aH1gfSB2YWx1ZT17cGFkU3RhcnQoKGkgKyAxKS50b1N0cmluZygpLCAyLCAnMCcpfT57bW9udGh9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkYXRlLXNlbGVjdG9yIHllYXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPlllYXI8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIG1heExlbmd0aD17NH0gdmFsdWU9e3llYXJ9IG9uQ2hhbmdlPXt0aGlzLnllYXJDaGFuZ2VkLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL2ZpZWxkcy9EYXRlUGlja2VyRHJvcGRvd24udHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 43 */
/***/ function(module, exports) {

	eval("module.exports = require(\"moment\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtb21lbnRcIj9hODhkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjQzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibW9tZW50XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwibW9tZW50XCJcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 44 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst moment = __webpack_require__(43);\r\nexports.formatDate = (str) => {\r\n    if (str === null || str.length === 0) {\r\n        return '';\r\n    }\r\n    const modifier = {\r\n        '=': '',\r\n        '>': 'After ',\r\n        '<': 'Before '\r\n    }[str[0]];\r\n    const year = str.substr(1, 4);\r\n    const rawMonth = parseInt(str.substr(5, 2)) - 1;\r\n    const month = rawMonth === -1 || isNaN(rawMonth) ? 'Unknown' : moment.months()[rawMonth];\r\n    const rawDay = parseInt(str.substr(7, 2));\r\n    const day = rawDay > 0 ? rawDay : '';\r\n    return `${modifier} ${day} ${month} ${year}`;\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2hlbHBlci9mb3JtYXREYXRlLnRzPzIzYzAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCx1Q0FBaUM7QUFFcEIsa0JBQVUsR0FBa0MsQ0FBQyxHQUFrQjtJQUV0RSxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxJQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQ2QsQ0FBQztJQUVELE1BQU0sUUFBUSxHQUFHO1FBQ1gsR0FBRyxFQUFFLEVBQUU7UUFDUCxHQUFHLEVBQUUsUUFBUTtRQUNiLEdBQUcsRUFBRSxTQUFTO0tBQ2pCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFVixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUU5QixNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEQsTUFBTSxLQUFLLEdBQUcsUUFBUSxLQUFLLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRXpGLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFDLE1BQU0sR0FBRyxHQUFHLE1BQU0sR0FBRyxDQUFDLEdBQUcsTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUdyQyxNQUFNLENBQUMsR0FBRyxRQUFRLElBQUksR0FBRyxJQUFJLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUNyRCxDQUFDLENBQUMiLCJmaWxlIjoiNDQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuZXhwb3J0IGNvbnN0IGZvcm1hdERhdGUgOiAoczogc3RyaW5nIHwgbnVsbCkgPT4gc3RyaW5nID0gKHN0cjogc3RyaW5nIHwgbnVsbCkgPT4ge1xuXG4gICAgICBpZiAoc3RyID09PSBudWxsIHx8IHN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vZGlmaWVyID0ge1xuICAgICAgICAgICAgJz0nOiAnJyxcbiAgICAgICAgICAgICc+JzogJ0FmdGVyICcsXG4gICAgICAgICAgICAnPCc6ICdCZWZvcmUgJ1xuICAgICAgICB9W3N0clswXV07XG5cbiAgICAgICAgY29uc3QgeWVhciA9IHN0ci5zdWJzdHIoMSwgNCk7XG5cbiAgICAgICAgY29uc3QgcmF3TW9udGggPSBwYXJzZUludChzdHIuc3Vic3RyKDUsIDIpKSAtIDE7XG4gICAgICAgIGNvbnN0IG1vbnRoID0gcmF3TW9udGggPT09IC0xIHx8IGlzTmFOKHJhd01vbnRoKSA/ICdVbmtub3duJyA6IG1vbWVudC5tb250aHMoKVtyYXdNb250aF07XG5cbiAgICAgICAgY29uc3QgcmF3RGF5ID0gcGFyc2VJbnQoc3RyLnN1YnN0cig3LCAyKSk7XG4gICAgICAgIGNvbnN0IGRheSA9IHJhd0RheSA+IDAgPyByYXdEYXkgOiAnJztcblxuXG4gICAgICAgIHJldHVybiBgJHttb2RpZmllcn0gJHtkYXl9ICR7bW9udGh9ICR7eWVhcn1gO1xufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2hlbHBlci9mb3JtYXREYXRlLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 45 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.IntegerFieldEditor = (props) => {\r\n    return (React.createElement(\"input\", { type: 'number', value: props.value, onChange: (e) => props.onChange(e.target.value) }));\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZW50aXR5X2VkaXRvci9JbnRlZ2VyRmllbGRFZGl0b3IudHN4PzFhOTciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFPbEIsMEJBQWtCLEdBQzNCLENBQUMsS0FBOEI7SUFDM0IsTUFBTSxDQUFDLENBQUMsK0JBQU8sSUFBSSxFQUFDLFFBQVEsRUFBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFJLENBQUMsQ0FBQztBQUMxRyxDQUFDLENBQUMiLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBJbnRlZ2VyRmllbGRFZGl0b3JQcm9wcyB7XG4gICAgb25DaGFuZ2U6IChzOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgdmFsdWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IEludGVnZXJGaWVsZEVkaXRvciA6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxJbnRlZ2VyRmllbGRFZGl0b3JQcm9wcz4gPVxuICAgIChwcm9wczogSW50ZWdlckZpZWxkRWRpdG9yUHJvcHMpICA9PiB7XG4gICAgICAgIHJldHVybiAoPGlucHV0IHR5cGU9J251bWJlcicgdmFsdWU9e3Byb3BzLnZhbHVlfSBvbkNoYW5nZT17KGUpID0+IHByb3BzLm9uQ2hhbmdlKGUudGFyZ2V0LnZhbHVlKX0gLz4pO1xuICAgIH07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL2VudGl0eV9lZGl0b3IvSW50ZWdlckZpZWxkRWRpdG9yLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 46 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Signaller_1 = __webpack_require__(21);\r\nexports.AddTabButton = (props, context) => {\r\n    if (props.dataStore.tabs[props.tabType] !== undefined\r\n        && props.dataStore.tabs[props.tabType].has(`${props.tabType}-${props.uid}`)) {\r\n        return (React.createElement(\"i\", { className: 'fa fa-folder-open-o add button', title: 'Open item', onClick: () => context.router.transitionTo(`/edit/${props.tabType}/${props.uid}`) }, \" \"));\r\n    }\r\n    return (React.createElement(\"i\", { className: 'icon-list-add add button', title: 'Add to list', onClick: () => Signaller_1.createTab.dispatch(props.tabType, props.uid, 'item', props.data) }));\r\n};\r\nexports.AddTabButton.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvQWRkVGFiQnV0dG9uLnRzeD9hYmFkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBQy9CLDRDQUF5QztBQVU1QixvQkFBWSxHQUNyQixDQUFDLEtBQXdCLEVBQUUsT0FBWTtJQUVuQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssU0FBUztXQUMxQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEYsTUFBTSxDQUFDLENBQUMsMkJBQUcsU0FBUyxFQUFDLGdDQUFnQyxFQUNqRCxLQUFLLEVBQUMsV0FBVyxFQUNqQixPQUFPLEVBQUUsTUFBTSxPQUFPLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLEtBQUssQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQU8sQ0FBQyxDQUFDO0lBQ2xHLENBQUM7SUFFRCxNQUFNLENBQUMsQ0FDUCwyQkFBRyxTQUFTLEVBQUMsMEJBQTBCLEVBQ25DLEtBQUssRUFBQyxhQUFhLEVBQ25CLE9BQU8sRUFBRSxNQUFNLHFCQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFNLENBQ2hHO0FBQUEsQ0FBQyxDQUFDO0FBRUgsb0JBQVksQ0FBQyxZQUFZLEdBQUc7SUFDeEIsTUFBTSxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7Q0FDNUMsQ0FBQyIsImZpbGUiOiI0Ni5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNyZWF0ZVRhYiB9IGZyb20gJy4uL1NpZ25hbGxlcic7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuLi9EYXRhU3RvcmUnO1xuXG5pbnRlcmZhY2UgQWRkVGFiQnV0dG9uUHJvcHMge1xuICAgIHRhYlR5cGU6IHN0cmluZztcbiAgICB1aWQ6IG51bWJlcjtcbiAgICBkYXRhU3RvcmU6IERhdGFTdG9yZTtcbiAgICBkYXRhPzogYW55O1xufVxuXG5leHBvcnQgY29uc3QgQWRkVGFiQnV0dG9uIDogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PEFkZFRhYkJ1dHRvblByb3BzPiA9XG4gICAgKHByb3BzOiBBZGRUYWJCdXR0b25Qcm9wcywgY29udGV4dDogYW55KSA9PiB7XG5cbiAgICAgICAgaWYgKHByb3BzLmRhdGFTdG9yZS50YWJzW3Byb3BzLnRhYlR5cGVdICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAmJiBwcm9wcy5kYXRhU3RvcmUudGFic1twcm9wcy50YWJUeXBlXS5oYXMoYCR7cHJvcHMudGFiVHlwZX0tJHtwcm9wcy51aWR9YCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoPGkgY2xhc3NOYW1lPSdmYSBmYS1mb2xkZXItb3Blbi1vIGFkZCBidXR0b24nXG4gICAgICAgICAgICAgICAgdGl0bGU9J09wZW4gaXRlbSdcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBjb250ZXh0LnJvdXRlci50cmFuc2l0aW9uVG8oYC9lZGl0LyR7cHJvcHMudGFiVHlwZX0vJHtwcm9wcy51aWR9YCl9PiA8L2k+KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbi1saXN0LWFkZCBhZGQgYnV0dG9uJ1xuICAgICAgICAgICAgdGl0bGU9J0FkZCB0byBsaXN0J1xuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gY3JlYXRlVGFiLmRpc3BhdGNoKHByb3BzLnRhYlR5cGUsIHByb3BzLnVpZCwgJ2l0ZW0nLCBwcm9wcy5kYXRhKX0+PC9pPlxuKX07XG5cbkFkZFRhYkJ1dHRvbi5jb250ZXh0VHlwZXMgPSB7XG4gICAgcm91dGVyOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvQWRkVGFiQnV0dG9uLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 47 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nconst React = __webpack_require__(2);\r\nvar EditableFieldComponent_1 = __webpack_require__(32);\r\nexports.EditableFieldComponent = EditableFieldComponent_1.EditableFieldComponent;\r\nconst ComboDropdown_1 = __webpack_require__(18);\r\nexports.EditableComboDropdown = (props) => {\r\n    if (props.edit) {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(ComboDropdown_1.ComboDropdown, __assign({}, props.comboSettings, { value: props.value, setValue: props.onChange, allowNew: false, createNewValue: () => { } })),\r\n            React.createElement(\"button\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-check', onClick: props.acceptChanges, \"aria-hidden\": 'true' })),\r\n            React.createElement(\"button\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true', onClick: props.cancelChanges }))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"div\", null,\r\n            props.value !== null && props.value.key.length > 0 ? props.value.key\r\n                : (React.createElement(\"em\", null, \"No value\")),\r\n            React.createElement(\"sup\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: props.setEdit }))));\r\n    }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL0VkaXRhYmxlQ29tYm9Ecm9wZG93bi50c3g/N2U3OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOzs7Ozs7Ozs7O0FBRUgscUNBQStCO0FBRS9CLHVEQUEwRTtBQUFqRSxnRkFBc0I7QUFDL0IsZ0RBQTBGO0FBTTdFLDZCQUFxQixHQUFHLENBQUMsS0FBaUM7SUFFbkUsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDYixNQUFNLENBQUMsQ0FBQztZQUNKLG9CQUFDLDZCQUFhLGVBQUssS0FBSyxDQUFDLGFBQWEsSUFDbEMsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQ2xCLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUSxFQUN4QixRQUFRLEVBQUUsS0FBSyxFQUNmLGNBQWMsRUFBRSxRQUFPLENBQUMsSUFBSTtZQUNoQztnQkFBUSwyQkFBRyxTQUFTLEVBQUMsYUFBYSxFQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsYUFBYSxpQkFBYyxNQUFNLEdBQUssQ0FBUztZQUNqRztnQkFBUSwyQkFBRyxTQUFTLEVBQUMsYUFBYSxpQkFBYSxNQUFNLEVBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxhQUFhLEdBQU0sQ0FBUyxDQUMvRixDQUNMLENBQUM7SUFDTixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDSixNQUFNLENBQUMsQ0FDSDtZQUNLLEtBQUssQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHO2tCQUNuRSxDQUNFLDJDQUFpQixDQUNwQjtZQUNEO2dCQUNJLDJCQUFHLFNBQVMsRUFBQyx1QkFBdUIsRUFDaEMsS0FBSyxFQUFDLE1BQU0saUJBQ0EsTUFBTSxFQUNsQixPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU8sR0FDdEIsQ0FDRixDQUNKLENBQ1QsQ0FBQztJQUNOLENBQUM7QUFDTCxDQUFDLENBQUMiLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgPERlc2NyaXB0aW9uIE1pc3Npbmc+XG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBFZGl0YWJsZVN1YmZpZWxkUHJvcHMgfSBmcm9tICcuLi9maWVsZHMvRWRpdGFibGVGaWVsZENvbXBvbmVudCc7XG5leHBvcnQgeyBFZGl0YWJsZUZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi4vZmllbGRzL0VkaXRhYmxlRmllbGRDb21wb25lbnQnO1xuaW1wb3J0IHsgQ29tYm9Ecm9wZG93biwgQ29tYm9Ecm9wZG93bk9wdGlvbiwgQ29tYm9Ecm9wZG93blByb3BzIH0gZnJvbSAnLi4vQ29tYm9Ecm9wZG93bic7XG5cbmludGVyZmFjZSBFZGl0YWJsZUNvbWJvRHJvcGRvd25Qcm9wcyBleHRlbmRzIEVkaXRhYmxlU3ViZmllbGRQcm9wczxDb21ib0Ryb3Bkb3duT3B0aW9uPiB7XG4gICAgY29tYm9TZXR0aW5nczogQ29tYm9Ecm9wZG93blByb3BzO1xufVxuXG5leHBvcnQgY29uc3QgRWRpdGFibGVDb21ib0Ryb3Bkb3duID0gKHByb3BzOiBFZGl0YWJsZUNvbWJvRHJvcGRvd25Qcm9wcykgPT4ge1xuIFxuICAgIGlmIChwcm9wcy5lZGl0KSB7XG4gICAgICAgIHJldHVybiAoPGRpdj5cbiAgICAgICAgICAgIDxDb21ib0Ryb3Bkb3duIHsuLi5wcm9wcy5jb21ib1NldHRpbmdzfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtwcm9wcy52YWx1ZX1cbiAgICAgICAgICAgICAgICBzZXRWYWx1ZT17cHJvcHMub25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgYWxsb3dOZXc9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIGNyZWF0ZU5ld1ZhbHVlPXsoKSA9PiB7fX0gLz5cbiAgICAgICAgICAgIDxidXR0b24+PGkgY2xhc3NOYW1lPSdmYSBmYS1jaGVjaycgb25DbGljaz17cHJvcHMuYWNjZXB0Q2hhbmdlc30gYXJpYS1oaWRkZW49J3RydWUnPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24+PGkgY2xhc3NOYW1lPSdmYSBmYS10aW1lcycgYXJpYS1oaWRkZW49J3RydWUnIG9uQ2xpY2s9e3Byb3BzLmNhbmNlbENoYW5nZXN9PjwvaT48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAge3Byb3BzLnZhbHVlICE9PSBudWxsICYmIHByb3BzLnZhbHVlLmtleS5sZW5ndGggPiAwID8gcHJvcHMudmFsdWUua2V5XG4gICAgICAgICAgICAgICAgOiAoXG4gICAgICAgICAgICAgICAgICAgIDxlbT5ObyB2YWx1ZTwvZW0+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8c3VwPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXBlbmNpbC1zcXVhcmUtbydcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPSdFZGl0J1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5zZXRFZGl0fT5cbiAgICAgICAgICAgICAgICAgICAgPC9pPlxuICAgICAgICAgICAgICAgIDwvc3VwPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufTsgXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL2ZpZWxkcy9FZGl0YWJsZUNvbWJvRHJvcGRvd24udHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 48 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\n// What can I do?\r\n// Entity Operations\r\n// - Delete the entity\r\n// - Merge the entity\r\n// - Split the entity\r\n// - Add 'same-as-ses' to the entity\r\n// Records\r\n// - Order records by type, source and date\r\n// - Add new records\r\n// - Adding a new predicate creates a new record with the\r\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\r\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\r\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\r\n//   to one of its parents. The range MUST be set.\r\n// Visualisations:\r\n// - Network graph of entity relationships\r\nclass EntityWorkspaceReferenceView extends React.Component {\r\n    constructor(props, context) {\r\n        super();\r\n        this.state = {\r\n            comboValue: { key: 'test', value: '' },\r\n            comboSearchValue: ''\r\n        };\r\n    }\r\n    update(data) {\r\n        this.props.api.patchItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, this.props.id, data);\r\n    }\r\n    render() {\r\n        return (React.createElement(\"section\", { className: 'editor-body' },\r\n            React.createElement(\"h2\", null, \"References\"),\r\n            React.createElement(\"table\", { className: 'table' },\r\n                React.createElement(\"thead\", null,\r\n                    React.createElement(\"tr\", null,\r\n                        React.createElement(\"th\", null, \"Entity\"),\r\n                        React.createElement(\"th\", null, \"Property\"))),\r\n                React.createElement(\"tbody\", null, this.props.dataStore.tabs.entity.get('entity-' + this.props.id).value.referenceRecords.map((record) => {\r\n                    return (React.createElement(\"tr\", { key: `record-${record.uid}` },\r\n                        React.createElement(\"td\", null,\r\n                            record.entity,\r\n                            \" \",\r\n                            React.createElement(AddTabButton_1.AddTabButton, { tabType: 'entity', uid: record.entity, dataStore: this.props.dataStore })),\r\n                        React.createElement(\"td\", null,\r\n                            record.predicate,\r\n                            \" \",\r\n                            React.createElement(AddTabButton_1.AddTabButton, { tabType: 'predicate', uid: record.predicate, dataStore: this.props.dataStore }))));\r\n                })))));\r\n    }\r\n}\r\nEntityWorkspaceReferenceView.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.EntityWorkspaceReferenceView = EntityWorkspaceReferenceView;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL2VudGl0eS9FbnRpdHlXb3Jrc3BhY2VSZWZlcmVuY2VWaWV3LnRzeD85OWMzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRS9CLDRDQUEwRDtBQUMxRCw4Q0FBcUM7QUFFckMsK0NBQWtEO0FBY2xELGlCQUFpQjtBQUNqQixvQkFBb0I7QUFDcEIsc0JBQXNCO0FBQ3RCLHFCQUFxQjtBQUNyQixxQkFBcUI7QUFDckIsb0NBQW9DO0FBQ3BDLFVBQVU7QUFDViwyQ0FBMkM7QUFDM0Msb0JBQW9CO0FBQ3BCLHlEQUF5RDtBQUN6RCxrR0FBa0c7QUFDbEcsZ0dBQWdHO0FBQ2hHLG9HQUFvRztBQUNwRyxrREFBa0Q7QUFDbEQsa0JBQWtCO0FBQ2xCLDBDQUEwQztBQUMxQyxrQ0FBMEMsU0FBUSxLQUFLLENBQUMsU0FBK0U7SUFNbkksWUFBWSxLQUF5QyxFQUFFLE9BQVk7UUFDL0QsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO1lBQ3JDLGdCQUFnQixFQUFFLEVBQUU7U0FDdkIsQ0FBQztJQUNOLENBQUM7SUFFTSxNQUFNLENBQUMsSUFBUztRQUNuQixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsb0JBQU0sRUFBRSxvQkFBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBRU0sTUFBTTtRQUVULE1BQU0sQ0FBQyxDQUNMLGlDQUFTLFNBQVMsRUFBQyxhQUFhO1lBQzlCLDZDQUFtQjtZQUNuQiwrQkFBTyxTQUFTLEVBQUMsT0FBTztnQkFDdEI7b0JBQ0U7d0JBQ0UseUNBQWU7d0JBQ2YsMkNBQWlCLENBQ2QsQ0FDQztnQkFDUixtQ0FDRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTTtvQkFDakcsTUFBTSxDQUFDLENBQUMsNEJBQUksR0FBRyxFQUFFLFVBQVUsTUFBTSxDQUFDLEdBQUcsRUFBRTt3QkFDckM7NEJBQUssTUFBTSxDQUFDLE1BQU07OzRCQUFFLG9CQUFDLDJCQUFZLElBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsQ0FBSzt3QkFDaEg7NEJBQUssTUFBTSxDQUFDLFNBQVM7OzRCQUFFLG9CQUFDLDJCQUFZLElBQ2xDLE9BQU8sRUFBRSxXQUFXLEVBQ3BCLEdBQUcsRUFBRSxNQUFNLENBQUMsU0FBUyxFQUNyQixTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsQ0FBSyxDQUN0QyxDQUFDLENBQUM7Z0JBQ1QsQ0FBQyxDQUFDLENBQ0ksQ0FDRixDQUNBLENBQ1gsQ0FBQztJQUNOLENBQUM7O0FBMUNhLHlDQUFZLEdBQUc7SUFDekIsTUFBTSxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7Q0FDNUMsQ0FBQztBQUpOLG9FQTZDQyIsImZpbGUiOiI0OC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBFbXB0eSB3b3Jrc3BhY2UgZm9yIHdoZW4gbm90aGluZyBpcyBvcGVuIVxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vLi4vQXBpU2VydmljZSc7XG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICdmYWxjb24tY29yZSc7XG5cbmltcG9ydCB7IEFkZFRhYkJ1dHRvbiB9IGZyb20gJy4uLy4uL0FkZFRhYkJ1dHRvbic7XG5cbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uLy4uL0RhdGFTdG9yZSc7XG5cbmludGVyZmFjZSBFbnRpdHlXb3Jrc3BhY2VSZWZlcmVuY2VWaWV3UHJvcHMge1xuICAgIGFwaTogQXBpU2VydmljZTtcbiAgICBpZDogbnVtYmVyO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xufVxuXG5pbnRlcmZhY2UgRW50aXR5V29ya3NwYWNlUmVmZXJlbmNlVmlld1N0YXRlIHtcblxufVxuXG4vLyBXaGF0IGNhbiBJIGRvP1xuLy8gRW50aXR5IE9wZXJhdGlvbnNcbi8vIC0gRGVsZXRlIHRoZSBlbnRpdHlcbi8vIC0gTWVyZ2UgdGhlIGVudGl0eVxuLy8gLSBTcGxpdCB0aGUgZW50aXR5XG4vLyAtIEFkZCAnc2FtZS1hcy1zZXMnIHRvIHRoZSBlbnRpdHlcbi8vIFJlY29yZHNcbi8vIC0gT3JkZXIgcmVjb3JkcyBieSB0eXBlLCBzb3VyY2UgYW5kIGRhdGVcbi8vIC0gQWRkIG5ldyByZWNvcmRzXG4vLyAtIEFkZGluZyBhIG5ldyBwcmVkaWNhdGUgY3JlYXRlcyBhIG5ldyByZWNvcmQgd2l0aCB0aGVcbi8vICAgZW50aXR5IHNldCwgdGhlIHByZWRpY2F0ZSBzZXQsIHRoZSBzY29yZSBzZXQgdG8gMywgdGhlIHBlcmlvZCBzZXQgdG8gbnVsbCwgc291cmNlIHNldCB0byBudWxsXG4vLyAgIGl0IGFsc28gY3JlYXRlcyBhIGJsYW5rIGVudHJ5IGluIHRoZSByZWNvcmRzIHN1YiB0YWJsZSBiYXNlZCBvbiB0aGUgcmFuZ2Ugb2YgdGhlIHByZWRpY2F0ZS5cbi8vIC0gTmV3IHByZWRpY2F0ZXMgbXVzdCBoYXZlIGEgbmFtZS4gVGhlIGRvbWFpbiBpcyBzZXQgdG8gdGhlIGN1cnJlbnQgZW50aXR5dHlwZSBidXQgY2FuIGJlIGNoYW5nZWRcbi8vICAgdG8gb25lIG9mIGl0cyBwYXJlbnRzLiBUaGUgcmFuZ2UgTVVTVCBiZSBzZXQuXG4vLyBWaXN1YWxpc2F0aW9uczpcbi8vIC0gTmV0d29yayBncmFwaCBvZiBlbnRpdHkgcmVsYXRpb25zaGlwc1xuZXhwb3J0IGNsYXNzIEVudGl0eVdvcmtzcGFjZVJlZmVyZW5jZVZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RW50aXR5V29ya3NwYWNlUmVmZXJlbmNlVmlld1Byb3BzLCBFbnRpdHlXb3Jrc3BhY2VSZWZlcmVuY2VWaWV3U3RhdGU+IHtcblxuICAgIHB1YmxpYyBzdGF0aWMgY29udGV4dFR5cGVzID0ge1xuICAgICAgICByb3V0ZXI6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcyA6IEVudGl0eVdvcmtzcGFjZVJlZmVyZW5jZVZpZXdQcm9wcywgY29udGV4dDogYW55KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjb21ib1ZhbHVlOiB7IGtleTogJ3Rlc3QnLCB2YWx1ZTogJyd9LFxuICAgICAgICAgICAgY29tYm9TZWFyY2hWYWx1ZTogJydcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLnByb3BzLmFwaS5wYXRjaEl0ZW0oRW50aXR5LCBBcHBVcmxzLmVudGl0eSwgdGhpcy5wcm9wcy5pZCwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT0nZWRpdG9yLWJvZHknPlxuICAgICAgICAgICAgPGgyPlJlZmVyZW5jZXM8L2gyPlxuICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0ndGFibGUnPlxuICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgPHRoPkVudGl0eTwvdGg+XG4gICAgICAgICAgICAgICAgICA8dGg+UHJvcGVydHk8L3RoPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5kYXRhU3RvcmUudGFicy5lbnRpdHkuZ2V0KCdlbnRpdHktJyArIHRoaXMucHJvcHMuaWQpLnZhbHVlLnJlZmVyZW5jZVJlY29yZHMubWFwKChyZWNvcmQpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoPHRyIGtleT17YHJlY29yZC0ke3JlY29yZC51aWR9YH0+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57cmVjb3JkLmVudGl0eX0gPEFkZFRhYkJ1dHRvbiB0YWJUeXBlPXsnZW50aXR5J30gdWlkPXtyZWNvcmQuZW50aXR5fSBkYXRhU3RvcmU9e3RoaXMucHJvcHMuZGF0YVN0b3JlfS8+PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPntyZWNvcmQucHJlZGljYXRlfSA8QWRkVGFiQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgdGFiVHlwZT17J3ByZWRpY2F0ZSd9XG4gICAgICAgICAgICAgICAgICAgICAgdWlkPXtyZWNvcmQucHJlZGljYXRlfVxuICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdG9yZT17dGhpcy5wcm9wcy5kYXRhU3RvcmV9Lz48L3RkPlxuICAgICAgICAgICAgICAgICAgPC90cj4pO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL3dvcmtzcGFjZS9lbnRpdHkvRW50aXR5V29ya3NwYWNlUmVmZXJlbmNlVmlldy50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 49 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Predicate editor workspace\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst SameAsEditor_1 = __webpack_require__(50);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nconst EditableHeader_1 = __webpack_require__(31);\r\nconst EditableParagraph_1 = __webpack_require__(52);\r\nconst EditableComboDropdown_1 = __webpack_require__(47);\r\nconst Signaller_1 = __webpack_require__(21);\r\nclass StringEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\nclass ComboEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\nclass EntityTypeWorkspace extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {};\r\n    }\r\n    update(data) {\r\n        const entityType = this.props.dataStore.tabs.entity_type.get('entity_type-' + this.props.id).value;\r\n        this.props.api.patchItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, this.props.id, data)\r\n            .then(() => this.setState({ entityType: Object.assign({}, entityType, data) }));\r\n    }\r\n    copy() {\r\n        const entityType = this.props.dataStore.tabs.entity_type.get('entity_type-' + this.props.id).value;\r\n        const newEntityType = falcon_core_1.Serializer.fromJson(falcon_core_1.EntityType, Object.assign({}, falcon_core_1.Serializer.toJson(entityType), { name: 'Copy of ' + entityType.label }));\r\n        this.props.api.postItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, newEntityType)\r\n            .then(([id]) => {\r\n            Signaller_1.createTab.dispatch('entity_type', id, 'item');\r\n        });\r\n    }\r\n    del() {\r\n        this.props.api.delItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, this.props.id)\r\n            .then(() => this.context.router.transitionTo('/edit/notfound'))\r\n            .catch((e) => {\r\n            e.data.data.then((data) => {\r\n                const conflictResolutionModal = {\r\n                    name: 'conflict_resolution',\r\n                    cancel: () => { },\r\n                    complete: (result) => {\r\n                        if (result === 'addToWorkspace') {\r\n                            data.entityType.forEach((datum) => {\r\n                                Signaller_1.createTab.dispatch('entity_type', datum.uid, 'item');\r\n                            });\r\n                            data.predicate.forEach((datum) => {\r\n                                Signaller_1.createTab.dispatch('predicate', datum.uid, 'item');\r\n                            });\r\n                            data.entity.forEach((datum) => {\r\n                                Signaller_1.createTab.dispatch('entity', datum.uid, 'item');\r\n                            });\r\n                        }\r\n                    },\r\n                    settings: {\r\n                        conflictingItems: data,\r\n                        message: 'Deleting Entity Type'\r\n                    }\r\n                };\r\n                Signaller_1.showModal.dispatch(conflictResolutionModal);\r\n            });\r\n        });\r\n    }\r\n    createEntity() {\r\n        const a = {\r\n            name: 'entity',\r\n            complete: ([id]) => {\r\n                Signaller_1.createTab.dispatch('entity', id, 'item');\r\n            },\r\n            cancel: () => { console.log('cancel'); },\r\n            settings: {\r\n                initialName: '',\r\n                initialType: this.props.id\r\n            }\r\n        };\r\n        Signaller_1.showModal.dispatch(a);\r\n    }\r\n    render() {\r\n        const entityType = this.props.dataStore.tabs.entity_type.get('entity_type-' + this.props.id).value;\r\n        const potentialParents = this.props.dataStore.all.entity_type.value;\r\n        let parentName = '';\r\n        if (potentialParents !== null && entityType.parent !== undefined) {\r\n            const found = potentialParents.find((par) => par.uid === entityType.parent);\r\n            if (found !== undefined) {\r\n                parentName = found.label;\r\n            }\r\n        }\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header entity_type' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"div\", { className: 'bread-crumbs' }, entityType.parents.map((parent, i) => (React.createElement(\"span\", { key: `breadcrumb-${parent.uid}` },\r\n                            React.createElement(\"span\", null,\r\n                                \"  \",\r\n                                parent.label,\r\n                                \" \",\r\n                                React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, tabType: 'entity_type', uid: parent.uid }),\r\n                                \" \"),\r\n                            React.createElement(\"i\", { className: 'fa fa-angle-right' }))))),\r\n                        React.createElement(\"i\", { className: 'fa fa-tag item-icon' }),\r\n                        React.createElement(StringEditableFieldComponent, { value: entityType.label, component: EditableHeader_1.EditableHeader, onChange: (value) => this.update({ 'label': value }) })),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus add button', \"aria-hidden\": 'true', onClick: this.createEntity.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-trash delete button', \"aria-hidden\": 'true', onClick: this.del.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-clone button', \"aria-hidden\": 'true', onClick: this.copy.bind(this) })))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Parent\"),\r\n                    React.createElement(ComboEditableFieldComponent, { value: entityType.parent === null ? null : { key: parentName, value: entityType.parent }, component: EditableComboDropdown_1.EditableComboDropdown, onChange: (value) => this.update({ 'parent': value === null ? null : value.value }), additionalProps: { comboSettings: {\r\n                                options: potentialParents.map((par) => ({ key: par.label, value: par.uid })),\r\n                                typeName: 'EntityType'\r\n                            } } }),\r\n                    entityType.parent !== null ? (React.createElement(AddTabButton_1.AddTabButton, { tabType: 'entity_type', dataStore: this.props.dataStore, uid: entityType.parent })) : null),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Description\"),\r\n                    React.createElement(StringEditableFieldComponent, { value: entityType.description, component: EditableParagraph_1.EditableParagraph, onChange: (value) => this.update({ 'description': value }) })),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(StringEditableFieldComponent, { value: entityType.sameAs, component: SameAsEditor_1.SameAsEditor, onChange: (value) => this.update({ 'sameAs': value }) })),\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(\"h4\", null, \"Direct Children\"),\r\n                    React.createElement(\"ul\", null, entityType.children\r\n                        .map((child) => this.props.dataStore.all.entity_type.value.find((et) => et.uid === child))\r\n                        .map((childEt) => (React.createElement(\"li\", { key: `dc-${childEt.label}` },\r\n                        childEt.label,\r\n                        \" \",\r\n                        React.createElement(AddTabButton_1.AddTabButton, { tabType: 'entity_type', dataStore: this.props.dataStore, uid: childEt.uid })))))))));\r\n    }\r\n}\r\nEntityTypeWorkspace.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.EntityTypeWorkspace = EntityTypeWorkspace;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL0VudGl0eVR5cGVXb3Jrc3BhY2UudHN4Pzk0MmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFFL0IsK0NBQXNEO0FBQ3RELDRDQUF1RDtBQUV2RCw4Q0FBcUQ7QUFFckQsK0NBQStDO0FBRS9DLGlEQUFrRjtBQUNsRixvREFBZ0U7QUFDaEUsd0RBQXdFO0FBR3hFLDRDQUF1RDtBQU12RCxrQ0FBbUMsU0FBUSx1Q0FBOEI7Q0FBRztBQUM1RSxpQ0FBa0MsU0FBUSx1Q0FBMkM7Q0FBRztBQVd4Rix5QkFBaUMsU0FBUSxLQUFLLENBQUMsU0FBNkQ7SUFNeEc7UUFDSSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFDWixDQUFDO0lBQ04sQ0FBQztJQUVNLE1BQU0sQ0FBQyxJQUFTO1FBQ25CLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUNuRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsd0JBQVUsRUFBRSxvQkFBTyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUM7YUFDN0UsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLFVBQVUsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUdNLElBQUk7UUFFUCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMs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QUFFLFVBQVUsQ0FBQyxNQUFNLEVBQ3hCLFNBQVMsRUFBRSwyQkFBWSxFQUN2QixRQUFRLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUMsQ0FBQyxHQUFJLENBQ3pEO2dCQUVOO29CQUNJLGtEQUF3QjtvQkFDeEIsZ0NBQ0MsVUFBVSxDQUFDLFFBQVE7eUJBQ2YsR0FBRyxDQUFDLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDO3lCQUN6RixHQUFHLENBQUMsQ0FBQyxPQUFPLEtBQ1QsQ0FBQyw0QkFBSSxHQUFHLEVBQUUsTUFBTSxPQUFPLENBQUMsS0FBSyxFQUFFO3dCQUFHLE9BQU8sQ0FBQyxLQUFLOzt3QkFBRSxvQkFBQywyQkFBWSxJQUMxRCxPQUFPLEVBQUMsYUFBYSxFQUNyQixTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQy9CLEdBQUcsRUFBRSxPQUFPLENBQUMsR0FBRyxHQUFJLENBQUssQ0FDaEMsQ0FBQyxDQUNELENBQ0gsQ0FDQSxDQUNSLENBQ1QsQ0FBQztJQUNOLENBQUM7O0FBMUxhLGdDQUFZLEdBQUc7SUFDekIsTUFBTSxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7Q0FDNUMsQ0FBQztBQUpOLGtEQTZMQyIsImZpbGUiOiI0OS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBQcmVkaWNhdGUgZWRpdG9yIHdvcmtzcGFjZVxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMC4xXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBTYW1lQXNFZGl0b3IgfSBmcm9tICcuLi9maWVsZHMvU2FtZUFzRWRpdG9yJztcbmltcG9ydCB7IEFwaVNlcnZpY2UsIEFwcFVybHMgfSBmcm9tICcuLi8uLi9BcGlTZXJ2aWNlJztcblxuaW1wb3J0IHsgRW50aXR5VHlwZSwgU2VyaWFsaXplciB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcblxuaW1wb3J0IHsgQWRkVGFiQnV0dG9uIH0gZnJvbSAnLi4vQWRkVGFiQnV0dG9uJztcblxuaW1wb3J0IHsgRWRpdGFibGVIZWFkZXIsIEVkaXRhYmxlRmllbGRDb21wb25lbnQgfSBmcm9tICcuLi9maWVsZHMvRWRpdGFibGVIZWFkZXInO1xuaW1wb3J0IHsgRWRpdGFibGVQYXJhZ3JhcGggfSBmcm9tICcuLi9maWVsZHMvRWRpdGFibGVQYXJhZ3JhcGgnO1xuaW1wb3J0IHsgRWRpdGFibGVDb21ib0Ryb3Bkb3duIH0gZnJvbSAnLi4vZmllbGRzL0VkaXRhYmxlQ29tYm9Ecm9wZG93bic7XG5pbXBvcnQgeyBDb21ib0Ryb3Bkb3duT3B0aW9uIH0gZnJvbSAnLi4vQ29tYm9Ecm9wZG93bic7XG5cbmltcG9ydCB7IHNob3dNb2RhbCwgY3JlYXRlVGFiIH0gZnJvbSAnLi4vLi4vU2lnbmFsbGVyJztcbmltcG9ydCB7IE1vZGFsRGVmaW5pdGlvbiB9IGZyb20gJy4uL21vZGFsL01vZGFsRGVmaW5pdGlvbic7XG5cbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uL0RhdGFTdG9yZSc7XG5cblxuY2xhc3MgU3RyaW5nRWRpdGFibGVGaWVsZENvbXBvbmVudCBleHRlbmRzIEVkaXRhYmxlRmllbGRDb21wb25lbnQ8c3RyaW5nPiB7fVxuY2xhc3MgQ29tYm9FZGl0YWJsZUZpZWxkQ29tcG9uZW50IGV4dGVuZHMgRWRpdGFibGVGaWVsZENvbXBvbmVudDxDb21ib0Ryb3Bkb3duT3B0aW9uPiB7fVxuXG5pbnRlcmZhY2UgRW50aXR5VHlwZVdvcmtzcGFjZVByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBkYXRhU3RvcmU6IERhdGFTdG9yZTtcbn1cblxuaW50ZXJmYWNlIEVudGl0eVR5cGVXb3Jrc3BhY2VTdGF0ZSB7XG59XG5cbmV4cG9ydCBjbGFzcyBFbnRpdHlUeXBlV29ya3NwYWNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEVudGl0eVR5cGVXb3Jrc3BhY2VQcm9wcywgRW50aXR5VHlwZVdvcmtzcGFjZVN0YXRlPiB7XG5cbiAgICBwdWJsaWMgc3RhdGljIGNvbnRleHRUeXBlcyA9IHtcbiAgICAgICAgcm91dGVyOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZShkYXRhOiBhbnkpIHtcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMuZW50aXR5X3R5cGUuZ2V0KCdlbnRpdHlfdHlwZS0nICsgdGhpcy5wcm9wcy5pZCkudmFsdWU7XG4gICAgICAgIHRoaXMucHJvcHMuYXBpLnBhdGNoSXRlbShFbnRpdHlUeXBlLCBBcHBVcmxzLmVudGl0eV90eXBlLCB0aGlzLnByb3BzLmlkLCBkYXRhKVxuICAgICAgICAudGhlbigoKSA9PiB0aGlzLnNldFN0YXRlKHsgZW50aXR5VHlwZTogT2JqZWN0LmFzc2lnbih7fSwgZW50aXR5VHlwZSwgZGF0YSl9KSk7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgY29weSgpIHtcblxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5wcm9wcy5kYXRhU3RvcmUudGFicy5lbnRpdHlfdHlwZS5nZXQoJ2VudGl0eV90eXBlLScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZTtcblxuICAgICAgICBjb25zdCBuZXdFbnRpdHlUeXBlID0gU2VyaWFsaXplci5mcm9tSnNvbihFbnRpdHlUeXBlLFxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgU2VyaWFsaXplci50b0pzb24oZW50aXR5VHlwZSksIHsgbmFtZTogJ0NvcHkgb2YgJyArIGVudGl0eVR5cGUubGFiZWx9KSk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5hcGkucG9zdEl0ZW0oRW50aXR5VHlwZSwgQXBwVXJscy5lbnRpdHlfdHlwZSwgbmV3RW50aXR5VHlwZSlcbiAgICAgICAgICAgIC50aGVuKChbaWRdKSA9PiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlVGFiLmRpc3BhdGNoKCdlbnRpdHlfdHlwZScsIGlkLCAnaXRlbScpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVsKCkge1xuICAgICAgICB0aGlzLnByb3BzLmFwaS5kZWxJdGVtKEVudGl0eVR5cGUsIEFwcFVybHMuZW50aXR5X3R5cGUsIHRoaXMucHJvcHMuaWQpXG4gICAgICAgIC50aGVuKCgpID0+IHRoaXMuY29udGV4dC5yb3V0ZXIudHJhbnNpdGlvblRvKCcvZWRpdC9ub3Rmb3VuZCcpKVxuICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGUuZGF0YS5kYXRhLnRoZW4oKGRhdGEpID0+IHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZsaWN0UmVzb2x1dGlvbk1vZGFsIDogTW9kYWxEZWZpbml0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY29uZmxpY3RfcmVzb2x1dGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge30sXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSAnYWRkVG9Xb3Jrc3BhY2UnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5lbnRpdHlUeXBlLmZvckVhY2goKGRhdHVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWIuZGlzcGF0Y2goJ2VudGl0eV90eXBlJywgZGF0dW0udWlkLCAnaXRlbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJlZGljYXRlLmZvckVhY2goKGRhdHVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWIuZGlzcGF0Y2goJ3ByZWRpY2F0ZScsIGRhdHVtLnVpZCwgJ2l0ZW0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmVudGl0eS5mb3JFYWNoKChkYXR1bSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFiLmRpc3BhdGNoKCdlbnRpdHknLCBkYXR1bS51aWQsICdpdGVtJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25mbGljdGluZ0l0ZW1zOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlbGV0aW5nIEVudGl0eSBUeXBlJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNob3dNb2RhbC5kaXNwYXRjaChjb25mbGljdFJlc29sdXRpb25Nb2RhbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZUVudGl0eSgpIHtcbiAgICAgICAgY29uc3QgYSA6IE1vZGFsRGVmaW5pdGlvbiA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdlbnRpdHknLFxuICAgICAgICAgICAgY29tcGxldGU6IChbaWRdKSA9PiB7XG4gICAgICAgICAgICAgICAgIGNyZWF0ZVRhYi5kaXNwYXRjaCgnZW50aXR5JywgaWQsICdpdGVtJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB7IGNvbnNvbGUubG9nKCdjYW5jZWwnKTsgfSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE5hbWU6ICcnLFxuICAgICAgICAgICAgICAgIGluaXRpYWxUeXBlOiB0aGlzLnByb3BzLmlkXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2hvd01vZGFsLmRpc3BhdGNoKGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG5cbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMuZW50aXR5X3R5cGUuZ2V0KCdlbnRpdHlfdHlwZS0nICsgdGhpcy5wcm9wcy5pZCkudmFsdWU7XG4gICAgICAgIGNvbnN0IHBvdGVudGlhbFBhcmVudHMgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5X3R5cGUudmFsdWU7XG5cblxuICAgICAgICBsZXQgcGFyZW50TmFtZSA9ICcnO1xuICAgICAgICBpZiAocG90ZW50aWFsUGFyZW50cyAhPT0gbnVsbCAmJiBlbnRpdHlUeXBlLnBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZCA9IHBvdGVudGlhbFBhcmVudHMuZmluZCgocGFyKSA9PiBwYXIudWlkID09PSBlbnRpdHlUeXBlLnBhcmVudCk7XG4gICAgICAgICAgICBpZiAoZm91bmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBmb3VuZC5sYWJlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nd29ya3NwYWNlLWVkaXRvcic+XG5cbiAgICAgICAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT0nZWRpdG9yLWhlYWRlciBlbnRpdHlfdHlwZSc+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbWFyeS10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21haW4tdG9vbGJhcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYnJlYWQtY3J1bWJzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZW50aXR5VHlwZS5wYXJlbnRzLm1hcCgocGFyZW50LCBpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGtleT17YGJyZWFkY3J1bWItJHtwYXJlbnQudWlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+ICB7cGFyZW50LmxhYmVsfSA8QWRkVGFiQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXt0aGlzLnByb3BzLmRhdGFTdG9yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPSdlbnRpdHlfdHlwZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aWQ9e3BhcmVudC51aWR9IC8+IDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtYW5nbGUtcmlnaHQnPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXRhZyBpdGVtLWljb24nPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTdHJpbmdFZGl0YWJsZUZpZWxkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2VudGl0eVR5cGUubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PXtFZGl0YWJsZUhlYWRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZSh7J2xhYmVsJzogdmFsdWV9KX0gIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3ViLXRvb2xiYXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZhIGZhLXBsdXMgYWRkIGJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNyZWF0ZUVudGl0eS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmEgZmEtdHJhc2ggZGVsZXRlIGJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmRlbC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmYSBmYS1jbG9uZSBidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jb3B5LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPSdlZGl0b3ItYm9keSc+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VkaXQtZ3JvdXAnPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdzbWFsbCc+UGFyZW50PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDb21ib0VkaXRhYmxlRmllbGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZW50aXR5VHlwZS5wYXJlbnQgPT09IG51bGwgPyBudWxsIDoge2tleTogcGFyZW50TmFtZSwgdmFsdWU6IGVudGl0eVR5cGUucGFyZW50fX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9e0VkaXRhYmxlQ29tYm9Ecm9wZG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZSh7J3BhcmVudCc6IHZhbHVlID09PSBudWxsID8gbnVsbCA6IHZhbHVlLnZhbHVlfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFByb3BzPXt7IGNvbWJvU2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogcG90ZW50aWFsUGFyZW50cy5tYXAoKHBhcikgPT4gKHsga2V5OiBwYXIubGFiZWwsIHZhbHVlOiBwYXIudWlkfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlTmFtZTogJ0VudGl0eVR5cGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZW50aXR5VHlwZS5wYXJlbnQgIT09IG51bGwgPyAoPEFkZFRhYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYlR5cGU9J2VudGl0eV90eXBlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdG9yZT17dGhpcy5wcm9wcy5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlkPXtlbnRpdHlUeXBlLnBhcmVudH0gLz4pIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VkaXQtZ3JvdXAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPkRlc2NyaXB0aW9uPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTdHJpbmdFZGl0YWJsZUZpZWxkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2VudGl0eVR5cGUuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PXtFZGl0YWJsZVBhcmFncmFwaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZSh7J2Rlc2NyaXB0aW9uJzogdmFsdWV9KX0gIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlZGl0LWdyb3VwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTdHJpbmdFZGl0YWJsZUZpZWxkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2VudGl0eVR5cGUuc2FtZUFzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD17U2FtZUFzRWRpdG9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHRoaXMudXBkYXRlKHsnc2FtZUFzJzogdmFsdWV9KX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoND5EaXJlY3QgQ2hpbGRyZW48L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgICAgICAge2VudGl0eVR5cGUuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChjaGlsZCkgPT4gdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLmVudGl0eV90eXBlLnZhbHVlLmZpbmQoKGV0KSA9PiBldC51aWQgPT09IGNoaWxkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChjaGlsZEV0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPGxpIGtleT17YGRjLSR7Y2hpbGRFdC5sYWJlbH1gfT57Y2hpbGRFdC5sYWJlbH0gPEFkZFRhYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiVHlwZT0nZW50aXR5X3R5cGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhU3RvcmU9e3RoaXMucHJvcHMuZGF0YVN0b3JlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlkPXtjaGlsZEV0LnVpZH0gLz48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL3dvcmtzcGFjZS9FbnRpdHlUeXBlV29ya3NwYWNlLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 50 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst mousetrap = __webpack_require__(51);\r\nclass SameAsEditor extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            temporaryValue: '',\r\n            urls: props.value === null || props.value.length === 0 ? [] : props.value.split(',')\r\n        };\r\n    }\r\n    componentWillReceiveProps(props) {\r\n        this.setState({\r\n            temporaryValue: '',\r\n            urls: props.value === null || props.value.length === 0 ? [] : props.value.split(',')\r\n        });\r\n    }\r\n    addItemToList() {\r\n        if (this.state.temporaryValue.length === 0) {\r\n            return;\r\n        }\r\n        this.setState({ urls: this.state.urls.concat([this.state.temporaryValue]), temporaryValue: '' }, () => this.props.onChange(this.state.urls.join(',')));\r\n    }\r\n    removeItemFromList(itemId) {\r\n        this.setState({\r\n            urls: this.state.urls.filter((val, i) => i !== itemId)\r\n        }, () => this.props.onChange(this.state.urls.join(',')));\r\n    }\r\n    setupKeyboardShortcuts(val) {\r\n        if (val !== null) {\r\n            val.focus();\r\n            this.keyboardShortcuts = new mousetrap(val);\r\n            this.keyboardShortcuts.bind('return', this.addItemToList.bind(this));\r\n            this.keyboardShortcuts.bind('escape', this.props.cancelChanges);\r\n            this.keyboardShortcuts.bind('ctrl+s', (e) => {\r\n                if (e.preventDefault) {\r\n                    e.preventDefault();\r\n                }\r\n                else {\r\n                    // internet explorer\r\n                    e.returnValue = false;\r\n                }\r\n                this.props.acceptChanges();\r\n            });\r\n        }\r\n        else {\r\n            this.keyboardShortcuts.unbind('return');\r\n            this.keyboardShortcuts.unbind('escape');\r\n            this.keyboardShortcuts.unbind('ctrl+s');\r\n        }\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", { className: 'same-as-box' },\r\n            React.createElement(\"label\", { className: 'small' },\r\n                \"Same As \",\r\n                !this.props.edit ? (React.createElement(\"sup\", null,\r\n                    React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: this.props.setEdit }))) : null),\r\n            this.props.edit ? (React.createElement(\"div\", { className: 'edit-group' },\r\n                React.createElement(\"button\", { onClick: this.props.acceptChanges },\r\n                    React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n                React.createElement(\"button\", { onClick: this.props.cancelChanges },\r\n                    React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' })),\r\n                React.createElement(\"div\", { className: 'input-addon-formgroup' },\r\n                    React.createElement(\"input\", { type: 'text', value: this.state.temporaryValue, ref: this.setupKeyboardShortcuts.bind(this), onChange: (e) => this.setState({ temporaryValue: e.target.value }), className: 'form-control with-addon' }),\r\n                    React.createElement(\"span\", { className: 'input-addon-icon right button', onClick: this.addItemToList.bind(this) },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus' }))))) : null,\r\n            React.createElement(\"ul\", { className: 'same-as-list' }, this.state.urls.map((url, i) => (React.createElement(\"li\", { key: `li-${url}` },\r\n                React.createElement(\"a\", { target: '_blank', href: url }, url),\r\n                \" \",\r\n                this.props.edit ? (React.createElement(\"i\", { className: 'fa fa-times close-button', onClick: this.removeItemFromList.bind(this, i) })) : null))))));\r\n    }\r\n}\r\nexports.SameAsEditor = SameAsEditor;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL1NhbWVBc0VkaXRvci50c3g/MzFjZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUcvQiwwQ0FBdUM7QUFTdkMsa0JBQTBCLFNBQVEsS0FBSyxDQUFDLFNBQTJEO0lBSS9GLFlBQVksS0FBb0M7UUFDNUMsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsY0FBYyxFQUFFLEVBQUU7WUFDbEIsSUFBSSxFQUFFLEtBQUssQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1NBQ3ZGLENBQUM7SUFDTixDQUFDO0lBRU0seUJBQXlCLENBQUMsS0FBb0M7UUFDakUsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNWLGNBQWMsRUFBRSxFQUFFO1lBQ2xCLElBQUksRUFBRSxLQUFLLENBQUMsS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztTQUN2RixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sYUFBYTtRQUNoQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUM7UUFDWCxDQUFDO1FBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUs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b0JBQ2xDLCtCQUFPLElBQUksRUFBQyxNQUFNLEVBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUMvQyxHQUFHLEVBQUUsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDM0MsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxjQUFjLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUNsRSxTQUFTLEVBQUMseUJBQXlCLEdBQUc7b0JBQzFDLDhCQUFNLFNBQVMsRUFBQywrQkFBK0IsRUFBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO3dCQUNsRiwyQkFBRyxTQUFTLEVBQUMsWUFBWSxHQUFLLENBQzNCLENBQ0wsQ0FDSixDQUNULEdBQUcsSUFBSTtZQUNSLDRCQUFJLFNBQVMsRUFBQyxjQUFjLElBQ3ZCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FDN0IsNEJBQUksR0FBRyxFQUFFLE1BQU0sR0FBRyxFQUFFO2dCQUFFLDJCQUFHLE1BQU0sRUFBQyxRQUFRLEVBQUMsSUFBSSxFQUFFLEdBQUcsSUFBRyxHQUFHLENBQUs7O2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsMkJBQzlFLFNBQVMsRUFBQywwQkFBMEIsRUFDcEMsT0FBTyxFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQyxHQUFNLENBQUMsR0FBRyxJQUFJLENBQU0sQ0FDeEUsQ0FBQyxDQUNELENBQ0gsQ0FBQyxDQUFDO0lBQ1osQ0FBQztDQUNKO0FBNUZELG9DQTRGQyIsImZpbGUiOiI1MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG9taXQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgKiBhcyBtb3VzZXRyYXAgZnJvbSAnbW91c2V0cmFwJztcblxuaW1wb3J0IHsgRWRpdGFibGVTdWJmaWVsZFByb3BzIH0gZnJvbSAnLi9FZGl0YWJsZUZpZWxkQ29tcG9uZW50JztcblxuaW50ZXJmYWNlIFNhbWVBc0VkaXRvclN0YXRlIHtcbiAgICB0ZW1wb3JhcnlWYWx1ZTogc3RyaW5nO1xuICAgIHVybHM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgU2FtZUFzRWRpdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEVkaXRhYmxlU3ViZmllbGRQcm9wczxzdHJpbmc+LCBTYW1lQXNFZGl0b3JTdGF0ZT4ge1xuXG4gICAgcHJpdmF0ZSBrZXlib2FyZFNob3J0Y3V0cztcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBFZGl0YWJsZVN1YmZpZWxkUHJvcHM8c3RyaW5nPikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdGVtcG9yYXJ5VmFsdWU6ICcnLFxuICAgICAgICAgICAgdXJsczogcHJvcHMudmFsdWUgPT09IG51bGwgfHwgcHJvcHMudmFsdWUubGVuZ3RoID09PSAwID8gW10gOiBwcm9wcy52YWx1ZS5zcGxpdCgnLCcpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHM6IEVkaXRhYmxlU3ViZmllbGRQcm9wczxzdHJpbmc+KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdGVtcG9yYXJ5VmFsdWU6ICcnLFxuICAgICAgICAgICAgdXJsczogcHJvcHMudmFsdWUgPT09IG51bGwgfHwgcHJvcHMudmFsdWUubGVuZ3RoID09PSAwID8gW10gOiBwcm9wcy52YWx1ZS5zcGxpdCgnLCcpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRJdGVtVG9MaXN0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS50ZW1wb3JhcnlWYWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdXJsczogdGhpcy5zdGF0ZS51cmxzLmNvbmNhdChbdGhpcy5zdGF0ZS50ZW1wb3JhcnlWYWx1ZV0pLCB0ZW1wb3JhcnlWYWx1ZTogJyd9LFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLnN0YXRlLnVybHMuam9pbignLCcpKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUl0ZW1Gcm9tTGlzdChpdGVtSWQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHVybHM6IHRoaXMuc3RhdGUudXJscy5maWx0ZXIoKHZhbCwgaSkgPT4gaSAhPT0gaXRlbUlkKVxuICAgICAgICB9LCAoKSA9PiB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMuc3RhdGUudXJscy5qb2luKCcsJykpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0dXBLZXlib2FyZFNob3J0Y3V0cyh2YWw6IG51bGwgfCBIVE1MRWxlbWVudCApIHtcbiAgICAgICAgaWYgKHZhbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFsLmZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkU2hvcnRjdXRzID0gbmV3IG1vdXNldHJhcCh2YWwpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZFNob3J0Y3V0cy5iaW5kKCdyZXR1cm4nLCB0aGlzLmFkZEl0ZW1Ub0xpc3QuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkU2hvcnRjdXRzLmJpbmQoJ2VzY2FwZScsIHRoaXMucHJvcHMuY2FuY2VsQ2hhbmdlcyk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkU2hvcnRjdXRzLmJpbmQoJ2N0cmwrcycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGludGVybmV0IGV4cGxvcmVyXG4gICAgICAgICAgICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NlcHRDaGFuZ2VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRTaG9ydGN1dHMudW5iaW5kKCdyZXR1cm4nKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRTaG9ydGN1dHMudW5iaW5kKCdlc2NhcGUnKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRTaG9ydGN1dHMudW5iaW5kKCdjdHJsK3MnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NhbWUtYXMtYm94Jz5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J3NtYWxsJz5TYW1lIEFzIHshdGhpcy5wcm9wcy5lZGl0ID8gKFxuICAgICAgICAgICAgICAgIDxzdXA+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtcGVuY2lsLXNxdWFyZS1vJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9J0VkaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuc2V0RWRpdH0+XG4gICAgICAgICAgICAgICAgICAgIDwvaT5cbiAgICAgICAgICAgICAgICA8L3N1cD5cbiAgICAgICAgICAgICkgOiBudWxsIH08L2xhYmVsPlxuICAgICAgICAgICAge3RoaXMucHJvcHMuZWRpdCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZWRpdC1ncm91cCc+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5wcm9wcy5hY2NlcHRDaGFuZ2VzfT48aSBjbGFzc05hbWU9J2ZhIGZhLWNoZWNrJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMucHJvcHMuY2FuY2VsQ2hhbmdlc30+PGkgY2xhc3NOYW1lPSdmYSBmYS10aW1lcycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2lucHV0LWFkZG9uLWZvcm1ncm91cCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCcgdmFsdWU9e3RoaXMuc3RhdGUudGVtcG9yYXJ5VmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXt0aGlzLnNldHVwS2V5Ym9hcmRTaG9ydGN1dHMuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHRoaXMuc2V0U3RhdGUoeyB0ZW1wb3JhcnlWYWx1ZTogZS50YXJnZXQudmFsdWUgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wgd2l0aC1hZGRvbicgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naW5wdXQtYWRkb24taWNvbiByaWdodCBidXR0b24nIG9uQ2xpY2s9e3RoaXMuYWRkSXRlbVRvTGlzdC5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXBsdXMnPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9J3NhbWUtYXMtbGlzdCc+XG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUudXJscy5tYXAoKHVybCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8bGkga2V5PXtgbGktJHt1cmx9YH0+PGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9e3VybH0+e3VybH08L2E+IHt0aGlzLnByb3BzLmVkaXQgPyAoPGkgXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZhIGZhLXRpbWVzIGNsb3NlLWJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVtb3ZlSXRlbUZyb21MaXN0LmJpbmQodGhpcyxpKX0+PC9pPikgOiBudWxsfTwvbGk+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICA8L2Rpdj4pO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL1NhbWVBc0VkaXRvci50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 51 */
/***/ function(module, exports) {

	eval("module.exports = require(\"mousetrap\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtb3VzZXRyYXBcIj9hMjIxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjUxLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibW91c2V0cmFwXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwibW91c2V0cmFwXCJcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 52 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nvar EditableFieldComponent_1 = __webpack_require__(32);\r\nexports.EditableFieldComponent = EditableFieldComponent_1.EditableFieldComponent;\r\nconst mousetrap = __webpack_require__(51);\r\nexports.EditableParagraph = (props) => {\r\n    let keyBoardShortcuts;\r\n    const bindKeyboard = (val) => {\r\n        if (val !== null) {\r\n            val.focus();\r\n            keyBoardShortcuts = new mousetrap(val);\r\n            keyBoardShortcuts.bind('ctrl+return', props.acceptChanges);\r\n            keyBoardShortcuts.bind('escape', props.cancelChanges);\r\n        }\r\n        else {\r\n            keyBoardShortcuts.unbind('ctrl+return');\r\n        }\r\n    };\r\n    if (!props.edit) {\r\n        return (React.createElement(\"div\", { onClick: props.setEdit, className: 'editable-paragraph-box' },\r\n            React.createElement(\"p\", null,\r\n                props.value === null || props.value.length > 0 ? props.value\r\n                    : (React.createElement(\"em\", null, \"No value\")),\r\n                React.createElement(\"sup\", null,\r\n                    React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true' })))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"textarea\", { value: props.value, ref: bindKeyboard, onChange: (e) => props.onChange(e.target.value), style: { width: '100%', height: '6em' } }),\r\n            React.createElement(\"button\", { onClick: props.acceptChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n            React.createElement(\"button\", { onClick: props.cancelChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' }))));\r\n    }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL0VkaXRhYmxlUGFyYWdyYXBoLnRzeD9iZjllIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRS9CLHVEQUFrRTtBQUF6RCxnRkFBc0I7QUFFL0IsMENBQXVDO0FBRTFCLHlCQUFpQixHQUMxQixDQUFDLEtBQW9DO0lBRXJDLElBQUksaUJBQWlCLENBQUM7SUFFdEIsTUFBTSxZQUFZLEdBQUcsQ0FBQyxHQUFHO1FBQ3JCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2YsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ1osaUJBQWlCLEdBQUcsSUFBSSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdkMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDM0QsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDMUQsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osaUJBQWlCLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzVDLENBQUM7SUFDTCxDQUFDLENBQUM7SUFFRixFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2QsTUFBTSxDQUFDLENBQ0gsNkJBQUssT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFDLHdCQUF3QjtZQUMzRDtnQkFDSyxLQUFLLENBQUMsS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUs7c0JBQzNELENBQ0UsMkNBQWlCLENBQ3BCO2dCQUNEO29CQUNJLDJCQUFHLFNBQVMsRUFBQyx1QkFBdUIsRUFDaEMsS0FBSyxFQUFDLE1BQU0saUJBQ0EsTUFBTSxHQUVsQixDQUNGLENBQ04sQ0FDRixDQUNULENBQUM7SUFDTixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDSixNQUFNLENBQUMsQ0FDSDtZQUNJLGtDQUNJLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxFQUNsQixHQUFHLEVBQUUsWUFBWSxFQUNqQixRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUMvQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsR0FBYTtZQUN2RCxnQ0FBUSxPQUFPLEVBQUUsS0FBSyxDQUFDLGFBQWE7Z0JBQ2hDLDJCQUFHLFNBQVMsRUFBQyxhQUFhLGlCQUFhLE1BQU0sR0FBSyxDQUFTO1lBQy9ELGdDQUFRLE9BQU8sRUFBRSxLQUFLLENBQUMsYUFBYTtnQkFBRSwyQkFBRyxTQUFTLEVBQUMsYUFBYSxpQkFBYSxNQUFNLEdBQUssQ0FBUyxDQUMvRixDQUNULENBQUM7SUFDTixDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6IjUyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFNpZGViYXIgZm9yIGVkaXRvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRWRpdGFibGVTdWJmaWVsZFByb3BzIH0gZnJvbSAnLi9FZGl0YWJsZUZpZWxkQ29tcG9uZW50JztcbmV4cG9ydCB7IEVkaXRhYmxlRmllbGRDb21wb25lbnQgfSBmcm9tICcuL0VkaXRhYmxlRmllbGRDb21wb25lbnQnO1xuXG5pbXBvcnQgKiBhcyBtb3VzZXRyYXAgZnJvbSAnbW91c2V0cmFwJztcblxuZXhwb3J0IGNvbnN0IEVkaXRhYmxlUGFyYWdyYXBoIDogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PEVkaXRhYmxlU3ViZmllbGRQcm9wczxzdHJpbmc+PiA9XG4gICAgKHByb3BzOiBFZGl0YWJsZVN1YmZpZWxkUHJvcHM8c3RyaW5nPikgPT4ge1xuXG4gICAgbGV0IGtleUJvYXJkU2hvcnRjdXRzO1xuXG4gICAgY29uc3QgYmluZEtleWJvYXJkID0gKHZhbCkgPT4ge1xuICAgICAgICBpZiAodmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2YWwuZm9jdXMoKTtcbiAgICAgICAgICAgIGtleUJvYXJkU2hvcnRjdXRzID0gbmV3IG1vdXNldHJhcCh2YWwpO1xuICAgICAgICAgICAga2V5Qm9hcmRTaG9ydGN1dHMuYmluZCgnY3RybCtyZXR1cm4nLCBwcm9wcy5hY2NlcHRDaGFuZ2VzKTtcbiAgICAgICAgICAgIGtleUJvYXJkU2hvcnRjdXRzLmJpbmQoJ2VzY2FwZScsIHByb3BzLmNhbmNlbENoYW5nZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAga2V5Qm9hcmRTaG9ydGN1dHMudW5iaW5kKCdjdHJsK3JldHVybicpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGlmICghcHJvcHMuZWRpdCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBvbkNsaWNrPXtwcm9wcy5zZXRFZGl0fSBjbGFzc05hbWU9J2VkaXRhYmxlLXBhcmFncmFwaC1ib3gnPlxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICB7cHJvcHMudmFsdWUgPT09IG51bGwgfHwgcHJvcHMudmFsdWUubGVuZ3RoID4gMCA/IHByb3BzLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGVtPk5vIHZhbHVlPC9lbT5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPHN1cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtcGVuY2lsLXNxdWFyZS1vJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPSdFZGl0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9zdXA+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwcm9wcy52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXtiaW5kS2V5Ym9hcmR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gcHJvcHMub25DaGFuZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBoZWlnaHQ6ICc2ZW0nfX0+PC90ZXh0YXJlYT5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3Byb3BzLmFjY2VwdENoYW5nZXN9PlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLWNoZWNrJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17cHJvcHMuY2FuY2VsQ2hhbmdlc30+PGkgY2xhc3NOYW1lPSdmYSBmYS10aW1lcycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbiB9O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9maWVsZHMvRWRpdGFibGVQYXJhZ3JhcGgudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 53 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Predicate editor workspace\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst SameAsEditor_1 = __webpack_require__(50);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst EditableHeader_1 = __webpack_require__(31);\r\nconst EditableParagraph_1 = __webpack_require__(52);\r\nconst EditableComboDropdown_1 = __webpack_require__(47);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nclass StringEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\nclass ComboEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\n// - Should state the number of times this predicate is used\r\n// - Widening the domain or range always okay\r\n// - Narrowing should check for conflicts and return them\r\n// - Asks 'Delete conflicting records?'\r\n// - Strong check (double button press or type) to confirm\r\n// - Changing name/description/sameAs - absolutly fine\r\n// - Cannot change 'readonly'\r\nclass SourceEditorWorkspace extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            metaData: {}\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.loadData(this.props);\r\n    }\r\n    componentWillReceiveProps(newProps) {\r\n        this.loadData(newProps);\r\n    }\r\n    loadData(props) {\r\n        const source = props.dataStore.tabs.source.get('source-' + this.props.id).value.source;\r\n        this.setState({\r\n            metaData: lodash_1.keyBy(source.metaData, 'name')\r\n        });\r\n    }\r\n    updateSource(field, value) {\r\n        const source = this.props.dataStore.tabs.source.get('source-' + this.props.id).value.source;\r\n        this.props.api.patchItem(falcon_core_1.Source, ApiService_1.AppUrls.source, source.uid, { [field]: value });\r\n        //.then((success) => {\r\n        // const updatedSource = new Source().deserialize(Object.assign({},\r\n        //     source.serialize(), { [field]: value }));\r\n        // this.setState({\r\n        //     source: updatedSource,\r\n        //     metaData: keyBy(updatedSource.metaData, 'name')\r\n        // });\r\n        //});\r\n    }\r\n    updateSourceElement(element, value) {\r\n        const source = this.props.dataStore.tabs.source.get('source-' + this.props.id).value.source;\r\n        const compositeKey = {\r\n            order: ['source', 'element'],\r\n            values: {\r\n                source: this.props.id,\r\n                element: element.uid\r\n            }\r\n        };\r\n        if (source.metaData[element.label] !== undefined\r\n            && source.metaData[element.label].values.find((a) => a.source === this.props.id) !== undefined) {\r\n            this.props.api.patchItem(falcon_core_1.SourceElement, ApiService_1.AppUrls.source_element, compositeKey, falcon_core_1.Serializer.fromJson(falcon_core_1.SourceElement, {\r\n                uid: compositeKey,\r\n                element: source.metaData[element.label].element_uid,\r\n                source: this.props.id,\r\n                value\r\n            }));\r\n        }\r\n        else {\r\n            this.props.api.postItem(falcon_core_1.SourceElement, ApiService_1.AppUrls.source_element, falcon_core_1.Serializer.fromJson(falcon_core_1.SourceElement, {\r\n                uid: compositeKey,\r\n                value: value\r\n            }));\r\n        }\r\n    }\r\n    del() {\r\n        this.props.api.delItem(falcon_core_1.Source, ApiService_1.AppUrls.source, this.props.id)\r\n            .then(() => this.context.router.transitionTo('/edit/notfound'))\r\n            .catch((e) => {\r\n            e.data.data.then((data) => {\r\n                const conflictResolutionModal = {\r\n                    name: 'conflict_resolution',\r\n                    cancel: () => { },\r\n                    complete: (result) => {\r\n                        if (result === 'addToWorkspace') {\r\n                            data.source.forEach((datum) => {\r\n                                Signaller_1.createTab.dispatch('source', datum.uid, 'item');\r\n                            });\r\n                        }\r\n                        if (result === 'deleteAll') {\r\n                            Promise.all(data.source.map((datum) => this.props.api.delItem(falcon_core_1.Source, ApiService_1.AppUrls.source, datum.uid)))\r\n                                .then(() => {\r\n                                this.del();\r\n                            });\r\n                        }\r\n                    },\r\n                    settings: {\r\n                        conflictingItems: data,\r\n                        message: 'Deleting Source'\r\n                    }\r\n                };\r\n                Signaller_1.showModal.dispatch(conflictResolutionModal);\r\n            });\r\n        });\r\n    }\r\n    createChild() {\r\n        const source = this.props.dataStore.tabs.source.get('source-' + this.props.id).value.source;\r\n        const newSource = falcon_core_1.Serializer.fromJson(falcon_core_1.Source, Object.assign({}, falcon_core_1.Serializer.toJson(source), { name: 'Child of ' + source.label, parent: this.props.id }));\r\n        this.props.api.postItem(falcon_core_1.Source, ApiService_1.AppUrls.source, newSource)\r\n            .then(([id]) => {\r\n            Signaller_1.createTab.dispatch('source', id, 'item');\r\n        });\r\n    }\r\n    // create entity with 'mentioned in' already set to this source\r\n    createEntity() {\r\n        const a = {\r\n            name: 'preset_record',\r\n            complete: ([id]) => {\r\n                Signaller_1.createTab.dispatch('entity', id, 'item');\r\n            },\r\n            cancel: () => { },\r\n            settings: {\r\n                source: this.props.dataStore.tabs.source.get('source-' + this.props.id).value.source\r\n            }\r\n        };\r\n        Signaller_1.showModal.dispatch(a);\r\n    }\r\n    render() {\r\n        const source = this.props.dataStore.tabs.source.get('source-' + this.props.id).value.source;\r\n        const potentialParents = this.props.dataStore.all.source.value;\r\n        let parentName = '';\r\n        if (potentialParents !== null && source.parent !== undefined) {\r\n            const found = potentialParents.find((par) => par.uid === source.parent);\r\n            if (found !== undefined) {\r\n                parentName = found.label;\r\n            }\r\n        }\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header source' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"div\", { className: 'bread-crumbs' }, source.parents\r\n                            .slice()\r\n                            .reverse()\r\n                            .map((child) => this.props.dataStore.all.source.value.find((et) => et.uid === child))\r\n                            .map((parent, i) => (React.createElement(\"span\", { key: `breadcrumb-${parent.uid}` },\r\n                            React.createElement(\"span\", null,\r\n                                \"  \",\r\n                                parent.label,\r\n                                \" \",\r\n                                React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, tabType: 'source', uid: parent.uid }),\r\n                                \" \"),\r\n                            React.createElement(\"i\", { className: 'fa fa-angle-right' }))))),\r\n                        React.createElement(\"i\", { className: 'fa fa-sun-o item-icon' }),\r\n                        React.createElement(StringEditableFieldComponent, { value: source.label, component: EditableHeader_1.EditableHeader, onChange: (value) => this.updateSource('label', value) })),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus add button', \"aria-hidden\": 'true', onClick: this.createEntity.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-trash delete button', \"aria-hidden\": 'true', onClick: () => this.del() }),\r\n                        React.createElement(\"i\", { className: 'fa fa-arrow-circle-o-down button', \"aria-hidden\": 'true', onClick: this.createChild.bind(this) })))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Parent\"),\r\n                    React.createElement(ComboEditableFieldComponent, { value: { key: parentName, value: source.parent }, component: EditableComboDropdown_1.EditableComboDropdown, onChange: (value) => this.updateSource('parent', value.value), additionalProps: { comboSettings: {\r\n                                options: potentialParents.map((par) => ({ key: par.label, value: par.uid })),\r\n                                typeName: 'Source'\r\n                            } } }),\r\n                    source.parent !== null ? (React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, tabType: 'source', uid: source.parent })) : null),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(StringEditableFieldComponent, { value: source.sameAs, component: SameAsEditor_1.SameAsEditor, onChange: (value) => this.updateSource('sameAs', value) })),\r\n                this.props.dataStore.all.dublinCore.value.elements.map((element) => {\r\n                    const values = source.metaData.hasOwnProperty(element.label) ?\r\n                        source.metaData[element.label].values : [{ source: this.props.id, value: '' }];\r\n                    const editableValue = values[0].source == this.props.id ? values[0].value : '';\r\n                    return (React.createElement(\"div\", { key: `${element.label}-edit` },\r\n                        React.createElement(\"h5\", { className: 'section-header' },\r\n                            element.label,\r\n                            \" \",\r\n                            React.createElement(\"small\", null,\r\n                                React.createElement(\"a\", { href: element.url }, element.uri))),\r\n                        React.createElement(\"p\", { className: 'element-description' }, element.description),\r\n                        React.createElement(\"ul\", null, values.map((value) => value.source != this.props.id ? (React.createElement(\"li\", { key: `${element.uid}-${value.source}` },\r\n                            this.props.dataStore.all.source.value.find((s) => s.uid === value.source).label,\r\n                            \": \",\r\n                            value.value)) : null)),\r\n                        React.createElement(StringEditableFieldComponent, { value: editableValue, component: EditableParagraph_1.EditableParagraph, onChange: (value) => this.updateSourceElement(element, value) })));\r\n                }),\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(\"h4\", null, \"Direct Children\"),\r\n                    React.createElement(\"ul\", null, source.children\r\n                        .map((child) => this.props.dataStore.all.source.value.find((et) => et.uid === child))\r\n                        .map((childEt) => (React.createElement(\"li\", { key: `dc-${childEt.uid}` },\r\n                        childEt.label,\r\n                        \" \",\r\n                        React.createElement(AddTabButton_1.AddTabButton, { tabType: 'source', dataStore: this.props.dataStore, uid: childEt.uid })))))))));\r\n    }\r\n}\r\nSourceEditorWorkspace.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.SourceEditorWorkspace = SourceEditorWorkspace;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL1NvdXJjZUVkaXRvcldvcmtzcGFjZS50c3g/ZjA3ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUUvQiwrQ0FBc0Q7QUFFdEQsNENBQXVEO0FBRXZELDhDQUFpRjtBQUVqRixpREFBa0Y7QUFDbEYsb0RBQWdFO0FBQ2hFLHdEQUF3RTtBQUd4RSx5Q0FBMkM7QUFFM0MsNENBQXVEO0FBR3ZELCtDQUErQztBQUkvQyxrQ0FBbUMsU0FBUSx1Q0FBOEI7Q0FBRztBQUM1RSxpQ0FBa0MsU0FBUSx1Q0FBMkM7Q0FBRztBQVl4Riw0REFBNEQ7QUFDNUQsNkNBQTZDO0FBQzdDLHlEQUF5RDtBQUN6RCx1Q0FBdUM7QUFDdkMsMERBQTBEO0FBQzFELHNEQUFzRDtBQUN0RCw2QkFBNkI7QUFDN0IsMkJBQW1DLFNBQVEsS0FBSyxDQUFDLFNBQStDO0lBTTVGO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsUUFBUSxFQUFFLEVBQUU7U0FDZixDQUFDO0lBQ04sQ0FBQztJQUVNLGlCQUFpQjtRQUNwQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRU0seUJBQXlCLENBQUMsUUFBMkI7UUFDeEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBR00sUUFBUSxDQUFDLEtBQXdCO1FBRXBDLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUV2RixJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ1YsUUFBUSxFQUFFLGNBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztTQUMzQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sWUFBWSxDQUFDLEtBQWEsRUFBRSxLQUFhO1FBRTVDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFFNUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLG9CQUFNLEVBQUUsb0JBQU8sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUM7UUFDaEYsc0JBQXNCO1FBRWxCLG1FQUFtRTtRQUNuRSxnREFBZ0Q7UUFFaEQsa0JBQWtCO1FBQ2xCLDZCQUE2QjtRQUM3QixzREFBc0Q7UUFDdEQsTUFBTTtRQUNWLEtBQUs7SUFDVCxDQUFDO0lBRU0sbUJBQW1CLENBQUMsT0FBZ0IsRUFBRSxLQUFhO1FBRXRELE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFFNUYsTUFBTSxZQUFZLEdBQUc7WUFDakIsS0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQztZQUM1QixNQUFNLEVBQUU7Z0JBQ0osTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDckIsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHO2FBQ3ZCO1NBQ0osQ0FBQztRQUVGLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLFNBQVM7ZUFDekMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUVqRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsMkJBQWEsRUFBRSxvQkFBTyxDQUFDLGNBQWMsRUFDOUQsWUFBWSxFQUNSLHdCQUFVLENBQUMsUUFBUSxDQUFDLDJCQUFhLEVBQUU7Z0JBQy9CLEdBQUcsRUFBRSxZQUFZO2dCQUNqQixPQUFPLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVztnQkFDbkQsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDckIsS0FBSzthQUNSLENBQUMsQ0FBQyxDQUFDO1FBQ1osQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLDJCQUFhLEVBQUUsb0JBQU8sQ0FBQyxjQUFjLEVBQ3pELHdCQUFVLENBQUMsUUFBUSxDQUFDLDJCQUFhLEVBQUU7Z0JBQy9CLEdBQUcsRUFBRSxZQUFZO2dCQUNqQixLQUFLLEVBQUUsS0FBSzthQUNmLENBQUMsQ0FBQyxDQUFDO1FBQ1osQ0FBQztJQUNMLENBQUM7SUFFTSxHQUFHO1FBQ04sSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLG9CQUFNLEVBQUUsb0JBQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7YUFDNUQsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLENBQUM7YUFDOUQsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUk7Z0JBRWxCLE1BQU0sdUJBQXVCLEdBQXFCO29CQUM5QyxJQUFJLEVBQUUscUJBQXFCO29CQUMzQixNQUFNLEVBQUUsUUFBTyxDQUFDO29CQUNoQixRQUFRLEVBQUUsQ0FBQyxNQUFNO3dCQUNiLEVBQUUsQ0FBQyxDQUFDLE1BQU0sS0FBSyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7NEJBQzlCLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSztnQ0FDckIscUJBQVMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7NEJBQ3JELENBQUMsQ0FBQyxDQUFDO3dCQUNQLENBQUM7d0JBRUQsRUFBRSxDQUFDLENBQUMsTUFBTSxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUM7NEJBQ3pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLG9CQUFNLEVBQUUsb0JBQU8sQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7aUNBQ2pHLElBQUksQ0FBQztnQ0FDRixJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7NEJBQ2YsQ0FBQyxDQUFDLENBQUM7d0JBQ1AsQ0FBQztvQkFDTCxDQUFDO29CQUNELFFBQVEsRUFBRTt3QkFDTixnQkFBZ0IsRUFBRSxJQUFJO3dCQUN0QixPQUFPLEVBQUUsaUJBQWlCO3FCQUM3QjtpQkFDSixDQUFDO2dCQUVGLHFCQUFTLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLENBQUM7WUFDaEQsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFHTSxXQUFXO1FBRWQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUU1RixNQUFNLFNBQVMsR0FBRyx3QkFBVSxDQUFDLFFBQVEsQ0FBQyxvQkFBTSxFQUN4QyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSx3QkFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFL0csSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLG9CQUFNLEVBQUUsb0JBQU8sQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDO2FBQ3JELElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ1AscUJBQVMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNqRCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCwrREFBK0Q7SUFDeEQsWUFBWTtRQUNmLE1BQU0sQ0FBQyxHQUFxQjtZQUN4QixJQUFJLEVBQUUsZUFBZTtZQUNyQixRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDVixxQkFBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQzlDLENBQUM7WUFDRCxNQUFNLEVBQUUsUUFBUSxDQUFDO1lBQ2pCLFFBQVEsRUFBRTtnQkFDTixNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU07YUFDdkY7U0FDSixDQUFDO1FBRUYscUJBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUVNLE1BQU07UUFFVCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQzVGLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFFL0QsSUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixLQUFLLElBQUksSUFBSSxNQUFNLENBQUMsTUFBTSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDM0QsTUFBTSxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxHQUFHLEtBQUssTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3hFLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUN0QixVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztZQUM3QixDQUFDO1FBQ0wsQ0FBQztRQUVELE1BQU0sQ0FBQyxDQUNILDZCQUFLLFNBQVMsRUFBQyxrQkFBa0I7WUFDN0IsZ0NBQVEsU0FBUyxFQUFDLHNCQUFzQjtnQkFDdEMsNkJBQUssU0FBUyxFQUFDLGlCQUFpQjtvQkFDOUIsNkJBQUssU0FBUyxFQUFDLGNBQWM7d0JBQ3pCLDZCQUFLLFNBQVMsRUFBQyxjQUFjLElBQ3hCLE1BQU0sQ0FBQyxPQUFPOzZCQUNWLEtBQUssRUFBRTs2QkFDUCxPQUFPLEVBQUU7NkJBQ1QsR0FBRyxDQUFDLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDOzZCQUNwRixHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQ3BCLDhCQUFNLEdBQUcsRUFBRSxjQUFjLE1BQU0sQ0FBQyxHQUFHLEVBQUU7NEJBQ2pDOztnQ0FBUyxNQUFNLENBQUMsS0FBSzs7Z0NBQUUsb0JBQUMsMkJBQVksSUFDaEMsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUMvQixPQUFPLEVBQUMsUUFBUSxFQUNoQixHQUFHLEVBQUUsTUFBTSxDQUFDLEdBQUcsR0FBSTtvQ0FBUTs0QkFDL0IsMkJBQUcsU0FBUyxFQUFDLG1CQUFtQixHQUFLLENBQ2xDLENBQ1YsQ0FBQyxDQUNBO3dCQUNOLDJCQUFHLFNBQVMsRUFBQyx1QkFBdUIsR0FBSzt3QkFDekMsb0JBQUMsNEJBQTRCLElBQ3pCLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUNuQixTQUFTLEVBQUUsK0JBQWMsRUFDekIsUUFBUSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxHQUFLLENBQzdEO29CQUNOLDZCQUFLLFNBQVMsRUFBQyxhQUFhO3dCQUN4QiwyQkFDSSxTQUFTLEVBQUMsdUJBQXVCLGlCQUNyQixNQUFNLEVBQ2xCLE9BQU8sRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FDcEM7d0JBQ0wsMkJBQ0ksU0FBUyxFQUFDLDJCQUEyQixpQkFDekIsTUFBTSxFQUNsQixPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQ3hCO3dCQUNMLDJCQUNJLFNBQVMsRUFBQyxrQ0FBa0MsaUJBQ2hDLE1BQU0sRUFDbEIsT0FBTyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUNuQyxDQUNILENBQ0YsQ0FDQztZQUVULGlDQUFTLFNBQVMsRUFBQyxhQUFhO2dCQUU1Qiw2QkFBSyxTQUFTLEVBQUMsWUFBWTtvQkFDdkIsK0JBQU8sU0FBUyxFQUFDLE9BQU8sYUFBZTtvQkFDdkMsb0JBQUMsMkJBQTJCLElBQ3hCLEtBQUssRUFBRSxFQUFDLEdBQUcsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsRUFDOUMsU0FBUyxFQUFFLDZDQUFxQixFQUNoQyxRQUFRLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUM3RCxlQUFlLEVBQUUsRUFBRSxhQUFhLEVBQUU7Z0NBQzlCLE9BQU8sRUFBRSxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQztnQ0FDM0UsUUFBUSxFQUFFLFFBQVE7NkJBQ3JCLEVBQUMsR0FBSTtvQkFDTCxNQUFNLENBQUMsTUFBTSxLQUFLLElBQUksR0FBRyxDQUFDLG9CQUFDLDJCQUFZLElBQ3BDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFDL0IsT0FBTyxFQUFDLFFBQVEsRUFDaEIsR0FBRyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEdBQUksQ0FBQyxHQUFHLElBQUksQ0FDcEM7Z0JBRU4sNkJBQUssU0FBUyxFQUFDLFlBQVk7b0JBQ3ZCLG9CQUFDLDRCQUE0QixJQUN6QixLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFDcEIsU0FBUyxFQUFFLDJCQUFZLEVBQ3ZCLFFBQVEsRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsR0FBSSxDQUM3RDtnQkFFTCxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTztvQkFFNUQsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQzt3QkFDeEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBQyxDQUFDLENBQUM7b0JBQ2xGLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7b0JBRS9FLE1BQU0sQ0FBQyxDQUNILDZCQUFLLEdBQUcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxLQUFLLE9BQU87d0JBQzdCLDRCQUFJLFNBQVMsRUFBQyxnQkFBZ0I7NEJBQUUsT0FBTyxDQUFDLEtBQUs7OzRCQUFFO2dDQUFPLDJCQUFHLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxJQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUssQ0FBUSxDQUFLO3dCQUMxRywyQkFBRyxTQUFTLEVBQUMscUJBQXFCLElBQUUsT0FBTyxDQUFDLFdBQVcsQ0FBSzt3QkFDNUQsZ0NBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQ25ELDRCQUFJLEdBQUcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxHQUFHLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRTs0QkFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEtBQUssS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUs7OzRCQUMvRSxLQUFLLENBQUMsS0FBSyxDQUFNLENBQ3hCLEdBQUcsSUFBSSxDQUFDLENBQ1I7d0JBQ0wsb0JBQUMsNEJBQTRCLElBQ3pCLEtBQUssRUFBRSxhQUFhLEVBQ3BCLFNBQVMsRUFBRSxxQ0FBaUIsRUFDNUIsUUFBUSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEdBQUssQ0FDcEUsQ0FDVCxDQUFDO2dCQUNOLENBQUMsQ0FBQztnQkFFRjtvQkFDSSxrREFBd0I7b0JBQ3hCLGdDQUNDLE1BQU0sQ0FBQyxRQUFRO3lCQUNYLEdBQUcsQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEdBQUcsS0FBSyxLQUFLLENBQUMsQ0FBQzt5QkFDcEYsR0FBRyxDQUFDLENBQUMsT0FBTyxLQUNULENBQUMsNEJBQUksR0FBRyxFQUFFLE1BQU0sT0FBTyxDQUFDLEdBQUcsRUFBRTt3QkFBRyxPQUFPLENBQUMsS0FBSzs7d0JBQUUsb0JBQUMsMkJBQVksSUFDeEQsT0FBTyxFQUFDLFFBQVEsRUFDaEIsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUMvQixHQUFHLEVBQUUsT0FBTyxDQUFDLEdBQUcsR0FBSSxDQUFLLENBQ2hDLENBQUMsQ0FDRCxDQUNILENBQ0EsQ0FDUixDQUNULENBQUM7SUFDTixDQUFDOztBQTNRYSxrQ0FBWSxHQUFHO0lBQ3pCLE1BQU0sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO0NBQzVDLENBQUM7QUFKTixzREE4UUMiLCJmaWxlIjoiNTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgUHJlZGljYXRlIGVkaXRvciB3b3Jrc3BhY2VcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjAuMVxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgU2FtZUFzRWRpdG9yIH0gZnJvbSAnLi4vZmllbGRzL1NhbWVBc0VkaXRvcic7XG5pbXBvcnQgeyBMb2FkaW5nIH0gZnJvbSAnLi4vTG9hZGluZyc7XG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5cbmltcG9ydCB7IFNvdXJjZSwgU2VyaWFsaXplciwgRWxlbWVudCwgU291cmNlRWxlbWVudCwgUmVjb3JkIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuXG5pbXBvcnQgeyBFZGl0YWJsZUhlYWRlciwgRWRpdGFibGVGaWVsZENvbXBvbmVudCB9IGZyb20gJy4uL2ZpZWxkcy9FZGl0YWJsZUhlYWRlcic7XG5pbXBvcnQgeyBFZGl0YWJsZVBhcmFncmFwaCB9IGZyb20gJy4uL2ZpZWxkcy9FZGl0YWJsZVBhcmFncmFwaCc7XG5pbXBvcnQgeyBFZGl0YWJsZUNvbWJvRHJvcGRvd24gfSBmcm9tICcuLi9maWVsZHMvRWRpdGFibGVDb21ib0Ryb3Bkb3duJztcbmltcG9ydCB7IENvbWJvRHJvcGRvd25PcHRpb24gfSBmcm9tICcuLi9Db21ib0Ryb3Bkb3duJztcblxuaW1wb3J0IHsga2V5QnksIERpY3Rpb25hcnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBzaG93TW9kYWwsIGNyZWF0ZVRhYiB9IGZyb20gJy4uLy4uL1NpZ25hbGxlcic7XG5cbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uL0RhdGFTdG9yZSc7XG5pbXBvcnQgeyBBZGRUYWJCdXR0b24gfSBmcm9tICcuLi9BZGRUYWJCdXR0b24nO1xuXG5pbXBvcnQgeyBNb2RhbERlZmluaXRpb24gfSBmcm9tICcuLi9tb2RhbC9Nb2RhbERlZmluaXRpb24nO1xuXG5jbGFzcyBTdHJpbmdFZGl0YWJsZUZpZWxkQ29tcG9uZW50IGV4dGVuZHMgRWRpdGFibGVGaWVsZENvbXBvbmVudDxzdHJpbmc+IHt9XG5jbGFzcyBDb21ib0VkaXRhYmxlRmllbGRDb21wb25lbnQgZXh0ZW5kcyBFZGl0YWJsZUZpZWxkQ29tcG9uZW50PENvbWJvRHJvcGRvd25PcHRpb24+IHt9XG5cbmludGVyZmFjZSBTb3VyY2VFZGl0b3JQcm9wcyB7XG4gICAgYXBpOiBBcGlTZXJ2aWNlO1xuICAgIGlkOiBudW1iZXI7XG4gICAgZGF0YVN0b3JlOiBEYXRhU3RvcmU7XG59XG5cbmludGVyZmFjZSBTb3VyY2VFZGl0b3JTdGF0ZSB7XG4gICAgbWV0YURhdGE6IF8uRGljdGlvbmFyeTxTb3VyY2VFbGVtZW50Pjtcbn1cblxuLy8gLSBTaG91bGQgc3RhdGUgdGhlIG51bWJlciBvZiB0aW1lcyB0aGlzIHByZWRpY2F0ZSBpcyB1c2VkXG4vLyAtIFdpZGVuaW5nIHRoZSBkb21haW4gb3IgcmFuZ2UgYWx3YXlzIG9rYXlcbi8vIC0gTmFycm93aW5nIHNob3VsZCBjaGVjayBmb3IgY29uZmxpY3RzIGFuZCByZXR1cm4gdGhlbVxuLy8gLSBBc2tzICdEZWxldGUgY29uZmxpY3RpbmcgcmVjb3Jkcz8nXG4vLyAtIFN0cm9uZyBjaGVjayAoZG91YmxlIGJ1dHRvbiBwcmVzcyBvciB0eXBlKSB0byBjb25maXJtXG4vLyAtIENoYW5naW5nIG5hbWUvZGVzY3JpcHRpb24vc2FtZUFzIC0gYWJzb2x1dGx5IGZpbmVcbi8vIC0gQ2Fubm90IGNoYW5nZSAncmVhZG9ubHknXG5leHBvcnQgY2xhc3MgU291cmNlRWRpdG9yV29ya3NwYWNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFNvdXJjZUVkaXRvclByb3BzLCBTb3VyY2VFZGl0b3JTdGF0ZT4ge1xuXG4gICAgcHVibGljIHN0YXRpYyBjb250ZXh0VHlwZXMgPSB7XG4gICAgICAgIHJvdXRlcjogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgbWV0YURhdGE6IHt9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLmxvYWREYXRhKHRoaXMucHJvcHMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5ld1Byb3BzOiBTb3VyY2VFZGl0b3JQcm9wcykgIHtcbiAgICAgICAgdGhpcy5sb2FkRGF0YShuZXdQcm9wcyk7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgbG9hZERhdGEocHJvcHM6IFNvdXJjZUVkaXRvclByb3BzKSB7XG5cbiAgICAgICAgY29uc3Qgc291cmNlID0gcHJvcHMuZGF0YVN0b3JlLnRhYnMuc291cmNlLmdldCgnc291cmNlLScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZS5zb3VyY2U7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBtZXRhRGF0YToga2V5Qnkoc291cmNlLm1ldGFEYXRhLCAnbmFtZScpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVTb3VyY2UoZmllbGQ6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMuc291cmNlLmdldCgnc291cmNlLScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZS5zb3VyY2U7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5hcGkucGF0Y2hJdGVtKFNvdXJjZSwgQXBwVXJscy5zb3VyY2UsIHNvdXJjZS51aWQsIHsgW2ZpZWxkXTogdmFsdWUgfSlcbiAgICAgICAgLy8udGhlbigoc3VjY2VzcykgPT4ge1xuXG4gICAgICAgICAgICAvLyBjb25zdCB1cGRhdGVkU291cmNlID0gbmV3IFNvdXJjZSgpLmRlc2VyaWFsaXplKE9iamVjdC5hc3NpZ24oe30sXG4gICAgICAgICAgICAvLyAgICAgc291cmNlLnNlcmlhbGl6ZSgpLCB7IFtmaWVsZF06IHZhbHVlIH0pKTtcblxuICAgICAgICAgICAgLy8gdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAvLyAgICAgc291cmNlOiB1cGRhdGVkU291cmNlLFxuICAgICAgICAgICAgLy8gICAgIG1ldGFEYXRhOiBrZXlCeSh1cGRhdGVkU291cmNlLm1ldGFEYXRhLCAnbmFtZScpXG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgLy99KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlU291cmNlRWxlbWVudChlbGVtZW50OiBFbGVtZW50LCB2YWx1ZTogc3RyaW5nKSB7XG5cbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5wcm9wcy5kYXRhU3RvcmUudGFicy5zb3VyY2UuZ2V0KCdzb3VyY2UtJyArIHRoaXMucHJvcHMuaWQpLnZhbHVlLnNvdXJjZTtcblxuICAgICAgICBjb25zdCBjb21wb3NpdGVLZXkgPSB7XG4gICAgICAgICAgICBvcmRlcjogWydzb3VyY2UnLCAnZWxlbWVudCddLFxuICAgICAgICAgICAgdmFsdWVzOiB7XG4gICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQudWlkXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHNvdXJjZS5tZXRhRGF0YVtlbGVtZW50LmxhYmVsXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAmJiBzb3VyY2UubWV0YURhdGFbZWxlbWVudC5sYWJlbF0udmFsdWVzLmZpbmQoKGEpID0+IGEuc291cmNlID09PSB0aGlzLnByb3BzLmlkKSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXBpLnBhdGNoSXRlbShTb3VyY2VFbGVtZW50LCBBcHBVcmxzLnNvdXJjZV9lbGVtZW50LFxuICAgICAgICAgICAgY29tcG9zaXRlS2V5LFxuICAgICAgICAgICAgICAgIFNlcmlhbGl6ZXIuZnJvbUpzb24oU291cmNlRWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICB1aWQ6IGNvbXBvc2l0ZUtleSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogc291cmNlLm1ldGFEYXRhW2VsZW1lbnQubGFiZWxdLmVsZW1lbnRfdWlkLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5hcGkucG9zdEl0ZW0oU291cmNlRWxlbWVudCwgQXBwVXJscy5zb3VyY2VfZWxlbWVudCxcbiAgICAgICAgICAgICAgICBTZXJpYWxpemVyLmZyb21Kc29uKFNvdXJjZUVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgdWlkOiBjb21wb3NpdGVLZXksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBkZWwoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYXBpLmRlbEl0ZW0oU291cmNlLCBBcHBVcmxzLnNvdXJjZSwgdGhpcy5wcm9wcy5pZClcbiAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jb250ZXh0LnJvdXRlci50cmFuc2l0aW9uVG8oJy9lZGl0L25vdGZvdW5kJykpXG4gICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgZS5kYXRhLmRhdGEudGhlbigoZGF0YSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmxpY3RSZXNvbHV0aW9uTW9kYWwgOiBNb2RhbERlZmluaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjb25mbGljdF9yZXNvbHV0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB7fSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdhZGRUb1dvcmtzcGFjZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNvdXJjZS5mb3JFYWNoKChkYXR1bSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFiLmRpc3BhdGNoKCdzb3VyY2UnLCBkYXR1bS51aWQsICdpdGVtJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdkZWxldGVBbGwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoZGF0YS5zb3VyY2UubWFwKChkYXR1bSkgPT4gdGhpcy5wcm9wcy5hcGkuZGVsSXRlbShTb3VyY2UsIEFwcFVybHMuc291cmNlLCBkYXR1bS51aWQpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25mbGljdGluZ0l0ZW1zOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlbGV0aW5nIFNvdXJjZSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBzaG93TW9kYWwuZGlzcGF0Y2goY29uZmxpY3RSZXNvbHV0aW9uTW9kYWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgcHVibGljIGNyZWF0ZUNoaWxkKCkge1xuXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMuc291cmNlLmdldCgnc291cmNlLScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZS5zb3VyY2U7XG5cbiAgICAgICAgY29uc3QgbmV3U291cmNlID0gU2VyaWFsaXplci5mcm9tSnNvbihTb3VyY2UsXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHt9LCBTZXJpYWxpemVyLnRvSnNvbihzb3VyY2UpLCB7IG5hbWU6ICdDaGlsZCBvZiAnICsgc291cmNlLmxhYmVsLCBwYXJlbnQ6IHRoaXMucHJvcHMuaWQgfSkpO1xuXG4gICAgICAgIHRoaXMucHJvcHMuYXBpLnBvc3RJdGVtKFNvdXJjZSwgQXBwVXJscy5zb3VyY2UsIG5ld1NvdXJjZSlcbiAgICAgICAgICAgIC50aGVuKChbaWRdKSA9PiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlVGFiLmRpc3BhdGNoKCdzb3VyY2UnLCBpZCwgJ2l0ZW0nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIGVudGl0eSB3aXRoICdtZW50aW9uZWQgaW4nIGFscmVhZHkgc2V0IHRvIHRoaXMgc291cmNlXG4gICAgcHVibGljIGNyZWF0ZUVudGl0eSgpIHtcbiAgICAgICAgY29uc3QgYSA6IE1vZGFsRGVmaW5pdGlvbiA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdwcmVzZXRfcmVjb3JkJyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiAoW2lkXSkgPT4ge1xuICAgICAgICAgICAgICAgICBjcmVhdGVUYWIuZGlzcGF0Y2goJ2VudGl0eScsIGlkLCAnaXRlbScpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4geyB9LFxuICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMuc291cmNlLmdldCgnc291cmNlLScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZS5zb3VyY2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzaG93TW9kYWwuZGlzcGF0Y2goYSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcblxuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS50YWJzLnNvdXJjZS5nZXQoJ3NvdXJjZS0nICsgdGhpcy5wcm9wcy5pZCkudmFsdWUuc291cmNlO1xuICAgICAgICBjb25zdCBwb3RlbnRpYWxQYXJlbnRzID0gdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLnNvdXJjZS52YWx1ZTtcblxuICAgICAgICBsZXQgcGFyZW50TmFtZSA9ICcnO1xuICAgICAgICBpZiAocG90ZW50aWFsUGFyZW50cyAhPT0gbnVsbCAmJiBzb3VyY2UucGFyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gcG90ZW50aWFsUGFyZW50cy5maW5kKChwYXIpID0+IHBhci51aWQgPT09IHNvdXJjZS5wYXJlbnQpO1xuICAgICAgICAgICAgaWYgKGZvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gZm91bmQubGFiZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3dvcmtzcGFjZS1lZGl0b3InPlxuICAgICAgICAgICAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPSdlZGl0b3ItaGVhZGVyIHNvdXJjZSc+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbWFyeS10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21haW4tdG9vbGJhcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYnJlYWQtY3J1bWJzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c291cmNlLnBhcmVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChjaGlsZCkgPT4gdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLnNvdXJjZS52YWx1ZS5maW5kKChldCkgPT4gZXQudWlkID09PSBjaGlsZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHBhcmVudCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9e2BicmVhZGNydW1iLSR7cGFyZW50LnVpZH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiAge3BhcmVudC5sYWJlbH0gPEFkZFRhYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdG9yZT17dGhpcy5wcm9wcy5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiVHlwZT0nc291cmNlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpZD17cGFyZW50LnVpZH0gLz4gPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1hbmdsZS1yaWdodCc+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtc3VuLW8gaXRlbS1pY29uJz48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICA8U3RyaW5nRWRpdGFibGVGaWVsZENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzb3VyY2UubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PXtFZGl0YWJsZUhlYWRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZVNvdXJjZSgnbGFiZWwnLCB2YWx1ZSl9ICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3N1Yi10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmYSBmYS1wbHVzIGFkZCBidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jcmVhdGVFbnRpdHkuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmEgZmEtdHJhc2ggZGVsZXRlIGJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLmRlbCgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmYSBmYS1hcnJvdy1jaXJjbGUtby1kb3duIGJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNyZWF0ZUNoaWxkLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPSdlZGl0b3ItYm9keSc+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VkaXQtZ3JvdXAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPlBhcmVudDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q29tYm9FZGl0YWJsZUZpZWxkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3trZXk6IHBhcmVudE5hbWUsIHZhbHVlOiBzb3VyY2UucGFyZW50fX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9e0VkaXRhYmxlQ29tYm9Ecm9wZG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZVNvdXJjZSgncGFyZW50JywgdmFsdWUudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wcz17eyBjb21ib1NldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHBvdGVudGlhbFBhcmVudHMubWFwKChwYXIpID0+ICh7IGtleTogcGFyLmxhYmVsLCB2YWx1ZTogcGFyLnVpZH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZU5hbWU6ICdTb3VyY2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3NvdXJjZS5wYXJlbnQgIT09IG51bGwgPyAoPEFkZFRhYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhU3RvcmU9e3RoaXMucHJvcHMuZGF0YVN0b3JlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPSdzb3VyY2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpZD17c291cmNlLnBhcmVudH0gLz4pIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VkaXQtZ3JvdXAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFN0cmluZ0VkaXRhYmxlRmllbGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c291cmNlLnNhbWVBc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9e1NhbWVBc0VkaXRvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZVNvdXJjZSgnc2FtZUFzJywgdmFsdWUpfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLmR1YmxpbkNvcmUudmFsdWUuZWxlbWVudHMubWFwKChlbGVtZW50KSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHNvdXJjZS5tZXRhRGF0YS5oYXNPd25Qcm9wZXJ0eShlbGVtZW50LmxhYmVsKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLm1ldGFEYXRhW2VsZW1lbnQubGFiZWxdLnZhbHVlcyA6IFt7IHNvdXJjZTogdGhpcy5wcm9wcy5pZCwgdmFsdWU6ICcnfV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGl0YWJsZVZhbHVlID0gdmFsdWVzWzBdLnNvdXJjZSA9PSB0aGlzLnByb3BzLmlkID8gdmFsdWVzWzBdLnZhbHVlIDogJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2Ake2VsZW1lbnQubGFiZWx9LWVkaXRgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT0nc2VjdGlvbi1oZWFkZXInPntlbGVtZW50LmxhYmVsfSA8c21hbGw+PGEgaHJlZj17ZWxlbWVudC51cmx9PntlbGVtZW50LnVyaX08L2E+PC9zbWFsbD48L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J2VsZW1lbnQtZGVzY3JpcHRpb24nPntlbGVtZW50LmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlcy5tYXAoKHZhbHVlKSA9PiB2YWx1ZS5zb3VyY2UgIT0gdGhpcy5wcm9wcy5pZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkga2V5PXtgJHtlbGVtZW50LnVpZH0tJHt2YWx1ZS5zb3VyY2V9YH0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuc291cmNlLnZhbHVlLmZpbmQoKHMpID0+IHMudWlkID09PSB2YWx1ZS5zb3VyY2UpLmxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfToge3ZhbHVlLnZhbHVlfTwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTdHJpbmdFZGl0YWJsZUZpZWxkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZWRpdGFibGVWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD17RWRpdGFibGVQYXJhZ3JhcGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZVNvdXJjZUVsZW1lbnQoZWxlbWVudCwgdmFsdWUpfSAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pfVxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQ+RGlyZWN0IENoaWxkcmVuPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzb3VyY2UuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChjaGlsZCkgPT4gdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLnNvdXJjZS52YWx1ZS5maW5kKChldCkgPT4gZXQudWlkID09PSBjaGlsZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoY2hpbGRFdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxsaSBrZXk9e2BkYy0ke2NoaWxkRXQudWlkfWB9PntjaGlsZEV0LmxhYmVsfSA8QWRkVGFiQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPSdzb3VyY2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhU3RvcmU9e3RoaXMucHJvcHMuZGF0YVN0b3JlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlkPXtjaGlsZEV0LnVpZH0gLz48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL3dvcmtzcGFjZS9Tb3VyY2VFZGl0b3JXb3Jrc3BhY2UudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 54 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Predicate editor workspace\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst react_router_1 = __webpack_require__(4);\r\nconst SameAsEditor_1 = __webpack_require__(50);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst EditableHeader_1 = __webpack_require__(31);\r\nconst EditableParagraph_1 = __webpack_require__(52);\r\nconst PredicateDescription_1 = __webpack_require__(55);\r\nconst literalTypes_1 = __webpack_require__(56);\r\nclass StringEditableFieldComponent extends EditableHeader_1.EditableFieldComponent {\r\n}\r\n// - Should state the number of times this predicate is used\r\n// - Widening the domain or range always okay\r\n// - Narrowing should check for conflicts and return them\r\n// - Asks 'Delete conflicting records?'\r\n// - Strong check (double button press or type) to confirm\r\n// - Changing name/description/sameAs - absolutly fine\r\n// - Cannot change 'readonly'\r\nclass PredicateEditorWorkspace extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            records: []\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.loadData(this.props);\r\n    }\r\n    componentWillReceiveProps(newProps) {\r\n        this.loadData(newProps);\r\n    }\r\n    loadData(props) {\r\n        // Promise.all([\r\n        //     props.api.getCollection(Record, AppUrls.record, { predicate: props.id })\r\n        // ]).then(([records]) => {\r\n        //     this.setState({ records });\r\n        // });\r\n    }\r\n    updatePredicate(field, value, rangeIsReferenceOverride = null) {\r\n        const predicate = this.props.dataStore.tabs.predicate.get('predicate-' + this.props.id).value;\r\n        if (predicate === null) {\r\n            console.warn('Tried to edit unready predicate');\r\n            return;\r\n        }\r\n        const rangeIsReferenceVal = rangeIsReferenceOverride === null\r\n            ? predicate.rangeIsReference : rangeIsReferenceOverride;\r\n        this.props.api.patchItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, predicate.uid, {\r\n            [field]: value,\r\n            rangeIsReference: rangeIsReferenceVal\r\n        });\r\n    }\r\n    copy() {\r\n        const predicate = this.props.dataStore.tabs.predicate.get('predicate-' + this.props.id).value;\r\n        const newPredicate = falcon_core_1.Serializer.fromJson(falcon_core_1.Predicate, Object.assign({}, falcon_core_1.Serializer.toJson(predicate), { name: 'Copy of ' + predicate.label }));\r\n        this.props.api.postItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, newPredicate)\r\n            .then(([id]) => {\r\n            Signaller_1.createTab.dispatch('predicate', id, 'item');\r\n        });\r\n    }\r\n    del() {\r\n        this.props.api.delItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, this.props.id)\r\n            .then(() => this.context.router.transitionTo('/edit/notfound'))\r\n            .catch((e) => {\r\n            e.data.data.then((data) => {\r\n                const conflictResolutionModal = {\r\n                    name: 'conflict_resolution',\r\n                    cancel: () => { },\r\n                    complete: (result) => {\r\n                        if (result === 'addToWorkspace') {\r\n                            data.forEach((datum) => {\r\n                                Signaller_1.createTab.dispatch('entity', datum.entity, 'item');\r\n                            });\r\n                        }\r\n                        if (result === 'deleteAll') {\r\n                            Promise.all(data.record.map((datum) => this.props.api.delItem(falcon_core_1.Record, ApiService_1.AppUrls.record, datum.uid)))\r\n                                .then(() => {\r\n                                this.del();\r\n                            });\r\n                        }\r\n                    },\r\n                    settings: {\r\n                        conflictingItems: data,\r\n                        message: 'Deleting Predicate'\r\n                    }\r\n                };\r\n                Signaller_1.showModal.dispatch(conflictResolutionModal);\r\n            });\r\n        });\r\n    }\r\n    render() {\r\n        const predicate = this.props.dataStore.tabs.predicate.get('predicate-' + this.props.id).value;\r\n        const entityTypes = this.props.dataStore.all.entity_type.value;\r\n        const currentDomainEntityType = entityTypes.find((t) => t.uid == predicate.domain);\r\n        let currentDomainEntityTypeName = '';\r\n        if (currentDomainEntityType !== undefined) {\r\n            currentDomainEntityTypeName = currentDomainEntityType.label;\r\n        }\r\n        const domain = { key: currentDomainEntityTypeName, value: predicate.domain.toString() };\r\n        const range = { key: '', value: predicate.range.toString() };\r\n        if (predicate.rangeIsReference) {\r\n            const currentRangeEntityType = entityTypes.find((t) => t.uid == predicate.range);\r\n            if (currentRangeEntityType !== undefined) {\r\n                range.key = currentRangeEntityType.label;\r\n            }\r\n        }\r\n        else {\r\n            const literalType = literalTypes_1.literalTypes.find((t) => t.value === predicate.range);\r\n            if (literalType !== undefined) {\r\n                range.key = literalType.label;\r\n            }\r\n        }\r\n        const entityTypeOptions = entityTypes.map((t) => {\r\n            if (t.uid === null) {\r\n                throw new Error('Encountered entity type with no id!');\r\n            }\r\n            return { key: t.label, value: t.uid.toString() };\r\n        });\r\n        const literalTypeOptions = literalTypes_1.literalTypes.map((t) => ({ key: t.label, value: t.value, meta: 'literal' }));\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header predicate' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-long-arrow-right item-icon' }),\r\n                        React.createElement(StringEditableFieldComponent, { value: predicate.label, component: EditableHeader_1.EditableHeader, onChange: (value) => this.updatePredicate('label', value) })),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-trash delete button', \"aria-hidden\": 'true', onClick: this.del.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-clone button', \"aria-hidden\": 'true', onClick: this.copy.bind(this) })))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(react_router_1.Link, { to: `/edit/entity?col1p=${this.props.id}&col1f=exists` },\r\n                        \"Uses: \",\r\n                        this.state.records.length)),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Description\"),\r\n                    React.createElement(StringEditableFieldComponent, { value: predicate.description, component: EditableParagraph_1.EditableParagraph, onChange: (value) => this.updatePredicate('description', value) })),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Typing\"),\r\n                    React.createElement(PredicateDescription_1.PredicateDescription, { domain: domain, range: range, domainChanged: (value) => this.updatePredicate('domain', value.value), rangeChanged: (value) => this.updatePredicate('range', value.value, value.meta !== 'literal'), mode: 'editSingle', domainOptions: entityTypeOptions, rangeOptions: literalTypeOptions.concat(entityTypeOptions) })),\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(StringEditableFieldComponent, { value: predicate.sameAs, component: SameAsEditor_1.SameAsEditor, onChange: (value) => this.updatePredicate('sameAs', value) })))));\r\n    }\r\n}\r\nPredicateEditorWorkspace.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.PredicateEditorWorkspace = PredicateEditorWorkspace;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL1ByZWRpY2F0ZUVkaXRvcldvcmtzcGFjZS50c3g/N2FlOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUMvQiw4Q0FBb0M7QUFFcEMsK0NBQXNEO0FBRXRELDRDQUF1RDtBQUN2RCw0Q0FBdUQ7QUFFdkQsOENBQTREO0FBRTVELGlEQUFrRjtBQUNsRixvREFBZ0U7QUFDaEUsdURBQXNFO0FBR3RFLCtDQUFrRDtBQU1sRCxrQ0FBbUMsU0FBUSx1Q0FBOEI7Q0FBRztBQVk1RSw0REFBNEQ7QUFDNUQsNkNBQTZDO0FBQzdDLHlEQUF5RDtBQUN6RCx1Q0FBdUM7QUFDdkMsMERBQTBEO0FBQzFELHNEQUFzRDtBQUN0RCw2QkFBNkI7QUFDN0IsOEJBQXNDLFNBQVEsS0FBSyxDQUFDLFNBQXFEO0lBTXJHO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsT0FBTyxFQUFFLEVBQUU7U0FDZCxDQUFDO0lBQ04sQ0FBQztJQUVNLGlCQUFpQjtRQUNwQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRU0seUJBQXlCLENBQUMsUUFBOEI7UUFDM0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRU0sUUFBUSxDQUFDLEtBQTJCO1FBQ3ZDLGdCQUFnQjtRQUNoQiwrRUFBK0U7UUFDL0UsMkJBQTJCO1FBQzNCLGtDQUFrQztRQUNsQyxNQUFNO0lBQ1YsQ0FBQztJQUVNLGVBQWUsQ0FBQyxLQUFhLEVBQUUsS0FBYSxFQUFFLDJCQUEyQyxJQUFJO1FBRWhHLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFlBQVksR0FBRyxJ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LEVBQzVCLFNBQVMsRUFBRSxxQ0FBaUIsRUFDNUIsUUFBUSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxlQUFlLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxHQUFLLENBQ3RFO2dCQUVOLDZCQUFLLFNBQVMsRUFBQyxZQUFZO29CQUN2QiwrQkFBTyxTQUFTLEVBQUMsT0FBTyxhQUFlO29CQUN2QyxvQkFBQywyQ0FBb0IsSUFDakIsTUFBTSxFQUFFLE1BQU0sRUFDZCxLQUFLLEVBQUUsS0FBSyxFQUNaLGFBQWEsRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQ3JFLFlBQVksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxJQUFJLEtBQUssU0FBUyxDQUFDLEVBQzdGLElBQUksRUFBQyxZQUFZLEVBQ2pCLGFBQWEsRUFBRSxpQkFBaUIsRUFDaEMsWUFBWSxFQUFFLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUM1RCxDQUNBO2dCQUVOO29CQUNJLG9CQUFDLDRCQUE0QixJQUN6QixLQUFLLEVBQUUsU0FBUyxDQUFDLE1BQU0sRUFDdkIsU0FBUyxFQUFFLDJCQUFZLEVBQ3ZCLFFBQVEsRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsR0FBSSxDQUNoRSxDQUNBLENBQ1IsQ0FDVCxDQUFDO0lBQ04sQ0FBQzs7QUFsTWEscUNBQVksR0FBRztJQUN6QixNQUFNLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVTtDQUM1QyxDQUFDO0FBSk4sNERBcU1DIiwiZmlsZSI6IjU0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFByZWRpY2F0ZSBlZGl0b3Igd29ya3NwYWNlXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4wLjFcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuaW1wb3J0IHsgU2FtZUFzRWRpdG9yIH0gZnJvbSAnLi4vZmllbGRzL1NhbWVBc0VkaXRvcic7XG5pbXBvcnQgeyBMb2FkaW5nIH0gZnJvbSAnLi4vTG9hZGluZyc7XG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5pbXBvcnQgeyBzaG93TW9kYWwsIGNyZWF0ZVRhYiB9IGZyb20gJy4uLy4uL1NpZ25hbGxlcic7XG5cbmltcG9ydCB7IFByZWRpY2F0ZSwgU2VyaWFsaXplciwgUmVjb3JkIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuXG5pbXBvcnQgeyBFZGl0YWJsZUhlYWRlciwgRWRpdGFibGVGaWVsZENvbXBvbmVudCB9IGZyb20gJy4uL2ZpZWxkcy9FZGl0YWJsZUhlYWRlcic7XG5pbXBvcnQgeyBFZGl0YWJsZVBhcmFncmFwaCB9IGZyb20gJy4uL2ZpZWxkcy9FZGl0YWJsZVBhcmFncmFwaCc7XG5pbXBvcnQgeyBQcmVkaWNhdGVEZXNjcmlwdGlvbiB9IGZyb20gJy4uL2ZpZWxkcy9QcmVkaWNhdGVEZXNjcmlwdGlvbic7XG5pbXBvcnQgeyBDb21ib0Ryb3Bkb3duT3B0aW9uIH0gZnJvbSAnLi4vQ29tYm9Ecm9wZG93bic7XG5cbmltcG9ydCB7IGxpdGVyYWxUeXBlcyB9IGZyb20gJy4uLy4uL2xpdGVyYWxUeXBlcyc7XG5cbmltcG9ydCB7IE1vZGFsRGVmaW5pdGlvbiB9IGZyb20gJy4uL21vZGFsL01vZGFsRGVmaW5pdGlvbic7XG5cbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uL0RhdGFTdG9yZSc7XG5cbmNsYXNzIFN0cmluZ0VkaXRhYmxlRmllbGRDb21wb25lbnQgZXh0ZW5kcyBFZGl0YWJsZUZpZWxkQ29tcG9uZW50PHN0cmluZz4ge31cblxuaW50ZXJmYWNlIFByZWRpY2F0ZUVkaXRvclByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBkYXRhU3RvcmU6IERhdGFTdG9yZTtcbn1cblxuaW50ZXJmYWNlIFByZWRpY2F0ZUVkaXRvclN0YXRlIHtcbiAgICByZWNvcmRzOiBSZWNvcmRbXTtcbn1cblxuLy8gLSBTaG91bGQgc3RhdGUgdGhlIG51bWJlciBvZiB0aW1lcyB0aGlzIHByZWRpY2F0ZSBpcyB1c2VkXG4vLyAtIFdpZGVuaW5nIHRoZSBkb21haW4gb3IgcmFuZ2UgYWx3YXlzIG9rYXlcbi8vIC0gTmFycm93aW5nIHNob3VsZCBjaGVjayBmb3IgY29uZmxpY3RzIGFuZCByZXR1cm4gdGhlbVxuLy8gLSBBc2tzICdEZWxldGUgY29uZmxpY3RpbmcgcmVjb3Jkcz8nXG4vLyAtIFN0cm9uZyBjaGVjayAoZG91YmxlIGJ1dHRvbiBwcmVzcyBvciB0eXBlKSB0byBjb25maXJtXG4vLyAtIENoYW5naW5nIG5hbWUvZGVzY3JpcHRpb24vc2FtZUFzIC0gYWJzb2x1dGx5IGZpbmVcbi8vIC0gQ2Fubm90IGNoYW5nZSAncmVhZG9ubHknXG5leHBvcnQgY2xhc3MgUHJlZGljYXRlRWRpdG9yV29ya3NwYWNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByZWRpY2F0ZUVkaXRvclByb3BzLCBQcmVkaWNhdGVFZGl0b3JTdGF0ZT4ge1xuXG4gICAgcHVibGljIHN0YXRpYyBjb250ZXh0VHlwZXMgPSB7XG4gICAgICAgIHJvdXRlcjogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgcmVjb3JkczogW11cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMubG9hZERhdGEodGhpcy5wcm9wcyk7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHM6IFByZWRpY2F0ZUVkaXRvclByb3BzKSB7XG4gICAgICAgIHRoaXMubG9hZERhdGEobmV3UHJvcHMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb2FkRGF0YShwcm9wczogUHJlZGljYXRlRWRpdG9yUHJvcHMpIHtcbiAgICAgICAgLy8gUHJvbWlzZS5hbGwoW1xuICAgICAgICAvLyAgICAgcHJvcHMuYXBpLmdldENvbGxlY3Rpb24oUmVjb3JkLCBBcHBVcmxzLnJlY29yZCwgeyBwcmVkaWNhdGU6IHByb3BzLmlkIH0pXG4gICAgICAgIC8vIF0pLnRoZW4oKFtyZWNvcmRzXSkgPT4ge1xuICAgICAgICAvLyAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlY29yZHMgfSk7XG4gICAgICAgIC8vIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVQcmVkaWNhdGUoZmllbGQ6IHN0cmluZywgdmFsdWU6IHN0cmluZywgcmFuZ2VJc1JlZmVyZW5jZU92ZXJyaWRlOiBib29sZWFuIHwgbnVsbCA9IG51bGwpIHtcblxuICAgICAgICBjb25zdCBwcmVkaWNhdGUgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS50YWJzLnByZWRpY2F0ZS5nZXQoJ3ByZWRpY2F0ZS0nICsgdGhpcy5wcm9wcy5pZCkudmFsdWU7XG5cbiAgICAgICAgaWYgKHByZWRpY2F0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUcmllZCB0byBlZGl0IHVucmVhZHkgcHJlZGljYXRlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByYW5nZUlzUmVmZXJlbmNlVmFsID0gcmFuZ2VJc1JlZmVyZW5jZU92ZXJyaWRlID09PSBudWxsXG4gICAgICAgICAgICA/IHByZWRpY2F0ZS5yYW5nZUlzUmVmZXJlbmNlIDogcmFuZ2VJc1JlZmVyZW5jZU92ZXJyaWRlO1xuXG4gICAgICAgIHRoaXMucHJvcHMuYXBpLnBhdGNoSXRlbShQcmVkaWNhdGUsIEFwcFVybHMucHJlZGljYXRlLCBwcmVkaWNhdGUudWlkLFxuICAgICAgICB7XG4gICAgICAgICAgICBbZmllbGRdOiB2YWx1ZSxcbiAgICAgICAgICAgIHJhbmdlSXNSZWZlcmVuY2U6IHJhbmdlSXNSZWZlcmVuY2VWYWxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNvcHkoKSB7XG5cbiAgICAgICAgY29uc3QgcHJlZGljYXRlID0gdGhpcy5wcm9wcy5kYXRhU3RvcmUudGFicy5wcmVkaWNhdGUuZ2V0KCdwcmVkaWNhdGUtJyArIHRoaXMucHJvcHMuaWQpLnZhbHVlO1xuXG4gICAgICAgIGNvbnN0IG5ld1ByZWRpY2F0ZSA9IFNlcmlhbGl6ZXIuZnJvbUpzb24oUHJlZGljYXRlLFxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgU2VyaWFsaXplci50b0pzb24ocHJlZGljYXRlKSwgeyBuYW1lOiAnQ29weSBvZiAnICsgcHJlZGljYXRlLmxhYmVsfSkpO1xuXG4gICAgICAgIHRoaXMucHJvcHMuYXBpLnBvc3RJdGVtKFByZWRpY2F0ZSwgQXBwVXJscy5wcmVkaWNhdGUsIG5ld1ByZWRpY2F0ZSlcbiAgICAgICAgICAgIC50aGVuKChbaWRdKSA9PiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlVGFiLmRpc3BhdGNoKCdwcmVkaWNhdGUnLCBpZCwgJ2l0ZW0nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlbCgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hcGkuZGVsSXRlbShQcmVkaWNhdGUsIEFwcFVybHMucHJlZGljYXRlLCB0aGlzLnByb3BzLmlkKVxuICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNvbnRleHQucm91dGVyLnRyYW5zaXRpb25UbygnL2VkaXQvbm90Zm91bmQnKSlcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBlLmRhdGEuZGF0YS50aGVuKChkYXRhKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb25mbGljdFJlc29sdXRpb25Nb2RhbCA6IE1vZGFsRGVmaW5pdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2NvbmZsaWN0X3Jlc29sdXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWw6ICgpID0+IHt9LFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2FkZFRvV29ya3NwYWNlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaCgoZGF0dW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRhYi5kaXNwYXRjaCgnZW50aXR5JywgZGF0dW0uZW50aXR5LCAnaXRlbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSAnZGVsZXRlQWxsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKGRhdGEucmVjb3JkLm1hcCgoZGF0dW0pID0+IHRoaXMucHJvcHMuYXBpLmRlbEl0ZW0oUmVjb3JkLCBBcHBVcmxzLnJlY29yZCwgZGF0dW0udWlkKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RpbmdJdGVtczogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWxldGluZyBQcmVkaWNhdGUnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgc2hvd01vZGFsLmRpc3BhdGNoKGNvbmZsaWN0UmVzb2x1dGlvbk1vZGFsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuXG4gICAgICAgIGNvbnN0IHByZWRpY2F0ZSA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLnRhYnMucHJlZGljYXRlLmdldCgncHJlZGljYXRlLScgKyB0aGlzLnByb3BzLmlkKS52YWx1ZTtcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZXMgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5X3R5cGUudmFsdWU7XG5cbiAgICAgICAgY29uc3QgY3VycmVudERvbWFpbkVudGl0eVR5cGUgPSBlbnRpdHlUeXBlcy5maW5kKCh0KSA9PiB0LnVpZCA9PSBwcmVkaWNhdGUuZG9tYWluKTtcblxuICAgICAgICBsZXQgY3VycmVudERvbWFpbkVudGl0eVR5cGVOYW1lID0gJyc7XG5cbiAgICAgICAgaWYgKGN1cnJlbnREb21haW5FbnRpdHlUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnREb21haW5FbnRpdHlUeXBlTmFtZSA9IGN1cnJlbnREb21haW5FbnRpdHlUeXBlLmxhYmVsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZG9tYWluIDogQ29tYm9Ecm9wZG93bk9wdGlvbiA9IHtrZXk6IGN1cnJlbnREb21haW5FbnRpdHlUeXBlTmFtZSwgdmFsdWU6IHByZWRpY2F0ZS5kb21haW4udG9TdHJpbmcoKX07XG5cbiAgICAgICAgY29uc3QgcmFuZ2UgOiBDb21ib0Ryb3Bkb3duT3B0aW9uID0ge2tleTogJycsIHZhbHVlOiBwcmVkaWNhdGUucmFuZ2UudG9TdHJpbmcoKX07XG5cbiAgICAgICAgaWYgKHByZWRpY2F0ZS5yYW5nZUlzUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UmFuZ2VFbnRpdHlUeXBlID1cbiAgICAgICAgICAgICAgICBlbnRpdHlUeXBlcy5maW5kKCh0KSA9PiB0LnVpZCA9PSBwcmVkaWNhdGUucmFuZ2UpO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudFJhbmdlRW50aXR5VHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2Uua2V5ID0gY3VycmVudFJhbmdlRW50aXR5VHlwZS5sYWJlbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbGl0ZXJhbFR5cGUgPSBsaXRlcmFsVHlwZXMuZmluZCgodCkgPT4gdC52YWx1ZSA9PT0gcHJlZGljYXRlLnJhbmdlKTtcbiAgICAgICAgICAgIGlmIChsaXRlcmFsVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2Uua2V5ID0gbGl0ZXJhbFR5cGUubGFiZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlT3B0aW9ucyA9IGVudGl0eVR5cGVzLm1hcCgodCkgPT4ge1xuICAgICAgICAgICAgaWYgKHQudWlkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbmNvdW50ZXJlZCBlbnRpdHkgdHlwZSB3aXRoIG5vIGlkIScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsga2V5OiB0LmxhYmVsLCB2YWx1ZTogdC51aWQudG9TdHJpbmcoKSB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBsaXRlcmFsVHlwZU9wdGlvbnMgPSBsaXRlcmFsVHlwZXMubWFwKCh0KSA9PiAoeyBrZXk6IHQubGFiZWwsIHZhbHVlOiB0LnZhbHVlLCBtZXRhOiAnbGl0ZXJhbCd9KSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3b3Jrc3BhY2UtZWRpdG9yJz5cbiAgICAgICAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT0nZWRpdG9yLWhlYWRlciBwcmVkaWNhdGUnPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByaW1hcnktdG9vbGJhcic+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYWluLXRvb2xiYXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1sb25nLWFycm93LXJpZ2h0IGl0ZW0taWNvbic+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFN0cmluZ0VkaXRhYmxlRmllbGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJlZGljYXRlLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD17RWRpdGFibGVIZWFkZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gdGhpcy51cGRhdGVQcmVkaWNhdGUoJ2xhYmVsJywgdmFsdWUpfSAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzdWItdG9vbGJhcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmEgZmEtdHJhc2ggZGVsZXRlIGJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmRlbC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmYSBmYS1jbG9uZSBidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jb3B5LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPSdlZGl0b3ItYm9keSc+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj48TGluayB0bz17YC9lZGl0L2VudGl0eT9jb2wxcD0ke3RoaXMucHJvcHMuaWR9JmNvbDFmPWV4aXN0c2B9PlVzZXM6IHt0aGlzLnN0YXRlLnJlY29yZHMubGVuZ3RofTwvTGluaz48L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZWRpdC1ncm91cCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdzbWFsbCc+RGVzY3JpcHRpb248L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFN0cmluZ0VkaXRhYmxlRmllbGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJlZGljYXRlLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD17RWRpdGFibGVQYXJhZ3JhcGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gdGhpcy51cGRhdGVQcmVkaWNhdGUoJ2Rlc2NyaXB0aW9uJywgdmFsdWUpfSAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VkaXQtZ3JvdXAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPlR5cGluZzwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UHJlZGljYXRlRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21haW49e2RvbWFpbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZT17cmFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluQ2hhbmdlZD17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZVByZWRpY2F0ZSgnZG9tYWluJywgdmFsdWUudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlQ2hhbmdlZD17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZVByZWRpY2F0ZSgncmFuZ2UnLCB2YWx1ZS52YWx1ZSwgdmFsdWUubWV0YSAhPT0gJ2xpdGVyYWwnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlPSdlZGl0U2luZ2xlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbWFpbk9wdGlvbnM9e2VudGl0eVR5cGVPcHRpb25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlT3B0aW9ucz17bGl0ZXJhbFR5cGVPcHRpb25zLmNvbmNhdChlbnRpdHlUeXBlT3B0aW9ucyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFN0cmluZ0VkaXRhYmxlRmllbGRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJlZGljYXRlLnNhbWVBc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9e1NhbWVBc0VkaXRvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLnVwZGF0ZVByZWRpY2F0ZSgnc2FtZUFzJywgdmFsdWUpfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL1ByZWRpY2F0ZUVkaXRvcldvcmtzcGFjZS50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 55 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst ComboDropdown_1 = __webpack_require__(18);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass PredicateDescription extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            editingDomain: false,\r\n            editingRange: false,\r\n            rangeValue: { key: '', value: '' },\r\n            domainValue: { key: '', value: '' }\r\n        };\r\n    }\r\n    componentWillMount() {\r\n        this.setState({\r\n            rangeValue: this.props.range,\r\n            domainValue: this.props.domain\r\n        });\r\n    }\r\n    componentWillReceiveProps(newProps) {\r\n        this.setState({\r\n            rangeValue: newProps.range,\r\n            domainValue: newProps.domain\r\n        });\r\n    }\r\n    acceptDomainChanges() {\r\n        this.props.domainChanged(this.state.domainValue);\r\n        this.setState({ editingDomain: false });\r\n    }\r\n    cancelDomainChanges() {\r\n        this.setState({ editingDomain: false, domainValue: this.props.domain });\r\n    }\r\n    acceptRangeChanges() {\r\n        this.props.rangeChanged(this.state.rangeValue);\r\n        this.setState({ editingRange: false });\r\n    }\r\n    cancelRangeChanges() {\r\n        this.setState({ editingDomain: false, rangeValue: this.props.range });\r\n    }\r\n    render() {\r\n        const domainChanged = this.props.mode === 'editAll' ?\r\n            this.props.domainChanged : (c) => this.setState({ domainValue: c });\r\n        const rangeChanged = this.props.mode === 'editAll' ?\r\n            this.props.rangeChanged : (c) => this.setState({ rangeValue: c });\r\n        return (React.createElement(\"div\", { className: 'predicate-function-description' },\r\n            React.createElement(\"div\", { className: 'domain' }, this.props.mode === 'editAll' || this.state.editingDomain ? (React.createElement(\"div\", null,\r\n                React.createElement(\"label\", { className: 'small' }, \"Domain\"),\r\n                React.createElement(ComboDropdown_1.ComboDropdown, { options: this.props.domainOptions, typeName: 'entity type', allowNew: false, value: this.state.domainValue, setValue: domainChanged, createNewValue: lodash_1.noop }),\r\n                this.props.mode === 'editSingle' ? (React.createElement(\"div\", null,\r\n                    React.createElement(\"button\", { onClick: this.acceptDomainChanges.bind(this) },\r\n                        React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n                    React.createElement(\"button\", { onClick: this.cancelDomainChanges.bind(this) },\r\n                        React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' })))) : null)) : (React.createElement(\"div\", null,\r\n                this.props.domain.key,\r\n                \" \",\r\n                React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: () => this.setState({ editingDomain: true }) })))),\r\n            React.createElement(\"div\", { className: 'arrow' },\r\n                React.createElement(\"i\", { className: 'fa fa-long-arrow-right', \"aria-hidden\": 'true' })),\r\n            React.createElement(\"div\", { className: 'range' }, this.props.mode === 'editAll' || this.state.editingRange ? (React.createElement(\"div\", null,\r\n                React.createElement(\"label\", { className: 'small' }, \"Range\"),\r\n                React.createElement(ComboDropdown_1.ComboDropdown, { options: this.props.rangeOptions, typeName: 'entity type', allowNew: false, value: this.state.rangeValue, setValue: rangeChanged, createNewValue: lodash_1.noop }),\r\n                this.props.mode === 'editSingle' ? (React.createElement(\"div\", null,\r\n                    React.createElement(\"button\", { onClick: this.acceptRangeChanges.bind(this) },\r\n                        React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n                    React.createElement(\"button\", { onClick: this.cancelRangeChanges.bind(this) },\r\n                        React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' })))) : null)) : (React.createElement(\"div\", null,\r\n                this.props.range.key,\r\n                \" \",\r\n                React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: () => this.setState({ editingRange: true }) }))))));\r\n    }\r\n}\r\nexports.PredicateDescription = PredicateDescription;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL1ByZWRpY2F0ZURlc2NyaXB0aW9uLnRzeD8yYzc0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBQy9CLGdEQUFzRTtBQUN0RSx5Q0FBOEI7QUFtQjlCLDBCQUFrQyxTQUFRLEtBQUssQ0FBQyxTQUErRDtJQUUzRztRQUNJLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNULGFBQWEsRUFBRSxLQUFLO1lBQ3BCLFlBQVksRUFBRSxLQUFLO1lBQ25CLFVBQVUsRUFBRSxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBQztZQUNoQyxXQUFXLEVBQUUsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUM7U0FDcEMsQ0FBQztJQUNOLENBQUM7SUFFTSxrQkFBa0I7UUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNWLFVBQVUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUs7WUFDNUIsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTTtTQUNqQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0seUJBQXlCLENBQUMsUUFBbUM7UUFDaEUsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNWLFVBQVUsRUFBRSxRQUFRLENBQUMsS0FBSztZQUMxQixXQUFXLEVBQUUsUUFBUSxDQUFDLE1BQU07U0FDL0IsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLG1CQUFtQjtRQUN0QixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRU0sbUJBQW1CO1FBQ3RCLElB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TyxTQUFTLEVBQUMsT0FBTyxZQUFjO2dCQUN0QyxvQkFBQyw2QkFBYSxJQUNWLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksRUFDaEMsUUFBUSxFQUFDLGFBQWEsRUFDdEIsUUFBUSxFQUFFLEtBQUssRUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQzVCLFFBQVEsRUFBRSxZQUFZLEVBQ3RCLGNBQWMsRUFBRSxhQUFJLEdBQUk7Z0JBQzNCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLFlBQVksR0FBRyxDQUNwQztvQkFDSSxnQ0FBUyxPQUFPLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7d0JBQ2hELDJCQUFHLFNBQVMsRUFBQyxhQUFhLGlCQUFhLE1BQU0sR0FBSyxDQUM3QztvQkFDVCxnQ0FBUyxPQUFPLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7d0JBQ2hELDJCQUFHLFNBQVMsRUFBQyxhQUFhLGlCQUFhLE1BQU0sR0FBSyxDQUM3QyxDQUNQLENBQ1QsR0FBRyxJQUFJLENBQ0YsQ0FDVCxHQUFHLENBQUM7Z0JBQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRzs7Z0JBQUUsMkJBQUcsU0FBUyxFQUFDLHVCQUF1QixFQUNqRSxLQUFLLEVBQUMsTUFBTSxpQkFDQSxNQUFNLEVBQ2xCLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FDcEQsQ0FBTSxDQUFDLENBQ1QsQ0FDSixDQUFDLENBQUM7SUFDWixDQUFDO0NBQ0o7QUFqSEQsb0RBaUhDIiwiZmlsZSI6IjU1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFNpZGViYXIgZm9yIGVkaXRvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ29tYm9Ecm9wZG93biwgQ29tYm9Ecm9wZG93bk9wdGlvbiB9IGZyb20gJy4uL0NvbWJvRHJvcGRvd24nO1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmludGVyZmFjZSBQcmVkaWNhdGVEZXNjcmlwdGlvblByb3BzIHtcbiAgICBkb21haW46IENvbWJvRHJvcGRvd25PcHRpb247XG4gICAgcmFuZ2U6IENvbWJvRHJvcGRvd25PcHRpb247XG4gICAgbW9kZTogJ2VkaXRBbGwnIHwgJ2VkaXRTaW5nbGUnO1xuICAgIGRvbWFpbkNoYW5nZWQ6IChzOiBDb21ib0Ryb3Bkb3duT3B0aW9uKSA9PiB2b2lkO1xuICAgIHJhbmdlQ2hhbmdlZDogKHM6IENvbWJvRHJvcGRvd25PcHRpb24pID0+IHZvaWQ7XG4gICAgZG9tYWluT3B0aW9uczogQ29tYm9Ecm9wZG93bk9wdGlvbltdO1xuICAgIHJhbmdlT3B0aW9uczogQ29tYm9Ecm9wZG93bk9wdGlvbltdO1xufVxuXG5pbnRlcmZhY2UgUHJlZGljYXRlRGVzY3JpcHRpb25TdGF0ZSB7XG4gICAgZWRpdGluZ0RvbWFpbjogYm9vbGVhbjtcbiAgICBlZGl0aW5nUmFuZ2U6IGJvb2xlYW47XG4gICAgZG9tYWluVmFsdWU6IENvbWJvRHJvcGRvd25PcHRpb247XG4gICAgcmFuZ2VWYWx1ZTogQ29tYm9Ecm9wZG93bk9wdGlvbjtcbn1cblxuZXhwb3J0IGNsYXNzIFByZWRpY2F0ZURlc2NyaXB0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByZWRpY2F0ZURlc2NyaXB0aW9uUHJvcHMsIFByZWRpY2F0ZURlc2NyaXB0aW9uU3RhdGU+IHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZWRpdGluZ0RvbWFpbjogZmFsc2UsXG4gICAgICAgICAgICBlZGl0aW5nUmFuZ2U6IGZhbHNlLFxuICAgICAgICAgICAgcmFuZ2VWYWx1ZToge2tleTogJycsIHZhbHVlOiAnJ30sXG4gICAgICAgICAgICBkb21haW5WYWx1ZToge2tleTogJycsIHZhbHVlOiAnJ31cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHJhbmdlVmFsdWU6IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgICAgICBkb21haW5WYWx1ZTogdGhpcy5wcm9wcy5kb21haW5cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHM6IFByZWRpY2F0ZURlc2NyaXB0aW9uUHJvcHMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICByYW5nZVZhbHVlOiBuZXdQcm9wcy5yYW5nZSxcbiAgICAgICAgICAgIGRvbWFpblZhbHVlOiBuZXdQcm9wcy5kb21haW5cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFjY2VwdERvbWFpbkNoYW5nZXMoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuZG9tYWluQ2hhbmdlZCh0aGlzLnN0YXRlLmRvbWFpblZhbHVlKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkaXRpbmdEb21haW46IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbERvbWFpbkNoYW5nZXMoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlZGl0aW5nRG9tYWluOiBmYWxzZSwgZG9tYWluVmFsdWU6IHRoaXMucHJvcHMuZG9tYWlufSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFjY2VwdFJhbmdlQ2hhbmdlcygpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5yYW5nZUNoYW5nZWQodGhpcy5zdGF0ZS5yYW5nZVZhbHVlKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkaXRpbmdSYW5nZTogZmFsc2V9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuY2VsUmFuZ2VDaGFuZ2VzKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZWRpdGluZ0RvbWFpbjogZmFsc2UsIHJhbmdlVmFsdWU6IHRoaXMucHJvcHMucmFuZ2V9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuXG4gICAgICAgIGNvbnN0IGRvbWFpbkNoYW5nZWQgPSB0aGlzLnByb3BzLm1vZGUgPT09ICdlZGl0QWxsJyA/XG4gICAgICAgICAgICB0aGlzLnByb3BzLmRvbWFpbkNoYW5nZWQgOiAoYykgPT4gdGhpcy5zZXRTdGF0ZSh7IGRvbWFpblZhbHVlOiBjIH0pO1xuXG4gICAgICAgIGNvbnN0IHJhbmdlQ2hhbmdlZCA9IHRoaXMucHJvcHMubW9kZSA9PT0gJ2VkaXRBbGwnID9cbiAgICAgICAgICAgIHRoaXMucHJvcHMucmFuZ2VDaGFuZ2VkIDogKGMpID0+IHRoaXMuc2V0U3RhdGUoeyByYW5nZVZhbHVlOiBjIH0pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmVkaWNhdGUtZnVuY3Rpb24tZGVzY3JpcHRpb24nPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RvbWFpbic+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMubW9kZSA9PT0gJ2VkaXRBbGwnIHx8IHRoaXMuc3RhdGUuZWRpdGluZ0RvbWFpbiA/IChcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdzbWFsbCc+RG9tYWluPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPENvbWJvRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e3RoaXMucHJvcHMuZG9tYWluT3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVOYW1lPSdlbnRpdHkgdHlwZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93TmV3PXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmRvbWFpblZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWU9e2RvbWFpbkNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVOZXdWYWx1ZT17bm9vcH0gLz5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMubW9kZSA9PT0gJ2VkaXRTaW5nbGUnID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuYWNjZXB0RG9tYWluQ2hhbmdlcy5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1jaGVjaycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuY2FuY2VsRG9tYWluQ2hhbmdlcy5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS10aW1lcycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKDxkaXY+e3RoaXMucHJvcHMuZG9tYWluLmtleX0gPGkgY2xhc3NOYW1lPSdmYSBmYS1wZW5jaWwtc3F1YXJlLW8nXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPSdFZGl0J1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGVkaXRpbmdEb21haW46IHRydWUgfSl9PlxuICAgICAgICAgICAgICAgIDwvaT48L2Rpdj4pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYXJyb3cnPjxpIGNsYXNzTmFtZT0nZmEgZmEtbG9uZy1hcnJvdy1yaWdodCcgYXJpYS1oaWRkZW49J3RydWUnPjwvaT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYW5nZSc+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMubW9kZSA9PT0gJ2VkaXRBbGwnIHx8IHRoaXMuc3RhdGUuZWRpdGluZ1JhbmdlID8gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPlJhbmdlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDb21ib0Ryb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17dGhpcy5wcm9wcy5yYW5nZU9wdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZU5hbWU9J2VudGl0eSB0eXBlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93TmV3PXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5yYW5nZVZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFZhbHVlPXtyYW5nZUNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTmV3VmFsdWU9e25vb3B9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5tb2RlID09PSAnZWRpdFNpbmdsZScgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gIG9uQ2xpY2s9e3RoaXMuYWNjZXB0UmFuZ2VDaGFuZ2VzLmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLWNoZWNrJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gIG9uQ2xpY2s9e3RoaXMuY2FuY2VsUmFuZ2VDaGFuZ2VzLmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXRpbWVzJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKDxkaXY+e3RoaXMucHJvcHMucmFuZ2Uua2V5fSA8aSBjbGFzc05hbWU9J2ZhIGZhLXBlbmNpbC1zcXVhcmUtbydcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9J0VkaXQnXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgZWRpdGluZ1JhbmdlOiB0cnVlIH0pfT5cbiAgICAgICAgICAgICAgICA8L2k+PC9kaXY+KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj4pO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvZmllbGRzL1ByZWRpY2F0ZURlc2NyaXB0aW9uLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 56 */
/***/ function(module, exports) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nexports.literalTypes = [\r\n    { label: 'text', value: 'string', url: '', description: 'some text' },\r\n    { label: 'number', value: 'integer', url: '', description: 'a number' },\r\n    { label: 'date', value: 'date', url: '', description: 'a date' },\r\n    // { name: 'point', value: 'point', url: '', description: 'a point on a map '},\r\n    // { name: 'region', value: 'region', url: '', description: 'a region on a map'},\r\n    { label: 'source', value: 'source', url: '', description: 'a source in the database' }\r\n];\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2xpdGVyYWxUeXBlcy50cz83YzliIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRVUsb0JBQVksR0FBeUU7SUFDOUYsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFO0lBQ3JFLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRTtJQUN2RSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUM7SUFDaEUsK0VBQStFO0lBQy9FLGlGQUFpRjtJQUNoRixFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSwwQkFBMEIsRUFBQztDQUN4RixDQUFDIiwiZmlsZSI6IjU2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IDxEZXNjcmlwdGlvbiBNaXNzaW5nPlxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuZXhwb3J0IGNvbnN0IGxpdGVyYWxUeXBlczogeyBsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCB1cmw6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZyB9W10gPSBbXG4gICAgeyBsYWJlbDogJ3RleHQnLCB2YWx1ZTogJ3N0cmluZycsIHVybDogJycsIGRlc2NyaXB0aW9uOiAnc29tZSB0ZXh0JyB9LFxuICAgIHsgbGFiZWw6ICdudW1iZXInLCB2YWx1ZTogJ2ludGVnZXInLCB1cmw6ICcnLCBkZXNjcmlwdGlvbjogJ2EgbnVtYmVyJyB9LFxuICAgIHsgbGFiZWw6ICdkYXRlJywgdmFsdWU6ICdkYXRlJywgdXJsOiAnJywgZGVzY3JpcHRpb246ICdhIGRhdGUnfSxcbiAgIC8vIHsgbmFtZTogJ3BvaW50JywgdmFsdWU6ICdwb2ludCcsIHVybDogJycsIGRlc2NyaXB0aW9uOiAnYSBwb2ludCBvbiBhIG1hcCAnfSxcbiAgIC8vIHsgbmFtZTogJ3JlZ2lvbicsIHZhbHVlOiAncmVnaW9uJywgdXJsOiAnJywgZGVzY3JpcHRpb246ICdhIHJlZ2lvbiBvbiBhIG1hcCd9LFxuICAgIHsgbGFiZWw6ICdzb3VyY2UnLCB2YWx1ZTogJ3NvdXJjZScsIHVybDogJycsIGRlc2NyaXB0aW9uOiAnYSBzb3VyY2UgaW4gdGhlIGRhdGFiYXNlJ31cbl07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2xpdGVyYWxUeXBlcy50cyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 57 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nexports.AdvancedSearchWorkspace = (props) => (React.createElement(\"div\", { className: 'workspace-editor' },\r\n    React.createElement(\"h2\", null, \"Advanced Search\")));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL0FkdmFuY2VkU2VhcmNoV29ya3NwYWNlLnRzeD8yYWUyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBT2xCLCtCQUF1QixHQUNoQyxDQUFDLEtBQW1DLEtBQUssQ0FDekMsNkJBQUssU0FBUyxFQUFDLGtCQUFrQjtJQUM3QixrREFBd0IsQ0FDdEIsQ0FDVCxDQUFDIiwiZmlsZSI6IjU3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IEVtcHR5IHdvcmtzcGFjZSBmb3Igd2hlbiBub3RoaW5nIGlzIG9wZW4hXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBBcGlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5cbmludGVyZmFjZSBBZHZhbmNlZFNlYXJjaFdvcmtzcGFjZVByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG59XG5cbmV4cG9ydCBjb25zdCBBZHZhbmNlZFNlYXJjaFdvcmtzcGFjZSA6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxBZHZhbmNlZFNlYXJjaFdvcmtzcGFjZVByb3BzPiA9XG4gICAgKHByb3BzOiBBZHZhbmNlZFNlYXJjaFdvcmtzcGFjZVByb3BzKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3dvcmtzcGFjZS1lZGl0b3InPlxuICAgICAgICA8aDI+QWR2YW5jZWQgU2VhcmNoPC9oMj5cbiAgICA8L2Rpdj5cbik7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL3dvcmtzcGFjZS9BZHZhbmNlZFNlYXJjaFdvcmtzcGFjZS50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 58 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst EntityList_1 = __webpack_require__(59);\r\nconst PredicateList_1 = __webpack_require__(61);\r\nconst SourceList_1 = __webpack_require__(62);\r\nconst EntityTypeList_1 = __webpack_require__(63);\r\nexports.ObjectListWorkspace = (props) => (React.createElement(\"div\", { className: 'workspace-editor object-list' }, (() => {\r\n    switch (props.listType) {\r\n        case 'entity':\r\n            return (React.createElement(EntityList_1.EntityList, { api: props.api, query: props.query, dataStore: props.dataStore }));\r\n        case 'source':\r\n            return (React.createElement(SourceList_1.SourceList, { api: props.api, dataStore: props.dataStore }));\r\n        case 'predicate':\r\n            return (React.createElement(PredicateList_1.PredicateList, { api: props.api, dataStore: props.dataStore }));\r\n        case 'entity_type':\r\n            return (React.createElement(EntityTypeList_1.EntityTypeList, { api: props.api, dataStore: props.dataStore }));\r\n    }\r\n})()));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvd29ya3NwYWNlL09iamVjdExpc3RXb3Jrc3BhY2UudHN4P2U4YzgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFHL0IsNkNBQXVEO0FBQ3ZELGdEQUE2RDtBQUM3RCw2Q0FBdUQ7QUFDdkQsaURBQStEO0FBWWxELDJCQUFtQixHQUM1QixDQUFDLEtBQStCLEtBQUssQ0FDckMsNkJBQUssU0FBUyxFQUFDLDhCQUE4QixJQUN4QyxDQUFDO0lBQ0UsTUFBTSxFQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3BCLEtBQUssUUFBUTtZQUNULE1BQU0sQ0FBQyxDQUFDLG9CQUFDLHVCQUFVLElBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxTQUFTLEdBQUksQ0FBQyxDQUFDO1FBQzVGLEtBQUssUUFBUTtZQUNULE1BQU0sQ0FBQyxDQUFDLG9CQUFDLHVCQUFVLElBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxTQUFTLEdBQUksQ0FBQyxDQUFDO1FBQ3hFLEtBQUssV0FBVztZQUNaLE1BQU0sQ0FBQyxDQUFDLG9CQUFDLDZCQUFhLElBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxTQUFTLEdBQUksQ0FBQyxDQUFDO1FBQzNFLEtBQUssYUFBYTtZQUNkLE1BQU0sQ0FBQyxDQUFDLG9CQUFDLCtCQUFjLElBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxTQUFTLEdBQUksQ0FBQyxDQUFDO0lBQ2hGLENBQUM7QUFDTCxDQUFDLENBQUMsRUFBRSxDQUNGLENBQ1QsQ0FBQyIsImZpbGUiOiI1OC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBFbXB0eSB3b3Jrc3BhY2UgZm9yIHdoZW4gbm90aGluZyBpcyBvcGVuIVxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gJy4uLy4uL0FwaVNlcnZpY2UnO1xuXG5pbXBvcnQgeyBFbnRpdHlMaXN0IH0gZnJvbSAnLi4vb2JqZWN0X2xpc3QvRW50aXR5TGlzdCc7XG5pbXBvcnQgeyBQcmVkaWNhdGVMaXN0IH0gZnJvbSAnLi4vb2JqZWN0X2xpc3QvUHJlZGljYXRlTGlzdCc7XG5pbXBvcnQgeyBTb3VyY2VMaXN0IH0gZnJvbSAnLi4vb2JqZWN0X2xpc3QvU291cmNlTGlzdCc7XG5pbXBvcnQgeyBFbnRpdHlUeXBlTGlzdCB9IGZyb20gJy4uL29iamVjdF9saXN0L0VudGl0eVR5cGVMaXN0JztcblxuaW1wb3J0IHsgRGF0YVN0b3JlIH0gZnJvbSAnLi4vLi4vRGF0YVN0b3JlJztcblxuaW50ZXJmYWNlIE9iamVjdExpc3RXb3Jrc3BhY2VQcm9wcyB7XG4gICAgYXBpOiBBcGlTZXJ2aWNlO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBsaXN0VHlwZTogc3RyaW5nO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xuICAgIHF1ZXJ5OiBhbnk7XG59XG5cbmV4cG9ydCBjb25zdCBPYmplY3RMaXN0V29ya3NwYWNlIDogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PE9iamVjdExpc3RXb3Jrc3BhY2VQcm9wcz4gPVxuICAgIChwcm9wczogT2JqZWN0TGlzdFdvcmtzcGFjZVByb3BzKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3dvcmtzcGFjZS1lZGl0b3Igb2JqZWN0LWxpc3QnPlxuICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaChwcm9wcy5saXN0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGl0eSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoPEVudGl0eUxpc3QgYXBpPXtwcm9wcy5hcGl9IHF1ZXJ5PXtwcm9wcy5xdWVyeX0gZGF0YVN0b3JlPXtwcm9wcy5kYXRhU3RvcmV9IC8+KTtcbiAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDxTb3VyY2VMaXN0IGFwaT17cHJvcHMuYXBpfSBkYXRhU3RvcmU9e3Byb3BzLmRhdGFTdG9yZX0gLz4pO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3ByZWRpY2F0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoPFByZWRpY2F0ZUxpc3QgYXBpPXtwcm9wcy5hcGl9IGRhdGFTdG9yZT17cHJvcHMuZGF0YVN0b3JlfSAvPik7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW50aXR5X3R5cGUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDxFbnRpdHlUeXBlTGlzdCBhcGk9e3Byb3BzLmFwaX0gZGF0YVN0b3JlPXtwcm9wcy5kYXRhU3RvcmV9IC8+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkoKX1cbiAgICA8L2Rpdj5cbik7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL3dvcmtzcGFjZS9PYmplY3RMaXN0V29ya3NwYWNlLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 59 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst lev = __webpack_require__(60);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst ComboDropdown_1 = __webpack_require__(18);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst formatDate_1 = __webpack_require__(44);\r\nconst sortIcons = {\r\n    'none': 'fa fa-sort',\r\n    'asc': 'fa fa-sort-asc',\r\n    'desc': 'fa fa-sort-desc'\r\n};\r\nconst customColumns = (predicates, columns, updateColumnParams, rotateSort) => {\r\n    return [0, 1, 2].map((id) => {\r\n        const comboValue = { key: '', value: '' };\r\n        if (columns[id].predicate !== -1) {\r\n            const thisPred = predicates.find((pred) => pred.uid == columns[id].predicate);\r\n            if (thisPred !== undefined) {\r\n                comboValue.key = thisPred.label;\r\n            }\r\n            comboValue.value = columns[id].predicate;\r\n        }\r\n        return (React.createElement(\"td\", { key: `col-${id}` },\r\n            React.createElement(\"div\", { className: 'list-combo-header' },\r\n                React.createElement(\"div\", { className: 'combo-wrapper' },\r\n                    React.createElement(ComboDropdown_1.ComboDropdown, { value: comboValue, typeName: 'predicate', allowNew: false, setValue: (value) => updateColumnParams(id, 'p', value === null ? null : value.value), options: predicates.map((pred) => ({ key: pred.label, value: pred.uid.toString() })), createNewValue: lodash_1.noop, compact: true })),\r\n                React.createElement(\"div\", { className: 'order-wrapper' },\r\n                    React.createElement(\"i\", { className: sortIcons[columns[id].sort], onClick: () => rotateSort(id) })))));\r\n    });\r\n};\r\nclass EntityList extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            entities: [],\r\n            entityTypes: [],\r\n            predicates: [],\r\n            columns: [\r\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' },\r\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' },\r\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' }\r\n            ],\r\n            results: [],\r\n            entityType: { key: 'Any', value: 0 }\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.update(this.props);\r\n    }\r\n    componentWillReceiveProps(newProps) {\r\n        this.update(newProps);\r\n    }\r\n    update(props) {\r\n        const queryStringOptions = props.query;\r\n        const columns = lodash_1.cloneDeep(this.state.columns);\r\n        if (queryStringOptions !== null) {\r\n            for (let i = 1; i < 4; i += 1) {\r\n                columns[i - 1].predicate = queryStringOptions[`col${i}p`] || null;\r\n                columns[i - 1].sort = queryStringOptions[`col${i}s`] || null;\r\n                columns[i - 1].filterType = queryStringOptions[`col${i}f`] || '';\r\n                columns[i - 1].filterValue = queryStringOptions[`col${i}v`] || '';\r\n                columns[i - 1].invertFilter = queryStringOptions[`col${i}i`] || null;\r\n            }\r\n        }\r\n        this.setState({\r\n            columns,\r\n            queryData: queryStringOptions === null ? {} : queryStringOptions,\r\n        }, this.reload.bind(this));\r\n    }\r\n    reload() {\r\n        const setColumns = this.state.columns.filter((col) => col.predicate != -1);\r\n        this.props.api.getCollection(falcon_core_1.Record, ApiService_1.AppUrls.record, {\r\n            predicate: setColumns.map((col) => col.predicate),\r\n            entity: this.props.dataStore.all.entity.value.map((entity) => entity.uid)\r\n        })\r\n            .then((results) => this.setState({ results }));\r\n    }\r\n    addNew() {\r\n        const a = {\r\n            name: 'entity',\r\n            complete: () => {\r\n            },\r\n            cancel: () => { console.log('cancel'); },\r\n            settings: {\r\n                initialName: ''\r\n            }\r\n        };\r\n        Signaller_1.showModal.dispatch(a);\r\n    }\r\n    updateColumnParams(colId, key, value) {\r\n        this.context.router.transitionTo({\r\n            pathname: '/edit/entity',\r\n            query: Object.assign(this.state.queryData, { [`col${colId + 1}${key}`]: value })\r\n        });\r\n    }\r\n    rotateSort(colId) {\r\n        const columns = lodash_1.cloneDeep(this.state.columns);\r\n        switch (columns[colId].sort) {\r\n            case 'none':\r\n                columns[colId].sort = 'asc';\r\n                break;\r\n            case 'asc':\r\n                columns[colId].sort = 'desc';\r\n                break;\r\n            case 'desc':\r\n                columns[colId].sort = 'none';\r\n        }\r\n        this.setState({\r\n            columns\r\n        }, this.reload.bind(this));\r\n    }\r\n    addViewTab() {\r\n        Signaller_1.createTab.dispatch('entity', Date.now(), 'view', this.state.queryData);\r\n    }\r\n    render() {\r\n        const entities = this.props.dataStore.all.entity.value;\r\n        const predicates = this.props.dataStore.all.predicate.value;\r\n        const entityTypes = this.props.dataStore.all.entity_type.value;\r\n        const entityTypeOptions = entityTypes.map((entityType) => ({ key: entityType.label, value: entityType.uid }));\r\n        const tableData = entities.map((entity) => {\r\n            const entityType = entityTypes.find((t) => t.uid === entity.entityType);\r\n            const entityData = this.state.results.filter((res) => res.entity === entity.uid);\r\n            return {\r\n                uid: entity.uid,\r\n                label: entity.label,\r\n                entityType,\r\n                columns: this.state.columns.map((col) => {\r\n                    let value = '';\r\n                    if (entityData !== undefined && col.predicate !== -1) {\r\n                        const predicateData = entityData\r\n                            .filter((record) => record.predicate == col.predicate);\r\n                        if (predicateData !== undefined) {\r\n                            value = predicateData.map((pred) => {\r\n                                if (pred.valueType === 'date') {\r\n                                    return formatDate_1.formatDate(pred.value);\r\n                                }\r\n                                if (pred.valueType === 'source') {\r\n                                    if (pred.value === null) {\r\n                                        return 'Not set';\r\n                                    }\r\n                                    return this.props.dataStore.all.source.value.find((source) => source.uid === pred.value).label;\r\n                                }\r\n                                if (pred.valueType === 'entity') {\r\n                                    if (pred.value === null) {\r\n                                        return 'Not set';\r\n                                    }\r\n                                    return this.props.dataStore.all.entity.value.find((entity) => entity.uid === pred.value).label;\r\n                                }\r\n                                return pred.value;\r\n                            }).join(', ');\r\n                        }\r\n                        return value;\r\n                    }\r\n                })\r\n            };\r\n        })\r\n            .filter((row) => {\r\n            let keepRow = true;\r\n            this.state.columns.forEach((col, i) => {\r\n                if (col.filterType === 'contains' && col.filterValue.length > 0 && col.predicate !== null) {\r\n                    if (row.columns[i].toLowerCase().indexOf(col.filterValue.toLowerCase()) === -1) {\r\n                        keepRow = false;\r\n                    }\r\n                }\r\n                if (col.filterType === 'exists' && col.predicate !== null) {\r\n                    if (row.columns[i].length === 0) {\r\n                        keepRow = false;\r\n                    }\r\n                }\r\n                if (col.filterType === 'similar' && col.predicate !== null && col.filterValue.length > 0) {\r\n                    if (new lev(row.columns[i], col.filterValue).distance >= col.filterValue.length + 2) {\r\n                        keepRow = false;\r\n                    }\r\n                }\r\n            });\r\n            return keepRow;\r\n        })\r\n            .sort((row1, row2) => {\r\n            let score = 0;\r\n            this.state.columns.forEach((col, i) => {\r\n                if (col.sort !== 'none' && row1.columns[i] !== row2.columns[i]) {\r\n                    score += (row1.columns[i] > row2.columns[i] ? 1 : -1) * (Math.pow(10, 3 - i)) * (col.sort === 'asc' ? -1 : 1);\r\n                }\r\n            });\r\n            return score;\r\n        });\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header entity' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"h2\", null,\r\n                            \"All Entities \",\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', title: 'Add new entity', \"aria-hidden\": 'true', onClick: this.addNew.bind(this) }))),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-folder-open-o', \"aria-hidden\": 'true', onClick: this.addViewTab.bind(this) })))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null, \"#\"),\r\n                            React.createElement(\"td\", null, \"Label\"),\r\n                            React.createElement(\"td\", null, \"Type\"),\r\n                            customColumns(predicates, this.state.columns, this.updateColumnParams.bind(this), this.rotateSort.bind(this))),\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null),\r\n                            React.createElement(\"td\", null),\r\n                            React.createElement(\"td\", null,\r\n                                React.createElement(ComboDropdown_1.ComboDropdown, { value: this.state.entityType, typeName: 'entity type', allowNew: false, setValue: (entityType) => this.setState({ entityType }), options: entityTypeOptions, createNewValue: lodash_1.noop, compact: true })),\r\n                            this.state.columns.map((col, id) => (React.createElement(\"td\", { key: `col-${id}` },\r\n                                React.createElement(\"div\", { className: 'flex-fill' },\r\n                                    React.createElement(\"div\", null,\r\n                                        React.createElement(\"select\", { value: col.filterType, className: 'padded', onChange: (e) => this.updateColumnParams(id, 'f', e.target.value) },\r\n                                            React.createElement(\"option\", { value: 'any' }, \"Any\"),\r\n                                            React.createElement(\"option\", { value: 'exists' }, \"Exists\"),\r\n                                            React.createElement(\"option\", { value: 'contains' }, \"Contains\"),\r\n                                            React.createElement(\"option\", { value: 'similar' }, \"Similar\"))),\r\n                                    React.createElement(\"div\", null,\r\n                                        React.createElement(\"input\", { type: 'text', disabled: col.filterType === 'any' || col.filterType === 'exists', onChange: (e) => this.updateColumnParams(id, 'v', e.target.value), value: col.filterValue })))))))),\r\n                    React.createElement(\"tbody\", null, tableData.map((row) => (React.createElement(\"tr\", { key: `entity-${row.uid}` },\r\n                        React.createElement(\"td\", null, row.uid),\r\n                        React.createElement(\"td\", null,\r\n                            row.label,\r\n                            \" \",\r\n                            React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, uid: row.uid, tabType: 'entity' })),\r\n                        React.createElement(\"td\", null, row.entityType ? row.entityType.label : ''),\r\n                        [0, 1, 2].map((id) => (React.createElement(\"td\", { key: `col-val-${id}` }, row.columns[id])))))))))));\r\n    }\r\n}\r\nEntityList.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.EntityList = EntityList;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvb2JqZWN0X2xpc3QvRW50aXR5TGlzdC50c3g/OGJkMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUUvQixvQ0FBbUM7QUFFbkMsNENBQXVEO0FBRXZELDhDQUFvRTtBQUNwRSxnREFBc0U7QUFDdEUseUNBQXNEO0FBRXRELCtDQUErQztBQUUvQyw0Q0FBdUQ7QUFHdkQsNkNBQXFEO0FBMEJyRCxNQUFNLFNBQVMsR0FBRztJQUNkLE1BQU0sRUFBRSxZQUFZO0lBQ3BCLEtBQUssRUFBRSxnQkFBZ0I7SUFDdkIsTUFBTSxFQUFFLGlCQUFpQjtDQUM1QixDQUFDO0FBRUYsTUFBTSxhQUFhLEdBQUcsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLFVBQVU7SUFDdEUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1FBRXBCLE1BQU0sVUFBVSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDLENBQUM7UUFFekMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM5RSxFQUFFLENBQUMsQ0FBQyxRQUFRLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDekIsVUFBVSxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQ3BDLENBQUM7WUFDRCxVQUFVLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxFQUFF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LEdBQUcsRUFBRSxDQUFNO3dCQUNwRCxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsNEJBQUksR0FBRyxFQUFFLFdBQVcsRUFBRSxFQUFFLElBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBTSxDQUFDLENBQUMsQ0FDdkUsQ0FDUixDQUNKLENBQ08sQ0FDSixDQUNGLENBQ1IsQ0FDTCxDQUFDO0lBQ04sQ0FBQzs7QUFsUmEsdUJBQVksR0FBRztJQUN6QixNQUFNLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVTtDQUM1QyxDQUFDO0FBSk4sZ0NBcVJDIiwiZmlsZSI6IjU5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFNpZGViYXIgZm9yIGVkaXRvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgKiBhcyBsZXYgZnJvbSAnbGV2ZW5zaHRlaW4nO1xuXG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuLi8uLi9EYXRhU3RvcmUnO1xuaW1wb3J0IHsgRW50aXR5LCBFbnRpdHlUeXBlLCBQcmVkaWNhdGUsIFJlY29yZCB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcbmltcG9ydCB7IENvbWJvRHJvcGRvd24sIENvbWJvRHJvcGRvd25PcHRpb24gfSBmcm9tICcuLi9Db21ib0Ryb3Bkb3duJztcbmltcG9ydCB7IG5vb3AsIGNsb25lRGVlcCwgaXNVbmRlZmluZWQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBBZGRUYWJCdXR0b24gfSBmcm9tICcuLi9BZGRUYWJCdXR0b24nO1xuXG5pbXBvcnQgeyBzaG93TW9kYWwsIGNyZWF0ZVRhYiB9IGZyb20gJy4uLy4uL1NpZ25hbGxlcic7XG5pbXBvcnQgeyBNb2RhbERlZmluaXRpb24gfSBmcm9tICcuLi9tb2RhbC9Nb2RhbERlZmluaXRpb24nO1xuXG5pbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnLi4vLi4vaGVscGVyL2Zvcm1hdERhdGUnO1xuXG5pbnRlcmZhY2UgRW50aXR5TGlzdFByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgZGF0YVN0b3JlOiBEYXRhU3RvcmU7XG4gICAgcXVlcnk6IGFueTtcbn1cblxuaW50ZXJmYWNlIENvbHVtblNldHRpbmdzIHtcbiAgICBwcmVkaWNhdGU6IG51bWJlcjtcbiAgICBzb3J0OiAnbm9uZScgfCAnYXNjJyB8ICdkZXNjJztcbiAgICBmaWx0ZXJUeXBlOiAnYW55JyB8ICdleGlzdHMnIHwgJ2NvbnRhaW5zJyB8ICdzaW1pbGFyJztcbiAgICBpbnZlcnRGaWx0ZXI6IGJvb2xlYW47XG4gICAgZmlsdGVyVmFsdWU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEVudGl0eUxpc3RTdGF0ZSB7XG4gICAgZW50aXRpZXM6IEVudGl0eVtdO1xuICAgIGVudGl0eVR5cGVzOiBFbnRpdHlUeXBlW107XG4gICAgcHJlZGljYXRlczogUHJlZGljYXRlW107XG4gICAgY29sdW1uczogQ29sdW1uU2V0dGluZ3NbXTtcbiAgICByZXN1bHRzOiBSZWNvcmRbXTtcbiAgICBlbnRpdHlUeXBlOiBDb21ib0Ryb3Bkb3duT3B0aW9uO1xuICAgIHF1ZXJ5RGF0YTogYW55O1xufVxuXG5jb25zdCBzb3J0SWNvbnMgPSB7XG4gICAgJ25vbmUnOiAnZmEgZmEtc29ydCcsXG4gICAgJ2FzYyc6ICdmYSBmYS1zb3J0LWFzYycsXG4gICAgJ2Rlc2MnOiAnZmEgZmEtc29ydC1kZXNjJ1xufTtcblxuY29uc3QgY3VzdG9tQ29sdW1ucyA9IChwcmVkaWNhdGVzLCBjb2x1bW5zLCB1cGRhdGVDb2x1bW5QYXJhbXMsIHJvdGF0ZVNvcnQpID0+IHtcbiAgICByZXR1cm4gWzAsIDEsIDJdLm1hcCgoaWQpID0+IHtcblxuICAgICAgICBjb25zdCBjb21ib1ZhbHVlID0geyBrZXk6ICcnLCB2YWx1ZTogJyd9O1xuXG4gICAgICAgIGlmIChjb2x1bW5zW2lkXS5wcmVkaWNhdGUgIT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCB0aGlzUHJlZCA9IHByZWRpY2F0ZXMuZmluZCgocHJlZCkgPT4gcHJlZC51aWQgPT0gY29sdW1uc1tpZF0ucHJlZGljYXRlKTtcbiAgICAgICAgICAgIGlmICh0aGlzUHJlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29tYm9WYWx1ZS5rZXkgPSB0aGlzUHJlZC5sYWJlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbWJvVmFsdWUudmFsdWUgPSBjb2x1bW5zW2lkXS5wcmVkaWNhdGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRkIGtleT17YGNvbC0ke2lkfWB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaXN0LWNvbWJvLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb21iby13cmFwcGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDb21ib0Ryb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvbWJvVmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZU5hbWU9J3ByZWRpY2F0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd05ldz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWU9eyh2YWx1ZSkgPT4gdXBkYXRlQ29sdW1uUGFyYW1zKGlkLCAncCcgLCB2YWx1ZSA9PT0gbnVsbCA/IG51bGwgOiB2YWx1ZS52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17cHJlZGljYXRlcy5tYXAoKHByZWQpID0+ICh7IGtleTogcHJlZC5sYWJlbCwgdmFsdWU6IHByZWQudWlkLnRvU3RyaW5nKCl9KSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTmV3VmFsdWU9e25vb3B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFjdD17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nb3JkZXItd3JhcHBlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9e3NvcnRJY29uc1tjb2x1bW5zW2lkXS5zb3J0XX0gb25DbGljaz17KCkgPT4gcm90YXRlU29ydChpZCl9PjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICApO1xuICAgIH0pO1xufTtcblxuZXhwb3J0IGNsYXNzIEVudGl0eUxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RW50aXR5TGlzdFByb3BzLCBFbnRpdHlMaXN0U3RhdGU+IHtcblxuICAgIHB1YmxpYyBzdGF0aWMgY29udGV4dFR5cGVzID0ge1xuICAgICAgICByb3V0ZXI6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogRW50aXR5TGlzdFByb3BzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBlbnRpdGllczogW10sXG4gICAgICAgICAgICBlbnRpdHlUeXBlczogW10sXG4gICAgICAgICAgICBwcmVkaWNhdGVzOiBbXSxcbiAgICAgICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICAgICAgICB7IHByZWRpY2F0ZTogLTEsIHNvcnQ6ICdub25lJywgZmlsdGVyVHlwZTogJ2FueScsIGludmVydEZpbHRlcjogZmFsc2UsIGZpbHRlclZhbHVlOiAnJyB9LFxuICAgICAgICAgICAgICAgIHsgcHJlZGljYXRlOiAtMSwgc29ydDogJ25vbmUnLCBmaWx0ZXJUeXBlOiAnYW55JywgaW52ZXJ0RmlsdGVyOiBmYWxzZSwgZmlsdGVyVmFsdWU6ICcnIH0sXG4gICAgICAgICAgICAgICAgeyBwcmVkaWNhdGU6IC0xLCBzb3J0OiAnbm9uZScsIGZpbHRlclR5cGU6ICdhbnknLCBpbnZlcnRGaWx0ZXI6IGZhbHNlLCBmaWx0ZXJWYWx1ZTogJycgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHJlc3VsdHM6IFtdLFxuICAgICAgICAgICAgZW50aXR5VHlwZTogeyBrZXk6ICdBbnknLCB2YWx1ZTogMH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh0aGlzLnByb3BzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXdQcm9wczogRW50aXR5TGlzdFByb3BzKSB7XG4gICAgICB0aGlzLnVwZGF0ZShuZXdQcm9wcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZShwcm9wczogRW50aXR5TGlzdFByb3BzKSB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nT3B0aW9ucyA9IHByb3BzLnF1ZXJ5O1xuICAgICAgICBjb25zdCBjb2x1bW5zID0gY2xvbmVEZWVwKHRoaXMuc3RhdGUuY29sdW1ucyk7XG4gICAgICAgIGlmIChxdWVyeVN0cmluZ09wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNDsgaSArPSAxICkge1xuICAgICAgICAgICAgICBjb2x1bW5zW2kgLSAxXS5wcmVkaWNhdGUgPSBxdWVyeVN0cmluZ09wdGlvbnNbYGNvbCR7aX1wYF0gfHwgbnVsbDtcbiAgICAgICAgICAgICAgY29sdW1uc1tpIC0gMV0uc29ydCA9IHF1ZXJ5U3RyaW5nT3B0aW9uc1tgY29sJHtpfXNgXSB8fCBudWxsO1xuICAgICAgICAgICAgICBjb2x1bW5zW2kgLSAxXS5maWx0ZXJUeXBlID0gcXVlcnlTdHJpbmdPcHRpb25zW2Bjb2wke2l9ZmBdIHx8ICcnO1xuICAgICAgICAgICAgICBjb2x1bW5zW2kgLSAxXS5maWx0ZXJWYWx1ZSA9IHF1ZXJ5U3RyaW5nT3B0aW9uc1tgY29sJHtpfXZgXSB8fCAnJztcbiAgICAgICAgICAgICAgY29sdW1uc1tpIC0gMV0uaW52ZXJ0RmlsdGVyID0gcXVlcnlTdHJpbmdPcHRpb25zW2Bjb2wke2l9aWBdIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY29sdW1ucyxcbiAgICAgICAgICAgIHF1ZXJ5RGF0YTogcXVlcnlTdHJpbmdPcHRpb25zID09PSBudWxsID8ge30gOiBxdWVyeVN0cmluZ09wdGlvbnMsXG4gICAgICAgIH0sIHRoaXMucmVsb2FkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZWxvYWQoKSB7XG5cbiAgICAgICAgY29uc3Qgc2V0Q29sdW1ucyA9IHRoaXMuc3RhdGUuY29sdW1ucy5maWx0ZXIoKGNvbCkgPT4gY29sLnByZWRpY2F0ZSAhPSAtMSk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5hcGkuZ2V0Q29sbGVjdGlvbihSZWNvcmQsIEFwcFVybHMucmVjb3JkLCB7XG4gICAgICAgICAgICBwcmVkaWNhdGU6IHNldENvbHVtbnMubWFwKChjb2wpID0+IGNvbC5wcmVkaWNhdGUpLFxuICAgICAgICAgICAgZW50aXR5OiB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5LnZhbHVlLm1hcCgoZW50aXR5KSA9PiBlbnRpdHkudWlkKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0cykgPT4gdGhpcy5zZXRTdGF0ZSh7IHJlc3VsdHMgfSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGROZXcoKSB7XG4gICAgICAgIGNvbnN0IGEgOiBNb2RhbERlZmluaXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiAnZW50aXR5JyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB7IGNvbnNvbGUubG9nKCdjYW5jZWwnKTsgfSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE5hbWU6ICcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2hvd01vZGFsLmRpc3BhdGNoKGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVDb2x1bW5QYXJhbXMoY29sSWQ6IG51bWJlciwga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnJvdXRlci50cmFuc2l0aW9uVG8oe1xuICAgICAgICAgIHBhdGhuYW1lOiAnL2VkaXQvZW50aXR5JyxcbiAgICAgICAgICBxdWVyeTogT2JqZWN0LmFzc2lnbih0aGlzLnN0YXRlLnF1ZXJ5RGF0YSwgeyBbYGNvbCR7Y29sSWQgKyAxfSR7a2V5fWBdOiB2YWx1ZSB9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcm90YXRlU29ydChjb2xJZDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSBjbG9uZURlZXAodGhpcy5zdGF0ZS5jb2x1bW5zKTtcbiAgICAgICAgc3dpdGNoIChjb2x1bW5zW2NvbElkXS5zb3J0KSB7XG4gICAgICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgICAgICAgICBjb2x1bW5zW2NvbElkXS5zb3J0ID0gJ2FzYyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhc2MnOlxuICAgICAgICAgICAgICAgIGNvbHVtbnNbY29sSWRdLnNvcnQgPSAnZGVzYyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkZXNjJzpcbiAgICAgICAgICAgICAgICBjb2x1bW5zW2NvbElkXS5zb3J0ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY29sdW1uc1xuICAgICAgICB9LCB0aGlzLnJlbG9hZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVmlld1RhYigpIHtcbiAgICAgIGNyZWF0ZVRhYi5kaXNwYXRjaCgnZW50aXR5JywgRGF0ZS5ub3coKSwgJ3ZpZXcnLCB0aGlzLnN0YXRlLnF1ZXJ5RGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcblxuICAgICAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5lbnRpdHkudmFsdWU7XG4gICAgICAgIGNvbnN0IHByZWRpY2F0ZXMgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwucHJlZGljYXRlLnZhbHVlO1xuICAgICAgICBjb25zdCBlbnRpdHlUeXBlcyA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5lbnRpdHlfdHlwZS52YWx1ZTtcblxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlT3B0aW9ucyA9IGVudGl0eVR5cGVzLm1hcCgoZW50aXR5VHlwZSkgPT4gKHsga2V5OiBlbnRpdHlUeXBlLmxhYmVsLCB2YWx1ZTogZW50aXR5VHlwZS51aWR9KSk7XG5cbiAgICAgICAgY29uc3QgdGFibGVEYXRhID0gZW50aXRpZXMubWFwKChlbnRpdHkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSBlbnRpdHlUeXBlcy5maW5kKCh0KSA9PiB0LnVpZCA9PT0gZW50aXR5LmVudGl0eVR5cGUpO1xuICAgICAgICAgICAgY29uc3QgZW50aXR5RGF0YSA9IHRoaXMuc3RhdGUucmVzdWx0cy5maWx0ZXIoKHJlcykgPT4gcmVzLmVudGl0eSA9PT0gZW50aXR5LnVpZCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdWlkOiBlbnRpdHkudWlkLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBlbnRpdHkubGFiZWwsXG4gICAgICAgICAgICAgICAgZW50aXR5VHlwZSxcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLnN0YXRlLmNvbHVtbnMubWFwKChjb2wpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5RGF0YSAhPT0gdW5kZWZpbmVkICYmIGNvbC5wcmVkaWNhdGUgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZGljYXRlRGF0YSA9IGVudGl0eURhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChyZWNvcmQpID0+IHJlY29yZC5wcmVkaWNhdGUgPT0gY29sLnByZWRpY2F0ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlZGljYXRlRGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcHJlZGljYXRlRGF0YS5tYXAoKHByZWQpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWQudmFsdWVUeXBlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShwcmVkLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWQudmFsdWVUeXBlID09PSAnc291cmNlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVkLnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnTm90IHNldCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuc291cmNlLnZhbHVlLmZpbmQoKHNvdXJjZSkgPT4gc291cmNlLnVpZCA9PT0gcHJlZC52YWx1ZSkubGFiZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVkLnZhbHVlVHlwZSA9PT0gJ2VudGl0eScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlZC52YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ05vdCBzZXQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLmVudGl0eS52YWx1ZS5maW5kKChlbnRpdHkpID0+IGVudGl0eS51aWQgPT09IHByZWQudmFsdWUpLmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlZC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuam9pbignLCAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChyb3cpID0+IHtcbiAgICAgICAgICAgIGxldCBrZWVwUm93ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY29sdW1ucy5mb3JFYWNoKChjb2wsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpbHRlclR5cGUgPT09ICdjb250YWlucycgJiYgY29sLmZpbHRlclZhbHVlLmxlbmd0aCA+IDAgJiYgY29sLnByZWRpY2F0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93LmNvbHVtbnNbaV0udG9Mb3dlckNhc2UoKS5pbmRleE9mKGNvbC5maWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtlZXBSb3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb2wuZmlsdGVyVHlwZSA9PT0gJ2V4aXN0cycgJiYgY29sLnByZWRpY2F0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93LmNvbHVtbnNbaV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZWVwUm93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpbHRlclR5cGUgPT09ICdzaW1pbGFyJyAmJiBjb2wucHJlZGljYXRlICE9PSBudWxsICYmIGNvbC5maWx0ZXJWYWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXcgbGV2KHJvdy5jb2x1bW5zW2ldLCBjb2wuZmlsdGVyVmFsdWUpLmRpc3RhbmNlID49IGNvbC5maWx0ZXJWYWx1ZS5sZW5ndGggKyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZWVwUm93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4ga2VlcFJvdztcbiAgICAgICAgfSlcbiAgICAgICAgLnNvcnQoKHJvdzEsIHJvdzIpID0+IHtcbiAgICAgICAgICAgIGxldCBzY29yZSA9IDA7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmNvbHVtbnMuZm9yRWFjaCgoY29sLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5zb3J0ICE9PSAnbm9uZScgJiYgcm93MS5jb2x1bW5zW2ldICE9PSByb3cyLmNvbHVtbnNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcmUgKz0gKHJvdzEuY29sdW1uc1tpXSA+IHJvdzIuY29sdW1uc1tpXSA/IDEgOiAtMSkgKiAoTWF0aC5wb3coMTAsIDMgLSBpKSkgKiAoY29sLnNvcnQgPT09ICdhc2MnID8gLTEgOiAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzY29yZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3dvcmtzcGFjZS1lZGl0b3InPlxuICAgICAgICAgICAgPGhlYWRlciBjbGFzc05hbWU9J2VkaXRvci1oZWFkZXIgZW50aXR5Jz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByaW1hcnktdG9vbGJhcic+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21haW4tdG9vbGJhcic+XG4gICAgICAgICAgICAgICAgICAgIDxoMj5BbGwgRW50aXRpZXMgPGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZhIGZhLXBsdXMtY2lyY2xlIGFkZCBidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9J0FkZCBuZXcgZW50aXR5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuYWRkTmV3LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgID48L2k+PC9oMj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3N1Yi10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmYSBmYS1mb2xkZXItb3Blbi1vJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuYWRkVmlld1RhYi5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9oZWFkZXI+XG5cbiAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT0nZWRpdG9yLWJvZHknPlxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9J3RhYmxlJz5cbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4jPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+TGFiZWw8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5UeXBlPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGN1c3RvbUNvbHVtbnMocHJlZGljYXRlcywgdGhpcy5zdGF0ZS5jb2x1bW5zLCB0aGlzLnVwZGF0ZUNvbHVtblBhcmFtcy5iaW5kKHRoaXMpLCB0aGlzLnJvdGF0ZVNvcnQuYmluZCh0aGlzKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbWJvRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmVudGl0eVR5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlTmFtZT0nZW50aXR5IHR5cGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd05ldz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRWYWx1ZT17KGVudGl0eVR5cGUpID0+IHRoaXMuc2V0U3RhdGUoeyBlbnRpdHlUeXBlIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17ZW50aXR5VHlwZU9wdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVOZXdWYWx1ZT17bm9vcH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhY3Q9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmNvbHVtbnMubWFwKChjb2wsIGlkKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBrZXk9e2Bjb2wtJHtpZH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWZpbGwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e2NvbC5maWx0ZXJUeXBlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncGFkZGVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdGhpcy51cGRhdGVDb2x1bW5QYXJhbXMoaWQsICdmJywgZS50YXJnZXQudmFsdWUpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2FueSc+QW55PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSdleGlzdHMnPkV4aXN0czwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nY29udGFpbnMnPkNvbnRhaW5zPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSdzaW1pbGFyJz5TaW1pbGFyPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2NvbC5maWx0ZXJUeXBlID09PSAnYW55JyB8fCBjb2wuZmlsdGVyVHlwZSA9PT0gJ2V4aXN0cyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHRoaXMudXBkYXRlQ29sdW1uUGFyYW1zKGlkLCAndicsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjb2wuZmlsdGVyVmFsdWV9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAge3RhYmxlRGF0YS5tYXAoKHJvdykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2BlbnRpdHktJHtyb3cudWlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3Jvdy51aWR9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntyb3cubGFiZWx9IDxBZGRUYWJCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdG9yZT17dGhpcy5wcm9wcy5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aWQ9e3Jvdy51aWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPSdlbnRpdHknLz48L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3Jvdy5lbnRpdHlUeXBlID8gcm93LmVudGl0eVR5cGUubGFiZWwgOiAnJ308L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7WzAsMSwyXS5tYXAoKGlkKSA9PiAoPHRkIGtleT17YGNvbC12YWwtJHtpZH1gfT57cm93LmNvbHVtbnNbaWRdfTwvdGQ+KSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvb2JqZWN0X2xpc3QvRW50aXR5TGlzdC50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 60 */
/***/ function(module, exports) {

	eval("module.exports = require(\"levenshtein\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJsZXZlbnNodGVpblwiP2JhNmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJsZXZlbnNodGVpblwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImxldmVuc2h0ZWluXCJcbi8vIG1vZHVsZSBpZCA9IDYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 61 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst SearchBar_1 = __webpack_require__(35);\r\nclass PredicateList extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            filterFunc: () => true\r\n        };\r\n    }\r\n    addNew() {\r\n        const a = {\r\n            name: 'predicate',\r\n            complete: () => {\r\n            },\r\n            cancel: () => { console.log('cancel'); },\r\n            settings: {\r\n                initialName: ''\r\n            }\r\n        };\r\n        Signaller_1.showModal.dispatch(a);\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header predicate' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"h2\", null,\r\n                            \"All Properties \",\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', title: 'Add new property', \"aria-hidden\": 'true', onClick: this.addNew.bind(this) }))))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(SearchBar_1.SearchBar, { getValue: (a) => a.label, setFilterFunc: (f) => this.setState({ filterFunc: f }) }),\r\n                React.createElement(\"table\", { className: 'table gap' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null, \"#\"),\r\n                            React.createElement(\"td\", null, \"Label\"),\r\n                            React.createElement(\"td\", null, \"Domain\"),\r\n                            React.createElement(\"td\", null, \"Range\"))),\r\n                    React.createElement(\"tbody\", null, this.props.dataStore.all.predicate.value.filter(this.state.filterFunc).map((predicate) => {\r\n                        const entityType = this.props.dataStore.all.entity_type.value.find((t) => t.uid === predicate.domain);\r\n                        const rangeType = predicate.rangeIsReference ?\r\n                            this.props.dataStore.all.entity_type.value.find((t) => t.uid === predicate.range) :\r\n                            predicate.range;\r\n                        return (React.createElement(\"tr\", { key: `predicate-${predicate.uid}` },\r\n                            React.createElement(\"td\", null,\r\n                                predicate.uid,\r\n                                \" \",\r\n                                React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, uid: predicate.uid, tabType: 'predicate' })),\r\n                            React.createElement(\"td\", null, predicate.label),\r\n                            React.createElement(\"td\", null, entityType ? entityType.label : ''),\r\n                            React.createElement(\"td\", null, predicate.rangeIsReference ? rangeType ? rangeType.label : '' : rangeType)));\r\n                    }))))));\r\n    }\r\n}\r\nexports.PredicateList = PredicateList;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvb2JqZWN0X2xpc3QvUHJlZGljYXRlTGlzdC50c3g/NjVhZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUsvQiwrQ0FBK0M7QUFHL0MsNENBQTRDO0FBRzVDLDRDQUF5QztBQWtCekMsbUJBQTJCLFNBQVEsS0FBSyxDQUFDLFNBQWlEO0lBRXRGO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsVUFBVSxFQUFFLE1BQU0sSUFBSTtTQUN6QixDQUFDO0lBQ04sQ0FBQztJQUVNLE1BQU07UUFDVCxNQUFNLENBQUMsR0FBcUI7WUFDeEIsSUFBSSxFQUFFLFdBQVc7WUFDakIsUUFBUSxFQUFFO1lBQ1YsQ0FBQztZQUNELE1BQU0sRUFBRSxRQUFRLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUM7WUFDdEMsUUFBUSxFQUFFO2dCQUNOLFdBQVcsRUFBRSxFQUFFO2FBQ2xCO1NBQ0osQ0FBQztRQUVGLHFCQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFFTSxNQUFNO1FBQ1QsTUFBTSxDQUFDLENBQ1AsNkJBQUssU0FBUyxFQUFDLGtCQUFrQjtZQUM3QixnQ0FBUSxTQUFTLEVBQUMseUJBQXlCO2dCQUN6Qyw2QkFBSyxTQUFTLEVBQUMsaUJBQWlCO29CQUM5Qiw2QkFBSyxTQUFTLEVBQUMsY0FBYzt3QkFDekI7OzRCQUFtQiwyQkFDZixTQUFTLEVBQUMsOEJBQThCLEVBQ3hDLEtBQUssRUFBQyxrQkFBa0IsaUJBQ1osTUFBTSxFQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQzlCLENBQUssQ0FDUixDQUNGLENBQ0M7WUFFVCxpQ0FBUyxTQUFTLEVBQUMsYUFBYTtnQkFFNUIsb0JBQUMscUJBQVMsSUFDTixRQUFRLEVBQUUsQ0FBQyxDQUFZLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFDbkMsYUFBYSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FDeEQ7Z0JBRUYsK0JBQU8sU0FBUyxFQUFDLFdBQVc7b0JBQ3hCO3dCQUNJOzRCQUNJLG9DQUFVOzRCQUNWLHdDQUFjOzRCQUNkLHlDQUFlOzRCQUNmLHdDQUFjLENBQ2IsQ0FDRDtvQkFDUixtQ0FDQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTO3dCQUNsRixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQ3RHLE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0I7NEJBQ3hDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLFNBQVMsQ0FBQyxLQUFLLENBQUM7NEJBQ2pGLFNBQVMsQ0FBQyxLQUFLLENBQUM7d0JBQ3BCLE1BQU0sQ0FBQyxDQUNILDRCQUFJLEdBQUcsRUFBRSxhQUFhLFNBQVMsQ0FBQyxHQUFHLEVBQUU7NEJBQ2pDO2dDQUFLLFNBQVMsQ0FBQyxHQUFHOztnQ0FBRSxvQkFBQywyQkFBWSxJQUM3QixTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQy9CLEdBQUcsRUFBRSxTQUFTLENBQUMsR0FBRyxFQUNsQixPQUFPLEVBQUMsV0FBVyxHQUFHLENBQUs7NEJBQy9CLGdDQUFLLFNBQVMsQ0FBQyxLQUFLLENBQU07NEJBQzFCLGdDQUFLLFVBQVUsR0FBRyxVQUFVLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBTTs0QkFDN0MsZ0NBQUssU0FBUyxDQUFDLGdCQUFnQixHQUFHLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQU0sQ0FDbkYsQ0FDUixDQUFDO29CQUFBLENBQUMsQ0FDTixDQUNPLENBQ0osQ0FDRixDQUNSLENBQ0wsQ0FBQztJQUNOLENBQUM7Q0FDSjtBQS9FRCxzQ0ErRUMiLCJmaWxlIjoiNjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgU2lkZWJhciBmb3IgZWRpdG9yXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICcuLi8uLi9BcGlTZXJ2aWNlJztcbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcblxuaW1wb3J0IHsgQWRkVGFiQnV0dG9uIH0gZnJvbSAnLi4vQWRkVGFiQnV0dG9uJztcbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uL0RhdGFTdG9yZSc7XG5cbmltcG9ydCB7IHNob3dNb2RhbCB9IGZyb20gJy4uLy4uL1NpZ25hbGxlcic7XG5pbXBvcnQgeyBNb2RhbERlZmluaXRpb24gfSBmcm9tICcuLi9tb2RhbC9Nb2RhbERlZmluaXRpb24nO1xuXG5pbXBvcnQgeyBTZWFyY2hCYXIgfSBmcm9tICcuLi9TZWFyY2hCYXInO1xuXG5cbmludGVyZmFjZSBQcmVkaWNhdGVMaXN0UHJvcHMge1xuICAgIGFwaTogQXBpU2VydmljZTtcbiAgICBkYXRhU3RvcmU6IERhdGFTdG9yZTtcbn1cblxuaW50ZXJmYWNlIFByZWRpY2F0ZUxpc3RTdGF0ZSB7XG4gICAgZmlsdGVyRnVuYzogKHA6IFByZWRpY2F0ZSkgPT4gYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIENvbHVtblNldHRpbmdzIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgbnVsbGFibGU6IGJvb2xlYW47XG5cbn1cblxuZXhwb3J0IGNsYXNzIFByZWRpY2F0ZUxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJlZGljYXRlTGlzdFByb3BzLCBQcmVkaWNhdGVMaXN0U3RhdGU+IHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZmlsdGVyRnVuYzogKCkgPT4gdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGROZXcoKSB7XG4gICAgICAgIGNvbnN0IGEgOiBNb2RhbERlZmluaXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiAncHJlZGljYXRlJyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB7IGNvbnNvbGUubG9nKCdjYW5jZWwnKX0sXG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIGluaXRpYWxOYW1lOiAnJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNob3dNb2RhbC5kaXNwYXRjaChhKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nd29ya3NwYWNlLWVkaXRvcic+XG4gICAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT0nZWRpdG9yLWhlYWRlciBwcmVkaWNhdGUnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbWFyeS10b29sYmFyJz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWFpbi10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgPGgyPkFsbCBQcm9wZXJ0aWVzIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZhIGZhLXBsdXMtY2lyY2xlIGFkZCBidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT0nQWRkIG5ldyBwcm9wZXJ0eSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5hZGROZXcuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgPjwvaT48L2gyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9J2VkaXRvci1ib2R5Jz5cblxuICAgICAgICAgICAgICAgIDxTZWFyY2hCYXJcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWU9eyhhOiBQcmVkaWNhdGUpID0+IGEubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgIHNldEZpbHRlckZ1bmM9eyhmKSA9PiB0aGlzLnNldFN0YXRlKHsgZmlsdGVyRnVuYzogZiB9KX1cbiAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0ndGFibGUgZ2FwJz5cbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4jPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+TGFiZWw8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5Eb21haW48L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5SYW5nZTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwucHJlZGljYXRlLnZhbHVlLmZpbHRlcih0aGlzLnN0YXRlLmZpbHRlckZ1bmMpLm1hcCgocHJlZGljYXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLmVudGl0eV90eXBlLnZhbHVlLmZpbmQoKHQpID0+IHQudWlkID09PSBwcmVkaWNhdGUuZG9tYWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlVHlwZSA9IHByZWRpY2F0ZS5yYW5nZUlzUmVmZXJlbmNlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5X3R5cGUudmFsdWUuZmluZCgodCkgPT4gdC51aWQgPT09IHByZWRpY2F0ZS5yYW5nZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZS5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YHByZWRpY2F0ZS0ke3ByZWRpY2F0ZS51aWR9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57cHJlZGljYXRlLnVpZH0gPEFkZFRhYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXt0aGlzLnByb3BzLmRhdGFTdG9yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpZD17cHJlZGljYXRlLnVpZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYlR5cGU9J3ByZWRpY2F0ZScgLz48L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3ByZWRpY2F0ZS5sYWJlbH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2VudGl0eVR5cGUgPyBlbnRpdHlUeXBlLmxhYmVsIDogJyd9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntwcmVkaWNhdGUucmFuZ2VJc1JlZmVyZW5jZSA/IHJhbmdlVHlwZSA/IHJhbmdlVHlwZS5sYWJlbCA6ICcnIDogcmFuZ2VUeXBlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7fVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9vYmplY3RfbGlzdC9QcmVkaWNhdGVMaXN0LnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 62 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst SearchBar_1 = __webpack_require__(35);\r\nclass SourceList extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            filterFunc: () => true,\r\n            mode: 'list'\r\n        };\r\n    }\r\n    addNew() {\r\n        const a = {\r\n            name: 'source',\r\n            complete: () => {\r\n            },\r\n            cancel: () => { console.log('cancel'); },\r\n            settings: {}\r\n        };\r\n        Signaller_1.showModal.dispatch(a);\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header source' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"h2\", null,\r\n                            \"All Sources \",\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', \"aria-hidden\": 'true', title: 'Add new source', onClick: this.addNew.bind(this) })))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'source ' + (this.state.mode === 'list' ? 'selected' : ''), onClick: () => this.setState({ mode: 'list' }) }, \"LIST\"),\r\n                        React.createElement(\"div\", { className: 'source ' + (this.state.mode === 'tree' ? 'selected' : ''), onClick: () => this.setState({ mode: 'tree' }) }, \"TREE\")))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(SearchBar_1.SearchBar, { getValue: (a) => a.label, setFilterFunc: (f) => this.setState({ filterFunc: f }) }),\r\n                this.state.mode === 'list' ? (React.createElement(\"table\", { className: 'table gap' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null, \"#\"),\r\n                            React.createElement(\"td\", null, \"Name\"),\r\n                            React.createElement(\"td\", null, \"Parent\"))),\r\n                    React.createElement(\"tbody\", null, this.props.dataStore.all.source.value.filter(this.state.filterFunc).map((source) => {\r\n                        return (React.createElement(\"tr\", { key: `source-${source.uid}` },\r\n                            React.createElement(\"td\", null,\r\n                                source.uid,\r\n                                \" \",\r\n                                React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, uid: source.uid, tabType: 'source' })),\r\n                            React.createElement(\"td\", null, source.label),\r\n                            React.createElement(\"td\", null, source.parent)));\r\n                    })))) : null)));\r\n    }\r\n}\r\nexports.SourceList = SourceList;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvb2JqZWN0X2xpc3QvU291cmNlTGlzdC50c3g/ODk1NiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQU8vQiwrQ0FBK0M7QUFFL0MsNENBQTRDO0FBRzVDLDRDQUF5QztBQWtCekMsZ0JBQXdCLFNBQVEsS0FBSyxDQUFDLFNBQTJDO0lBRTdFO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsVUFBVSxFQUFFLE1BQU0sSUFBSTtZQUN0QixJQUFJLEVBQUUsTUFBTTtTQUNmLENBQUM7SUFDTixDQUFDO0lBRU0sTUFBTTtRQUNULE1BQU0sQ0FBQyxHQUFxQjtZQUN4QixJQUFJLEVBQUUsUUFBUTtZQUNkLFFBQVEsRUFBRTtZQUNWLENBQUM7WUFDRCxNQUFNLEVBQUUsUUFBUSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFDO1lBQ3RDLFFBQVEsRUFBRSxFQUFFO1NBQ2YsQ0FBQztRQUVGLHFCQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFHTSxNQUFNO1FBQ1QsTUFBTSxDQUFDLENBQ04sNkJBQUssU0FBUyxFQUFDLGtCQUFrQjtZQUM5QixnQ0FBUSxTQUFTLEVBQUMsc0JBQXNCO2dCQUN0Qyw2QkFBSyxTQUFTLEVBQUMsaUJBQWlCO29CQUM5Qiw2QkFBSyxTQUFTLEVBQUMsY0FBYzt3QkFDekI7OzRCQUFnQiwyQkFDWixTQUFTLEVBQUMsOEJBQThCLGlCQUM1QixNQUFNLEVBQ2xCLEtBQUssRUFBQyxnQkFBZ0IsRUFDdEIsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUM5QixDQUFLLENBQ1IsQ0FDRjtnQkFDTiw2QkFBSyxTQUFTLEVBQUMsbUJBQW1CO29CQUNoQyw2QkFBSyxTQUFTLEVBQUMsU0FBUzt3QkFFdEIsNkJBQUssU0FBUyxFQUFFLFNBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLE1BQU0sR0FBRyxVQUFVLEdBQUcsRUFBRSxDQUFDLEVBQ3hFLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsV0FBWTt3QkFFNUQsNkJBQU0sU0FBUyxFQUFFLFNBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLE1BQU0sR0FBRyxVQUFVLEdBQUcsRUFBRSxDQUFDLEVBQ3pFLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsV0FBWSxDQUV4RCxDQUNGLENBQ0M7WUFFVCxpQ0FBUyxTQUFTLEVBQUMsYUFBYTtnQkFFNUIsb0JBQUMscUJBQVMsSUFDTixRQUFRLEVBQUUsQ0FBQyxDQUFTLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFDaEMsYUFBYSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FDeEQ7Z0JBRUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssTUFBTSxHQUFHLENBQzVCLCtCQUFPLFNBQVMsRUFBQyxXQUFXO29CQUMxQjt3QkFDSTs0QkFDSSxvQ0FBVTs0QkFDVix1Q0FBYTs0QkFDYix5Q0FBZSxDQUNkLENBQ0Q7b0JBQ1IsbUNBQ0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTTt3QkFDNUUsTUFBTSxDQUFDLENBQ0gsNEJBQUksR0FBRyxFQUFFLFVBQVUsTUFBTSxDQUFDLEdBQUcsRUFBRTs0QkFDM0I7Z0NBQUssTUFBTSxDQUFDLEdBQUc7O2dDQUFFLG9CQUFDLDJCQUFZLElBQzFCLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFDL0IsR0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQ2YsT0FBTyxFQUFDLFFBQVEsR0FBRyxDQUFLOzRCQUM1QixnQ0FBSyxNQUFNLENBQUMsS0FBSyxDQUFNOzRCQUN2QixnQ0FBSyxNQUFNLENBQUMsTUFBTSxDQUFNLENBQ3ZCLENBQ1IsQ0FBQztvQkFBQSxDQUFDLENBQ04sQ0FDTyxDQUNGLENBQ1QsR0FBRyxJQUFJLENBR0YsQ0FDUixDQUNMLENBQUM7SUFDTixDQUFDO0NBQ0o7QUF4RkQsZ0NBd0ZDIiwiZmlsZSI6IjYyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFNpZGViYXIgZm9yIGVkaXRvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBBcGlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuLi8uLi9EYXRhU3RvcmUnO1xuXG5pbXBvcnQgeyBTb3VyY2UgfSBmcm9tICdmYWxjb24tY29yZSc7XG5cbmltcG9ydCB7IEFkZFRhYkJ1dHRvbiB9IGZyb20gJy4uL0FkZFRhYkJ1dHRvbic7XG5cbmltcG9ydCB7IHNob3dNb2RhbCB9IGZyb20gJy4uLy4uL1NpZ25hbGxlcic7XG5pbXBvcnQgeyBNb2RhbERlZmluaXRpb24gfSBmcm9tICcuLi9tb2RhbC9Nb2RhbERlZmluaXRpb24nO1xuXG5pbXBvcnQgeyBTZWFyY2hCYXIgfSBmcm9tICcuLi9TZWFyY2hCYXInO1xuXG5pbnRlcmZhY2UgU291cmNlTGlzdFByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgZGF0YVN0b3JlOiBEYXRhU3RvcmU7XG59XG5cbmludGVyZmFjZSBTb3VyY2VMaXN0U3RhdGUge1xuICAgIGZpbHRlckZ1bmM6IChwOiBTb3VyY2UpID0+IGJvb2xlYW47XG4gICAgbW9kZTogJ2xpc3QnIHwgJ3RyZWUnO1xufVxuXG5pbnRlcmZhY2UgQ29sdW1uU2V0dGluZ3Mge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBudWxsYWJsZTogYm9vbGVhbjtcblxufVxuXG5leHBvcnQgY2xhc3MgU291cmNlTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxTb3VyY2VMaXN0UHJvcHMsIFNvdXJjZUxpc3RTdGF0ZT4ge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBmaWx0ZXJGdW5jOiAoKSA9PiB0cnVlLFxuICAgICAgICAgICAgbW9kZTogJ2xpc3QnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGFkZE5ldygpIHtcbiAgICAgICAgY29uc3QgYSA6IE1vZGFsRGVmaW5pdGlvbiA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdzb3VyY2UnLFxuICAgICAgICAgICAgY29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWw6ICgpID0+IHsgY29uc29sZS5sb2coJ2NhbmNlbCcpfSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIHNob3dNb2RhbC5kaXNwYXRjaChhKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nd29ya3NwYWNlLWVkaXRvcic+XG4gICAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT0nZWRpdG9yLWhlYWRlciBzb3VyY2UnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbWFyeS10b29sYmFyJz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWFpbi10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgPGgyPkFsbCBTb3VyY2VzIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZhIGZhLXBsdXMtY2lyY2xlIGFkZCBidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPSdBZGQgbmV3IHNvdXJjZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuYWRkTmV3LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgID48L2k+PC9oMj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZWNvbmRhcnktdG9vbGJhcic+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RhYi1iYXInPlxuXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J3NvdXJjZSAnICsgKHRoaXMuc3RhdGUubW9kZSA9PT0gJ2xpc3QnID8gJ3NlbGVjdGVkJyA6ICcnKX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7IG1vZGU6ICdsaXN0JyB9KX0+TElTVDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICA8ZGl2ICBjbGFzc05hbWU9eydzb3VyY2UgJyArICh0aGlzLnN0YXRlLm1vZGUgPT09ICd0cmVlJyA/ICdzZWxlY3RlZCcgOiAnJyl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoeyBtb2RlOiAndHJlZScgfSl9PlRSRUU8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9J2VkaXRvci1ib2R5Jz5cblxuICAgICAgICAgICAgICAgIDxTZWFyY2hCYXJcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWU9eyhhOiBTb3VyY2UpID0+IGEubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgIHNldEZpbHRlckZ1bmM9eyhmKSA9PiB0aGlzLnNldFN0YXRlKHsgZmlsdGVyRnVuYzogZiB9KX1cbiAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubW9kZSA9PT0gJ2xpc3QnID8gKFxuICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0ndGFibGUgZ2FwJz5cbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4jPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+TmFtZTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlBhcmVudDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuc291cmNlLnZhbHVlLmZpbHRlcih0aGlzLnN0YXRlLmZpbHRlckZ1bmMpLm1hcCgoc291cmNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2Bzb3VyY2UtJHtzb3VyY2UudWlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3NvdXJjZS51aWR9IDxBZGRUYWJCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdG9yZT17dGhpcy5wcm9wcy5kYXRhU3RvcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aWQ9e3NvdXJjZS51aWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPSdzb3VyY2UnIC8+PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntzb3VyY2UubGFiZWx9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntzb3VyY2UucGFyZW50fTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7fVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cblxuXG4gICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9vYmplY3RfbGlzdC9Tb3VyY2VMaXN0LnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 63 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst AddTabButton_1 = __webpack_require__(46);\r\nconst Signaller_1 = __webpack_require__(21);\r\nconst SearchBar_1 = __webpack_require__(35);\r\nclass EntityTypeList extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            filterFunc: () => true\r\n        };\r\n    }\r\n    addNew() {\r\n        const a = {\r\n            name: 'entity_type',\r\n            complete: () => {\r\n            },\r\n            cancel: () => { console.log('cancel'); },\r\n            settings: {}\r\n        };\r\n        Signaller_1.showModal.dispatch(a);\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header entity_type' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"h2\", null,\r\n                            \"All Entity Types \",\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', \"aria-hidden\": 'true', title: 'Add new entity type', onClick: this.addNew.bind(this) }))))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(SearchBar_1.SearchBar, { getValue: (a) => a.label, setFilterFunc: (f) => this.setState({ filterFunc: f }) }),\r\n                React.createElement(\"table\", { className: 'table gap' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null, \"#\"),\r\n                            React.createElement(\"td\", null, \"Name\"),\r\n                            React.createElement(\"td\", null, \"Parent\"),\r\n                            React.createElement(\"td\", null, \"Description\"))),\r\n                    React.createElement(\"tbody\", null, this.props.dataStore.all.entity_type.value.filter(this.state.filterFunc).map((entityType) => {\r\n                        return (React.createElement(\"tr\", { key: `entityType-${entityType.uid}` },\r\n                            React.createElement(\"td\", null,\r\n                                entityType.uid,\r\n                                \" \",\r\n                                React.createElement(AddTabButton_1.AddTabButton, { dataStore: this.props.dataStore, uid: entityType.uid, tabType: 'entity_type' })),\r\n                            React.createElement(\"td\", null, entityType.label),\r\n                            React.createElement(\"td\", null, entityType.parent),\r\n                            React.createElement(\"td\", null, entityType.description)));\r\n                    }))))));\r\n    }\r\n}\r\nexports.EntityTypeList = EntityTypeList;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvb2JqZWN0X2xpc3QvRW50aXR5VHlwZUxpc3QudHN4Pzg5OWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFNL0IsK0NBQStDO0FBRS9DLDRDQUE0QztBQUc1Qyw0Q0FBeUM7QUFXekMsb0JBQTRCLFNBQVEsS0FBSyxDQUFDLFNBQW1EO0lBRXpGO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsVUFBVSxFQUFFLE1BQU0sSUFBSTtTQUN6QixDQUFDO0lBQ04sQ0FBQztJQUVNLE1BQU07UUFDVCxNQUFNLENBQUMsR0FBcUI7WUFDeEIsSUFBSSxFQUFFLGFBQWE7WUFDbkIsUUFBUSxFQUFFO1lBQ1YsQ0FBQztZQUNELE1BQU0sRUFBRSxRQUFRLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUM7WUFDdEMsUUFBUSxFQUFFLEVBQUU7U0FDZixDQUFDO1FBRUYscUJBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUdNLE1BQU07UUFDVCxNQUFNLENBQUMsQ0FDUCw2QkFBSyxTQUFTLEVBQUMsa0JBQWtCO1lBRTdCLGdDQUFRLFNBQVMsRUFBQywyQkFBMkI7Z0JBQzNDLDZCQUFLLFNBQVMsRUFBQyxpQkFBaUI7b0JBQzlCLDZCQUFLLFNBQVMsRUFBQyxjQUFjO3dCQUN6Qjs7NEJBQXFCLDJCQUNqQixTQUFTLEVBQUMsOEJBQThCLGlCQUM1QixNQUFNLEVBQ2xCLEtBQUssRUFBQyxxQkFBcUIsRUFDM0IsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUM5QixDQUFLLENBQ1IsQ0FDRixDQUNDO1lBRVQsaUNBQVMsU0FBUyxFQUFDLGFBQWE7Z0JBRTVCLG9CQUFDLHFCQUFTLElBQ04sUUFBUSxFQUFFLENBQUMsQ0FBYSxLQUFLLENBQUMsQ0FBQyxLQUFLLEVBQ3BDLGFBQWEsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQ3hEO2dCQUVGLCtCQUFPLFNBQVMsRUFBQyxXQUFXO29CQUN4Qjt3QkFDSTs0QkFDSSxvQ0FBVTs0QkFDVix1Q0FBYTs0QkFDYix5Q0FBZTs0QkFDZiw4Q0FBb0IsQ0FDbkIsQ0FDRDtvQkFDUixtQ0FDQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxVQUFVO3dCQUNyRixNQUFNLENBQUMsQ0FDSCw0QkFBSSxHQUFHLEVBQUUsY0FBYyxVQUFVLENBQUMsR0FBRyxFQUFFOzRCQUNuQztnQ0FBSyxVQUFVLENBQUMsR0FBRzs7Z0NBQUUsb0JBQUMsMkJBQVksSUFDOUIsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUMvQixHQUFHLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFDbkIsT0FBTyxFQUFDLGFBQWEsR0FBRyxDQUFLOzRCQUNqQyxnQ0FBSyxVQUFVLENBQUMsS0FBSyxDQUFNOzRCQUMzQixnQ0FBSyxVQUFVLENBQUMsTUFBTSxDQUFNOzRCQUM1QixnQ0FBSyxVQUFVLENBQUMsV0FBVyxDQUFNLENBQ2hDLENBQ1IsQ0FBQztvQkFBQSxDQUFDLENBQ04sQ0FDTyxDQUNKLENBQ0YsQ0FDUixDQUNMLENBQUM7SUFDTixDQUFDO0NBQ0o7QUEzRUQsd0NBMkVDIiwiZmlsZSI6IjYzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFNpZGViYXIgZm9yIGVkaXRvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBBcGlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuLi8uLi9EYXRhU3RvcmUnO1xuaW1wb3J0IHsgRW50aXR5VHlwZSB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcblxuaW1wb3J0IHsgQWRkVGFiQnV0dG9uIH0gZnJvbSAnLi4vQWRkVGFiQnV0dG9uJztcblxuaW1wb3J0IHsgc2hvd01vZGFsIH0gZnJvbSAnLi4vLi4vU2lnbmFsbGVyJztcbmltcG9ydCB7IE1vZGFsRGVmaW5pdGlvbiB9IGZyb20gJy4uL21vZGFsL01vZGFsRGVmaW5pdGlvbic7XG5cbmltcG9ydCB7IFNlYXJjaEJhciB9IGZyb20gJy4uL1NlYXJjaEJhcic7XG5cbmludGVyZmFjZSBFbnRpdHlUeXBlTGlzdFByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgZGF0YVN0b3JlOiBEYXRhU3RvcmU7XG59XG5cbmludGVyZmFjZSBFbnRpdHlUeXBlTGlzdFN0YXRlIHtcbiAgICBmaWx0ZXJGdW5jOiAodDogRW50aXR5VHlwZSkgPT4gYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEVudGl0eVR5cGVMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEVudGl0eVR5cGVMaXN0UHJvcHMsIEVudGl0eVR5cGVMaXN0U3RhdGU+IHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZmlsdGVyRnVuYzogKCkgPT4gdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGROZXcoKSB7XG4gICAgICAgIGNvbnN0IGEgOiBNb2RhbERlZmluaXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiAnZW50aXR5X3R5cGUnLFxuICAgICAgICAgICAgY29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWw6ICgpID0+IHsgY29uc29sZS5sb2coJ2NhbmNlbCcpfSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIHNob3dNb2RhbC5kaXNwYXRjaChhKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3b3Jrc3BhY2UtZWRpdG9yJz5cblxuICAgICAgICAgICAgPGhlYWRlciBjbGFzc05hbWU9J2VkaXRvci1oZWFkZXIgZW50aXR5X3R5cGUnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbWFyeS10b29sYmFyJz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWFpbi10b29sYmFyJz5cbiAgICAgICAgICAgICAgICAgICAgPGgyPkFsbCBFbnRpdHkgVHlwZXMgPGlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmEgZmEtcGx1cy1jaXJjbGUgYWRkIGJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9J0FkZCBuZXcgZW50aXR5IHR5cGUnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmFkZE5ldy5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICA+PC9pPjwvaDI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9oZWFkZXI+XG5cbiAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT0nZWRpdG9yLWJvZHknPlxuXG4gICAgICAgICAgICAgICAgPFNlYXJjaEJhclxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZT17KGE6IEVudGl0eVR5cGUpID0+IGEubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgIHNldEZpbHRlckZ1bmM9eyhmKSA9PiB0aGlzLnNldFN0YXRlKHsgZmlsdGVyRnVuYzogZiB9KX1cbiAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0ndGFibGUgZ2FwJz5cbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4jPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+TmFtZTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlBhcmVudDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPkRlc2NyaXB0aW9uPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5lbnRpdHlfdHlwZS52YWx1ZS5maWx0ZXIodGhpcy5zdGF0ZS5maWx0ZXJGdW5jKS5tYXAoKGVudGl0eVR5cGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YGVudGl0eVR5cGUtJHtlbnRpdHlUeXBlLnVpZH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntlbnRpdHlUeXBlLnVpZH0gPEFkZFRhYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0b3JlPXt0aGlzLnByb3BzLmRhdGFTdG9yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpZD17ZW50aXR5VHlwZS51aWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPSdlbnRpdHlfdHlwZScgLz48L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2VudGl0eVR5cGUubGFiZWx9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntlbnRpdHlUeXBlLnBhcmVudH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2VudGl0eVR5cGUuZGVzY3JpcHRpb259PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKTt9XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL29iamVjdF9saXN0L0VudGl0eVR5cGVMaXN0LnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 64 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Toast controller\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Signaller_1 = __webpack_require__(21);\r\nclass Toast extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            toasts: [],\r\n            nextId: 0\r\n        };\r\n        this.boundShowToast = this.addToast.bind(this);\r\n        Signaller_1.showToast.add(this.boundShowToast);\r\n    }\r\n    componentWillUnmount() {\r\n        Signaller_1.showToast.remove(this.boundShowToast);\r\n    }\r\n    addToast(title, message, level = 'warning', lifeTime = 3000) {\r\n        const id = this.state.nextId;\r\n        this.setState({\r\n            toasts: this.state.toasts.concat([{ title, message, level, lifeTime, id }]),\r\n            nextId: id + 1\r\n        });\r\n        setTimeout(() => {\r\n            this.setState({\r\n                toasts: this.state.toasts.filter((toast) => toast.id !== id)\r\n            });\r\n        }, lifeTime);\r\n    }\r\n    render() {\r\n        return (React.createElement(\"span\", null, this.state.toasts.map((toast, i) => (React.createElement(\"div\", { key: `toast-${toast.id}`, style: { bottom: (1 + 7 * i) + 'em' }, className: `toast ${toast.level}` },\r\n            React.createElement(\"div\", { className: 'title' }, toast.title),\r\n            React.createElement(\"div\", { className: 'message' }, toast.message))))));\r\n    }\r\n}\r\nexports.Toast = Toast;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvVG9hc3QudHN4Pzg0YjQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxQ0FBK0I7QUFDL0IsNENBQXlDO0FBa0J6QyxXQUFtQixTQUFRLEtBQUssQ0FBQyxTQUFpQztJQUk5RDtRQUNJLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNULE1BQU0sRUFBRSxFQUFFO1lBQ1YsTUFBTSxFQUFFLENBQUM7U0FDYixDQUFDO1FBRUYsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMvQyxxQkFBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVNLG9CQUFvQjtRQUN2QixxQkFBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVNLFFBQVEsQ0FBQyxLQUFhLEVBQUUsT0FBZSxFQUFFLFFBQWdCLFNBQVMsRUFBRSxXQUFtQixJQUFJO1FBRTlGLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBRTdCLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDVixNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUMzRSxNQUFNLEVBQUUsRUFBRSxHQUFHLENBQUM7U0FDakIsQ0FBQyxDQUFDO1FBRUgsVUFBVSxDQUFDO1lBQ1AsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQkFDVixNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDO2FBQy9ELENBQUM7UUFDTixDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDakIsQ0FBQztJQUVNLE1BQU07UUFDVCxNQUFNLENBQUMsQ0FBQyxrQ0FDSCxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQ2pDLDZCQUFLLEdBQUcsRUFBRSxTQUFTLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBQyxFQUFFLFNBQVMsRUFBRSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUU7WUFDakcsNkJBQUssU0FBUyxFQUFDLE9BQU8sSUFDakIsS0FBSyxDQUFDLEtBQUssQ0FDVjtZQUNOLDZCQUFLLFNBQVMsRUFBQyxTQUFTLElBQ25CLEtBQUssQ0FBQyxPQUFPLENBQ1osQ0FDSixDQUNULENBQUMsQ0FDQyxDQUFDLENBQUM7SUFDYixDQUFDO0NBQ0o7QUFqREQsc0JBaURDIiwiZmlsZSI6IjY0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFRvYXN0IGNvbnRyb2xsZXJcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHNob3dUb2FzdCB9IGZyb20gJy4uL1NpZ25hbGxlcic7XG5cbmludGVyZmFjZSBTaW5nbGVUb2FzdCB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBsZXZlbDogc3RyaW5nO1xuICAgIGxpZmVUaW1lOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBUb2FzdFByb3BzIHtcbn1cblxuaW50ZXJmYWNlIFRvYXN0U3RhdGUge1xuICAgIHRvYXN0czogU2luZ2xlVG9hc3RbXTtcbiAgICBuZXh0SWQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFRvYXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFRvYXN0UHJvcHMsIFRvYXN0U3RhdGU+IHtcblxuICAgIHByaXZhdGUgYm91bmRTaG93VG9hc3Q7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHRvYXN0czogW10sXG4gICAgICAgICAgICBuZXh0SWQ6IDBcbiAgICAgICB9O1xuXG4gICAgICAgdGhpcy5ib3VuZFNob3dUb2FzdCA9IHRoaXMuYWRkVG9hc3QuYmluZCh0aGlzKTtcbiAgICAgICBzaG93VG9hc3QuYWRkKHRoaXMuYm91bmRTaG93VG9hc3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgc2hvd1RvYXN0LnJlbW92ZSh0aGlzLmJvdW5kU2hvd1RvYXN0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVG9hc3QodGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBsZXZlbDogc3RyaW5nID0gJ3dhcm5pbmcnLCBsaWZlVGltZTogbnVtYmVyID0gMzAwMCkge1xuXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5zdGF0ZS5uZXh0SWQ7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB0b2FzdHM6IHRoaXMuc3RhdGUudG9hc3RzLmNvbmNhdChbeyB0aXRsZSwgbWVzc2FnZSwgbGV2ZWwsIGxpZmVUaW1lLCBpZCB9XSksXG4gICAgICAgICAgICBuZXh0SWQ6IGlkICsgMVxuICAgICAgICB9KTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHRvYXN0czogdGhpcy5zdGF0ZS50b2FzdHMuZmlsdGVyKCh0b2FzdCkgPT4gdG9hc3QuaWQgIT09IGlkKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwgbGlmZVRpbWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoPHNwYW4+XG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS50b2FzdHMubWFwKCh0b2FzdCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtgdG9hc3QtJHt0b2FzdC5pZH1gfSBzdHlsZT17e2JvdHRvbTogKDEgKyA3ICogaSkgKyAnZW0nfX0gY2xhc3NOYW1lPXtgdG9hc3QgJHt0b2FzdC5sZXZlbH1gfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0b2FzdC50aXRsZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZXNzYWdlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0b2FzdC5tZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICA8L3NwYW4+KTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL1RvYXN0LnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 65 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Overlay_1 = __webpack_require__(66);\r\nconst PredicateDescription_1 = __webpack_require__(55);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst literalTypes_1 = __webpack_require__(56);\r\nconst ApiService_1 = __webpack_require__(6);\r\nclass CreatePredicate extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            name: '',\r\n            domain: { key: '', value: '' },\r\n            range: { key: '', value: '' },\r\n            domainOptions: [],\r\n            rangeOptions: []\r\n        };\r\n    }\r\n    componentWillMount() {\r\n        this.setState({ name: this.props.initialName });\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.initialDomain !== undefined) {\r\n            this.props.api.getItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, this.props.initialDomain)\r\n                .then((result) => {\r\n                if (result.uid === null) {\r\n                    throw new Error('Unexpected null uid');\r\n                }\r\n                this.setState({\r\n                    domain: { key: result.label, value: result.uid.toString() },\r\n                    domainOptions: [\r\n                        { key: result.label, value: result.uid.toString() }\r\n                    ].concat(result.parents.map((entityType) => {\r\n                        if (entityType.uid === null) {\r\n                            throw new Error('Unexpected null uid');\r\n                        }\r\n                        return { key: entityType.label, value: entityType.uid.toString() };\r\n                    }))\r\n                });\r\n            });\r\n        }\r\n        const results = this.props.dataStore.all.entity_type.value;\r\n        const entityTypeMap = results.map((entityType) => {\r\n            if (entityType.uid === null) {\r\n                throw new Error('Unexpected null uid');\r\n            }\r\n            return { key: entityType.label, value: entityType.uid.toString() };\r\n        });\r\n        if (this.props.initialDomain === undefined) {\r\n            this.setState({ domainOptions: entityTypeMap });\r\n        }\r\n        this.setState({\r\n            rangeOptions: literalTypes_1.literalTypes.map((lit) => ({ key: lit.label, value: lit.value, meta: 'literal' })).concat(entityTypeMap)\r\n        });\r\n    }\r\n    create() {\r\n        const newPredicate = falcon_core_1.Serializer.fromJson(falcon_core_1.Predicate, {\r\n            name: this.state.name,\r\n            domain: this.state.domain.value,\r\n            range: this.state.range.value,\r\n            rangeIsReference: this.state.range.meta !== 'literal'\r\n        });\r\n        this.props.api.postItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, newPredicate)\r\n            .then((result) => {\r\n            newPredicate.uid = result[0];\r\n            this.props.complete(newPredicate);\r\n        });\r\n    }\r\n    render() {\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-plus', \"aria-hidden\": 'true' }),\r\n                \" Create Property\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Name\"),\r\n            React.createElement(\"input\", { type: 'text', className: 'gap', ref: (a) => { if (a !== null)\r\n                    a.focus(); }, value: this.state.name, onChange: (e) => this.setState({ name: e.target.value }) }),\r\n            React.createElement(PredicateDescription_1.PredicateDescription, { domain: this.state.domain, range: this.state.range, domainChanged: (s) => this.setState({ domain: s }), rangeChanged: (s) => this.setState({ range: s }), domainOptions: this.state.domainOptions, rangeOptions: this.state.rangeOptions, mode: 'editAll' }),\r\n            React.createElement(\"div\", { className: 'modal-toolbar' },\r\n                React.createElement(\"button\", { onClick: this.props.cancel, className: 'pull-left' }, \"Cancel\"),\r\n                React.createElement(\"button\", { onClick: this.create.bind(this), className: 'pull-right' }, \"Create Property\"))));\r\n    }\r\n}\r\nexports.CreatePredicate = CreatePredicate;\r\n;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ3JlYXRlUHJlZGljYXRlLnRzeD9jMDhjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRS9CLDBDQUFxQztBQUNyQyx1REFBc0U7QUFDdEUsOENBQWdFO0FBQ2hFLCtDQUFrRDtBQUNsRCw0Q0FBdUQ7QUFzQnZELHFCQUE2QixTQUFRLEtBQUssQ0FBQyxTQUFxRDtJQUU1RjtRQUNJLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNULElBQUksRUFBRSxFQUFFO1lBQ1IsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO1lBQzVCLEtBQUssRUFBRSxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBQztZQUMzQixhQUFhLEVBQUUsRUFBRTtZQUNqQixZQUFZLEVBQUUsRUFBRTtTQUNuQixDQUFDO0lBQ04sQ0FBQztJQUVNLGtCQUFrQjtRQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRU0saUJBQWlCO1FBQ3BCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDeEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLHdCQUFVLEVBQUUsb0JBQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUM7aUJBQ2pGLElBQUksQ0FBQyxDQUFDLE1BQU07Z0JBRVQsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUN0QixNQUFNLElBQUksS0FB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USxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFDLFdBQVcsYUFBZ0I7Z0JBQ3pFLGdDQUFRLE9BQU8sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxTQUFTLEVBQUMsWUFBWSxzQkFBeUIsQ0FDdEYsQ0FDQSxDQUNULENBQUM7SUFDTixDQUFDO0NBQ0o7QUFuR0QsMENBbUdDO0FBQUEsQ0FBQyIsImZpbGUiOiI2NS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgT3ZlcmxheSB9IGZyb20gJy4uL092ZXJsYXknO1xuaW1wb3J0IHsgUHJlZGljYXRlRGVzY3JpcHRpb24gfSBmcm9tICcuLi9maWVsZHMvUHJlZGljYXRlRGVzY3JpcHRpb24nO1xuaW1wb3J0IHsgUHJlZGljYXRlLCBFbnRpdHlUeXBlLCBTZXJpYWxpemVyIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuaW1wb3J0IHsgbGl0ZXJhbFR5cGVzIH0gZnJvbSAnLi4vLi4vbGl0ZXJhbFR5cGVzJztcbmltcG9ydCB7IEFwaVNlcnZpY2UsIEFwcFVybHMgfSBmcm9tICcuLi8uLi9BcGlTZXJ2aWNlJztcbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4uLy4uL0RhdGFTdG9yZSc7XG5pbXBvcnQgeyBDb21ib0Ryb3Bkb3duT3B0aW9uIH0gZnJvbSAnLi4vQ29tYm9Ecm9wZG93bic7XG5cblxuaW50ZXJmYWNlIENyZWF0ZVByZWRpY2F0ZVByb3BzIHtcbiAgICBpbml0aWFsTmFtZTogc3RyaW5nO1xuICAgIGNhbmNlbDogKCkgPT4gdm9pZDtcbiAgICBjb21wbGV0ZTogKG5ld1ByZWRpY2F0ZTogUHJlZGljYXRlKSA9PiB2b2lkO1xuICAgIGFwaTogQXBpU2VydmljZTtcbiAgICBpbml0aWFsRG9tYWluPzogbnVtYmVyO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlUHJlZGljYXRlU3RhdGUge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkb21haW46IENvbWJvRHJvcGRvd25PcHRpb247XG4gICAgcmFuZ2U6IENvbWJvRHJvcGRvd25PcHRpb247XG4gICAgZG9tYWluT3B0aW9uczogQ29tYm9Ecm9wZG93bk9wdGlvbltdO1xuICAgIHJhbmdlT3B0aW9uczogQ29tYm9Ecm9wZG93bk9wdGlvbltdO1xufVxuXG5leHBvcnQgY2xhc3MgQ3JlYXRlUHJlZGljYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PENyZWF0ZVByZWRpY2F0ZVByb3BzLCBDcmVhdGVQcmVkaWNhdGVTdGF0ZT4ge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICAgIGRvbWFpbjoge2tleTogJycsIHZhbHVlOiAnJ30sXG4gICAgICAgICAgICByYW5nZToge2tleTogJycsIHZhbHVlOiAnJ30sXG4gICAgICAgICAgICBkb21haW5PcHRpb25zOiBbXSxcbiAgICAgICAgICAgIHJhbmdlT3B0aW9uczogW11cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbmFtZTogdGhpcy5wcm9wcy5pbml0aWFsTmFtZSB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmluaXRpYWxEb21haW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgIHRoaXMucHJvcHMuYXBpLmdldEl0ZW0oRW50aXR5VHlwZSwgQXBwVXJscy5lbnRpdHlfdHlwZSwgdGhpcy5wcm9wcy5pbml0aWFsRG9tYWluKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC51aWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIG51bGwgdWlkJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgZG9tYWluOiB7IGtleTogcmVzdWx0LmxhYmVsLCB2YWx1ZTogcmVzdWx0LnVpZC50b1N0cmluZygpfSxcbiAgICAgICAgICAgICAgICBkb21haW5PcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiByZXN1bHQubGFiZWwsIHZhbHVlOiByZXN1bHQudWlkLnRvU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgXS5jb25jYXQocmVzdWx0LnBhcmVudHMubWFwKChlbnRpdHlUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHlUeXBlLnVpZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIG51bGwgdWlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsga2V5OiBlbnRpdHlUeXBlLmxhYmVsLCB2YWx1ZTogZW50aXR5VHlwZS51aWQudG9TdHJpbmcoKSB9XG4gICAgICAgICAgICAgICAgfSkpfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5X3R5cGUudmFsdWU7XG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGVNYXAgOiBDb21ib0Ryb3Bkb3duT3B0aW9uW10gPSByZXN1bHRzLm1hcCgoZW50aXR5VHlwZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVudGl0eVR5cGUudWlkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIG51bGwgdWlkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBrZXk6IGVudGl0eVR5cGUubGFiZWwsIHZhbHVlOiBlbnRpdHlUeXBlLnVpZC50b1N0cmluZygpIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW5pdGlhbERvbWFpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZG9tYWluT3B0aW9uczogZW50aXR5VHlwZU1hcCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgcmFuZ2VPcHRpb25zOiAgbGl0ZXJhbFR5cGVzLm1hcCgobGl0KSA9PiAoeyBrZXk6IGxpdC5sYWJlbCwgdmFsdWU6IGxpdC52YWx1ZSwgbWV0YTogJ2xpdGVyYWwnfSkpLmNvbmNhdChlbnRpdHlUeXBlTWFwKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlKCkge1xuXG4gICAgICAgIGNvbnN0IG5ld1ByZWRpY2F0ZSA9IFNlcmlhbGl6ZXIuZnJvbUpzb24oUHJlZGljYXRlLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLnN0YXRlLm5hbWUsXG4gICAgICAgICAgICBkb21haW46IHRoaXMuc3RhdGUuZG9tYWluLnZhbHVlLFxuICAgICAgICAgICAgcmFuZ2U6IHRoaXMuc3RhdGUucmFuZ2UudmFsdWUsXG4gICAgICAgICAgICByYW5nZUlzUmVmZXJlbmNlOiB0aGlzLnN0YXRlLnJhbmdlLm1ldGEgIT09ICdsaXRlcmFsJ1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnByb3BzLmFwaS5wb3N0SXRlbShQcmVkaWNhdGUsIEFwcFVybHMucHJlZGljYXRlLCBuZXdQcmVkaWNhdGUpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3UHJlZGljYXRlLnVpZCA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbXBsZXRlKG5ld1ByZWRpY2F0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICA8T3ZlcmxheT5cbiAgICAgICAgICAgIDxoMj48aSBjbGFzc05hbWU9J2ZhIGZhLXBsdXMnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+IENyZWF0ZSBQcm9wZXJ0eTwvaDI+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdzbWFsbCc+TmFtZTwvbGFiZWw+XG5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZ2FwJ1xuICAgICAgICAgICAgICAgIHJlZj17KGEpID0+ICB7IGlmKGEgIT09IG51bGwpIGEuZm9jdXMoKTsgfX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5uYW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdGhpcy5zZXRTdGF0ZSh7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pfSAvPlxuXG4gICAgICAgICAgICA8UHJlZGljYXRlRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICBkb21haW49e3RoaXMuc3RhdGUuZG9tYWlufVxuICAgICAgICAgICAgICAgIHJhbmdlPXt0aGlzLnN0YXRlLnJhbmdlfVxuICAgICAgICAgICAgICAgIGRvbWFpbkNoYW5nZWQ9eyhzKSA9PiB0aGlzLnNldFN0YXRlKHsgZG9tYWluOiBzIH0pfVxuICAgICAgICAgICAgICAgIHJhbmdlQ2hhbmdlZD17KHMpID0+IHRoaXMuc2V0U3RhdGUoeyByYW5nZTogcyB9KX1cbiAgICAgICAgICAgICAgICBkb21haW5PcHRpb25zPXt0aGlzLnN0YXRlLmRvbWFpbk9wdGlvbnN9XG4gICAgICAgICAgICAgICAgcmFuZ2VPcHRpb25zPXt0aGlzLnN0YXRlLnJhbmdlT3B0aW9uc31cbiAgICAgICAgICAgICAgICBtb2RlPSdlZGl0QWxsJyAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLXRvb2xiYXInPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5wcm9wcy5jYW5jZWx9IGNsYXNzTmFtZT0ncHVsbC1sZWZ0Jz5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuY3JlYXRlLmJpbmQodGhpcyl9IGNsYXNzTmFtZT0ncHVsbC1yaWdodCc+Q3JlYXRlIFByb3BlcnR5PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9PdmVybGF5PlxuICAgICAgICApO1xuICAgIH1cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ3JlYXRlUHJlZGljYXRlLnRzeCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 66 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nclass Overlay extends React.Component {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: 'full-page-overlay' },\r\n            React.createElement(\"div\", { className: 'overlay-container' }, this.props.children)));\r\n    }\r\n}\r\nexports.Overlay = Overlay;\r\n;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvT3ZlcmxheS50c3g/ODA5MyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQVUvQixhQUFxQixTQUFRLEtBQUssQ0FBQyxTQUFxQztJQUU3RCxNQUFNO1FBQ1QsTUFBTSxDQUFDLENBQ1AsNkJBQUssU0FBUyxFQUFDLG1CQUFtQjtZQUM5Qiw2QkFBSyxTQUFTLEVBQUMsbUJBQW1CLElBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUNsQixDQUNKLENBQ0wsQ0FBQztJQUNOLENBQUM7Q0FDSjtBQVhELDBCQVdDO0FBQUEsQ0FBQyIsImZpbGUiOiI2Ni5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIE92ZXJsYXlQcm9wcyB7XG5cbn1cblxuaW50ZXJmYWNlIE92ZXJsYXlTdGF0ZXtcblxufVxuXG5leHBvcnQgY2xhc3MgT3ZlcmxheSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxPdmVybGF5UHJvcHMsIE92ZXJsYXlTdGF0ZT4ge1xuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Z1bGwtcGFnZS1vdmVybGF5Jz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdvdmVybGF5LWNvbnRhaW5lcic+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvT3ZlcmxheS50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 67 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Overlay_1 = __webpack_require__(66);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst ComboDropdown_1 = __webpack_require__(18);\r\nconst Signaller_1 = __webpack_require__(21);\r\nclass CreateRecord extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            comboValue: { key: '', value: '' },\r\n            searchValue: ''\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.refs['comboDropDown'].refs['comboDropDownInputBox'].focus();\r\n    }\r\n    createNewPredicate() {\r\n        const modalDef = {\r\n            name: 'predicate',\r\n            complete: (data) => {\r\n                console.log('Predicate editor called complete');\r\n                this.setComboValue({ key: data.label, value: data.uid.toString(), meta: data });\r\n            },\r\n            cancel: () => {\r\n                console.log('Predicate editor called cancel');\r\n            },\r\n            settings: {\r\n                initialName: this.state.searchValue,\r\n                initialDomain: this.props.entityType\r\n            }\r\n        };\r\n        Signaller_1.showModal.dispatch(modalDef);\r\n    }\r\n    setComboValue(opt) {\r\n        this.props.api.postItem(falcon_core_1.Record, ApiService_1.AppUrls.record, falcon_core_1.Serializer.fromJson(falcon_core_1.Record, {\r\n            predicate: opt.meta.uid,\r\n            entity: this.props.entityUid,\r\n            valueType: opt.meta.rangeIsReference ? 'entity' : opt.meta.range,\r\n            score: 3\r\n        }))\r\n            .then((result) => this.props.complete(result))\r\n            .catch(this.props.cancel);\r\n    }\r\n    render() {\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Create Record\"),\r\n            React.createElement(ComboDropdown_1.ComboDropdown, { ref: 'comboDropDown', options: this.props.options, typeName: 'predicate', value: this.state.comboValue, setValue: this.setComboValue.bind(this), createNewValue: this.createNewPredicate.bind(this), updateSearchString: (s) => this.setState({ searchValue: s }) })));\r\n    }\r\n}\r\nexports.CreateRecord = CreateRecord;\r\n;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ3JlYXRlUmVjb3JkLnRzeD8zMDhjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRS9CLDBDQUFxQztBQUNyQyw4Q0FBNEQ7QUFDNUQsNENBQXVEO0FBQ3ZELGdEQUFzRTtBQUV0RSw0Q0FBNEM7QUFpQjVDLGtCQUEwQixTQUFRLEtBQUssQ0FBQyxTQUErQztJQUVuRjtRQUNJLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNULFVBQVUsRUFBRSxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBQztZQUNoQyxXQUFXLEVBQUUsRUFBRTtTQUNsQixDQUFDO0lBQ04sQ0FBQztJQUVNLGlCQUFpQjtRQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3JFLENBQUM7SUFFTSxrQkFBa0I7UUFDckIsTUFBTSxRQUFRLEdBQW9CO1lBQzlCLElBQUksRUFBRSxXQUFXO1lBQ2pCLFFBQVEsRUFBRSxDQUFDLElBQWdCO2dCQUN2QixPQUFPLENBQUMsR0FBRyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7Z0JBQ2hELElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztZQUNuRixDQUFDO1lBQ0QsTUFBTSxFQUFFO2dCQUNKLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztZQUNsRCxDQUFDO1lBQ0QsUUFBUSxFQUFFO2dCQUNOLFdBQVcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVc7Z0JBQ25DLGFBQWEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVU7YUFDdkM7U0FDSixDQUFDO1FBRUYscUJBQVMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVNLGFBQWEsQ0FBQyxHQUFvRDtRQUNyRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsb0JBQU0sRUFBRSxvQkFBTyxDQUFDLE1BQU0sRUFDMUMsd0JBQVUsQ0FBQyxRQUFRLENBQUMsb0JBQU0sRUFBRTtZQUN4QixTQUFTLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHO1lBQ3ZCLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVM7WUFDNUIsU0FBUyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSztZQUNoRSxLQUFLLEVBQUUsQ0FBQztTQUNYLENBQUMsQ0FBQzthQUNOLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM3QyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRU0sTUFBTTtRQUNULE1BQU0sQ0FBQyxDQUNQLG9CQUFDLGlCQUFPO1lBQ0osZ0RBQXNCO1lBQ3RCLG9CQUFDLDZCQUFhLElBQ1YsR0FBRyxFQUFDLGVBQWUsRUFDbkIsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUMzQixRQUFRLEVBQUMsV0FBVyxFQUNwQixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQzVCLFFBQVEsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDdkMsY0FBYyxFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQ2xELGtCQUFrQixFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFDLENBQUMsR0FDN0QsQ0FDSSxDQUNULENBQUM7SUFDTixDQUFDO0NBQ0o7QUE3REQsb0NBNkRDO0FBQUEsQ0FBQyIsImZpbGUiOiI2Ny5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgT3ZlcmxheSB9IGZyb20gJy4uL092ZXJsYXknO1xuaW1wb3J0IHsgUmVjb3JkLCBQcmVkaWNhdGUsIFNlcmlhbGl6ZXIgfSBmcm9tICdmYWxjb24tY29yZSc7XG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5pbXBvcnQgeyBDb21ib0Ryb3Bkb3duLCBDb21ib0Ryb3Bkb3duT3B0aW9uIH0gZnJvbSAnLi4vQ29tYm9Ecm9wZG93bic7XG5cbmltcG9ydCB7IHNob3dNb2RhbCB9IGZyb20gJy4uLy4uL1NpZ25hbGxlcic7XG5pbXBvcnQgeyBNb2RhbERlZmluaXRpb24gfSBmcm9tICcuL01vZGFsRGVmaW5pdGlvbic7XG5cbmludGVyZmFjZSBDcmVhdGVSZWNvcmRQcm9wcyB7XG4gICAgYXBpOiBBcGlTZXJ2aWNlO1xuICAgIG9wdGlvbnM6IHsga2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG1ldGE6IFByZWRpY2F0ZX1bXTtcbiAgICBjb21wbGV0ZTogKHM6IGFueSkgPT4gdm9pZDtcbiAgICBjYW5jZWw6ICgpID0+IHZvaWQ7XG4gICAgZW50aXR5VWlkOiBudW1iZXI7XG4gICAgZW50aXR5VHlwZTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlUmVjb3JkU3RhdGUge1xuICAgIGNvbWJvVmFsdWU6IENvbWJvRHJvcGRvd25PcHRpb247XG4gICAgc2VhcmNoVmFsdWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIENyZWF0ZVJlY29yZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxDcmVhdGVSZWNvcmRQcm9wcywgQ3JlYXRlUmVjb3JkU3RhdGU+IHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgY29tYm9WYWx1ZToge2tleTogJycsIHZhbHVlOiAnJ30sXG4gICAgICAgICAgICBzZWFyY2hWYWx1ZTogJydcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMucmVmc1snY29tYm9Ecm9wRG93biddLnJlZnNbJ2NvbWJvRHJvcERvd25JbnB1dEJveCddLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZU5ld1ByZWRpY2F0ZSgpIHtcbiAgICAgICAgY29uc3QgbW9kYWxEZWY6IE1vZGFsRGVmaW5pdGlvbiA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdwcmVkaWNhdGUnLFxuICAgICAgICAgICAgY29tcGxldGU6IChkYXRhIDogUHJlZGljYXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1ByZWRpY2F0ZSBlZGl0b3IgY2FsbGVkIGNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb21ib1ZhbHVlKHsga2V5OiBkYXRhLmxhYmVsLCB2YWx1ZTogZGF0YS51aWQudG9TdHJpbmcoKSwgbWV0YTogZGF0YX0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQcmVkaWNhdGUgZWRpdG9yIGNhbGxlZCBjYW5jZWwnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIGluaXRpYWxOYW1lOiB0aGlzLnN0YXRlLnNlYXJjaFZhbHVlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxEb21haW46IHRoaXMucHJvcHMuZW50aXR5VHlwZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNob3dNb2RhbC5kaXNwYXRjaChtb2RhbERlZik7XG4gICAgfVxuXG4gICAgcHVibGljIHNldENvbWJvVmFsdWUob3B0OiB7IGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBtZXRhOiBQcmVkaWNhdGUgfSkge1xuICAgICAgICB0aGlzLnByb3BzLmFwaS5wb3N0SXRlbShSZWNvcmQsIEFwcFVybHMucmVjb3JkLFxuICAgICAgICAgICAgU2VyaWFsaXplci5mcm9tSnNvbihSZWNvcmQsIHtcbiAgICAgICAgICAgICAgICBwcmVkaWNhdGU6IG9wdC5tZXRhLnVpZCxcbiAgICAgICAgICAgICAgICBlbnRpdHk6IHRoaXMucHJvcHMuZW50aXR5VWlkLFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogb3B0Lm1ldGEucmFuZ2VJc1JlZmVyZW5jZSA/ICdlbnRpdHknIDogb3B0Lm1ldGEucmFuZ2UsXG4gICAgICAgICAgICAgICAgc2NvcmU6IDNcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB0aGlzLnByb3BzLmNvbXBsZXRlKHJlc3VsdCkpXG4gICAgICAgIC5jYXRjaCh0aGlzLnByb3BzLmNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgPE92ZXJsYXk+XG4gICAgICAgICAgICA8aDI+Q3JlYXRlIFJlY29yZDwvaDI+XG4gICAgICAgICAgICA8Q29tYm9Ecm9wZG93blxuICAgICAgICAgICAgICAgIHJlZj0nY29tYm9Ecm9wRG93bidcbiAgICAgICAgICAgICAgICBvcHRpb25zPXt0aGlzLnByb3BzLm9wdGlvbnN9XG4gICAgICAgICAgICAgICAgdHlwZU5hbWU9J3ByZWRpY2F0ZSdcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5jb21ib1ZhbHVlfVxuICAgICAgICAgICAgICAgIHNldFZhbHVlPXt0aGlzLnNldENvbWJvVmFsdWUuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICBjcmVhdGVOZXdWYWx1ZT17dGhpcy5jcmVhdGVOZXdQcmVkaWNhdGUuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICB1cGRhdGVTZWFyY2hTdHJpbmc9eyhzKSA9PiB0aGlzLnNldFN0YXRlKHsgc2VhcmNoVmFsdWU6IHN9KX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvT3ZlcmxheT5cbiAgICAgICAgKTtcbiAgICB9XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL21vZGFsL0NyZWF0ZVJlY29yZC50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 68 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst Signaller_1 = __webpack_require__(21);\r\nclass CreatePresetRecord extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {};\r\n    }\r\n    componentDidMount() {\r\n        if (CreatePresetRecord.openEntityDialog) {\r\n            CreatePresetRecord.openEntityDialog = false;\r\n            this.createNewEntity();\r\n        }\r\n        else {\r\n            CreatePresetRecord.openEntityDialog = true;\r\n        }\r\n    }\r\n    createNewEntity() {\r\n        const modalDef = {\r\n            name: 'entity',\r\n            complete: (data) => {\r\n                const isMentioned = this.props.dataStore.all.predicate.value.find((pred) => pred.label === 'is mentioned');\r\n                this.props.api.postItem(falcon_core_1.Record, ApiService_1.AppUrls.record, falcon_core_1.Serializer.fromJson(falcon_core_1.Record, {\r\n                    predicate: isMentioned.uid,\r\n                    entity: data[0],\r\n                    valueType: 'source',\r\n                    source: this.props.source.uid,\r\n                    score: 3\r\n                }))\r\n                    .then((result) => {\r\n                    this.props.complete(result);\r\n                })\r\n                    .catch(this.props.cancel);\r\n            },\r\n            cancel: () => {\r\n            },\r\n            settings: {}\r\n        };\r\n        Signaller_1.showModal.dispatch(modalDef);\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\nCreatePresetRecord.openEntityDialog = true;\r\nexports.CreatePresetRecord = CreatePresetRecord;\r\n;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ3JlYXRlUHJlc2V0UmVjb3JkLnRzeD8xMmU4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRy9CLDhDQUF5RDtBQUN6RCw0Q0FBdUQ7QUFJdkQsNENBQTRDO0FBYzVDLHdCQUFnQyxTQUFRLEtBQUssQ0FBQyxTQUEyRDtJQUlyRztRQUNJLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUNWLENBQUM7SUFDUixDQUFDO0lBRU0saUJBQWlCO1FBQ3BCLEVBQUUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQztZQUN0QyxrQkFBa0IsQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7WUFDNUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQzNCLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLGtCQUFrQixDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQztRQUMvQyxDQUFDO0lBQ0wsQ0FBQztJQUVNLGVBQWU7UUFDbEIsTUFBTSxRQUFRLEdBQW9CO1lBQzlCLElBQUksRUFBRSxRQUFRO1lBQ2QsUUFBUSxFQUFFLENBQUMsSUFBZTtnQkFFdEIsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxLQUFLLEtBQUssY0FBYyxDQUFDLENBQUM7Z0JBRTNHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxvQkFBTSxFQUFFLG9CQUFPLENBQUMsTUFBTSxFQUMxQyx3QkFBVSxDQUFDLFFBQVEsQ0FBQyxvQkFBTSxFQUFFO29CQUN4QixTQUFTLEVBQUUsV0FBVyxDQUFDLEdBQUc7b0JBQzFCLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUNmLFNBQVMsRUFBRSxRQUFRO29CQUNuQixNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRztvQkFDN0IsS0FBSyxFQUFFLENBQUM7aUJBQ1gsQ0FBQyxDQUFDO3FCQUNOLElBQUksQ0FBQyxDQUFDLE1BQU07b0JBQ1QsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ2hDLENBQUMsQ0FBQztxQkFDRCxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM5QixDQUFDO1lBQ0QsTUFBTSxFQUFFO1lBQ1IsQ0FBQztZQUNELFFBQVEsRUFBRSxFQUFFO1NBQ2YsQ0FBQztRQUVGLHFCQUFTLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFTSxNQUFNO1FBQ1QsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNoQixDQUFDOztBQS9DYyxtQ0FBZ0IsR0FBYSxJQUFJLENBQUM7QUFGckQsZ0RBa0RDO0FBQUEsQ0FBQyIsImZpbGUiOiI2OC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgT3ZlcmxheSB9IGZyb20gJy4uL092ZXJsYXknO1xuaW1wb3J0IHsgUmVjb3JkLCBTZXJpYWxpemVyLCBTb3VyY2UgfSBmcm9tICdmYWxjb24tY29yZSc7XG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuLi8uLi9EYXRhU3RvcmUnO1xuaW1wb3J0IHsgQ29tYm9Ecm9wZG93biwgQ29tYm9Ecm9wZG93bk9wdGlvbiB9IGZyb20gJy4uL0NvbWJvRHJvcGRvd24nO1xuXG5pbXBvcnQgeyBzaG93TW9kYWwgfSBmcm9tICcuLi8uLi9TaWduYWxsZXInO1xuaW1wb3J0IHsgTW9kYWxEZWZpbml0aW9uIH0gZnJvbSAnLi9Nb2RhbERlZmluaXRpb24nO1xuXG5pbnRlcmZhY2UgQ3JlYXRlUHJlc2V0UmVjb3JkUHJvcHMge1xuICAgIGFwaTogQXBpU2VydmljZTtcbiAgICBjb21wbGV0ZTogKHM6IGFueSkgPT4gdm9pZDtcbiAgICBjYW5jZWw6ICgpID0+IHZvaWQ7XG4gICAgc291cmNlOiBTb3VyY2U7XG4gICAgZGF0YVN0b3JlOiBEYXRhU3RvcmU7XG59XG5cbmludGVyZmFjZSBDcmVhdGVQcmVzZXRSZWNvcmRTdGF0ZSB7XG59XG5cbmV4cG9ydCBjbGFzcyBDcmVhdGVQcmVzZXRSZWNvcmQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Q3JlYXRlUHJlc2V0UmVjb3JkUHJvcHMsIENyZWF0ZVByZXNldFJlY29yZFN0YXRlPiB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBvcGVuRW50aXR5RGlhbG9nIDogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgaWYgKENyZWF0ZVByZXNldFJlY29yZC5vcGVuRW50aXR5RGlhbG9nKSB7XG4gICAgICAgICAgICBDcmVhdGVQcmVzZXRSZWNvcmQub3BlbkVudGl0eURpYWxvZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVOZXdFbnRpdHkoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENyZWF0ZVByZXNldFJlY29yZC5vcGVuRW50aXR5RGlhbG9nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVOZXdFbnRpdHkoKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsRGVmOiBNb2RhbERlZmluaXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiAnZW50aXR5JyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiAoZGF0YSA6IG51bWJlcltdKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc01lbnRpb25lZCA9IHRoaXMucHJvcHMuZGF0YVN0b3JlLmFsbC5wcmVkaWNhdGUudmFsdWUuZmluZCgocHJlZCkgPT4gcHJlZC5sYWJlbCA9PT0gJ2lzIG1lbnRpb25lZCcpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hcGkucG9zdEl0ZW0oUmVjb3JkLCBBcHBVcmxzLnJlY29yZCxcbiAgICAgICAgICAgICAgICAgICAgU2VyaWFsaXplci5mcm9tSnNvbihSZWNvcmQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogaXNNZW50aW9uZWQudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5OiBkYXRhWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUeXBlOiAnc291cmNlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5wcm9wcy5zb3VyY2UudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IDNcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbXBsZXRlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2godGhpcy5wcm9wcy5jYW5jZWwpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIHNob3dNb2RhbC5kaXNwYXRjaChtb2RhbERlZik7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9tb2RhbC9DcmVhdGVQcmVzZXRSZWNvcmQudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 69 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Overlay_1 = __webpack_require__(66);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst mousetrap = __webpack_require__(51);\r\nclass CreateSource extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            internalValue: ''\r\n        };\r\n    }\r\n    componentWillMount() {\r\n        this.setState({ internalValue: this.props.initialValue });\r\n    }\r\n    createSource() {\r\n        this.props.api.postItem(falcon_core_1.Source, ApiService_1.AppUrls.source, falcon_core_1.Serializer.fromJson(falcon_core_1.Source, {\r\n            name: this.state.internalValue\r\n        }))\r\n            .then(this.props.complete);\r\n    }\r\n    inputRef(val) {\r\n        if (val !== null) {\r\n            val.focus();\r\n            this.keyboardShortcuts = new mousetrap(val);\r\n            this.keyboardShortcuts.bind('return', this.createSource.bind(this));\r\n            this.keyboardShortcuts.bind('escape', this.props.cancel);\r\n        }\r\n        else {\r\n            this.keyboardShortcuts.unbind('return');\r\n            this.keyboardShortcuts.unbind('escape');\r\n        }\r\n    }\r\n    render() {\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Create Source\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Name\"),\r\n            React.createElement(\"input\", { type: 'text', value: this.state.internalValue, ref: this.inputRef.bind(this), onChange: (e) => this.setState({ internalValue: e.target.value }) }),\r\n            React.createElement(\"button\", { onClick: () => this.props.cancel(), className: 'pull-left' }, \"Cancel\"),\r\n            React.createElement(\"button\", { onClick: this.createSource.bind(this), className: 'pull-right' }, \"Create Source\")));\r\n    }\r\n}\r\nCreateSource.defaultProps = {\r\n    initialValue: ''\r\n};\r\nexports.CreateSource = CreateSource;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ3JlYXRlU291cmNlLnRzeD8zZjFkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRS9CLDBDQUFxQztBQUNyQyw4Q0FBaUQ7QUFDakQsNENBQXVEO0FBRXZELDBDQUF1QztBQWF2QyxrQkFBMEIsU0FBUSxLQUFLLENBQUMsU0FBK0M7SUFRbkY7UUFDSSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxLQUFLLEdBQUc7WUFDVCxhQUFhLEVBQUUsRUFBRTtTQUNwQixDQUFDO0lBQ04sQ0FBQztJQUVNLGtCQUFrQjtRQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFDLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRU0sWUFBWTtRQUNmLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxvQkFBTSxFQUFFLG9CQUFPLENBQUMsTUFBTSxFQUMxQyx3QkFBVSxDQUFDLFFBQVEsQ0FBQyxvQkFBTSxFQUFFO1lBQ3hCLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWE7U0FDakMsQ0FBQyxDQUFDO2FBQ04sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVNLFFBQVEsQ0FBQyxHQUF1QjtRQUNuQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNmLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNaLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM1QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3BFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDN0QsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN4QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVDLENBQUM7SUFDTCxDQUFDO0lBRU0sTUFBTTtRQUNULE1BQU0sQ0FBQyxDQUNQLG9CQUFDLGlCQUFPO1lBQ0osZ0RBQXNCO1lBQ3RCLCtCQUFPLFNBQVMsRUFBQyxPQUFPLFdBQWE7WUFDckMsK0JBQU8sSUFBSSxFQUFDLE1BQU0sRUFDZCxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQy9CLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDN0IsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFJO1lBQ3pFLGdDQUFRLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsU0FBUyxFQUFDLFdBQVcsYUFBZ0I7WUFDakYsZ0NBQVEsT0FBTyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsRUFBQyxZQUFZLG9CQUF1QixDQUN0RixDQUNULENBQUM7SUFDTixDQUFDOztBQWhEYSx5QkFBWSxHQUF1QjtJQUM5QyxZQUFZLEVBQUUsRUFBRTtDQUNsQjtBQU5MLG9DQXFEQyIsImZpbGUiOiI2OS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBTaWRlYmFyIGZvciBlZGl0b3JcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgT3ZlcmxheSB9IGZyb20gJy4uL092ZXJsYXknO1xuaW1wb3J0IHsgU291cmNlLCBTZXJpYWxpemVyIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuaW1wb3J0IHsgQXBpU2VydmljZSwgQXBwVXJscyB9IGZyb20gJy4uLy4uL0FwaVNlcnZpY2UnO1xuXG5pbXBvcnQgKiBhcyBtb3VzZXRyYXAgZnJvbSAnbW91c2V0cmFwJztcblxuaW50ZXJmYWNlIENyZWF0ZVNvdXJjZVByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgY29tcGxldGU6IChzOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgY2FuY2VsOiAoKSA9PiB2b2lkO1xuICAgIGluaXRpYWxWYWx1ZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlU291cmNlU3RhdGUge1xuICAgIGludGVybmFsVmFsdWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIENyZWF0ZVNvdXJjZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxDcmVhdGVTb3VyY2VQcm9wcywgQ3JlYXRlU291cmNlU3RhdGU+IHtcblxuICAgIHByaXZhdGUga2V5Ym9hcmRTaG9ydGN1dHM7XG5cbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA6IENyZWF0ZVNvdXJjZVByb3BzID0ge1xuICAgICAgIGluaXRpYWxWYWx1ZTogJydcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGludGVybmFsVmFsdWU6ICcnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGludGVybmFsVmFsdWU6IHRoaXMucHJvcHMuaW5pdGlhbFZhbHVlfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVNvdXJjZSgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hcGkucG9zdEl0ZW0oU291cmNlLCBBcHBVcmxzLnNvdXJjZSxcbiAgICAgICAgICAgIFNlcmlhbGl6ZXIuZnJvbUpzb24oU291cmNlLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5zdGF0ZS5pbnRlcm5hbFZhbHVlXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgLnRoZW4odGhpcy5wcm9wcy5jb21wbGV0ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGlucHV0UmVmKHZhbDogSFRNTEVsZW1lbnQgfCBudWxsKSB7XG4gICAgICAgIGlmICh2YWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhbC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZFNob3J0Y3V0cyA9IG5ldyBtb3VzZXRyYXAodmFsKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRTaG9ydGN1dHMuYmluZCgncmV0dXJuJywgdGhpcy5jcmVhdGVTb3VyY2UuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkU2hvcnRjdXRzLmJpbmQoJ2VzY2FwZScsIHRoaXMucHJvcHMuY2FuY2VsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRTaG9ydGN1dHMudW5iaW5kKCdyZXR1cm4nKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRTaG9ydGN1dHMudW5iaW5kKCdlc2NhcGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxPdmVybGF5PlxuICAgICAgICAgICAgPGgyPkNyZWF0ZSBTb3VyY2U8L2gyPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPk5hbWU8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuaW50ZXJuYWxWYWx1ZX1cbiAgICAgICAgICAgICAgICByZWY9e3RoaXMuaW5wdXRSZWYuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHRoaXMuc2V0U3RhdGUoeyBpbnRlcm5hbFZhbHVlOiBlLnRhcmdldC52YWx1ZSB9KX0gLz5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5jYW5jZWwoKX0gY2xhc3NOYW1lPSdwdWxsLWxlZnQnPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLmNyZWF0ZVNvdXJjZS5iaW5kKHRoaXMpfSBjbGFzc05hbWU9J3B1bGwtcmlnaHQnPkNyZWF0ZSBTb3VyY2U8L2J1dHRvbj5cbiAgICAgICAgPC9PdmVybGF5PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9tb2RhbC9DcmVhdGVTb3VyY2UudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 70 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Overlay_1 = __webpack_require__(66);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst ComboDropdown_1 = __webpack_require__(18);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass CreateEntity extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            label: '',\r\n            entityType: { key: '', value: '' },\r\n            allEntityTypes: []\r\n        };\r\n    }\r\n    componentWillMount() {\r\n        this.props.api.getCollection(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, {})\r\n            .then((allEntityTypes) => {\r\n            if (this.props.initialType !== undefined) {\r\n                const initialType = allEntityTypes.find((et) => et.uid === this.props.initialType);\r\n                this.setState({\r\n                    entityType: { key: initialType.label, value: initialType.uid.toString() }\r\n                });\r\n            }\r\n            this.setState({ allEntityTypes });\r\n        });\r\n    }\r\n    CreateEntity() {\r\n        this.props.api.postItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, falcon_core_1.Serializer.fromJson(falcon_core_1.Entity, {\r\n            label: this.state.label,\r\n            entityType: this.state.entityType.value\r\n        }))\r\n            .then(this.props.complete);\r\n    }\r\n    render() {\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Create Entity\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Label\"),\r\n            React.createElement(\"input\", { type: 'text', value: this.state.label, ref: (a) => { if (a !== null)\r\n                    a.focus(); }, name: 'new-entity-name', className: 'gap', onChange: (e) => this.setState({ label: e.target.value }) }),\r\n            React.createElement(\"label\", { className: 'small' }, \"Type\"),\r\n            React.createElement(ComboDropdown_1.ComboDropdown, { options: this.state.allEntityTypes.map((t) => ({ key: t.label, value: t.uid.toString() })), typeName: 'entity type', value: this.state.entityType, setValue: (entityType) => this.setState({ entityType }), createNewValue: lodash_1.noop, allowNew: false }),\r\n            React.createElement(\"button\", { name: 'cancel-modal', onClick: () => this.props.cancel(), className: 'pull-left' }, \"Cancel\"),\r\n            React.createElement(\"button\", { name: 'create-entity', onClick: this.CreateEntity.bind(this), className: 'pull-right' }, \"Create Entity\")));\r\n    }\r\n}\r\nexports.CreateEntity = CreateEntity;\r\n;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ3JlYXRlRW50aXR5LnRzeD9iMjE0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRS9CLDBDQUFxQztBQUNyQyw4Q0FBNkQ7QUFDN0QsNENBQXVEO0FBQ3ZELGdEQUFzRTtBQUV0RSx5Q0FBOEI7QUFnQjlCLGtCQUEwQixTQUFRLEtBQUssQ0FBQyxTQUErQztJQUVuRjtRQUNJLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNULEtBQUssRUFBRSxFQUFFO1lBQ1QsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO1lBQ2pDLGNBQWMsRUFBRSxFQUFFO1NBQ3JCLENBQUM7SUFDTixDQUFDO0lBRU0sa0JBQWtCO1FBQ3JCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyx3QkFBVSxFQUFFLG9CQUFPLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQzthQUNoRSxJQUFJLENBQUMsQ0FBQyxjQUFjO1lBQ2pCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLE1BQU0sV0FBVyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUNuRixJQUFJLENBQUMsUUFBUSxDQUFDO29CQUNWLFVBQVUsRUFBRyxFQUFFLEdBQUcsRUFBRSxXQUFXLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxXQUFXLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFO2lCQUM3RSxDQUFDO1lBQ04sQ0FBQztZQUNELElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxjQUFjLEVBQUUsQ0FBQyxDQUFDO1FBQ3RDLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLFlBQVk7UUFDZixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsb0JBQU0sRUFBRSxvQkFBTyxDQUFDLE1BQU0sRUFDMUMsd0JBQVUsQ0FBQyxRQUFRLENBQUMsb0JBQU0sRUFBRTtZQUN4QixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLO1lBQ3ZCLFVBQVUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLO1NBQzFDLENBQUMsQ0FBQzthQUNOLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFTSxNQUFNO1FBQ1QsTUFBTSxDQUFDLENBQ1Asb0JBQUMsaUJBQU87WUFDSixnREFBc0I7WUFFdEIsK0JBQU8sU0FBUyxFQUFDLE9BQU8sWUFBYztZQUN0QywrQkFBTyxJQUFJLEVBQUMsTUFBTSxFQUNkLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFDdkIsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBQyxDQUFDLEtBQUssSUFBSSxDQUFDO29CQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDekMsSUFBSSxFQUFDLGlCQUFpQixFQUN0QixTQUFTLEVBQUMsS0FBSyxFQUNmLFFBQVEsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBSTtZQUVqRSwrQkFBTyxTQUFTLEVBQUMsT0FBTyxXQUFhO1lBQ3JDLG9CQUFDLDZCQUFhLElBQ1YsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQzFGLFFBQVEsRUFBQyxhQUFhLEVBQ3RCLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFDNUIsUUFBUSxFQUFFLENBQUMsVUFBVSxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQyxVQUFVLEVBQUMsQ0FBQyxFQUNyRCxjQUFjLEVBQUUsYUFBSSxFQUNwQixRQUFRLEVBQUUsS0FBSyxHQUNqQjtZQUNGLGdDQUFRLElBQUksRUFBQyxjQUFjLEVBQUMsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxTQUFTLEVBQUMsV0FBVyxhQUFnQjtZQUNyRyxnQ0FBUSxJQUFJLEVBQUMsZUFBZSxFQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxTQUFTLEVBQUMsWUFBWSxvQkFBdUIsQ0FDM0csQ0FDVCxDQUFDO0lBQ04sQ0FBQztDQUNKO0FBNURELG9DQTREQztBQUFBLENBQUMiLCJmaWxlIjoiNzAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgU2lkZWJhciBmb3IgZWRpdG9yXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IE92ZXJsYXkgfSBmcm9tICcuLi9PdmVybGF5JztcbmltcG9ydCB7IEVudGl0eSwgRW50aXR5VHlwZSwgU2VyaWFsaXplciB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcbmltcG9ydCB7IEFwaVNlcnZpY2UsIEFwcFVybHMgfSBmcm9tICcuLi8uLi9BcGlTZXJ2aWNlJztcbmltcG9ydCB7IENvbWJvRHJvcGRvd24sIENvbWJvRHJvcGRvd25PcHRpb24gfSBmcm9tICcuLi9Db21ib0Ryb3Bkb3duJztcblxuaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmludGVyZmFjZSBDcmVhdGVFbnRpdHlQcm9wcyB7XG4gICAgYXBpOiBBcGlTZXJ2aWNlO1xuICAgIGNvbXBsZXRlOiAoczogc3RyaW5nKSA9PiB2b2lkO1xuICAgIGNhbmNlbDogKCkgPT4gdm9pZDtcbiAgICBpbml0aWFsTmFtZT86IHN0cmluZyxcbiAgICBpbml0aWFsVHlwZT86IG51bWJlclxufVxuXG5pbnRlcmZhY2UgQ3JlYXRlRW50aXR5U3RhdGUge1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgZW50aXR5VHlwZTogQ29tYm9Ecm9wZG93bk9wdGlvbjtcbiAgICBhbGxFbnRpdHlUeXBlczogRW50aXR5VHlwZVtdO1xufVxuXG5leHBvcnQgY2xhc3MgQ3JlYXRlRW50aXR5IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PENyZWF0ZUVudGl0eVByb3BzLCBDcmVhdGVFbnRpdHlTdGF0ZT4ge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBsYWJlbDogJycsXG4gICAgICAgICAgICBlbnRpdHlUeXBlOiB7IGtleTogJycsIHZhbHVlOiAnJ30sXG4gICAgICAgICAgICBhbGxFbnRpdHlUeXBlczogW11cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLnByb3BzLmFwaS5nZXRDb2xsZWN0aW9uKEVudGl0eVR5cGUsIEFwcFVybHMuZW50aXR5X3R5cGUsIHt9KVxuICAgICAgICAudGhlbigoYWxsRW50aXR5VHlwZXMpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmluaXRpYWxUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsVHlwZSA9IGFsbEVudGl0eVR5cGVzLmZpbmQoKGV0KSA9PiBldC51aWQgPT09IHRoaXMucHJvcHMuaW5pdGlhbFR5cGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHlUeXBlOiAgeyBrZXk6IGluaXRpYWxUeXBlLmxhYmVsLCB2YWx1ZTogaW5pdGlhbFR5cGUudWlkLnRvU3RyaW5nKCkgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgYWxsRW50aXR5VHlwZXMgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBDcmVhdGVFbnRpdHkoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYXBpLnBvc3RJdGVtKEVudGl0eSwgQXBwVXJscy5lbnRpdHksXG4gICAgICAgICAgICBTZXJpYWxpemVyLmZyb21Kc29uKEVudGl0eSwge1xuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLnN0YXRlLmxhYmVsLFxuICAgICAgICAgICAgICAgIGVudGl0eVR5cGU6IHRoaXMuc3RhdGUuZW50aXR5VHlwZS52YWx1ZVxuICAgICAgICAgICAgfSkpXG4gICAgICAgIC50aGVuKHRoaXMucHJvcHMuY29tcGxldGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIDxPdmVybGF5PlxuICAgICAgICAgICAgPGgyPkNyZWF0ZSBFbnRpdHk8L2gyPlxuXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdzbWFsbCc+TGFiZWw8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubGFiZWx9XG4gICAgICAgICAgICAgICAgcmVmPXsoYSkgPT4geyBpZihhICE9PSBudWxsKSBhLmZvY3VzKCk7IH19XG4gICAgICAgICAgICAgICAgbmFtZT0nbmV3LWVudGl0eS1uYW1lJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZ2FwJ1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdGhpcy5zZXRTdGF0ZSh7IGxhYmVsOiBlLnRhcmdldC52YWx1ZSB9KX0gLz5cblxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPlR5cGU8L2xhYmVsPlxuICAgICAgICAgICAgPENvbWJvRHJvcGRvd25cbiAgICAgICAgICAgICAgICBvcHRpb25zPXt0aGlzLnN0YXRlLmFsbEVudGl0eVR5cGVzLm1hcCgodCkgPT4gKHsga2V5OiB0LmxhYmVsLCB2YWx1ZTogdC51aWQudG9TdHJpbmcoKSB9KSl9XG4gICAgICAgICAgICAgICAgdHlwZU5hbWU9J2VudGl0eSB0eXBlJ1xuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmVudGl0eVR5cGV9XG4gICAgICAgICAgICAgICAgc2V0VmFsdWU9eyhlbnRpdHlUeXBlKSA9PiB0aGlzLnNldFN0YXRlKHtlbnRpdHlUeXBlfSl9XG4gICAgICAgICAgICAgICAgY3JlYXRlTmV3VmFsdWU9e25vb3B9XG4gICAgICAgICAgICAgICAgYWxsb3dOZXc9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gbmFtZT0nY2FuY2VsLW1vZGFsJyBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmNhbmNlbCgpfSBjbGFzc05hbWU9J3B1bGwtbGVmdCc+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIG5hbWU9J2NyZWF0ZS1lbnRpdHknIG9uQ2xpY2s9e3RoaXMuQ3JlYXRlRW50aXR5LmJpbmQodGhpcyl9IGNsYXNzTmFtZT0ncHVsbC1yaWdodCc+Q3JlYXRlIEVudGl0eTwvYnV0dG9uPlxuICAgICAgICA8L092ZXJsYXk+XG4gICAgICAgICk7XG4gICAgfVxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vY29tcG9uZW50cy9tb2RhbC9DcmVhdGVFbnRpdHkudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 71 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Overlay_1 = __webpack_require__(66);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst mousetrap = __webpack_require__(51);\r\nclass CreateEntityType extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            internalValue: ''\r\n        };\r\n    }\r\n    createEntityType() {\r\n        this.props.api.postItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, falcon_core_1.Serializer.fromJson(falcon_core_1.EntityType, {\r\n            name: this.state.internalValue\r\n        }))\r\n            .then(this.props.complete);\r\n    }\r\n    inputRef(val) {\r\n        if (val !== null) {\r\n            val.focus();\r\n            this.keyboardShortcuts = new mousetrap(val);\r\n            this.keyboardShortcuts.bind('return', this.createEntityType.bind(this));\r\n            this.keyboardShortcuts.bind('escape', this.props.cancel);\r\n        }\r\n        else {\r\n            this.keyboardShortcuts.unbind('return');\r\n        }\r\n    }\r\n    render() {\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Create Entity Type\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Name\"),\r\n            React.createElement(\"input\", { type: 'text', value: this.state.internalValue, ref: this.inputRef.bind(this), onChange: (e) => this.setState({ internalValue: e.target.value }) }),\r\n            React.createElement(\"button\", { onClick: () => this.props.cancel(), className: 'pull-left' }, \"Cancel\"),\r\n            React.createElement(\"button\", { onClick: this.createEntityType.bind(this), className: 'pull-right' }, \"Create Entity Type\")));\r\n    }\r\n}\r\nexports.CreateEntityType = CreateEntityType;\r\n;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ3JlYXRlRW50aXR5VHlwZS50c3g/NGE1NSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILHFDQUErQjtBQUUvQiwwQ0FBcUM7QUFDckMsOENBQXFEO0FBQ3JELDRDQUF1RDtBQUV2RCwwQ0FBdUM7QUFZdkMsc0JBQThCLFNBQVEsS0FBSyxDQUFDLFNBQXVEO0lBSS9GO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsYUFBYSxFQUFFLEVBQUU7U0FDcEIsQ0FBQztJQUNOLENBQUM7SUFFTSxnQkFBZ0I7UUFDbkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLHdCQUFVLEVBQUUsb0JBQU8sQ0FBQyxXQUFXLEVBQ25ELHdCQUFVLENBQUMsUUFBUSxDQUFDLHdCQUFVLEVBQUU7WUFDNUIsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYTtTQUNqQyxDQUFDLENBQUM7YUFDTixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRU0sUUFBUSxDQUFDLEdBQXVCO1FBQ25DLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2YsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ1osSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzVDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN4RSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdELENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUMsQ0FBQztJQUNMLENBQUM7SUFFTSxNQUFNO1FBQ1QsTUFBTSxDQUFDLENBQ1Asb0JBQUMsaUJBQU87WUFDSixxREFBMkI7WUFDM0IsK0JBQU8sU0FBUyxFQUFDLE9BQU8sV0FBYTtZQUNyQywrQkFBTyxJQUFJLEVBQUMsTUFBTSxFQUNkLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFDL0IsR0FBRyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUM3QixRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUk7WUFDekUsZ0NBQVEsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxTQUFTLEVBQUMsV0FBVyxhQUFnQjtZQUNqRixnQ0FBUSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxTQUFTLEVBQUMsWUFBWSx5QkFBNEIsQ0FDL0YsQ0FDVCxDQUFDO0lBQ04sQ0FBQztDQUNKO0FBNUNELDRDQTRDQztBQUFBLENBQUMiLCJmaWxlIjoiNzEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgU2lkZWJhciBmb3IgZWRpdG9yXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4xLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IE92ZXJsYXkgfSBmcm9tICcuLi9PdmVybGF5JztcbmltcG9ydCB7IEVudGl0eVR5cGUsIFNlcmlhbGl6ZXIgfSBmcm9tICdmYWxjb24tY29yZSc7XG5pbXBvcnQgeyBBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vLi4vQXBpU2VydmljZSc7XG5cbmltcG9ydCAqIGFzIG1vdXNldHJhcCBmcm9tICdtb3VzZXRyYXAnO1xuXG5pbnRlcmZhY2UgQ3JlYXRlRW50aXR5VHlwZVByb3BzIHtcbiAgICBhcGk6IEFwaVNlcnZpY2U7XG4gICAgY29tcGxldGU6IChzOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgY2FuY2VsOiAoKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlRW50aXR5VHlwZVN0YXRlIHtcbiAgICBpbnRlcm5hbFZhbHVlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBDcmVhdGVFbnRpdHlUeXBlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PENyZWF0ZUVudGl0eVR5cGVQcm9wcywgQ3JlYXRlRW50aXR5VHlwZVN0YXRlPiB7XG5cbiAgICBwcml2YXRlIGtleWJvYXJkU2hvcnRjdXRzO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpbnRlcm5hbFZhbHVlOiAnJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVFbnRpdHlUeXBlKCkge1xuICAgICAgICB0aGlzLnByb3BzLmFwaS5wb3N0SXRlbShFbnRpdHlUeXBlLCBBcHBVcmxzLmVudGl0eV90eXBlLFxuICAgICAgICAgICAgU2VyaWFsaXplci5mcm9tSnNvbihFbnRpdHlUeXBlLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5zdGF0ZS5pbnRlcm5hbFZhbHVlXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgLnRoZW4odGhpcy5wcm9wcy5jb21wbGV0ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGlucHV0UmVmKHZhbDogSFRNTEVsZW1lbnQgfCBudWxsKSB7XG4gICAgICAgIGlmICh2YWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhbC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZFNob3J0Y3V0cyA9IG5ldyBtb3VzZXRyYXAodmFsKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRTaG9ydGN1dHMuYmluZCgncmV0dXJuJywgdGhpcy5jcmVhdGVFbnRpdHlUeXBlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZFNob3J0Y3V0cy5iaW5kKCdlc2NhcGUnLCB0aGlzLnByb3BzLmNhbmNlbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkU2hvcnRjdXRzLnVuYmluZCgncmV0dXJuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICA8T3ZlcmxheT5cbiAgICAgICAgICAgIDxoMj5DcmVhdGUgRW50aXR5IFR5cGU8L2gyPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nc21hbGwnPk5hbWU8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuaW50ZXJuYWxWYWx1ZX1cbiAgICAgICAgICAgICAgICByZWY9e3RoaXMuaW5wdXRSZWYuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHRoaXMuc2V0U3RhdGUoeyBpbnRlcm5hbFZhbHVlOiBlLnRhcmdldC52YWx1ZSB9KX0gLz5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5jYW5jZWwoKX0gY2xhc3NOYW1lPSdwdWxsLWxlZnQnPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLmNyZWF0ZUVudGl0eVR5cGUuYmluZCh0aGlzKX0gY2xhc3NOYW1lPSdwdWxsLXJpZ2h0Jz5DcmVhdGUgRW50aXR5IFR5cGU8L2J1dHRvbj5cbiAgICAgICAgPC9PdmVybGF5PlxuICAgICAgICApO1xuICAgIH1cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ3JlYXRlRW50aXR5VHlwZS50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 72 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst React = __webpack_require__(2);\r\nconst Overlay_1 = __webpack_require__(66);\r\nclass ConflictResolution extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            label: '',\r\n            entityType: { key: '', value: '' },\r\n            allEntityTypes: []\r\n        };\r\n    }\r\n    render() {\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-exclamation-triangle warning' }),\r\n                \" Conflict: \",\r\n                this.props.message),\r\n            this.props.conflictingItems.record !== undefined && this.props.conflictingItems.record.length > 0 ? (React.createElement(\"span\", null,\r\n                React.createElement(\"p\", null, \"The following records conflict with your request change:\"),\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"th\", null, \"Entity\"),\r\n                            React.createElement(\"th\", null, \"Predicate\"),\r\n                            React.createElement(\"th\", null, \"Value\"))),\r\n                    React.createElement(\"tbody\", null, this.props.conflictingItems.record.map((record) => {\r\n                        const entityName = this.props.dataStore.all.entity.value\r\n                            .find((entity) => entity.uid == record.entity).label;\r\n                        const predicateName = this.props.dataStore.all.predicate.value\r\n                            .find((predicate) => predicate.uid == record.predicate).label;\r\n                        return (React.createElement(\"tr\", { key: `row-${record.uid}` },\r\n                            React.createElement(\"td\", null, entityName),\r\n                            React.createElement(\"td\", null, predicateName),\r\n                            React.createElement(\"td\", null, record.value)));\r\n                    }))))) : null,\r\n            this.props.conflictingItems.entity !== undefined && this.props.conflictingItems.entity.length > 0 ? (React.createElement(\"span\", null,\r\n                React.createElement(\"p\", null, \"The following entities conflict with your request change:\"),\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"th\", null, \"Entity\"))),\r\n                    React.createElement(\"tbody\", null, this.props.conflictingItems.entity.map((entity) => {\r\n                        return (React.createElement(\"tr\", { key: `row-${entity.uid}` },\r\n                            React.createElement(\"td\", null, entity.label)));\r\n                    }))))) : null,\r\n            this.props.conflictingItems.entityType !== undefined && this.props.conflictingItems.entityType.length > 0 ? (React.createElement(\"span\", null,\r\n                React.createElement(\"p\", null, \"The following entity types conflict with your request change:\"),\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"th\", null, \"Entity Type\"))),\r\n                    React.createElement(\"tbody\", null, this.props.conflictingItems.entityType.map((entityType) => {\r\n                        return (React.createElement(\"tr\", { key: `row-${entityType.uid}` },\r\n                            React.createElement(\"td\", null, entityType.label)));\r\n                    }))))) : null,\r\n            this.props.conflictingItems.source !== undefined && this.props.conflictingItems.source.length > 0 ? (React.createElement(\"span\", null,\r\n                React.createElement(\"p\", null, \"The following sources conflict with your request change:\"),\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"th\", null, \"Sources\"))),\r\n                    React.createElement(\"tbody\", null, this.props.conflictingItems.source.map((source) => {\r\n                        return (React.createElement(\"tr\", { key: `row-${source.uid}` },\r\n                            React.createElement(\"td\", null, source.label)));\r\n                    }))))) : null,\r\n            React.createElement(\"div\", { className: 'block-buttons' },\r\n                React.createElement(\"button\", { onClick: () => this.props.cancel() }, \"Cancel\"),\r\n                React.createElement(\"button\", { onClick: () => this.props.complete('addToWorkspace') },\r\n                    React.createElement(\"i\", { className: 'icon-list-add' }),\r\n                    \"Cancel and add conflicting records to workspace\"),\r\n                React.createElement(\"button\", { onClick: () => this.props.complete('deleteAll') },\r\n                    React.createElement(\"i\", { className: 'fa fa-trash' }),\r\n                    \" Continue and delete all conflicting records\"))));\r\n    }\r\n}\r\nexports.ConflictResolution = ConflictResolution;\r\n;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbXBvbmVudHMvbW9kYWwvQ29uZmxpY3RSZXNvbHV0aW9uLnRzeD8wNmJjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgscUNBQStCO0FBRS9CLDBDQUFxQztBQTJCckMsd0JBQWdDLFNBQVEsS0FBSyxDQUFDLFNBQTJEO0lBRXJHO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsS0FBSyxFQUFFLEVBQUU7WUFDVCxVQUFVLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUM7WUFDakMsY0FBYyxFQUFFLEVBQUU7U0FDckIsQ0FBQztJQUNOLENBQUM7SUFHTSxNQUFNO1FBQ1QsTUFBTSxDQUFDLENBQ1Asb0JBQUMsaUJBQU87WUFDSjtnQkFBSSwyQkFBRyxTQUFTLEVBQUMsb0NBQW9DLEdBQUs7O2dCQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFNO1lBQzdGLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQ2pHO2dCQUNJLDBGQUErRDtnQkFDL0QsK0JBQU8sU0FBUyxFQUFDLE9BQU87b0JBQ3BCO3dCQUNJOzRCQUNJLHlDQUFlOzRCQUNmLDRDQUFrQjs0QkFDbEIsd0NBQWMsQ0FDYixDQUNEO29CQUNSLG1DQUNDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU07d0JBRTNDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSzs2QkFDbkQsSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLE1BQU0s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QUFpQjtnQkFDM0QsZ0NBQVEsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUM7b0JBQ3hELDJCQUFHLFNBQVMsRUFBQyxlQUFlLEdBQUs7c0VBQzVCO2dCQUNULGdDQUFRLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQztvQkFDbkQsMkJBQUcsU0FBUyxFQUFDLGFBQWEsR0FBSzttRUFDMUIsQ0FDUCxDQUVBLENBQ1QsQ0FBQztJQUNOLENBQUM7Q0FDSjtBQTNJRCxnREEySUM7QUFBQSxDQUFDIiwiZmlsZSI6IjcyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFNpZGViYXIgZm9yIGVkaXRvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBPdmVybGF5IH0gZnJvbSAnLi4vT3ZlcmxheSc7XG5pbXBvcnQgeyBFbnRpdHksIEVudGl0eVR5cGUsIFJlY29yZCwgUHJlZGljYXRlIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuaW1wb3J0IHsgQXBpU2VydmljZSwgQXBwVXJscyB9IGZyb20gJy4uLy4uL0FwaVNlcnZpY2UnO1xuaW1wb3J0IHsgRGF0YVN0b3JlIH0gZnJvbSAnLi4vLi4vRGF0YVN0b3JlJztcbmltcG9ydCB7IENvbWJvRHJvcGRvd24sIENvbWJvRHJvcGRvd25PcHRpb24gfSBmcm9tICcuLi9Db21ib0Ryb3Bkb3duJztcblxuaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmludGVyZmFjZSBDb25mbGljdFJlc29sdXRpb25Qcm9wcyB7XG4gICAgYXBpOiBBcGlTZXJ2aWNlO1xuICAgIGRhdGFTdG9yZTogRGF0YVN0b3JlO1xuICAgIGNvbXBsZXRlOiAoczogc3RyaW5nKSA9PiB2b2lkO1xuICAgIGNhbmNlbDogKCkgPT4gdm9pZDtcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgY29uZmxpY3RpbmdJdGVtczoge1xuICAgICAgICByZWNvcmQ6IFJlY29yZFtdLFxuICAgICAgICBlbnRpdHk6IEVudGl0eVtdLFxuICAgICAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZVtdXG4gICAgfTtcbn1cblxuaW50ZXJmYWNlIENvbmZsaWN0UmVzb2x1dGlvblN0YXRlIHtcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIGVudGl0eVR5cGU6IENvbWJvRHJvcGRvd25PcHRpb247XG4gICAgYWxsRW50aXR5VHlwZXM6IEVudGl0eVR5cGVbXTtcbn1cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0UmVzb2x1dGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxDb25mbGljdFJlc29sdXRpb25Qcm9wcywgQ29uZmxpY3RSZXNvbHV0aW9uU3RhdGU+IHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgICAgZW50aXR5VHlwZTogeyBrZXk6ICcnLCB2YWx1ZTogJyd9LFxuICAgICAgICAgICAgYWxsRW50aXR5VHlwZXM6IFtdXG4gICAgICAgIH07XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICA8T3ZlcmxheT5cbiAgICAgICAgICAgIDxoMj48aSBjbGFzc05hbWU9J2ZhIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlIHdhcm5pbmcnPjwvaT4gQ29uZmxpY3Q6IHt0aGlzLnByb3BzLm1lc3NhZ2V9PC9oMj5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmNvbmZsaWN0aW5nSXRlbXMucmVjb3JkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5wcm9wcy5jb25mbGljdGluZ0l0ZW1zLnJlY29yZC5sZW5ndGggPiAwID8gKFxuICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICA8cD5UaGUgZm9sbG93aW5nIHJlY29yZHMgY29uZmxpY3Qgd2l0aCB5b3VyIHJlcXVlc3QgY2hhbmdlOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0ndGFibGUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPkVudGl0eTwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5QcmVkaWNhdGU8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+VmFsdWU8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY29uZmxpY3RpbmdJdGVtcy5yZWNvcmQubWFwKChyZWNvcmQpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSB0aGlzLnByb3BzLmRhdGFTdG9yZS5hbGwuZW50aXR5LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKChlbnRpdHkpID0+IGVudGl0eS51aWQgPT0gcmVjb3JkLmVudGl0eSkubGFiZWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVkaWNhdGVOYW1lID0gdGhpcy5wcm9wcy5kYXRhU3RvcmUuYWxsLnByZWRpY2F0ZS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgocHJlZGljYXRlKSA9PiBwcmVkaWNhdGUudWlkID09IHJlY29yZC5wcmVkaWNhdGUpLmxhYmVsO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2Byb3ctJHtyZWNvcmQudWlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZW50aXR5TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3ByZWRpY2F0ZU5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZWNvcmQudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICkgOiBudWxsIH1cblxuXG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5jb25mbGljdGluZ0l0ZW1zLmVudGl0eSAhPT0gdW5kZWZpbmVkICYmIHRoaXMucHJvcHMuY29uZmxpY3RpbmdJdGVtcy5lbnRpdHkubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHA+VGhlIGZvbGxvd2luZyBlbnRpdGllcyBjb25mbGljdCB3aXRoIHlvdXIgcmVxdWVzdCBjaGFuZ2U6PC9wPlxuICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPSd0YWJsZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+RW50aXR5PC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNvbmZsaWN0aW5nSXRlbXMuZW50aXR5Lm1hcCgoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXtgcm93LSR7ZW50aXR5LnVpZH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VudGl0eS5sYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKSA6IG51bGwgfVxuXG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5jb25mbGljdGluZ0l0ZW1zLmVudGl0eVR5cGUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnByb3BzLmNvbmZsaWN0aW5nSXRlbXMuZW50aXR5VHlwZS5sZW5ndGggPiAwID8gKFxuICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICA8cD5UaGUgZm9sbG93aW5nIGVudGl0eSB0eXBlcyBjb25mbGljdCB3aXRoIHlvdXIgcmVxdWVzdCBjaGFuZ2U6PC9wPlxuICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPSd0YWJsZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+RW50aXR5IFR5cGU8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY29uZmxpY3RpbmdJdGVtcy5lbnRpdHlUeXBlLm1hcCgoZW50aXR5VHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YHJvdy0ke2VudGl0eVR5cGUudWlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZW50aXR5VHlwZS5sYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKSA6IG51bGwgfVxuXG4gICAgICAgICAgICAge3RoaXMucHJvcHMuY29uZmxpY3RpbmdJdGVtcy5zb3VyY2UgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnByb3BzLmNvbmZsaWN0aW5nSXRlbXMuc291cmNlLmxlbmd0aCA+IDAgPyAoXG4gICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxwPlRoZSBmb2xsb3dpbmcgc291cmNlcyBjb25mbGljdCB3aXRoIHlvdXIgcmVxdWVzdCBjaGFuZ2U6PC9wPlxuICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPSd0YWJsZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+U291cmNlczwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jb25mbGljdGluZ0l0ZW1zLnNvdXJjZS5tYXAoKHNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YHJvdy0ke3NvdXJjZS51aWR9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzb3VyY2UubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICkgOiBudWxsIH1cblxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYmxvY2stYnV0dG9ucyc+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmNhbmNlbCgpfT5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHRoaXMucHJvcHMuY29tcGxldGUoJ2FkZFRvV29ya3NwYWNlJyl9PlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb24tbGlzdC1hZGQnPjwvaT5DYW5jZWwgYW5kIGFkZCBjb25mbGljdGluZyByZWNvcmRzIHRvIHdvcmtzcGFjZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5jb21wbGV0ZSgnZGVsZXRlQWxsJyl9PlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXRyYXNoJz48L2k+IENvbnRpbnVlIGFuZCBkZWxldGUgYWxsIGNvbmZsaWN0aW5nIHJlY29yZHNcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwvT3ZlcmxheT5cbiAgICAgICAgKTtcbiAgICB9XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9jb21wb25lbnRzL21vZGFsL0NvbmZsaWN0UmVzb2x1dGlvbi50c3giXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 73 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst immutable_1 = __webpack_require__(74);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nexports.emptyDataStore = {\r\n    all: {\r\n        entity: { value: [], lastUpdate: null },\r\n        entity_type: { value: [], lastUpdate: null },\r\n        predicate: { value: [], lastUpdate: null },\r\n        source: { value: [], lastUpdate: null },\r\n        dublinCore: { value: new falcon_core_1.ElementSet(), lastUpdate: null }\r\n    },\r\n    records: immutable_1.Map(),\r\n    tabs: {\r\n        entity: immutable_1.Map(),\r\n        entity_type: immutable_1.Map(),\r\n        predicate: immutable_1.Map(),\r\n        source: immutable_1.Map()\r\n    }\r\n};\r\nexports.emptyTabs = [\r\n    { entity: immutable_1.Map() },\r\n    { entity_type: immutable_1.Map() },\r\n    { predicate: immutable_1.Map() },\r\n    { source: immutable_1.Map()\r\n    }\r\n];\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL0RhdGFTdG9yZS50cz82NjBkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgsNENBQWdDO0FBQ2hDLDhDQUF1RztBQXVDMUYsc0JBQWMsR0FBZTtJQUV4QyxHQUFHLEVBQUU7UUFDSCxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUU7UUFDdkMsV0FBVyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFO1FBQzVDLFNBQVMsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRTtRQUMxQyxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUU7UUFDdkMsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksd0JBQVUsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUU7S0FDMUQ7SUFFRCxPQUFPLEVBQUUsZUFBRyxFQUFrQztJQUU5QyxJQUFJLEVBQUU7UUFDSixNQUFNLEVBQUUsZUFBRyxFQUlOO1FBRUwsV0FBVyxFQUFFLGVBQUcsRUFBc0M7UUFDdEQsU0FBUyxFQUFFLGVBQUcsRUFBcUM7UUFFbkQsTUFBTSxFQUFFLGVBQUcsRUFHTjtLQUNOO0NBQ0YsQ0FBQztBQUVXLGlCQUFTLEdBQUc7SUFDckIsRUFBQyxNQUFNLEVBQUUsZUFBRyxFQUdQLEVBQUM7SUFFTixFQUFDLFdBQVcsRUFBRSxlQUFHLEVBQXNDLEVBQUM7SUFDeEQsRUFBQyxTQUFTLEVBQUUsZUFBRyxFQUFxQyxFQUFDO0lBRXJELEVBQUMsTUFBTSxFQUFFLGVBQUcsRUFHUDtLQUNOO0NBQUMsQ0FBQyIsImZpbGUiOiI3My5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyA8RGVzY3JpcHRpb24gTWlzc2luZz5cbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCB7IE1hcCB9IGZyb20gJ2ltbXV0YWJsZSc7XG5pbXBvcnQgeyBQcmVkaWNhdGUsIEVudGl0eVR5cGUsIEVudGl0eSwgUmVjb3JkLCBTb3VyY2UsIFNvdXJjZUVsZW1lbnQsIEVsZW1lbnRTZXQgfSBmcm9tICdmYWxjb24tY29yZSc7XG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBEYXRhU3RvcmVFbnRyeTxUPiB7XG4gICAgdmFsdWU6IFQ7XG4gICAgbGFzdFVwZGF0ZTogbW9tZW50Lk1vbWVudCB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGF0YVN0b3JlIHtcbiAgYWxsOiB7XG4gICAgZW50aXR5OiBEYXRhU3RvcmVFbnRyeTxFbnRpdHlbXT47XG4gICAgZW50aXR5X3R5cGU6IERhdGFTdG9yZUVudHJ5PEVudGl0eVR5cGVbXT47XG4gICAgcHJlZGljYXRlOiBEYXRhU3RvcmVFbnRyeTxQcmVkaWNhdGVbXT47XG4gICAgc291cmNlOiBEYXRhU3RvcmVFbnRyeTxTb3VyY2VbXT47XG4gICAgZHVibGluQ29yZTogRGF0YVN0b3JlRW50cnk8RWxlbWVudFNldD47XG4gIH07XG5cbiAgcmVjb3JkczogTWFwPHN0cmluZywgRGF0YVN0b3JlRW50cnk8UmVjb3JkPj47XG5cbiAgdGFiczoge1xuXG4gICAgZW50aXR5OiBNYXA8c3RyaW5nLCBEYXRhU3RvcmVFbnRyeTx7XG4gICAgICBlbnRpdHk6IEVudGl0eTtcbiAgICAgIHJlY29yZHM6IFJlY29yZFtdO1xuICAgICAgcmVmZXJlbmNlUmVjb3JkczogUmVjb3JkW107XG4gICAgfT4+O1xuXG4gICAgZW50aXR5X3R5cGU6IE1hcDxzdHJpbmcsIERhdGFTdG9yZUVudHJ5PEVudGl0eVR5cGU+PjtcblxuICAgIHByZWRpY2F0ZTogTWFwPHN0cmluZywgRGF0YVN0b3JlRW50cnk8UHJlZGljYXRlPj47XG5cbiAgICBzb3VyY2U6IE1hcDxzdHJpbmcsIERhdGFTdG9yZUVudHJ5PHtcbiAgICAgIHNvdXJjZTogU291cmNlO1xuICAgICAgZWxlbWVudHM6IFNvdXJjZUVsZW1lbnQ7XG4gICAgfT4+O1xuXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBlbXB0eURhdGFTdG9yZSA6IERhdGFTdG9yZSA9IHtcblxuICBhbGw6IHtcbiAgICBlbnRpdHk6IHsgdmFsdWU6IFtdLCBsYXN0VXBkYXRlOiBudWxsIH0sXG4gICAgZW50aXR5X3R5cGU6IHsgdmFsdWU6IFtdLCBsYXN0VXBkYXRlOiBudWxsIH0sXG4gICAgcHJlZGljYXRlOiB7IHZhbHVlOiBbXSwgbGFzdFVwZGF0ZTogbnVsbCB9LFxuICAgIHNvdXJjZTogeyB2YWx1ZTogW10sIGxhc3RVcGRhdGU6IG51bGwgfSxcbiAgICBkdWJsaW5Db3JlOiB7IHZhbHVlOiBuZXcgRWxlbWVudFNldCgpLCBsYXN0VXBkYXRlOiBudWxsIH1cbiAgfSxcblxuICByZWNvcmRzOiBNYXA8c3RyaW5nLCBEYXRhU3RvcmVFbnRyeTxSZWNvcmQ+PigpLFxuXG4gIHRhYnM6IHtcbiAgICBlbnRpdHk6IE1hcDxzdHJpbmcsIERhdGFTdG9yZUVudHJ5PHtcbiAgICAgIGVudGl0eTogRW50aXR5O1xuICAgICAgcmVjb3JkczogUmVjb3JkW107XG4gICAgICByZWZlcmVuY2VSZWNvcmRzOiBSZWNvcmRbXTtcbiAgICB9Pj4oKSxcblxuICAgIGVudGl0eV90eXBlOiBNYXA8c3RyaW5nLCBEYXRhU3RvcmVFbnRyeTxFbnRpdHlUeXBlPj4oKSxcbiAgICBwcmVkaWNhdGU6IE1hcDxzdHJpbmcsIERhdGFTdG9yZUVudHJ5PFByZWRpY2F0ZT4+KCksXG5cbiAgICBzb3VyY2U6IE1hcDxzdHJpbmcsIERhdGFTdG9yZUVudHJ5PHtcbiAgICAgIHNvdXJjZTogU291cmNlO1xuICAgICAgZWxlbWVudHM6IFNvdXJjZUVsZW1lbnQ7XG4gICAgfT4+KClcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGVtcHR5VGFicyA9IFtcbiAgICB7ZW50aXR5OiBNYXA8c3RyaW5nLCBEYXRhU3RvcmVFbnRyeTx7XG4gICAgICBlbnRpdHk6IEVudGl0eTtcbiAgICAgIHJlY29yZHM6IFJlY29yZFtdO1xuICAgIH0+PigpfSxcblxuICAgIHtlbnRpdHlfdHlwZTogTWFwPHN0cmluZywgRGF0YVN0b3JlRW50cnk8RW50aXR5VHlwZT4+KCl9LFxuICAgIHtwcmVkaWNhdGU6IE1hcDxzdHJpbmcsIERhdGFTdG9yZUVudHJ5PFByZWRpY2F0ZT4+KCl9LFxuXG4gICAge3NvdXJjZTogTWFwPHN0cmluZywgRGF0YVN0b3JlRW50cnk8e1xuICAgICAgc291cmNlOiBTb3VyY2U7XG4gICAgICBlbGVtZW50czogU291cmNlRWxlbWVudDtcbiAgICB9Pj4oKVxuICB9XTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vRGF0YVN0b3JlLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 74 */
/***/ function(module, exports) {

	eval("module.exports = require(\"immutable\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJpbW11dGFibGVcIj8xZDIwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6Ijc0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaW1tdXRhYmxlXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiaW1tdXRhYmxlXCJcbi8vIG1vZHVsZSBpZCA9IDc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 75 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst ApiService_1 = __webpack_require__(6);\r\nconst immutable_1 = __webpack_require__(74);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst moment = __webpack_require__(43);\r\nconst loadTabData = (api, tab) => {\r\n    if (tab.tabClass !== 'item') {\r\n        return Promise.resolve(new falcon_core_1.Entity());\r\n    }\r\n    switch (tab.tabType) {\r\n        case 'entity':\r\n            return Promise.all([\r\n                api.getItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, tab.uid),\r\n                api.getCollection(falcon_core_1.Record, ApiService_1.AppUrls.record, { entity: tab.uid }),\r\n                api.getCollection(falcon_core_1.Record, ApiService_1.AppUrls.record, { value_type: 'entity', value_entity: tab.uid })\r\n            ]).then(([entity, records, referenceRecords]) => ({ entity, records, referenceRecords }));\r\n        case 'predicate':\r\n            return api.getItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, tab.uid);\r\n        case 'entity_type':\r\n            return api.getItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, tab.uid);\r\n        case 'source':\r\n            return Promise.all([\r\n                api.getItem(falcon_core_1.Source, ApiService_1.AppUrls.source, tab.uid),\r\n                api.getCollection(falcon_core_1.SourceElement, ApiService_1.AppUrls.source_element, { source: tab.uid })\r\n            ]).then(([source, source_element]) => ({ source, source_element }));\r\n        default:\r\n            throw new Error('Unexpected tab type requested');\r\n    }\r\n};\r\nexports.reload = (api, tabs, force = false, failureCallback) => {\r\n    const groupedTabs = lodash_1.groupBy(tabs, 'tabType');\r\n    const tabPromise = Promise.all(Object.keys(groupedTabs).map((tabType) => Promise.all(groupedTabs[tabType].map((tab) => loadTabData(api, tab)\r\n        .then((value) => {\r\n        return { [`${tab.tabType}-${tab.uid}`]: { value, lastUpdate: moment() } };\r\n    })\r\n        .catch((err) => {\r\n        failureCallback(tab.tabType, tab.uid);\r\n    })))\r\n        .then((tabData) => {\r\n        return { [tabType]: immutable_1.Map(Object.assign({}, ...tabData)) };\r\n    })));\r\n    // load lists of data commonly required by views\r\n    const allPromise = Promise.all([\r\n        api.getCollection(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, {}),\r\n        api.getCollection(falcon_core_1.Source, ApiService_1.AppUrls.source, {}),\r\n        api.getCollection(falcon_core_1.Entity, ApiService_1.AppUrls.entity, {}),\r\n        api.getCollection(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, {}),\r\n        api.getItem(falcon_core_1.ElementSet, ApiService_1.AppUrls.element_set, 1)\r\n    ])\r\n        .then(([predicates, sources, entities, entityType, dublinCore]) => {\r\n        return {\r\n            predicate: { value: predicates, lastUpdate: moment() },\r\n            source: { value: sources, lastUpdate: moment() },\r\n            entity: { value: entities, lastUpdate: moment() },\r\n            entity_type: { value: entityType, lastUpdate: moment() },\r\n            dublinCore: { value: dublinCore, lastUpdate: moment() }\r\n        };\r\n    });\r\n    return Promise.all([tabPromise, allPromise])\r\n        .then(([tabsArray, all]) => {\r\n        const tabs = Object.assign({}, ...tabsArray);\r\n        console.log(\"TABS\", tabs);\r\n        return { tabs, all };\r\n    });\r\n};\r\nexports.DataController = {\r\n    reload: exports.reload\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL0RhdGFDb250cm9sbGVyLnRzPzliYTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCw4Q0FBbUg7QUFDbkgsNENBQW1EO0FBR25ELDRDQUFnQztBQUVoQyx5Q0FBa0Q7QUFFbEQsdUNBQWlDO0FBRWpDLE1BQU0sV0FBVyxHQUFHLENBQUMsR0FBZSxFQUFFLEdBQVE7SUFDMUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzVCLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksb0JBQU0sRUFBRSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUNELE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLEtBQUssUUFBUTtZQUNULE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO2dCQUNmLEdBQUcsQ0FBQyxPQUFPLENBQUMsb0JBQU0sRUFBRSxvQkFBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDO2dCQUM1QyxHQUFHLENBQUMsYUFBYSxDQUFDLG9CQUFNLEVBQUUsb0JBQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUM5RCxHQUFHLENBQUMsYUFBYSxDQUFDLG9CQUFNLEVBQUUsb0JBQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7YUFDN0YsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzlGLEtBQUssV0FBVztZQUNaLE1B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QUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFVBQVUsQ0FBQztRQUUxRCxNQUFNLENBQUM7WUFDSCxTQUFTLEVBQUUsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUN0RCxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUNoRCxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUNqRCxXQUFXLEVBQUUsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUN4RCxVQUFVLEVBQUUsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsRUFBRTtTQUMxRCxDQUFDO0lBQ04sQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztTQUMzQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUM7UUFDbkIsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQztRQUM3QyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUMxQixNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDekIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUM7QUFFVyxzQkFBYyxHQUFHO0lBQzVCLE1BQU0sRUFBTixjQUFNO0NBQ1AsQ0FBQyIsImZpbGUiOiI3NS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyA8RGVzY3JpcHRpb24gTWlzc2luZz5cbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmltcG9ydCB7IEZhbGNvbkl0ZW0sIEVudGl0eSwgUmVjb3JkLCBTb3VyY2UsIFByZWRpY2F0ZSwgRW50aXR5VHlwZSwgU291cmNlRWxlbWVudCwgRWxlbWVudFNldCB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcbmltcG9ydCB7IEFwaVNlcnZpY2UsIEFwcFVybHMgfSBmcm9tICcuL0FwaVNlcnZpY2UnO1xuaW1wb3J0IHsgRGF0YVN0b3JlLCBlbXB0eVRhYnMgfSBmcm9tICcuL0RhdGFTdG9yZSc7XG5pbXBvcnQgeyBUYWIgfSBmcm9tICcuL2NvbXBvbmVudHMvU2lkZWJhcic7XG5pbXBvcnQgeyBNYXAgfSBmcm9tICdpbW11dGFibGUnO1xuXG5pbXBvcnQgeyBjbG9uZURlZXAsIGZpbmQsIGdyb3VwQnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuY29uc3QgbG9hZFRhYkRhdGEgPSAoYXBpOiBBcGlTZXJ2aWNlLCB0YWI6IFRhYikgOiBQcm9taXNlPEZhbGNvbkl0ZW0+ID0+IHtcbiAgICBpZiAodGFiLnRhYkNsYXNzICE9PSAnaXRlbScpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEVudGl0eSgpKTtcbiAgICB9XG4gICAgc3dpdGNoICh0YWIudGFiVHlwZSkge1xuICAgICAgICBjYXNlICdlbnRpdHknOlxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICBhcGkuZ2V0SXRlbShFbnRpdHksIEFwcFVybHMuZW50aXR5LCB0YWIudWlkKSxcbiAgICAgICAgICAgICAgICBhcGkuZ2V0Q29sbGVjdGlvbihSZWNvcmQsIEFwcFVybHMucmVjb3JkLCB7IGVudGl0eTogdGFiLnVpZCB9KSxcbiAgICAgICAgICAgICAgICBhcGkuZ2V0Q29sbGVjdGlvbihSZWNvcmQsIEFwcFVybHMucmVjb3JkLCB7IHZhbHVlX3R5cGU6ICdlbnRpdHknLCB2YWx1ZV9lbnRpdHk6IHRhYi51aWQgfSlcbiAgICAgICAgICAgIF0pLnRoZW4oKFtlbnRpdHksIHJlY29yZHMsIHJlZmVyZW5jZVJlY29yZHNdKSA9PiAoeyBlbnRpdHksIHJlY29yZHMsIHJlZmVyZW5jZVJlY29yZHMgfSkpO1xuICAgICAgICBjYXNlICdwcmVkaWNhdGUnOlxuICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXRJdGVtKFByZWRpY2F0ZSwgQXBwVXJscy5wcmVkaWNhdGUsIHRhYi51aWQpO1xuICAgICAgICBjYXNlICdlbnRpdHlfdHlwZSc6XG4gICAgICAgICAgICByZXR1cm4gYXBpLmdldEl0ZW0oRW50aXR5VHlwZSwgQXBwVXJscy5lbnRpdHlfdHlwZSwgdGFiLnVpZCk7XG4gICAgICAgIGNhc2UgJ3NvdXJjZSc6XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIGFwaS5nZXRJdGVtKFNvdXJjZSwgQXBwVXJscy5zb3VyY2UsIHRhYi51aWQpLFxuICAgICAgICAgICAgICAgIGFwaS5nZXRDb2xsZWN0aW9uKFNvdXJjZUVsZW1lbnQsIEFwcFVybHMuc291cmNlX2VsZW1lbnQsIHsgc291cmNlOiB0YWIudWlkIH0pXG4gICAgICAgICAgICBdKS50aGVuKChbc291cmNlLCBzb3VyY2VfZWxlbWVudF0pID0+ICh7IHNvdXJjZSwgc291cmNlX2VsZW1lbnQgfSkpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIHRhYiB0eXBlIHJlcXVlc3RlZCcpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCByZWxvYWQgPSAoYXBpOiBBcGlTZXJ2aWNlLCB0YWJzOiBUYWJbXSxcbiAgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSwgZmFpbHVyZUNhbGxiYWNrOiAod29ya3NwYWNlOiBzdHJpbmcsIHVpZDogbnVtYmVyKSA9PiB2b2lkKSA6IFByb21pc2U8RGF0YVN0b3JlPiA9PiB7XG5cbiAgY29uc3QgZ3JvdXBlZFRhYnMgPSBncm91cEJ5KHRhYnMsICd0YWJUeXBlJyk7XG5cbiAgY29uc3QgdGFiUHJvbWlzZSA9IFByb21pc2UuYWxsKFxuICAgIE9iamVjdC5rZXlzKGdyb3VwZWRUYWJzKS5tYXAoKHRhYlR5cGUpID0+XG4gICAgICBQcm9taXNlLmFsbChncm91cGVkVGFic1t0YWJUeXBlXS5tYXAoKHRhYikgPT5cbiAgICAgICAgbG9hZFRhYkRhdGEoYXBpLCB0YWIpXG4gICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7IFtgJHt0YWIudGFiVHlwZX0tJHt0YWIudWlkfWBdOiB7IHZhbHVlLCBsYXN0VXBkYXRlOiBtb21lbnQoKSB9fTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBmYWlsdXJlQ2FsbGJhY2sodGFiLnRhYlR5cGUsIHRhYi51aWQpO1xuICAgICAgICB9KVxuICAgICAgKSlcbiAgICAgIC50aGVuKCh0YWJEYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiB7IFt0YWJUeXBlXTogTWFwKE9iamVjdC5hc3NpZ24oe30sIC4uLnRhYkRhdGEpKSB9O1xuICAgICAgfSlcbiAgICApXG4gICk7XG5cbiAgLy8gbG9hZCBsaXN0cyBvZiBkYXRhIGNvbW1vbmx5IHJlcXVpcmVkIGJ5IHZpZXdzXG4gIGNvbnN0IGFsbFByb21pc2UgPSBQcm9taXNlLmFsbChbXG4gICAgICBhcGkuZ2V0Q29sbGVjdGlvbihQcmVkaWNhdGUsIEFwcFVybHMucHJlZGljYXRlLCB7fSksXG4gICAgICBhcGkuZ2V0Q29sbGVjdGlvbihTb3VyY2UsIEFwcFVybHMuc291cmNlLCB7fSksXG4gICAgICBhcGkuZ2V0Q29sbGVjdGlvbihFbnRpdHksIEFwcFVybHMuZW50aXR5LCB7fSksXG4gICAgICBhcGkuZ2V0Q29sbGVjdGlvbihFbnRpdHlUeXBlLCBBcHBVcmxzLmVudGl0eV90eXBlLCB7fSksXG4gICAgICBhcGkuZ2V0SXRlbShFbGVtZW50U2V0LCBBcHBVcmxzLmVsZW1lbnRfc2V0LCAxKVxuICBdKVxuICAudGhlbigoW3ByZWRpY2F0ZXMsIHNvdXJjZXMsIGVudGl0aWVzLCBlbnRpdHlUeXBlLCBkdWJsaW5Db3JlXSkgPT4ge1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAgIHByZWRpY2F0ZTogeyB2YWx1ZTogcHJlZGljYXRlcywgbGFzdFVwZGF0ZTogbW9tZW50KCkgfSxcbiAgICAgICAgICBzb3VyY2U6IHsgdmFsdWU6IHNvdXJjZXMsIGxhc3RVcGRhdGU6IG1vbWVudCgpIH0sXG4gICAgICAgICAgZW50aXR5OiB7IHZhbHVlOiBlbnRpdGllcywgbGFzdFVwZGF0ZTogbW9tZW50KCkgfSxcbiAgICAgICAgICBlbnRpdHlfdHlwZTogeyB2YWx1ZTogZW50aXR5VHlwZSwgbGFzdFVwZGF0ZTogbW9tZW50KCkgfSxcbiAgICAgICAgICBkdWJsaW5Db3JlOiB7IHZhbHVlOiBkdWJsaW5Db3JlLCBsYXN0VXBkYXRlOiBtb21lbnQoKSB9XG4gICAgICB9O1xuICB9KTtcblxuICByZXR1cm4gUHJvbWlzZS5hbGwoW3RhYlByb21pc2UsIGFsbFByb21pc2VdKVxuICAudGhlbigoW3RhYnNBcnJheSwgYWxsXSkgPT4ge1xuICAgICAgY29uc3QgdGFicyA9IE9iamVjdC5hc3NpZ24oe30sIC4uLnRhYnNBcnJheSk7XG4gICAgICBjb25zb2xlLmxvZyhcIlRBQlNcIiwgdGFicyk7XG4gICAgICByZXR1cm4geyB0YWJzLCBhbGwgfTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgRGF0YUNvbnRyb2xsZXIgPSB7XG4gIHJlbG9hZFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vRGF0YUNvbnRyb2xsZXIudHMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 76 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst Knex = __webpack_require__(77);\r\nconst lodash_1 = __webpack_require__(20);\r\nconst Exceptions_1 = __webpack_require__(78);\r\nclass Database {\r\n    constructor(config) {\r\n        this.knex = Knex(config);\r\n    }\r\n    query() {\r\n        return this.knex;\r\n    }\r\n    select(tableName, options = '*') {\r\n        return this.knex.select().from(tableName);\r\n    }\r\n    loadItem(a, uid) {\r\n        const query = this.knex.select()\r\n            .from(a)\r\n            .where({ uid: uid })\r\n            .first();\r\n        return query.then((result) => result === undefined ? Promise.reject(new Exceptions_1.KeyNotFoundException()) : result);\r\n    }\r\n    loadCollection(a, params) {\r\n        let query = this.knex.select()\r\n            .from(a);\r\n        Object.keys(params).forEach((param) => {\r\n            query = query.whereIn(param, params[param]);\r\n        });\r\n        return query.then((results) => results === undefined ? Promise.reject(new Exceptions_1.KeyNotFoundException()) : results);\r\n    }\r\n    createItem(tableName, data) {\r\n        // throw warning if called with uid\r\n        // validate that everything else has been sent\r\n        const withoutUid = lodash_1.omit(data, ['uid']);\r\n        return this.knex.transaction((trx) => {\r\n            return this.knex(tableName).transacting(trx).insert(withoutUid, 'uid').returning('uid')\r\n                .then((results) => {\r\n                return this.checkIntegrity(trx)\r\n                    .then((valid) => {\r\n                    if (!valid) {\r\n                        throw new Exceptions_1.DatabaseIntegrityError();\r\n                    }\r\n                    return results;\r\n                });\r\n            })\r\n                .then(trx.commit)\r\n                .catch(trx.rollback);\r\n        });\r\n    }\r\n    updateItem(tableName, data) {\r\n        // assert - must have uid\r\n        // validation?\r\n        return this.knex.transaction((trx) => {\r\n            return this.knex(tableName).transacting(trx)\r\n                .where({ 'uid': data.uid })\r\n                .update(data)\r\n                .then((results) => {\r\n                return this.checkIntegrity(trx)\r\n                    .then((valid) => {\r\n                    if (!valid) {\r\n                        throw new Exceptions_1.DatabaseIntegrityError();\r\n                    }\r\n                    return results;\r\n                });\r\n            })\r\n                .then(trx.commit)\r\n                .catch(trx.rollback);\r\n        });\r\n    }\r\n    deleteItem(tableName, uid) {\r\n        return this.knex.transaction((trx) => {\r\n            return this.knex(tableName).transacting(trx)\r\n                .where({ uid })\r\n                .del()\r\n                .then((results) => {\r\n                return this.checkIntegrity(trx)\r\n                    .then((valid) => {\r\n                    if (!valid) {\r\n                        throw new Exceptions_1.DatabaseIntegrityError();\r\n                    }\r\n                    return results;\r\n                });\r\n            })\r\n                .then(trx.commit)\r\n                .catch(trx.rollback);\r\n        });\r\n    }\r\n    getAncestorsOf(uid, tableName) {\r\n        return this.knex.raw(`\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM ${tableName}),\n                ancestor(uid) AS (\n                SELECT parent FROM parent_of WHERE uid=${uid}\n                UNION ALL\n                SELECT parent FROM parent_of JOIN ancestor USING(uid) )\n\t\t\t\tSELECT * from ancestor`)\r\n            .then((result) => {\r\n            return result.filter((a) => a.uid !== null).map((a) => a.uid);\r\n        });\r\n    }\r\n    getChildrenOf(uid, tableName) {\r\n        return this.knex.raw(`\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM ${tableName}),\n                ancestor(parent) AS (\n                SELECT uid FROM parent_of WHERE uid=${uid}\n                UNION ALL\n                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\n\t\t\t\tSELECT * from ancestor`)\r\n            .then((result) => {\r\n            return result.filter((a) => a.parent !== null).map((a) => a.parent);\r\n        });\r\n    }\r\n    checkIntegrity(trx) {\r\n        return Promise.all([\r\n            this.knex.transacting(trx).select(this.knex.raw('SUM((records.value_type != predicates.range_type)) AS valid'))\r\n                .from('records')\r\n                .innerJoin('predicates', 'records.predicate', 'predicates.uid'),\r\n            this.knex.transacting(trx).select(this.knex.raw(`\n                SUM((\n\n                entities.type not in (\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM entity_types),\n                                ancestor(parent) AS (\n                                SELECT uid FROM parent_of WHERE uid=predicates.range_ref\n                                UNION ALL\n                                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\n                                SELECT * from ancestor\n                )\n\n                )) as valid\n            `))\r\n                .from('records')\r\n                .innerJoin('predicates', 'records.predicate', 'predicates.uid')\r\n                .innerJoin('entities', 'entities.uid', 'records.value_entity')\r\n                .where('records.value_type', '=', 'entity'),\r\n            this.knex.transacting(trx).select(this.knex.raw(`\n               SUM((\n\n                entities.type not in (\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM entity_types),\n                                ancestor(parent) AS (\n                                SELECT uid FROM parent_of WHERE uid=predicates.domain\n                                UNION ALL\n                                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\n                                SELECT * from ancestor\n                )\n\n                )) as valid\n            `))\r\n                .from('records')\r\n                .innerJoin('predicates', 'records.predicate', 'predicates.uid')\r\n                .innerJoin('entities', 'entities.uid', 'records.entity')\r\n        ]).then(([[a], [b], [c]]) => {\r\n            return (a.valid + b.valid + c.valid) === 0;\r\n        });\r\n    }\r\n}\r\nexports.Database = Database;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvcmUvRGF0YWJhc2UudHM/ZWVkNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUdILHFDQUE2QjtBQUM3Qix5Q0FBOEI7QUFFOUIsNkNBQTRFO0FBRTVFO0lBSUksWUFBWSxNQUFtQjtRQUMzQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRU0sS0FBSztRQUNSLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3JCLENBQUM7SUFFTSxNQUFNLENBQUMsU0FBaUIsRUFBRSxVQUEwQixHQUFHO1FBQzFELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRU0sUUFBUSxDQUFDLENBQVMsRUFBRSxHQUFXO1FBQ2xDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO2FBQzNCLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDUCxLQUFLLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7YUFDbkIsS0FBSyxFQUFFLENBQUM7UUFFYixNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxNQUFNLEtBQUssU0FBUyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxpQ0FBb0IsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUM7SUFDOUcsQ0FBQztJQUVNLGNBQWMsQ0FBQyxDQUFTLEVBQUUsTUFBYztRQUMzQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTthQUN6QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFYixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUs7WUFDOUIsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEtBQUssT0FBTyxLQUFLLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksaUNBQW9CLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDO0lBQ2pILENBQUM7SUFFTSxVQUFVLENBQUMsU0FBaUIsRUFBRSxJQUFTO1FBQzFDLG1DQUFtQztRQUNuQyw4Q0FBOEM7UUFDOUMsTUFBTSxVQUFVLEdBQUcsYUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFFdkMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRztZQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO2lCQUN0RixJQUFJLENBQUMsQ0FBQyxPQUFPO2dCQUNWLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQztxQkFDOUIsSUFBSSxDQUFDLENBQUMsS0FBSztvQkFDUixFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7d0JBQ1QsTUFBTSxJQUFJLG1DQUFzQixFQUFFLENBQUM7b0JBQ3ZDLENBQUM7b0JBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQztnQkFDbkIsQ0FBQyxDQUFDLENBQUM7WUFDUCxDQUFDLENBQUM7aUJBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7aUJBQ2hCLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sVUFBVSxDQUFDLFNBQWlCLEVBQUUsSUFBUztRQUMxQyx5QkFBeUI7UUFDekIsY0FBYztRQUNkLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUc7WUFDN0IsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQztpQkFDM0MsS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztpQkFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQztpQkFDWixJQUFJLENBQUMsQ0FBQyxPQUFPO2dCQUNWLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQztxQkFDOUIsSUFBSSxDQUFDLENBQUMsS0FBSztvQkFDUixFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7d0JBQ1QsTUFBTSxJQUFJLG1DQUFzQixFQUFFLENBQUM7b0JBQ3ZDLENBQUM7b0JBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQztnQkFDbkIsQ0FBQyxDQUFDLENBQUM7WUFDUCxDQUFDLENBQUM7aUJBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7aUJBQ2hCLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sVUFBVSxDQUFDLFNBQWlCLEVBQUUsR0FBVztRQUU1QyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHO1lBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUM7aUJBQzNDLEtBQUssQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO2lCQUNkLEdBQUcsRUFBRTtpQkFDTCxJQUFJLENBQUMsQ0FBQyxPQUFPO2dCQUNWLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQztxQkFDOUIsSUFBSSxDQUFDLENBQUMsS0FBSztvQkFDUixFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7d0JBQ1QsTUFBTSxJQUFJLG1DQUFzQixFQUFFLENBQUM7b0JBQ3ZDLENBQUM7b0JBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQztnQkFDbkIsQ0FBQyxDQUFDLENBQUM7WUFDUCxDQUFDLENBQUM7aUJBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7aUJBQ2hCLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sY0FBYyxDQUFDLEdBQVcsRUFBRSxTQUFpQjtRQUNoRCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7aUZBQ29ELFNBQVM7O3lEQUVqQyxHQUFHOzs7MkJBR2pDLENBQUM7YUFDZixJQUFJLENBQUMsQ0FBQyxNQUFNO1lBQ1QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2xFLENBQUMsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVNLGFBQWEsQ0FBQyxHQUFXLEVBQUUsU0FBaUI7UUFDL0MsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2lGQUNvRCxTQUFTOztzREFFcEMsR0FBRzs7OzJCQUc5QixDQUFDO2FBQ2YsSUFBSSxDQUFDLENBQUMsTUFBTTtZQUNULE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4RSxDQUFDLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFTSxjQUFjLENBQUMsR0FBcUI7UUFDdkMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDZixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsNkRBQTZELENBQUMsQ0FBQztpQkFDOUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztpQkFDZixTQUFTLENBQUMsWUFBWSxFQUFFLG1CQUFtQixFQUFFLGdCQUFnQixDQUFDO1lBRS9ELElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7OzthQWEvQyxDQUFDLENBQUM7aUJBQ0YsSUFBSSxDQUFDLFNBQVMsQ0FBQztpQkFDZixTQUFTLENBQUMsWUFBWSxFQUFFLG1CQUFtQixFQUFFLGdCQUFnQixDQUFDO2lCQUM5RCxTQUFTLENBQUMsVUFBVSxFQUFFLGNBQWMsRUFBRSxzQkFBc0IsQ0FBQztpQkFDN0QsS0FBSyxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUM7WUFFM0MsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDOzs7Ozs7Ozs7Ozs7O2FBYS9DLENBQUMsQ0FBQztpQkFDRixJQUFJLENBQUMsU0FBUyxDQUFDO2lCQUNmLFNBQVMsQ0FBQyxZQUFZLEVBQUUsbUJBQW1CLEVBQUUsZ0JBQWdCLENBQUM7aUJBQzlELFNBQVMsQ0FBQyxVQUFVLEVBQUUsY0FBYyxFQUFFLGdCQUFnQixDQUFDO1NBRXpELENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9DLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKO0FBM0tELDRCQTJLQyIsImZpbGUiOiI3Ni5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBBYnN0cmFjdCBpbnRlcmZhY2UgZm9yIHNvdXJjZXNcbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjAuMVxuICovXG5cblxuaW1wb3J0ICogYXMgS25leCBmcm9tICdrbmV4JztcbmltcG9ydCB7IG9taXQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBLZXlOb3RGb3VuZEV4Y2VwdGlvbiwgRGF0YWJhc2VJbnRlZ3JpdHlFcnJvciB9IGZyb20gJy4vRXhjZXB0aW9ucyc7XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZSB7XG5cbiAgICBwcml2YXRlIGtuZXggOiBLbmV4O1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnOiBLbmV4LkNvbmZpZykge1xuICAgICAgICB0aGlzLmtuZXggPSBLbmV4KGNvbmZpZyk7XG4gICAgfVxuXG4gICAgcHVibGljIHF1ZXJ5KCkgOiBLbmV4IHtcbiAgICAgICAgcmV0dXJuIHRoaXMua25leDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2VsZWN0KHRhYmxlTmFtZTogc3RyaW5nLCBvcHRpb25zOiBzdHJpbmdbXSB8ICcqJyA9ICcqJykge1xuICAgICAgICByZXR1cm4gdGhpcy5rbmV4LnNlbGVjdCgpLmZyb20odGFibGVOYW1lKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9hZEl0ZW0oYTogc3RyaW5nLCB1aWQ6IG51bWJlcikgOiBQcm9taXNlPGFueT4ge1xuICAgICAgICBjb25zdCBxdWVyeSA9IHRoaXMua25leC5zZWxlY3QoKVxuICAgICAgICAgICAgLmZyb20oYSlcbiAgICAgICAgICAgIC53aGVyZSh7IHVpZDogdWlkIH0pXG4gICAgICAgICAgICAuZmlyc3QoKTtcblxuICAgICAgICByZXR1cm4gcXVlcnkudGhlbigocmVzdWx0KSA9PiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IFByb21pc2UucmVqZWN0KG5ldyBLZXlOb3RGb3VuZEV4Y2VwdGlvbigpKSA6IHJlc3VsdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGxvYWRDb2xsZWN0aW9uKGE6IHN0cmluZywgcGFyYW1zOiBPYmplY3QpIDogUHJvbWlzZTxhbnlbXT4ge1xuICAgICAgICBsZXQgcXVlcnkgPSB0aGlzLmtuZXguc2VsZWN0KClcbiAgICAgICAgICAgIC5mcm9tKGEpO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaCgocGFyYW0pID0+IHtcbiAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmVJbihwYXJhbSwgcGFyYW1zW3BhcmFtXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBxdWVyeS50aGVuKChyZXN1bHRzKSA9PiByZXN1bHRzID09PSB1bmRlZmluZWQgPyBQcm9taXNlLnJlamVjdChuZXcgS2V5Tm90Rm91bmRFeGNlcHRpb24oKSkgOiByZXN1bHRzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlSXRlbSh0YWJsZU5hbWU6IHN0cmluZywgZGF0YTogYW55KSA6IFByb21pc2VMaWtlPGFueT4ge1xuICAgICAgICAvLyB0aHJvdyB3YXJuaW5nIGlmIGNhbGxlZCB3aXRoIHVpZFxuICAgICAgICAvLyB2YWxpZGF0ZSB0aGF0IGV2ZXJ5dGhpbmcgZWxzZSBoYXMgYmVlbiBzZW50XG4gICAgICAgIGNvbnN0IHdpdGhvdXRVaWQgPSBvbWl0KGRhdGEsIFsndWlkJ10pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmtuZXgudHJhbnNhY3Rpb24oKHRyeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMua25leCh0YWJsZU5hbWUpLnRyYW5zYWN0aW5nKHRyeCkuaW5zZXJ0KHdpdGhvdXRVaWQsICd1aWQnKS5yZXR1cm5pbmcoJ3VpZCcpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrSW50ZWdyaXR5KHRyeClcbiAgICAgICAgICAgICAgICAudGhlbigodmFsaWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFiYXNlSW50ZWdyaXR5RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih0cnguY29tbWl0KVxuICAgICAgICAgICAgLmNhdGNoKHRyeC5yb2xsYmFjayk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVJdGVtKHRhYmxlTmFtZTogc3RyaW5nLCBkYXRhOiBhbnkpIDogUHJvbWlzZUxpa2U8YW55PiB7XG4gICAgICAgIC8vIGFzc2VydCAtIG11c3QgaGF2ZSB1aWRcbiAgICAgICAgLy8gdmFsaWRhdGlvbj9cbiAgICAgICAgcmV0dXJuIHRoaXMua25leC50cmFuc2FjdGlvbigodHJ4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5rbmV4KHRhYmxlTmFtZSkudHJhbnNhY3RpbmcodHJ4KVxuICAgICAgICAgICAgLndoZXJlKHsgJ3VpZCc6IGRhdGEudWlkIH0pXG4gICAgICAgICAgICAudXBkYXRlKGRhdGEpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrSW50ZWdyaXR5KHRyeClcbiAgICAgICAgICAgICAgICAudGhlbigodmFsaWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFiYXNlSW50ZWdyaXR5RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih0cnguY29tbWl0KVxuICAgICAgICAgICAgLmNhdGNoKHRyeC5yb2xsYmFjayk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWxldGVJdGVtKHRhYmxlTmFtZTogc3RyaW5nLCB1aWQ6IG51bWJlcikgOiBQcm9taXNlTGlrZTxhbnk+IHtcblxuICAgICAgICByZXR1cm4gdGhpcy5rbmV4LnRyYW5zYWN0aW9uKCh0cngpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtuZXgodGFibGVOYW1lKS50cmFuc2FjdGluZyh0cngpXG4gICAgICAgICAgICAud2hlcmUoeyB1aWQgfSlcbiAgICAgICAgICAgIC5kZWwoKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja0ludGVncml0eSh0cngpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHZhbGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBEYXRhYmFzZUludGVncml0eUVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4odHJ4LmNvbW1pdClcbiAgICAgICAgICAgIC5jYXRjaCh0cngucm9sbGJhY2spO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QW5jZXN0b3JzT2YodWlkOiBudW1iZXIsIHRhYmxlTmFtZTogc3RyaW5nKSA6IFByb21pc2VMaWtlPG51bWJlcltdPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmtuZXgucmF3KGBcbiAgICAgICAgICAgIFdJVEggUkVDVVJTSVZFIHBhcmVudF9vZih1aWQsIHBhcmVudCkgQVMgIChTRUxFQ1QgdWlkLCBwYXJlbnQgRlJPTSAke3RhYmxlTmFtZX0pLFxuICAgICAgICAgICAgICAgIGFuY2VzdG9yKHVpZCkgQVMgKFxuICAgICAgICAgICAgICAgIFNFTEVDVCBwYXJlbnQgRlJPTSBwYXJlbnRfb2YgV0hFUkUgdWlkPSR7dWlkfVxuICAgICAgICAgICAgICAgIFVOSU9OIEFMTFxuICAgICAgICAgICAgICAgIFNFTEVDVCBwYXJlbnQgRlJPTSBwYXJlbnRfb2YgSk9JTiBhbmNlc3RvciBVU0lORyh1aWQpIClcblx0XHRcdFx0U0VMRUNUICogZnJvbSBhbmNlc3RvcmApXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5maWx0ZXIoKGEpID0+IGEudWlkICE9PSBudWxsKS5tYXAoKGEpID0+IGEudWlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDaGlsZHJlbk9mKHVpZDogbnVtYmVyLCB0YWJsZU5hbWU6IHN0cmluZykgOiBQcm9taXNlTGlrZTxudW1iZXJbXT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5rbmV4LnJhdyhgXG4gICAgICAgICAgICBXSVRIIFJFQ1VSU0lWRSBwYXJlbnRfb2YodWlkLCBwYXJlbnQpIEFTICAoU0VMRUNUIHVpZCwgcGFyZW50IEZST00gJHt0YWJsZU5hbWV9KSxcbiAgICAgICAgICAgICAgICBhbmNlc3RvcihwYXJlbnQpIEFTIChcbiAgICAgICAgICAgICAgICBTRUxFQ1QgdWlkIEZST00gcGFyZW50X29mIFdIRVJFIHVpZD0ke3VpZH1cbiAgICAgICAgICAgICAgICBVTklPTiBBTExcbiAgICAgICAgICAgICAgICBTRUxFQ1QgdWlkIEZST00gcGFyZW50X29mIEpPSU4gYW5jZXN0b3IgVVNJTkcocGFyZW50KSApXG5cdFx0XHRcdFNFTEVDVCAqIGZyb20gYW5jZXN0b3JgKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuZmlsdGVyKChhKSA9PiBhLnBhcmVudCAhPT0gbnVsbCkubWFwKChhKSA9PiBhLnBhcmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2hlY2tJbnRlZ3JpdHkodHJ4OiBLbmV4LlRyYW5zYWN0aW9uKSA6IFByb21pc2VMaWtlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRoaXMua25leC50cmFuc2FjdGluZyh0cngpLnNlbGVjdCh0aGlzLmtuZXgucmF3KCdTVU0oKHJlY29yZHMudmFsdWVfdHlwZSAhPSBwcmVkaWNhdGVzLnJhbmdlX3R5cGUpKSBBUyB2YWxpZCcpKVxuICAgICAgICAgICAgLmZyb20oJ3JlY29yZHMnKVxuICAgICAgICAgICAgLmlubmVySm9pbigncHJlZGljYXRlcycsICdyZWNvcmRzLnByZWRpY2F0ZScsICdwcmVkaWNhdGVzLnVpZCcpLFxuXG4gICAgICAgICAgICB0aGlzLmtuZXgudHJhbnNhY3RpbmcodHJ4KS5zZWxlY3QodGhpcy5rbmV4LnJhdyhgXG4gICAgICAgICAgICAgICAgU1VNKChcblxuICAgICAgICAgICAgICAgIGVudGl0aWVzLnR5cGUgbm90IGluIChcbiAgICAgICAgICAgICAgICAgICAgV0lUSCBSRUNVUlNJVkUgcGFyZW50X29mKHVpZCwgcGFyZW50KSBBUyAgKFNFTEVDVCB1aWQsIHBhcmVudCBGUk9NIGVudGl0eV90eXBlcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2VzdG9yKHBhcmVudCkgQVMgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgdWlkIEZST00gcGFyZW50X29mIFdIRVJFIHVpZD1wcmVkaWNhdGVzLnJhbmdlX3JlZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVTklPTiBBTExcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0VMRUNUIHVpZCBGUk9NIHBhcmVudF9vZiBKT0lOIGFuY2VzdG9yIFVTSU5HKHBhcmVudCkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgKiBmcm9tIGFuY2VzdG9yXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKSkgYXMgdmFsaWRcbiAgICAgICAgICAgIGApKVxuICAgICAgICAgICAgLmZyb20oJ3JlY29yZHMnKVxuICAgICAgICAgICAgLmlubmVySm9pbigncHJlZGljYXRlcycsICdyZWNvcmRzLnByZWRpY2F0ZScsICdwcmVkaWNhdGVzLnVpZCcpXG4gICAgICAgICAgICAuaW5uZXJKb2luKCdlbnRpdGllcycsICdlbnRpdGllcy51aWQnLCAncmVjb3Jkcy52YWx1ZV9lbnRpdHknKVxuICAgICAgICAgICAgLndoZXJlKCdyZWNvcmRzLnZhbHVlX3R5cGUnLCAnPScsICdlbnRpdHknKSxcblxuICAgICAgICAgICAgdGhpcy5rbmV4LnRyYW5zYWN0aW5nKHRyeCkuc2VsZWN0KHRoaXMua25leC5yYXcoYFxuICAgICAgICAgICAgICAgU1VNKChcblxuICAgICAgICAgICAgICAgIGVudGl0aWVzLnR5cGUgbm90IGluIChcbiAgICAgICAgICAgICAgICAgICAgV0lUSCBSRUNVUlNJVkUgcGFyZW50X29mKHVpZCwgcGFyZW50KSBBUyAgKFNFTEVDVCB1aWQsIHBhcmVudCBGUk9NIGVudGl0eV90eXBlcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2VzdG9yKHBhcmVudCkgQVMgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgdWlkIEZST00gcGFyZW50X29mIFdIRVJFIHVpZD1wcmVkaWNhdGVzLmRvbWFpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVTklPTiBBTExcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0VMRUNUIHVpZCBGUk9NIHBhcmVudF9vZiBKT0lOIGFuY2VzdG9yIFVTSU5HKHBhcmVudCkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgKiBmcm9tIGFuY2VzdG9yXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKSkgYXMgdmFsaWRcbiAgICAgICAgICAgIGApKVxuICAgICAgICAgICAgLmZyb20oJ3JlY29yZHMnKVxuICAgICAgICAgICAgLmlubmVySm9pbigncHJlZGljYXRlcycsICdyZWNvcmRzLnByZWRpY2F0ZScsICdwcmVkaWNhdGVzLnVpZCcpXG4gICAgICAgICAgICAuaW5uZXJKb2luKCdlbnRpdGllcycsICdlbnRpdGllcy51aWQnLCAncmVjb3Jkcy5lbnRpdHknKVxuXG4gICAgICAgICAgXSkudGhlbigoW1thXSwgW2JdLCBbY11dKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKGEudmFsaWQgKyBiLnZhbGlkICsgYy52YWxpZCkgPT09IDA7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zZXJ2ZXIvY29yZS9EYXRhYmFzZS50cyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 77 */
/***/ function(module, exports) {

	eval("module.exports = require(\"knex\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJrbmV4XCI/ZjNhNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI3Ny5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImtuZXhcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJrbmV4XCJcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 78 */
/***/ function(module, exports) {

	eval("/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.1.0\r\n */\r\n\"use strict\";\r\nclass KeyNotFoundException extends Error {\r\n    constructor(message = 'Could not find the given key') {\r\n        super(message);\r\n        this.data = message;\r\n    }\r\n}\r\nexports.KeyNotFoundException = KeyNotFoundException;\r\nclass CollectionNotFoundException extends Error {\r\n    constructor(message = 'Could not find the given collection') {\r\n        super(message);\r\n        this.data = message;\r\n    }\r\n}\r\nexports.CollectionNotFoundException = CollectionNotFoundException;\r\nclass OperationNotPermittedException extends Error {\r\n    constructor(data) {\r\n        super(data.message);\r\n        this.data = data;\r\n    }\r\n}\r\nexports.OperationNotPermittedException = OperationNotPermittedException;\r\nclass DatabaseIntegrityError extends Error {\r\n    constructor(message = `A database integrity constraint has been broken - your change has not been\n submitted. This is likely due to a change which violates the property types model; please check the types of \n what you are trying to do. Please also contact the Digital Humanities team, this error should not occur.`) {\r\n        super(message);\r\n        this.data = message;\r\n    }\r\n}\r\nexports.DatabaseIntegrityError = DatabaseIntegrityError;\r\nexports.exceptions = {\r\n    KeyNotFoundException,\r\n    CollectionNotFoundException,\r\n    OperationNotPermittedException,\r\n    DatabaseIntegrityError\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvcmUvRXhjZXB0aW9ucy50cz8yOWRlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBRUgsMEJBQWtDLFNBQVEsS0FBSztJQUUzQyxZQUFZLFVBQWtCLDhCQUE4QjtRQUN4RCxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztJQUN4QixDQUFDO0NBQ0o7QUFORCxvREFNQztBQUVELGlDQUF5QyxTQUFRLEtBQUs7SUFFbEQsWUFBWSxVQUFrQixxQ0FBcUM7UUFDL0QsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7SUFDeEIsQ0FBQztDQUNKO0FBTkQsa0VBTUM7QUFFRCxvQ0FBNEMsU0FBUSxLQUFLO0lBRXJELFlBQVksSUFBbUM7UUFDM0MsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNyQixDQUFDO0NBQ0o7QUFORCx3RUFNQztBQUVELDRCQUFvQyxTQUFRLEtBQUs7SUFFN0MsWUFBWSxVQUFrQjs7MEdBRXdFO1FBQ2xHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDO0lBQ3hCLENBQUM7Q0FDSjtBQVJELHdEQVFDO0FBR1ksa0JBQVUsR0FBRztJQUN0QixvQkFBb0I7SUFDcEIsMkJBQTJCO0lBQzNCLDhCQUE4QjtJQUM5QixzQkFBc0I7Q0FDekIsQ0FBQyIsImZpbGUiOiI3OC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyA8RGVzY3JpcHRpb24gTWlzc2luZz5cbiAqIEBhdXRob3IgPGEgaHJlZj1cIm1haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrXCI+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjEuMFxuICovXG5cbmV4cG9ydCBjbGFzcyBLZXlOb3RGb3VuZEV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgICBwdWJsaWMgZGF0YTogc3RyaW5nO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdDb3VsZCBub3QgZmluZCB0aGUgZ2l2ZW4ga2V5Jykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5kYXRhID0gbWVzc2FnZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb2xsZWN0aW9uTm90Rm91bmRFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gICAgcHVibGljIGRhdGE6IHN0cmluZztcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnQ291bGQgbm90IGZpbmQgdGhlIGdpdmVuIGNvbGxlY3Rpb24nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmRhdGEgPSBtZXNzYWdlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE9wZXJhdGlvbk5vdFBlcm1pdHRlZEV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgICBwdWJsaWMgZGF0YTogeyBtZXNzYWdlOiBzdHJpbmcsIGRhdGE6IGFueX07XG4gICAgY29uc3RydWN0b3IoZGF0YTogeyBtZXNzYWdlOiBzdHJpbmcsIGRhdGE6IGFueX0pIHtcbiAgICAgICAgc3VwZXIoZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZUludGVncml0eUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHB1YmxpYyBkYXRhOiBzdHJpbmc7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gYEEgZGF0YWJhc2UgaW50ZWdyaXR5IGNvbnN0cmFpbnQgaGFzIGJlZW4gYnJva2VuIC0geW91ciBjaGFuZ2UgaGFzIG5vdCBiZWVuXG4gc3VibWl0dGVkLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gYSBjaGFuZ2Ugd2hpY2ggdmlvbGF0ZXMgdGhlIHByb3BlcnR5IHR5cGVzIG1vZGVsOyBwbGVhc2UgY2hlY2sgdGhlIHR5cGVzIG9mIFxuIHdoYXQgeW91IGFyZSB0cnlpbmcgdG8gZG8uIFBsZWFzZSBhbHNvIGNvbnRhY3QgdGhlIERpZ2l0YWwgSHVtYW5pdGllcyB0ZWFtLCB0aGlzIGVycm9yIHNob3VsZCBub3Qgb2NjdXIuYCkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5kYXRhID0gbWVzc2FnZTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGNvbnN0IGV4Y2VwdGlvbnMgPSB7XG4gICAgS2V5Tm90Rm91bmRFeGNlcHRpb24sXG4gICAgQ29sbGVjdGlvbk5vdEZvdW5kRXhjZXB0aW9uLFxuICAgIE9wZXJhdGlvbk5vdFBlcm1pdHRlZEV4Y2VwdGlvbixcbiAgICBEYXRhYmFzZUludGVncml0eUVycm9yXG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zZXJ2ZXIvY29yZS9FeGNlcHRpb25zLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 79 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Map of URIs to controllers\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst ServerApiService_1 = __webpack_require__(80);\r\nconst QueryEngine_1 = __webpack_require__(82);\r\nconst koaConditionalGet = __webpack_require__(86);\r\nconst koaEtags = __webpack_require__(87);\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst controllers_1 = __webpack_require__(88);\r\nconst falcon_core_2 = __webpack_require__(29);\r\nexports.wrapDatabase = (db, fakeCreator) => {\r\n    const routes = new Map([\r\n        [ServerApiService_1.AppUrls.element_set, new controllers_1.ElementSetController(db)],\r\n        [ServerApiService_1.AppUrls.record, new controllers_1.RecordController(db)],\r\n        [ServerApiService_1.AppUrls.entity_type, new controllers_1.EntityTypeController(db)],\r\n        [ServerApiService_1.AppUrls.entity, new controllers_1.EntityController(db)],\r\n        [ServerApiService_1.AppUrls.predicate, new controllers_1.PredicateController(db)],\r\n        [ServerApiService_1.AppUrls.source, new controllers_1.SourceController(db)],\r\n        [ServerApiService_1.AppUrls.element, new controllers_1.ElementController(db)],\r\n        [ServerApiService_1.AppUrls.source_element, new controllers_1.SourceElementController(db)]\r\n    ]);\r\n    return new ServerApiService_1.ServerApiService(db, routes, new QueryEngine_1.QueryEngine(db), fakeCreator);\r\n};\r\nconst sourceElementSpecial = (router, serverApiContext, typeMap) => {\r\n    router.use(koaConditionalGet());\r\n    router.use(koaEtags());\r\n    router.get(`/api/v1/${ServerApiService_1.AppUrls.source_element}/:source/:element`, function* (next) {\r\n        yield serverApiContext\r\n            .getItem(typeMap[ServerApiService_1.AppUrls.source_element], ServerApiService_1.AppUrls.source_element, {\r\n            order: ['source', 'element'],\r\n            values: {\r\n                source: this.params.source,\r\n                element: this.params.element\r\n            }\r\n        })\r\n            .then((data) => this.body = data.serialize());\r\n    });\r\n    router.put(`/api/v1/${ServerApiService_1.AppUrls.source_element}/:source/:element`, function* (next) {\r\n        yield serverApiContext\r\n            .putItem(typeMap[ServerApiService_1.AppUrls.source_element], ServerApiService_1.AppUrls.source_element, {\r\n            order: ['source', 'element'],\r\n            values: {\r\n                source: this.params.source,\r\n                element: this.params.element\r\n            }\r\n        }, this.request.body)\r\n            .then((data) => this.body = data);\r\n    });\r\n    router.patch(`/api/v1/${ServerApiService_1.AppUrls.source_element}/:source/:element`, function* (next) {\r\n        yield serverApiContext\r\n            .patchItem(typeMap[ServerApiService_1.AppUrls.source_element], ServerApiService_1.AppUrls.source_element, {\r\n            order: ['source', 'element'],\r\n            values: {\r\n                source: this.params.source,\r\n                element: this.params.element\r\n            }\r\n        }, this.request.body)\r\n            .then((data) => this.body = data);\r\n    });\r\n    router.del(`/api/v1/${ServerApiService_1.AppUrls.source_element}/:source/:element`, function* (next) {\r\n        yield serverApiContext\r\n            .delItem(typeMap[ServerApiService_1.AppUrls.source_element], ServerApiService_1.AppUrls.source_element, {\r\n            order: ['source', 'element'],\r\n            values: {\r\n                source: this.params.source,\r\n                element: this.params.element\r\n            }\r\n        })\r\n            .then((data) => this.body = data);\r\n    });\r\n};\r\n// would be cleaner if it allowed 2nd level REST urls\r\n//  /entity/{entity_id}/predicate/{predicate_id}\r\n// /source/{source_id}/element/{element_id}\r\nexports.api = (router, serverApiContext) => {\r\n    router.use();\r\n    const typeMap = {\r\n        [ServerApiService_1.AppUrls.element_set]: falcon_core_2.ElementSet,\r\n        [ServerApiService_1.AppUrls.record]: falcon_core_2.Record,\r\n        [ServerApiService_1.AppUrls.entity_type]: falcon_core_2.EntityType,\r\n        [ServerApiService_1.AppUrls.entity]: falcon_core_2.Entity,\r\n        [ServerApiService_1.AppUrls.predicate]: falcon_core_2.Predicate,\r\n        [ServerApiService_1.AppUrls.source]: falcon_core_2.Source,\r\n        [ServerApiService_1.AppUrls.element]: falcon_core_2.Element,\r\n        [ServerApiService_1.AppUrls.source_element]: falcon_core_2.SourceElement\r\n    };\r\n    router.use(function* (next) {\r\n        if (this.req.method === 'GET' || this.isAuthenticated()) {\r\n            yield next;\r\n        }\r\n        else {\r\n            this.status = 403;\r\n            this.body = 'You must be authorised to modify this resource';\r\n        }\r\n    });\r\n    router.use(function* (next) {\r\n        try {\r\n            yield next;\r\n        }\r\n        catch (err) {\r\n            switch (err.constructor.name) {\r\n                case 'KeyNotFoundException':\r\n                    this.status = 404;\r\n                    break;\r\n                case 'CollectionNotFoundException':\r\n                    this.status = 404;\r\n                    break;\r\n                case 'OperationNotPermittedException':\r\n                    this.status = 422;\r\n                    break;\r\n                default:\r\n                    this.status = 500;\r\n            }\r\n            this.type = 'application/json';\r\n            if (err.data !== undefined) {\r\n                yield err.data.data.then((data) => {\r\n                    this.body = JSON.stringify(Object.assign({}, err.data, { data: data }));\r\n                });\r\n            }\r\n            else {\r\n                this.body = err.message;\r\n            }\r\n        }\r\n    });\r\n    router.get('/api/v1/query', function* (next) {\r\n        yield serverApiContext.queryEngine.runQuery(this.query.query)\r\n            .then((result) => this.body = result);\r\n    });\r\n    sourceElementSpecial(router, serverApiContext, typeMap);\r\n    router.get('/api/v1/:route/:id', function* (next) {\r\n        yield serverApiContext\r\n            .getItem(typeMap[this.params.route], this.params.route, parseInt(this.params.id))\r\n            .then((data) => this.body = falcon_core_1.Serializer.toJson(data));\r\n    });\r\n    router.get('/api/v1/:route', function* (next) {\r\n        yield serverApiContext\r\n            .getCollection(typeMap[this.params.route], this.params.route, this.query)\r\n            .then((data) => this.body = data.map((datum) => falcon_core_1.Serializer.toJson(datum)));\r\n    });\r\n    router.post('/api/v1/:route', function* (next) {\r\n        yield serverApiContext\r\n            .postItem(typeMap[this.params.route], this.params.route, falcon_core_1.Serializer.fromJson(typeMap[this.params.route], Object.assign(this.request.body, {\r\n            creator: this.req.user.uid\r\n        })))\r\n            .then((data) => this.body = data);\r\n    });\r\n    router.put('/api/v1/:route/:id', function* (next) {\r\n        yield serverApiContext\r\n            .putItem(typeMap[this.params.route], this.params.route, parseInt(this.params.id), falcon_core_1.Serializer.fromJson(typeMap[this.params.route], this.request.body))\r\n            .then((data) => this.body = data);\r\n    });\r\n    router.patch('/api/v1/:route/:id', function* (next) {\r\n        yield serverApiContext\r\n            .patchItem(typeMap[this.params.route], this.params.route, parseInt(this.params.id), this.request.body)\r\n            .then((data) => this.body = data);\r\n    });\r\n    router.del('/api/v1/:route/:id', function* (next) {\r\n        yield serverApiContext\r\n            .delItem(typeMap[this.params.route], this.params.route, parseInt(this.params.id))\r\n            .then((data) => this.body = data);\r\n    });\r\n    return router;\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL3JvdXRlcy9hcGkudHM/ODdmYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQVVILG1EQUFxRTtBQUNyRSw4Q0FBa0Q7QUFFbEQsa0RBQXlEO0FBQ3pELHlDQUFxQztBQUVyQyw4Q0FBeUM7QUFLekMsOENBU29DO0FBRXBDLDhDQUVxQjtBQUVSLG9CQUFZLEdBQ3JCLENBQUMsRUFBWSxFQUFFLFdBQW9CO0lBQ25DLE1BQU0sTUFBTSxHQUFHLElBQUksR0FBRyxDQUFzQjtRQUN4QyxDQUFDLDBCQUFPLENBQUMsV0FBVyxFQUFFLElBQUksa0NBQW9CLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbkQsQ0FBQywwQkFBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLDhCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzFDLENBQUMsMEJBQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxrQ0FBb0IsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNuRCxDQUFDLDBCQUFPLENBQUMsTUFBTSxFQUFFLElBQUksOEJBQWdCLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDMUMsQ0FBQywwQkFBTyxDQUFDLFNBQVMsRUFBRSxJQUFJLGlDQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hELENBQUMsMEJBQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSw4QkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMxQyxDQUFDLDBCQUFPLENBQUMsT0FBTyxFQUFFLElBQUksK0JBQWlCLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDNUMsQ0FBQywwQkFBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLHFDQUF1QixDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQzVELENBQUMsQ0FBQztJQUVILE1BQU0sQ0FBQyxJQUFJLG1DQUFnQixDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSx5QkFBVyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FB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LFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO2FBQzFHLElBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQzFDLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRSxXQUFXLElBQWtCO1FBQzFELE1BQU0sZ0JBQWdCO2FBQ2pCLE9BQU8sQ0FBTSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQzthQUNyRixJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQztJQUMxQyxDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDbEIsQ0FBQyxDQUFDIiwiZmlsZSI6Ijc5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IE1hcCBvZiBVUklzIHRvIGNvbnRyb2xsZXJzXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4wLjFcbiAqL1xuXG4vLyBWZW5kb3JcbmltcG9ydCAqIGFzIEtvYSBmcm9tICdrb2EnO1xuaW1wb3J0ICogYXMgS29hUm91dGVyIGZyb20gJ2tvYS1yb3V0ZXInO1xuXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuLy8gRGF0YWJhc2VcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnLi4vY29yZS9EYXRhYmFzZSc7XG5pbXBvcnQgeyBTZXJ2ZXJBcGlTZXJ2aWNlLCBBcHBVcmxzIH0gZnJvbSAnLi4vY29yZS9TZXJ2ZXJBcGlTZXJ2aWNlJztcbmltcG9ydCB7IFF1ZXJ5RW5naW5lIH0gZnJvbSAnLi4vY29yZS9RdWVyeUVuZ2luZSc7XG5cbmltcG9ydCAqIGFzIGtvYUNvbmRpdGlvbmFsR2V0IGZyb20gJ2tvYS1jb25kaXRpb25hbC1nZXQnO1xuaW1wb3J0ICogYXMga29hRXRhZ3MgZnJvbSAna29hLWV0YWcnO1xuXG5pbXBvcnQgeyBTZXJpYWxpemVyIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuXG4vLyBDb250cm9sbGVyc1xuaW1wb3J0IHsgSUNvbnRyb2xsZXIgfSBmcm9tICcuLi9jb250cm9sbGVycy9JQ29udHJvbGxlcic7XG5cbmltcG9ydCB7XG4gICAgRW50aXR5Q29udHJvbGxlcixcbiAgICBFbnRpdHlUeXBlQ29udHJvbGxlcixcbiAgICBFbGVtZW50U2V0Q29udHJvbGxlcixcbiAgICBQcmVkaWNhdGVDb250cm9sbGVyLFxuICAgIFNvdXJjZUNvbnRyb2xsZXIsXG4gICAgUmVjb3JkQ29udHJvbGxlcixcbiAgICBFbGVtZW50Q29udHJvbGxlcixcbiAgICBTb3VyY2VFbGVtZW50Q29udHJvbGxlclxufSBmcm9tICcuLi9jb250cm9sbGVycy9jb250cm9sbGVycyc7XG5cbmltcG9ydCB7XG4gIEVudGl0eSwgRW50aXR5VHlwZSwgRWxlbWVudFNldCwgUHJlZGljYXRlLCBTb3VyY2UsIFJlY29yZCwgRWxlbWVudCwgU291cmNlRWxlbWVudFxufSBmcm9tICdmYWxjb24tY29yZSc7XG5cbmV4cG9ydCBjb25zdCB3cmFwRGF0YWJhc2UgOiAoczogRGF0YWJhc2UsIGZha2VDcmVhdG9yOiBib29sZWFuKSA9PiBTZXJ2ZXJBcGlTZXJ2aWNlID1cbiAgICAoZGI6IERhdGFiYXNlLCBmYWtlQ3JlYXRvcjogYm9vbGVhbikgPT4ge1xuICAgIGNvbnN0IHJvdXRlcyA9IG5ldyBNYXA8c3RyaW5nLCBJQ29udHJvbGxlcj4oW1xuICAgICAgICBbQXBwVXJscy5lbGVtZW50X3NldCwgbmV3IEVsZW1lbnRTZXRDb250cm9sbGVyKGRiKV0sXG4gICAgICAgIFtBcHBVcmxzLnJlY29yZCwgbmV3IFJlY29yZENvbnRyb2xsZXIoZGIpXSxcbiAgICAgICAgW0FwcFVybHMuZW50aXR5X3R5cGUsIG5ldyBFbnRpdHlUeXBlQ29udHJvbGxlcihkYildLFxuICAgICAgICBbQXBwVXJscy5lbnRpdHksIG5ldyBFbnRpdHlDb250cm9sbGVyKGRiKV0sXG4gICAgICAgIFtBcHBVcmxzLnByZWRpY2F0ZSwgbmV3IFByZWRpY2F0ZUNvbnRyb2xsZXIoZGIpXSxcbiAgICAgICAgW0FwcFVybHMuc291cmNlLCBuZXcgU291cmNlQ29udHJvbGxlcihkYildLFxuICAgICAgICBbQXBwVXJscy5lbGVtZW50LCBuZXcgRWxlbWVudENvbnRyb2xsZXIoZGIpXSxcbiAgICAgICAgW0FwcFVybHMuc291cmNlX2VsZW1lbnQsIG5ldyBTb3VyY2VFbGVtZW50Q29udHJvbGxlcihkYildXG4gICAgXSk7XG5cbiAgICByZXR1cm4gbmV3IFNlcnZlckFwaVNlcnZpY2UoZGIsIHJvdXRlcywgbmV3IFF1ZXJ5RW5naW5lKGRiKSwgZmFrZUNyZWF0b3IpO1xufTtcblxuY29uc3Qgc291cmNlRWxlbWVudFNwZWNpYWwgPSAocm91dGVyOiBhbnksIHNlcnZlckFwaUNvbnRleHQ6IFNlcnZlckFwaVNlcnZpY2UsIHR5cGVNYXA6IGFueSkgPT4ge1xuXG4gIHJvdXRlci51c2Uoa29hQ29uZGl0aW9uYWxHZXQoKSk7XG4gIHJvdXRlci51c2Uoa29hRXRhZ3MoKSk7XG5cbiAgICByb3V0ZXIuZ2V0KGAvYXBpL3YxLyR7QXBwVXJscy5zb3VyY2VfZWxlbWVudH0vOnNvdXJjZS86ZWxlbWVudGAsIGZ1bmN0aW9uKiAobmV4dCA6IEtvYS5Db250ZXh0KSB7XG4gICAgICAgIHlpZWxkIHNlcnZlckFwaUNvbnRleHRcbiAgICAgICAgICAgIC5nZXRJdGVtPFBlcnNpc3RhYmxlPih0eXBlTWFwW0FwcFVybHMuc291cmNlX2VsZW1lbnRdLCBBcHBVcmxzLnNvdXJjZV9lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgb3JkZXI6IFsnc291cmNlJywgJ2VsZW1lbnQnXSxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLnBhcmFtcy5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMucGFyYW1zLmVsZW1lbnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHRoaXMuYm9keSA9IGRhdGEuc2VyaWFsaXplKCkpO1xuICAgIH0pO1xuXG4gICAgcm91dGVyLnB1dChgL2FwaS92MS8ke0FwcFVybHMuc291cmNlX2VsZW1lbnR9Lzpzb3VyY2UvOmVsZW1lbnRgLCBmdW5jdGlvbiogKG5leHQgOiBLb2EuQ29udGV4dCkge1xuICAgICAgICB5aWVsZCBzZXJ2ZXJBcGlDb250ZXh0XG4gICAgICAgICAgICAucHV0SXRlbTxQZXJzaXN0YWJsZT4odHlwZU1hcFtBcHBVcmxzLnNvdXJjZV9lbGVtZW50XSwgQXBwVXJscy5zb3VyY2VfZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIG9yZGVyOiBbJ3NvdXJjZScsICdlbGVtZW50J10sXG4gICAgICAgICAgICAgICAgdmFsdWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5wYXJhbXMuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiB0aGlzLnBhcmFtcy5lbGVtZW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcy5yZXF1ZXN0LmJvZHkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy5ib2R5ID0gZGF0YSk7XG4gICAgfSk7XG5cbiAgICByb3V0ZXIucGF0Y2goYC9hcGkvdjEvJHtBcHBVcmxzLnNvdXJjZV9lbGVtZW50fS86c291cmNlLzplbGVtZW50YCwgZnVuY3Rpb24qIChuZXh0IDogS29hLkNvbnRleHQpIHtcbiAgICAgICAgeWllbGQgc2VydmVyQXBpQ29udGV4dFxuICAgICAgICAgICAgLnBhdGNoSXRlbTxQZXJzaXN0YWJsZT4odHlwZU1hcFtBcHBVcmxzLnNvdXJjZV9lbGVtZW50XSwgQXBwVXJscy5zb3VyY2VfZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIG9yZGVyOiBbJ3NvdXJjZScsICdlbGVtZW50J10sXG4gICAgICAgICAgICAgICAgdmFsdWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5wYXJhbXMuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiB0aGlzLnBhcmFtcy5lbGVtZW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcy5yZXF1ZXN0LmJvZHkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy5ib2R5ID0gZGF0YSk7XG4gICAgfSk7XG5cbiAgICByb3V0ZXIuZGVsKGAvYXBpL3YxLyR7QXBwVXJscy5zb3VyY2VfZWxlbWVudH0vOnNvdXJjZS86ZWxlbWVudGAsIGZ1bmN0aW9uKiAobmV4dCA6IEtvYS5Db250ZXh0KSB7XG4gICAgICAgIHlpZWxkIHNlcnZlckFwaUNvbnRleHRcbiAgICAgICAgICAgIC5kZWxJdGVtPFBlcnNpc3RhYmxlPih0eXBlTWFwW0FwcFVybHMuc291cmNlX2VsZW1lbnRdLCBBcHBVcmxzLnNvdXJjZV9lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgb3JkZXI6IFsnc291cmNlJywgJ2VsZW1lbnQnXSxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLnBhcmFtcy5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMucGFyYW1zLmVsZW1lbnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHRoaXMuYm9keSA9IGRhdGEpO1xuICAgIH0pO1xufTtcblxuLy8gd291bGQgYmUgY2xlYW5lciBpZiBpdCBhbGxvd2VkIDJuZCBsZXZlbCBSRVNUIHVybHNcbi8vICAvZW50aXR5L3tlbnRpdHlfaWR9L3ByZWRpY2F0ZS97cHJlZGljYXRlX2lkfVxuLy8gL3NvdXJjZS97c291cmNlX2lkfS9lbGVtZW50L3tlbGVtZW50X2lkfVxuXG5leHBvcnQgY29uc3QgYXBpIDogKHJvdXRlcjogS29hUm91dGVyLCBzOiBTZXJ2ZXJBcGlTZXJ2aWNlKSA9PiBLb2FSb3V0ZXJcbiAgICA9IChyb3V0ZXI6IEtvYVJvdXRlciwgc2VydmVyQXBpQ29udGV4dDogU2VydmVyQXBpU2VydmljZSkgPT4ge1xuXG4gICAgcm91dGVyLnVzZSgpXG5cbiAgICBjb25zdCB0eXBlTWFwID0ge1xuICAgICAgICBbQXBwVXJscy5lbGVtZW50X3NldF06IEVsZW1lbnRTZXQsXG4gICAgICAgIFtBcHBVcmxzLnJlY29yZF06IFJlY29yZCxcbiAgICAgICAgW0FwcFVybHMuZW50aXR5X3R5cGVdOiBFbnRpdHlUeXBlLFxuICAgICAgICBbQXBwVXJscy5lbnRpdHldOiBFbnRpdHksXG4gICAgICAgIFtBcHBVcmxzLnByZWRpY2F0ZV0gOiBQcmVkaWNhdGUsXG4gICAgICAgIFtBcHBVcmxzLnNvdXJjZV0gOiBTb3VyY2UsXG4gICAgICAgIFtBcHBVcmxzLmVsZW1lbnRdIDogRWxlbWVudCxcbiAgICAgICAgW0FwcFVybHMuc291cmNlX2VsZW1lbnRdOiBTb3VyY2VFbGVtZW50XG4gICAgfTtcblxuICAgIHJvdXRlci51c2UoZnVuY3Rpb24qIChuZXh0OiBLb2EuQ29udGV4dCkge1xuICAgICAgICBpZiAodGhpcy5yZXEubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgICB5aWVsZCBuZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSA0MDM7XG4gICAgICAgICAgICB0aGlzLmJvZHkgPSAnWW91IG11c3QgYmUgYXV0aG9yaXNlZCB0byBtb2RpZnkgdGhpcyByZXNvdXJjZSc7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJvdXRlci51c2UoZnVuY3Rpb24qIChuZXh0OiBLb2EuQ29udGV4dCl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB5aWVsZCBuZXh0O1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyLmNvbnN0cnVjdG9yLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdLZXlOb3RGb3VuZEV4Y2VwdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdDb2xsZWN0aW9uTm90Rm91bmRFeGNlcHRpb24nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnT3BlcmF0aW9uTm90UGVybWl0dGVkRXhjZXB0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSA0MjI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gNTAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50eXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKCBlcnIuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgZXJyLmRhdGEuZGF0YS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keSA9IEpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oe30sIGVyci5kYXRhLCB7IGRhdGE6IGRhdGEgfSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvZHkgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcm91dGVyLmdldCgnL2FwaS92MS9xdWVyeScsIGZ1bmN0aW9uKiAobmV4dCA6IEtvYS5Db250ZXh0KSB7XG4gICAgICAgIHlpZWxkIHNlcnZlckFwaUNvbnRleHQucXVlcnlFbmdpbmUucnVuUXVlcnkodGhpcy5xdWVyeS5xdWVyeSlcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHRoaXMuYm9keSA9IHJlc3VsdCk7XG4gICAgfSk7XG5cbiAgICBzb3VyY2VFbGVtZW50U3BlY2lhbChyb3V0ZXIsIHNlcnZlckFwaUNvbnRleHQsIHR5cGVNYXApO1xuXG4gICAgcm91dGVyLmdldCgnL2FwaS92MS86cm91dGUvOmlkJywgZnVuY3Rpb24qIChuZXh0IDogS29hLkNvbnRleHQpIHtcbiAgICAgICAgeWllbGQgc2VydmVyQXBpQ29udGV4dFxuICAgICAgICAgICAgLmdldEl0ZW08YW55Pih0eXBlTWFwW3RoaXMucGFyYW1zLnJvdXRlXSwgdGhpcy5wYXJhbXMucm91dGUsIHBhcnNlSW50KHRoaXMucGFyYW1zLmlkKSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLmJvZHkgPSBTZXJpYWxpemVyLnRvSnNvbihkYXRhKSk7XG4gICAgfSk7XG5cblxuICAgIHJvdXRlci5nZXQoJy9hcGkvdjEvOnJvdXRlJywgZnVuY3Rpb24qIChuZXh0IDogS29hLkNvbnRleHQpIHtcbiAgICAgICAgeWllbGQgc2VydmVyQXBpQ29udGV4dFxuICAgICAgICAgICAgLmdldENvbGxlY3Rpb248YW55Pih0eXBlTWFwW3RoaXMucGFyYW1zLnJvdXRlXSwgdGhpcy5wYXJhbXMucm91dGUsIHRoaXMucXVlcnkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy5ib2R5ID0gZGF0YS5tYXAoKGRhdHVtKSA9PiBTZXJpYWxpemVyLnRvSnNvbihkYXR1bSkpKTtcbiAgICB9KTtcblxuICAgIHJvdXRlci5wb3N0KCcvYXBpL3YxLzpyb3V0ZScsIGZ1bmN0aW9uKiAobmV4dCA6IEtvYS5Db250ZXh0KSB7XG4gICAgICAgIHlpZWxkIHNlcnZlckFwaUNvbnRleHRcbiAgICAgICAgICAgIC5wb3N0SXRlbTxhbnk+KHR5cGVNYXBbdGhpcy5wYXJhbXMucm91dGVdLHRoaXMucGFyYW1zLnJvdXRlLFxuICAgICAgICAgICAgICBTZXJpYWxpemVyLmZyb21Kc29uKHR5cGVNYXBbdGhpcy5wYXJhbXMucm91dGVdLCBPYmplY3QuYXNzaWduKHRoaXMucmVxdWVzdC5ib2R5LCB7XG4gICAgICAgICAgICAgICAgY3JlYXRvcjogdGhpcy5yZXEudXNlci51aWRcbiAgICAgICAgICAgIH0pKSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLmJvZHkgPSBkYXRhKTtcbiAgICB9KTtcblxuICAgIHJvdXRlci5wdXQoJy9hcGkvdjEvOnJvdXRlLzppZCcsIGZ1bmN0aW9uKiAobmV4dCA6IEtvYS5Db250ZXh0KSB7XG4gICAgICAgIHlpZWxkIHNlcnZlckFwaUNvbnRleHRcbiAgICAgICAgICAgIC5wdXRJdGVtPGFueT4odHlwZU1hcFt0aGlzLnBhcmFtcy5yb3V0ZV0sIHRoaXMucGFyYW1zLnJvdXRlLCBwYXJzZUludCh0aGlzLnBhcmFtcy5pZCksXG4gICAgICAgICAgICBTZXJpYWxpemVyLmZyb21Kc29uKHR5cGVNYXBbdGhpcy5wYXJhbXMucm91dGVdLHRoaXMucmVxdWVzdC5ib2R5KSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLmJvZHkgPSBkYXRhKTtcbiAgICB9KTtcblxuICAgIHJvdXRlci5wYXRjaCgnL2FwaS92MS86cm91dGUvOmlkJywgZnVuY3Rpb24qIChuZXh0IDogS29hLkNvbnRleHQpIHtcbiAgICAgICAgeWllbGQgc2VydmVyQXBpQ29udGV4dFxuICAgICAgICAgICAgLnBhdGNoSXRlbTxhbnk+KHR5cGVNYXBbdGhpcy5wYXJhbXMucm91dGVdLCB0aGlzLnBhcmFtcy5yb3V0ZSwgcGFyc2VJbnQodGhpcy5wYXJhbXMuaWQpLCB0aGlzLnJlcXVlc3QuYm9keSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLmJvZHkgPSBkYXRhKTtcbiAgICB9KTtcblxuICAgIHJvdXRlci5kZWwoJy9hcGkvdjEvOnJvdXRlLzppZCcsIGZ1bmN0aW9uKiAobmV4dCA6IEtvYS5Db250ZXh0KSB7XG4gICAgICAgIHlpZWxkIHNlcnZlckFwaUNvbnRleHRcbiAgICAgICAgICAgIC5kZWxJdGVtPGFueT4odHlwZU1hcFt0aGlzLnBhcmFtcy5yb3V0ZV0sIHRoaXMucGFyYW1zLnJvdXRlLCBwYXJzZUludCh0aGlzLnBhcmFtcy5pZCkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy5ib2R5ID0gZGF0YSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcm91dGVyO1xufTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NlcnZlci9yb3V0ZXMvYXBpLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 80 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst Exceptions_1 = __webpack_require__(78);\r\nconst moment = __webpack_require__(43);\r\nconst Signaller_1 = __webpack_require__(21);\r\nvar ApiService_1 = __webpack_require__(6);\r\nexports.AppUrls = ApiService_1.AppUrls;\r\nconst GeneralStatisticsController_1 = __webpack_require__(81);\r\nclass ServerApiService {\r\n    constructor(db, routesMap, queryEngine, fakeCreator) {\r\n        this.controllerMap = routesMap;\r\n        this.queryEngine = queryEngine;\r\n        this.fakeCreator = fakeCreator;\r\n        this.db = db;\r\n    }\r\n    getItem(obj, baseUrl, uid) {\r\n        const controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.getItemJson(obj, uid);\r\n    }\r\n    getCollection(obj, baseUrl, params) {\r\n        const controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.getCollectionJson(obj, params);\r\n    }\r\n    postItem(obj, baseUrl, data) {\r\n        const controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.postItem(obj, Object.assign(data, {\r\n            creationTimestamp: moment().toISOString(),\r\n            lastmodifiedTimestamp: moment().toISOString(),\r\n            creator: this.fakeCreator ? 0 : data.creator\r\n        }))\r\n            .then((result) => {\r\n            Signaller_1.triggerReload.dispatch();\r\n            return Promise.resolve(result);\r\n        });\r\n    }\r\n    putItem(obj, baseUrl, uid, data) {\r\n        const controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.putItem(obj, uid, Object.assign(data, {\r\n            lastmodifiedTimestamp: moment().toISOString()\r\n        }))\r\n            .then((result) => {\r\n            Signaller_1.triggerReload.dispatch();\r\n            return Promise.resolve(result);\r\n        });\r\n    }\r\n    patchItem(obj, baseUrl, uid, data) {\r\n        const controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.patchItem(obj, uid, Object.assign(data, {\r\n            lastmodifiedTimestamp: moment().toISOString()\r\n        }))\r\n            .then((result) => {\r\n            Signaller_1.triggerReload.dispatch();\r\n            return Promise.resolve(result);\r\n        });\r\n    }\r\n    delItem(obj, baseUrl, uid) {\r\n        const controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.deleteItem(obj, uid)\r\n            .then((result) => {\r\n            Signaller_1.triggerReload.dispatch();\r\n            return Promise.resolve(result);\r\n        });\r\n    }\r\n    query(graphQLQuery) {\r\n        return Promise.resolve({});\r\n    }\r\n    getStats() {\r\n        return GeneralStatisticsController_1.GeneralStatisticsController(this.db.query());\r\n    }\r\n}\r\nexports.ServerApiService = ServerApiService;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvcmUvU2VydmVyQXBpU2VydmljZS50cz9kYmVkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBS0gsNkNBQTJEO0FBTTNELHVDQUFpQztBQUVqQyw0Q0FBdUQ7QUFFdkQsMENBQWtEO0FBQXpDLHNDQUFPO0FBSWhCLDhEQUFtRjtBQUVuRjtJQVFJLFlBQVksRUFBWSxFQUFFLFNBQW1DLEVBQUUsV0FBd0IsRUFBRSxXQUFvQjtRQUN6RyxJQUFJLENBQUMsYUFBYSxHQUFHLFNBQVMsQ0FBQztRQUMvQixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUMvQixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUMvQixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRU0sT0FBTyxDQUF1QixHQUFrQixFQUFFLE9BQWdCLEVBQUUsR0FBMEI7UUFDakcsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkQsRUFBRSxDQUFDLENBQUMsVUFBVSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDM0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSx3Q0FBMkIsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7UUFDbkYsQ0FBQztRQUNELE1BQU0sQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFJLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRU0sYUFBYSxDQUF1QixHQUFrQixFQUFFLE9BQWdCLEVBQUUsTUFBVztRQUN4RixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNuRCxFQUFFLENBQUMsQ0FBQyxVQUFVLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUMzQixNQUFNLENBQUMsT0FB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LENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFTSxPQUFPLENBQXVCLEdBQWtCLEVBQUUsT0FBZ0IsRUFBRSxHQUEwQjtRQUNqRyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNuRCxFQUFFLENBQUMsQ0FBQyxVQUFVLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUMzQixNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLHdDQUEyQixDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQztRQUNuRixDQUFDO1FBQ0QsTUFBTSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUksR0FBRyxFQUFFLEdBQUcsQ0FBQzthQUN4QyxJQUFJLENBQUMsQ0FBQyxNQUFNO1lBQ1QseUJBQWEsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUN6QixNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFHTSxLQUFLLENBQUMsWUFBb0I7UUFDN0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVNLFFBQVE7UUFDYixNQUFNLENBQUMseURBQTJCLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELENBQUM7Q0FDSjtBQW5HRCw0Q0FtR0MiLCJmaWxlIjoiODAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgQWJzdHJhY3QgaW50ZXJmYWNlIGZvciBzb3VyY2VzXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4wLjFcbiAqL1xuXG5pbXBvcnQgeyBBcGlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL0FwaVNlcnZpY2UnO1xuXG5pbXBvcnQgeyBJQ29udHJvbGxlciB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL0lDb250cm9sbGVyJztcbmltcG9ydCB7IENvbGxlY3Rpb25Ob3RGb3VuZEV4Y2VwdGlvbiB9IGZyb20gJy4vRXhjZXB0aW9ucyc7XG5cbmltcG9ydCB7IFF1ZXJ5RW5naW5lIH0gZnJvbSAnLi9RdWVyeUVuZ2luZSc7XG5cbmltcG9ydCB7IENvbXBvc2l0ZUtleSwgRmFsY29uSXRlbSwgU2VyaWFsaXplciB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcblxuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmltcG9ydCB7IHRyaWdnZXJSZWxvYWQgfSBmcm9tICcuLi8uLi9jb21tb24vU2lnbmFsbGVyJztcblxuZXhwb3J0IHsgQXBwVXJscyB9IGZyb20gJy4uLy4uL2NvbW1vbi9BcGlTZXJ2aWNlJztcblxuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuL0RhdGFiYXNlJztcblxuaW1wb3J0IHsgR2VuZXJhbFN0YXRpc3RpY3NDb250cm9sbGVyIH0gZnJvbSAnLi4vc3RhdHMvR2VuZXJhbFN0YXRpc3RpY3NDb250cm9sbGVyJztcblxuZXhwb3J0IGNsYXNzIFNlcnZlckFwaVNlcnZpY2UgaW1wbGVtZW50cyBBcGlTZXJ2aWNlIHtcblxuICAgIHByaXZhdGUgY29udHJvbGxlck1hcDogTWFwPHN0cmluZywgSUNvbnRyb2xsZXI+O1xuICAgIHByaXZhdGUgZGI6IERhdGFiYXNlO1xuXG4gICAgcHVibGljIHF1ZXJ5RW5naW5lOiBRdWVyeUVuZ2luZTtcbiAgICBwdWJsaWMgZmFrZUNyZWF0b3I6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihkYjogRGF0YWJhc2UsIHJvdXRlc01hcDogTWFwPHN0cmluZywgSUNvbnRyb2xsZXI+LCBxdWVyeUVuZ2luZTogUXVlcnlFbmdpbmUsIGZha2VDcmVhdG9yOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlck1hcCA9IHJvdXRlc01hcDtcbiAgICAgICAgdGhpcy5xdWVyeUVuZ2luZSA9IHF1ZXJ5RW5naW5lO1xuICAgICAgICB0aGlzLmZha2VDcmVhdG9yID0gZmFrZUNyZWF0b3I7XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SXRlbTxUIGV4dGVuZHMgRmFsY29uSXRlbT4ob2JqOiB7IG5ldygpOiBUOyB9LCBiYXNlVXJsIDogc3RyaW5nLCB1aWQ6IG51bWJlciB8IENvbXBvc2l0ZUtleSkgOiBQcm9taXNlTGlrZTxUPiB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xsZXJNYXAuZ2V0KGJhc2VVcmwpO1xuICAgICAgICBpZiAoY29udHJvbGxlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IENvbGxlY3Rpb25Ob3RGb3VuZEV4Y2VwdGlvbignQ29udHJvbGxlciBub3QgZm91bmQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuZ2V0SXRlbUpzb248VD4ob2JqLCB1aWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb2xsZWN0aW9uPFQgZXh0ZW5kcyBGYWxjb25JdGVtPihvYmo6IHsgbmV3KCk6IFQ7IH0sIGJhc2VVcmwgOiBzdHJpbmcsIHBhcmFtczogYW55KSA6IFByb21pc2VMaWtlPFRbXT4ge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyTWFwLmdldChiYXNlVXJsKTtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBDb2xsZWN0aW9uTm90Rm91bmRFeGNlcHRpb24oJ0NvbnRyb2xsZXIgbm90IGZvdW5kJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250cm9sbGVyLmdldENvbGxlY3Rpb25Kc29uPFQ+KG9iaiwgcGFyYW1zKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcG9zdEl0ZW08VCBleHRlbmRzIEZhbGNvbkl0ZW0+KG9iajogeyBuZXcoKTogVDsgfSwgYmFzZVVybCA6IHN0cmluZywgZGF0YTogVCkgIDogUHJvbWlzZUxpa2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyTWFwLmdldChiYXNlVXJsKTtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBDb2xsZWN0aW9uTm90Rm91bmRFeGNlcHRpb24oJ0NvbnRyb2xsZXIgbm90IGZvdW5kJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250cm9sbGVyLnBvc3RJdGVtPFQ+KG9iaiwgT2JqZWN0LmFzc2lnbihkYXRhLCB7XG4gICAgICAgICAgICBjcmVhdGlvblRpbWVzdGFtcDogbW9tZW50KCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGxhc3Rtb2RpZmllZFRpbWVzdGFtcDogbW9tZW50KCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGNyZWF0b3I6IHRoaXMuZmFrZUNyZWF0b3IgPyAwIDogZGF0YS5jcmVhdG9yXG4gICAgICAgIH0pKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB0cmlnZ2VyUmVsb2FkLmRpc3BhdGNoKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBwdXRJdGVtPFQgZXh0ZW5kcyBGYWxjb25JdGVtPihvYmo6IHsgbmV3KCk6IFQ7IH0sXG4gICAgICAgICAgICBiYXNlVXJsIDogc3RyaW5nLCB1aWQ6IG51bWJlciB8IENvbXBvc2l0ZUtleSwgZGF0YTogVCkgOiBQcm9taXNlTGlrZTxib29sZWFuPiB7XG5cbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuY29udHJvbGxlck1hcC5nZXQoYmFzZVVybCk7XG4gICAgICAgIGlmIChjb250cm9sbGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgQ29sbGVjdGlvbk5vdEZvdW5kRXhjZXB0aW9uKCdDb250cm9sbGVyIG5vdCBmb3VuZCcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udHJvbGxlci5wdXRJdGVtPFQ+KG9iaiwgdWlkLCBPYmplY3QuYXNzaWduKGRhdGEsIHtcbiAgICAgICAgICAgIGxhc3Rtb2RpZmllZFRpbWVzdGFtcDogbW9tZW50KCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdHJpZ2dlclJlbG9hZC5kaXNwYXRjaCgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGF0Y2hJdGVtPFQgZXh0ZW5kcyBGYWxjb25JdGVtPihvYmo6IHsgbmV3KCk6IFQ7IH0sXG4gICAgICAgICAgICBiYXNlVXJsIDogc3RyaW5nLCB1aWQ6IG51bWJlciB8IENvbXBvc2l0ZUtleSwgZGF0YSA6IGFueSkgOiBQcm9taXNlTGlrZTxib29sZWFuPiB7XG5cbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuY29udHJvbGxlck1hcC5nZXQoYmFzZVVybCk7XG4gICAgICAgIGlmIChjb250cm9sbGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgQ29sbGVjdGlvbk5vdEZvdW5kRXhjZXB0aW9uKCdDb250cm9sbGVyIG5vdCBmb3VuZCcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udHJvbGxlci5wYXRjaEl0ZW08VD4ob2JqLCB1aWQsIE9iamVjdC5hc3NpZ24oZGF0YSwge1xuICAgICAgICAgICAgbGFzdG1vZGlmaWVkVGltZXN0YW1wOiBtb21lbnQoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB0cmlnZ2VyUmVsb2FkLmRpc3BhdGNoKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWxJdGVtPFQgZXh0ZW5kcyBGYWxjb25JdGVtPihvYmo6IHsgbmV3KCk6IFQ7IH0sIGJhc2VVcmwgOiBzdHJpbmcsIHVpZDogbnVtYmVyIHwgQ29tcG9zaXRlS2V5KSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xsZXJNYXAuZ2V0KGJhc2VVcmwpO1xuICAgICAgICBpZiAoY29udHJvbGxlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IENvbGxlY3Rpb25Ob3RGb3VuZEV4Y2VwdGlvbignQ29udHJvbGxlciBub3QgZm91bmQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuZGVsZXRlSXRlbTxUPihvYmosIHVpZClcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdHJpZ2dlclJlbG9hZC5kaXNwYXRjaCgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBxdWVyeShncmFwaFFMUXVlcnk6IHN0cmluZykgOiBQcm9taXNlTGlrZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7fSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFN0YXRzKCkgOiBQcm9taXNlTGlrZTxhbnk+IHtcbiAgICAgIHJldHVybiBHZW5lcmFsU3RhdGlzdGljc0NvbnRyb2xsZXIodGhpcy5kYi5xdWVyeSgpKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2VydmVyL2NvcmUvU2VydmVyQXBpU2VydmljZS50cyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 81 */
/***/ function(module, exports) {

	eval("/**\r\n * @fileOverview Map of URIs to controllers\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nexports.GeneralStatisticsController = (db) => {\r\n    return Promise.all([\r\n        db('entities').count(),\r\n        db('entity_types').count(),\r\n        db('sources').count(),\r\n        db('records').count(),\r\n        db('predicates').count()\r\n    ]).then(([[entityCount], [entityTypeCount], [sourceCount], [recordCount], [predicateCount]]) => {\r\n        const statistics = {\r\n            entity: entityCount['count(*)'],\r\n            entityType: entityTypeCount['count(*)'],\r\n            source: sourceCount['count(*)'],\r\n            record: recordCount['count(*)'],\r\n            predicate: predicateCount['count(*)']\r\n        };\r\n        return statistics;\r\n    });\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL3N0YXRzL0dlbmVyYWxTdGF0aXN0aWNzQ29udHJvbGxlci50cz8zNzA4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7O0FBTVUsbUNBQTJCLEdBQUcsQ0FBQyxFQUFTO0lBRWpELE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQ2pCLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLEVBQUU7UUFDdEIsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEtBQUssRUFBRTtRQUMxQixFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBSyxFQUFFO1FBQ3JCLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLEVBQUU7UUFDckIsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssRUFBRTtLQUN6QixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUM7UUFFekYsTUFBTSxVQUFVLEdBQXVCO1lBQ3JDLE1BQU0sRUFBRSxXQUFXLENBQUMsVUFBVSxDQUFDO1lBQy9CLFVBQVUsRUFBRSxlQUFlLENBQUMsVUFBVSxDQUFDO1lBQ3ZDLE1BQU0sRUFBRSxXQUFXLENBQUMsVUFBVSxDQUFDO1lBQy9CLE1BQU0sRUFBRSxXQUFXLENBQUMsVUFBVSxDQUFDO1lBQy9CLFNBQVMsRUFBRSxjQUFjLENBQUMsVUFBVSxDQUFDO1NBQ3RDLENBQUM7UUFFRixNQUFNLENBQUMsVUFBVSxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDIiwiZmlsZSI6IjgxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IE1hcCBvZiBVUklzIHRvIGNvbnRyb2xsZXJzXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51a1wiPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4wLjFcbiAqL1xuXG5pbXBvcnQgKiBhcyBLbmV4IGZyb20gJ2tuZXgnO1xuXG5pbXBvcnQgeyBHZW5lcmFsU3RhdGlzdGljcyB9IGZyb20gJy4uLy4uL2NvbW1vbi9zdGF0cy9HZW5lcmFsU3RhdGlzdGljcyc7XG5cbmV4cG9ydCBjb25zdCBHZW5lcmFsU3RhdGlzdGljc0NvbnRyb2xsZXIgPSAoZGIgOiBLbmV4KSA6IFByb21pc2VMaWtlPEdlbmVyYWxTdGF0aXN0aWNzPiA9PiB7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgZGIoJ2VudGl0aWVzJykuY291bnQoKSxcbiAgICAgIGRiKCdlbnRpdHlfdHlwZXMnKS5jb3VudCgpLFxuICAgICAgZGIoJ3NvdXJjZXMnKS5jb3VudCgpLFxuICAgICAgZGIoJ3JlY29yZHMnKS5jb3VudCgpLFxuICAgICAgZGIoJ3ByZWRpY2F0ZXMnKS5jb3VudCgpXG4gICAgXSkudGhlbigoW1tlbnRpdHlDb3VudF0sIFtlbnRpdHlUeXBlQ291bnRdLCBbc291cmNlQ291bnRdLCBbcmVjb3JkQ291bnRdLCBbcHJlZGljYXRlQ291bnRdXSkgPT4ge1xuXG4gICAgICBjb25zdCBzdGF0aXN0aWNzIDogR2VuZXJhbFN0YXRpc3RpY3MgPSB7XG4gICAgICAgIGVudGl0eTogZW50aXR5Q291bnRbJ2NvdW50KCopJ10sXG4gICAgICAgIGVudGl0eVR5cGU6IGVudGl0eVR5cGVDb3VudFsnY291bnQoKiknXSxcbiAgICAgICAgc291cmNlOiBzb3VyY2VDb3VudFsnY291bnQoKiknXSxcbiAgICAgICAgcmVjb3JkOiByZWNvcmRDb3VudFsnY291bnQoKiknXSxcbiAgICAgICAgcHJlZGljYXRlOiBwcmVkaWNhdGVDb3VudFsnY291bnQoKiknXVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHN0YXRpc3RpY3M7XG4gICAgfSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NlcnZlci9zdGF0cy9HZW5lcmFsU3RhdGlzdGljc0NvbnRyb2xsZXIudHMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 82 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Query processor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst graphql_1 = __webpack_require__(83);\r\nconst entityQLType_1 = __webpack_require__(84);\r\nconst predicateQLType_1 = __webpack_require__(85);\r\nclass QueryEngine {\r\n    constructor(db) {\r\n        const entityType = entityQLType_1.entityQLType(db, predicateQLType_1.predicateQLType(db));\r\n        // Define the Query type\r\n        const queryType = new graphql_1.GraphQLObjectType({\r\n            name: 'Query',\r\n            fields: {\r\n                entity: {\r\n                    type: new graphql_1.GraphQLList(entityType),\r\n                    // `args` describes the arguments that the `user` query accepts\r\n                    args: {\r\n                        uid: { type: graphql_1.GraphQLString }\r\n                    },\r\n                    resolve: (_, { uid }) => {\r\n                        if (uid === undefined) {\r\n                            return db.query()('entities');\r\n                        }\r\n                        return db.query()('entities').where({ uid });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.schema = new graphql_1.GraphQLSchema({\r\n            query: queryType\r\n        });\r\n    }\r\n    runQuery(query) {\r\n        return graphql_1.graphql(this.schema, query);\r\n    }\r\n}\r\nexports.QueryEngine = QueryEngine;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvcmUvUXVlcnlFbmdpbmUudHM/NDE1NiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUVILDBDQU1pQjtBQUlqQiwrQ0FBdUQ7QUFDdkQsa0RBQTZEO0FBRTdEO0lBSUksWUFBWSxFQUFZO1FBRXBCLE1BQU0sVUFBVSxHQUFHLDJCQUFZLENBQUMsRUFBRSxFQUFFLGlDQUFlLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUV6RCx3QkFBd0I7UUFDeEIsTUFBTSxTQUFTLEdBQUcsSUFBSSwyQkFBaUIsQ0FBQztZQUNwQyxJQUFJLEVBQUUsT0FBTztZQUNiLE1BQU0sRUFBRTtnQkFDSixNQUFNLEVBQUU7b0JBQ0osSUFBSSxFQUFFLElBQUkscUJBQVcsQ0FBQyxVQUFVLENBQUM7b0JBQ2pDLCtEQUErRDtvQkFDL0QsSUFBSSxFQUFFO3dCQUNGLEdBQUcsRUFBRSxFQUFFLElBQUksRUFBRSx1QkFBYSxFQUFFO3FCQUMvQjtvQkFDRCxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUM7d0JBQ2QsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7NEJBQ3BCLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7d0JBQ2xDLENBQUM7d0JBQ0QsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO29CQUNqRCxDQUFDO2lCQUNKO2FBQ0o7U0FDSixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksdUJBQWEsQ0FBQztZQUM1QixLQUFLLEVBQUUsU0FBUztTQUNuQixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sUUFBUSxDQUFDLEtBQVU7UUFDdEIsTUFBTSxDQUFDLGlCQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN2QyxDQUFDO0NBQ0o7QUFwQ0Qsa0NBb0NDIiwiZmlsZSI6IjgyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFF1ZXJ5IHByb2Nlc3NvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMC4xXG4gKi9cblxuaW1wb3J0IHtcbiAgZ3JhcGhxbCxcbiAgR3JhcGhRTFNjaGVtYSxcbiAgR3JhcGhRTE9iamVjdFR5cGUsXG4gIEdyYXBoUUxTdHJpbmcsXG4gIEdyYXBoUUxMaXN0XG59IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gJy4vRGF0YWJhc2UnO1xuXG5pbXBvcnQgeyBlbnRpdHlRTFR5cGUgfSBmcm9tICcuLi9ncmFwaHFsL2VudGl0eVFMVHlwZSc7XG5pbXBvcnQgeyBwcmVkaWNhdGVRTFR5cGUgfSBmcm9tICcuLi9ncmFwaHFsL3ByZWRpY2F0ZVFMVHlwZSc7XG5cbmV4cG9ydCBjbGFzcyBRdWVyeUVuZ2luZSB7XG5cbiAgICBwcml2YXRlIHNjaGVtYTogR3JhcGhRTFNjaGVtYTtcblxuICAgIGNvbnN0cnVjdG9yKGRiOiBEYXRhYmFzZSkge1xuXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSBlbnRpdHlRTFR5cGUoZGIsIHByZWRpY2F0ZVFMVHlwZShkYikpO1xuXG4gICAgICAgIC8vIERlZmluZSB0aGUgUXVlcnkgdHlwZVxuICAgICAgICBjb25zdCBxdWVyeVR5cGUgPSBuZXcgR3JhcGhRTE9iamVjdFR5cGUoe1xuICAgICAgICAgICAgbmFtZTogJ1F1ZXJ5JyxcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIGVudGl0eToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBuZXcgR3JhcGhRTExpc3QoZW50aXR5VHlwZSksXG4gICAgICAgICAgICAgICAgICAgIC8vIGBhcmdzYCBkZXNjcmliZXMgdGhlIGFyZ3VtZW50cyB0aGF0IHRoZSBgdXNlcmAgcXVlcnkgYWNjZXB0c1xuICAgICAgICAgICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1aWQ6IHsgdHlwZTogR3JhcGhRTFN0cmluZyB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmU6IChfLCB7dWlkfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRiLnF1ZXJ5KCkoJ2VudGl0aWVzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGIucXVlcnkoKSgnZW50aXRpZXMnKS53aGVyZSh7IHVpZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zY2hlbWEgPSBuZXcgR3JhcGhRTFNjaGVtYSh7XG4gICAgICAgICAgICBxdWVyeTogcXVlcnlUeXBlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBydW5RdWVyeShxdWVyeTogYW55KSA6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiBncmFwaHFsKHRoaXMuc2NoZW1hLCBxdWVyeSk7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zZXJ2ZXIvY29yZS9RdWVyeUVuZ2luZS50cyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 83 */
/***/ function(module, exports) {

	eval("module.exports = require(\"graphql\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJncmFwaHFsXCI/OWEyYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI4My5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImdyYXBocWxcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJncmFwaHFsXCJcbi8vIG1vZHVsZSBpZCA9IDgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 84 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Query processor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst graphql_1 = __webpack_require__(83);\r\nexports.entityQLType = (db, predicateType) => {\r\n    return new graphql_1.GraphQLObjectType({\r\n        name: 'Entity',\r\n        fields: {\r\n            uid: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: (parent, {}) => {\r\n                    return parent.uid;\r\n                }\r\n            },\r\n            label: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: (parent, {}) => {\r\n                    return parent.label;\r\n                }\r\n            },\r\n            type: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: (parent, {}) => {\r\n                    return db.query()('entity_types').where({ uid: parent.type }).first().then((data) => data.label);\r\n                }\r\n            },\r\n            predicate: {\r\n                type: predicateType,\r\n                args: {\r\n                    name: { type: graphql_1.GraphQLString },\r\n                    uid: { type: graphql_1.GraphQLString }\r\n                },\r\n                resolve: (entity, { name, uid }) => {\r\n                    if (name !== undefined) {\r\n                        return db.query()('predicates').where({ name }).first().then((predicate) => ({ predicate, entity }));\r\n                    }\r\n                    if (uid !== undefined) {\r\n                        return db.query()('predicates').where({ uid }).first().then((predicate) => ({ predicate, entity }));\r\n                    }\r\n                }\r\n            },\r\n            predicates: {\r\n                type: new graphql_1.GraphQLList(predicateType),\r\n                args: {\r\n                    names: { type: new graphql_1.GraphQLList(graphql_1.GraphQLString) },\r\n                    uids: { type: new graphql_1.GraphQLList(graphql_1.GraphQLString) }\r\n                },\r\n                resolve: (entity, { names, uids }) => {\r\n                    if (names !== undefined) {\r\n                        return db.query()('predicates')\r\n                            .whereIn('name', names)\r\n                            .then((predicates) => predicates.map((predicate) => ({ predicate, entity })));\r\n                    }\r\n                    if (uids !== undefined) {\r\n                        return db.query()('predicates')\r\n                            .whereIn('uid', uids)\r\n                            .then((predicates) => predicates.map((predicate) => ({ predicate, entity })));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2dyYXBocWwvZW50aXR5UUxUeXBlLnRzP2FiZTIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCwwQ0FJaUI7QUFJSixvQkFBWSxHQUFHLENBQUMsRUFBWSxFQUFFLGFBQWdDO0lBQ3ZFLE1BQU0sQ0FBQyxJQUFJLDJCQUFpQixDQUFDO1FBQ3pCLElBQUksRUFBRSxRQUFRO1FBQ2QsTUFBTSxFQUFFO1lBRUosR0FBRyxFQUFFO2dCQUNELElBQUksRUFBRSx1QkFBYTtnQkFDbkIsT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUU7b0JBQ2hCLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO2dCQUN0QixDQUFDO2FBQ0o7WUFFRCxLQUFLLEVBQUU7Z0JBQ0gsSUFBSSxFQUFFLHVCQUFhO2dCQUNuQixPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRTtvQkFDaEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQ3hCLENBQUM7YUFDSjtZQUVELElBQUksRUFBRTtnQkFDRixJQUFJLEVBQUUsdUJBQWE7Z0JBQ25CLE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFO29CQUNoQixNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNyRyxDQUFDO2FBQ0o7WUFFRCxTQUFTLEVBQUU7Z0JBQ1AsSUFBSSxFQUFFLGFBQWE7Z0JBQ25CLElBQUksRUFBRTtvQkFDRixJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsdUJBQWEsRUFBRTtvQkFDN0IsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLHVCQUFhLEVBQUU7aUJBQy9CO2dCQUNELE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFDLElBQUksRUFBRSxHQUFHLEVBQUM7b0JBQ3pCLEVBQUUsQ0FBQyxDQUFDLElBQUksS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUNyQixNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxLQUFLLENBQUMsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUN6RyxDQUFDO29CQUNELEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUNwQixNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxLQUFLLENBQUMsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUN4RyxDQUFDO2dCQUNMLENBQUM7YUFDSjtZQUVELFVBQVUsRUFBRTtnQkFDUixJQUFJLEVBQUUsSUFBSSxxQkFBVyxDQUFDLGFBQWEsQ0FBQztnQkFDcEMsSUFBSSxFQUFFO29CQUNGLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLHFCQUFXLENBQUMsdUJBQWEsQ0FBQyxFQUFFO29CQUMvQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBVyxDQUFDLHVCQUFhLENBQUMsRUFBRTtpQkFDakQ7Z0JBQ0QsT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBQztvQkFDM0IsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQ3RCLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDOzZCQUMxQixPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQzs2QkFDdEIsSUFBSSxDQUFDLENBQUMsVUFBVSxLQUFLLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEtBQUssQ0FBQyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDdEYsQ0FBQztvQkFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDckIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7NkJBQzFCLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDOzZCQUNwQixJQUFJLENBQUMsQ0FBQyxVQUFVLEtBQUssVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsS0FBSyxDQUFDLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN0RixDQUFDO2dCQUNMLENBQUM7YUFDSjtTQUNKO0tBQ0osQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDIiwiZmlsZSI6Ijg0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFF1ZXJ5IHByb2Nlc3NvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMC4xXG4gKi9cblxuaW1wb3J0IHtcbiAgR3JhcGhRTE9iamVjdFR5cGUsXG4gIEdyYXBoUUxTdHJpbmcsXG4gIEdyYXBoUUxMaXN0XG59IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gJy4uL2NvcmUvRGF0YWJhc2UnO1xuXG5leHBvcnQgY29uc3QgZW50aXR5UUxUeXBlID0gKGRiOiBEYXRhYmFzZSwgcHJlZGljYXRlVHlwZTogR3JhcGhRTE9iamVjdFR5cGUpIDogR3JhcGhRTE9iamVjdFR5cGUgPT4ge1xuICAgIHJldHVybiBuZXcgR3JhcGhRTE9iamVjdFR5cGUoe1xuICAgICAgICBuYW1lOiAnRW50aXR5JyxcbiAgICAgICAgZmllbGRzOiB7XG5cbiAgICAgICAgICAgIHVpZDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IEdyYXBoUUxTdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogKHBhcmVudCwge30pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudC51aWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBHcmFwaFFMU3RyaW5nLFxuICAgICAgICAgICAgICAgIHJlc29sdmU6IChwYXJlbnQsIHt9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQubGFiZWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgIHR5cGU6IEdyYXBoUUxTdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogKHBhcmVudCwge30pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRiLnF1ZXJ5KCkoJ2VudGl0eV90eXBlcycpLndoZXJlKHsgdWlkOiBwYXJlbnQudHlwZSB9KS5maXJzdCgpLnRoZW4oKGRhdGEpID0+IGRhdGEubGFiZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHByZWRpY2F0ZToge1xuICAgICAgICAgICAgICAgIHR5cGU6IHByZWRpY2F0ZVR5cGUsXG4gICAgICAgICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB7IHR5cGU6IEdyYXBoUUxTdHJpbmcgfSxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiB7IHR5cGU6IEdyYXBoUUxTdHJpbmcgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogKGVudGl0eSwge25hbWUsIHVpZH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRiLnF1ZXJ5KCkoJ3ByZWRpY2F0ZXMnKS53aGVyZSh7IG5hbWUgfSkuZmlyc3QoKS50aGVuKChwcmVkaWNhdGUpID0+ICh7IHByZWRpY2F0ZSwgZW50aXR5IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodWlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYi5xdWVyeSgpKCdwcmVkaWNhdGVzJykud2hlcmUoeyB1aWQgfSkuZmlyc3QoKS50aGVuKChwcmVkaWNhdGUpID0+ICh7IHByZWRpY2F0ZSwgZW50aXR5IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHByZWRpY2F0ZXM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBuZXcgR3JhcGhRTExpc3QocHJlZGljYXRlVHlwZSksXG4gICAgICAgICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczogeyB0eXBlOiBuZXcgR3JhcGhRTExpc3QoR3JhcGhRTFN0cmluZykgfSxcbiAgICAgICAgICAgICAgICAgICAgdWlkczogeyB0eXBlOiBuZXcgR3JhcGhRTExpc3QoR3JhcGhRTFN0cmluZykgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogKGVudGl0eSwge25hbWVzLCB1aWRzfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRiLnF1ZXJ5KCkoJ3ByZWRpY2F0ZXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC53aGVyZUluKCduYW1lJywgbmFtZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHByZWRpY2F0ZXMpID0+IHByZWRpY2F0ZXMubWFwKChwcmVkaWNhdGUpID0+ICh7IHByZWRpY2F0ZSwgZW50aXR5IH0pKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVpZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRiLnF1ZXJ5KCkoJ3ByZWRpY2F0ZXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC53aGVyZUluKCd1aWQnLCB1aWRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChwcmVkaWNhdGVzKSA9PiBwcmVkaWNhdGVzLm1hcCgocHJlZGljYXRlKSA9PiAoeyBwcmVkaWNhdGUsIGVudGl0eSB9KSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zZXJ2ZXIvZ3JhcGhxbC9lbnRpdHlRTFR5cGUudHMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 85 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Query processor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst graphql_1 = __webpack_require__(83);\r\nexports.predicateQLType = (db) => {\r\n    return new graphql_1.GraphQLObjectType({\r\n        name: 'Predicate',\r\n        fields: {\r\n            uid: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: ({ predicate }, {}) => {\r\n                    return predicate.uid;\r\n                }\r\n            },\r\n            name: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: ({ predicate }, {}) => {\r\n                    return predicate.label;\r\n                }\r\n            },\r\n            values: {\r\n                type: new graphql_1.GraphQLList(graphql_1.GraphQLString),\r\n                resolve: ({ entity, predicate }, {}) => {\r\n                    return db.query()('records')\r\n                        .select('value_string')\r\n                        .where({ entity: entity.uid, predicate: predicate.uid })\r\n                        .then((results) => results.map((result) => result.value_string));\r\n                }\r\n            }\r\n        }\r\n    });\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2dyYXBocWwvcHJlZGljYXRlUUxUeXBlLnRzPzIzOTIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCwwQ0FJaUI7QUFJSix1QkFBZSxHQUFHLENBQUMsRUFBWTtJQUNwQyxNQUFNLENBQUMsSUFBSSwyQkFBaUIsQ0FBQztRQUM3QixJQUFJLEVBQUUsV0FBVztRQUNqQixNQUFNLEVBQUU7WUFFSixHQUFHLEVBQUU7Z0JBQ0QsSUFBSSxFQUFFLHVCQUFhO2dCQUNuQixPQUFPLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUU7b0JBQ3ZCLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDO2dCQUN6QixDQUFDO2FBQ0o7WUFFRCxJQUFJLEVBQUU7Z0JBQ0YsSUFBSSxFQUFFLHVCQUFhO2dCQUNuQixPQUFPLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUU7b0JBQ3ZCLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO2dCQUMzQixDQUFDO2FBQ0o7WUFFRCxNQUFNLEVBQUU7Z0JBQ0osSUFBSSxFQUFFLElBQUkscUJBQVcsQ0FBQyx1QkFBYSxDQUFDO2dCQUNwQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO29CQUMvQixNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLFNBQVMsQ0FBQzt5QkFDM0IsTUFBTSxDQUFDLGNBQWMsQ0FBQzt5QkFDdEIsS0FBSyxDQUFDLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQzt5QkFDdkQsSUFBSSxDQUFDLENBQUMsT0FBTyxLQUFLLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7Z0JBQ3JFLENBQUM7YUFDSjtTQUNKO0tBQ0osQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDIiwiZmlsZSI6Ijg1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IFF1ZXJ5IHByb2Nlc3NvclxuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWtcIj5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMC4xXG4gKi9cblxuaW1wb3J0IHtcbiAgR3JhcGhRTE9iamVjdFR5cGUsXG4gIEdyYXBoUUxTdHJpbmcsXG4gIEdyYXBoUUxMaXN0XG59IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gJy4uL2NvcmUvRGF0YWJhc2UnO1xuXG5leHBvcnQgY29uc3QgcHJlZGljYXRlUUxUeXBlID0gKGRiOiBEYXRhYmFzZSkgOiBHcmFwaFFMT2JqZWN0VHlwZSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgR3JhcGhRTE9iamVjdFR5cGUoe1xuICAgICAgICBuYW1lOiAnUHJlZGljYXRlJyxcbiAgICAgICAgZmllbGRzOiB7XG5cbiAgICAgICAgICAgIHVpZDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IEdyYXBoUUxTdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogKHsgcHJlZGljYXRlIH0sIHt9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGUudWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBHcmFwaFFMU3RyaW5nLFxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICh7IHByZWRpY2F0ZSB9LCB7fSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlZGljYXRlLmxhYmVsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHZhbHVlczoge1xuICAgICAgICAgICAgICAgIHR5cGU6IG5ldyBHcmFwaFFMTGlzdChHcmFwaFFMU3RyaW5nKSxcbiAgICAgICAgICAgICAgICByZXNvbHZlOiAoeyBlbnRpdHksIHByZWRpY2F0ZSB9LCB7fSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGIucXVlcnkoKSgncmVjb3JkcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJ3ZhbHVlX3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZSh7IGVudGl0eTogZW50aXR5LnVpZCwgcHJlZGljYXRlOiBwcmVkaWNhdGUudWlkIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHRzKSA9PiByZXN1bHRzLm1hcCgocmVzdWx0KSA9PiByZXN1bHQudmFsdWVfc3RyaW5nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NlcnZlci9ncmFwaHFsL3ByZWRpY2F0ZVFMVHlwZS50cyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 86 */
/***/ function(module, exports) {

	eval("module.exports = require(\"koa-conditional-get\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJrb2EtY29uZGl0aW9uYWwtZ2V0XCI/YjE1MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI4Ni5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImtvYS1jb25kaXRpb25hbC1nZXRcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJrb2EtY29uZGl0aW9uYWwtZ2V0XCJcbi8vIG1vZHVsZSBpZCA9IDg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 87 */
/***/ function(module, exports) {

	eval("module.exports = require(\"koa-etag\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJrb2EtZXRhZ1wiP2YyOWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiODcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJrb2EtZXRhZ1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImtvYS1ldGFnXCJcbi8vIG1vZHVsZSBpZCA9IDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 88 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Collated list of controllers\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nvar ElementSetController_1 = __webpack_require__(89);\r\nexports.ElementSetController = ElementSetController_1.ElementSetController;\r\nvar EntityController_1 = __webpack_require__(91);\r\nexports.EntityController = EntityController_1.EntityController;\r\nvar EntityTypeController_1 = __webpack_require__(92);\r\nexports.EntityTypeController = EntityTypeController_1.EntityTypeController;\r\nvar PredicateController_1 = __webpack_require__(93);\r\nexports.PredicateController = PredicateController_1.PredicateController;\r\nvar RecordController_1 = __webpack_require__(94);\r\nexports.RecordController = RecordController_1.RecordController;\r\nvar SourceController_1 = __webpack_require__(95);\r\nexports.SourceController = SourceController_1.SourceController;\r\nvar ElementController_1 = __webpack_require__(96);\r\nexports.ElementController = ElementController_1.ElementController;\r\nvar SourceElementController_1 = __webpack_require__(97);\r\nexports.SourceElementController = SourceElementController_1.SourceElementController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXJzLnRzP2U1NmMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFFSCxxREFBOEQ7QUFBckQsMEVBQW9CO0FBQzdCLGlEQUFzRDtBQUE3Qyw4REFBZ0I7QUFDekIscURBQThEO0FBQXJELDBFQUFvQjtBQUM3QixvREFBNEQ7QUFBbkQsdUVBQW1CO0FBQzVCLGlEQUFzRDtBQUE3Qyw4REFBZ0I7QUFDekIsaURBQXNEO0FBQTdDLDhEQUFnQjtBQUN6QixrREFBd0Q7QUFBL0MsaUVBQWlCO0FBQzFCLHdEQUFvRTtBQUEzRCxtRkFBdUIiLCJmaWxlIjoiODguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgQ29sbGF0ZWQgbGlzdCBvZiBjb250cm9sbGVyc1xuICogQGF1dGhvciA8YSBocmVmPSdtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51ayc+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjAuMVxuICovXG5cbmV4cG9ydCB7IEVsZW1lbnRTZXRDb250cm9sbGVyIH0gZnJvbSAnLi9FbGVtZW50U2V0Q29udHJvbGxlcic7XG5leHBvcnQgeyBFbnRpdHlDb250cm9sbGVyIH0gZnJvbSAnLi9FbnRpdHlDb250cm9sbGVyJztcbmV4cG9ydCB7IEVudGl0eVR5cGVDb250cm9sbGVyIH0gZnJvbSAnLi9FbnRpdHlUeXBlQ29udHJvbGxlcic7XG5leHBvcnQgeyBQcmVkaWNhdGVDb250cm9sbGVyIH0gZnJvbSAnLi9QcmVkaWNhdGVDb250cm9sbGVyJztcbmV4cG9ydCB7IFJlY29yZENvbnRyb2xsZXIgfSBmcm9tICcuL1JlY29yZENvbnRyb2xsZXInO1xuZXhwb3J0IHsgU291cmNlQ29udHJvbGxlciB9IGZyb20gJy4vU291cmNlQ29udHJvbGxlcic7XG5leHBvcnQgeyBFbGVtZW50Q29udHJvbGxlciB9IGZyb20gJy4vRWxlbWVudENvbnRyb2xsZXInO1xuZXhwb3J0IHsgU291cmNlRWxlbWVudENvbnRyb2xsZXIgfSBmcm9tICcuL1NvdXJjZUVsZW1lbnRDb250cm9sbGVyJztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvY29udHJvbGxlcnMudHMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 89 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst GenericController_1 = __webpack_require__(90);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass ElementSetController extends GenericController_1.GenericController {\r\n    constructor(db) {\r\n        super(db, 'element_sets');\r\n    }\r\n    static toSchema(data) {\r\n        return lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'elements');\r\n    }\r\n    static fromSchema(data) {\r\n        return Object.assign(Object.create(falcon_core_1.ElementSet.prototype), data);\r\n    }\r\n    toSchema(data) {\r\n        return ElementSetController.toSchema(data);\r\n    }\r\n    fromSchema(data) {\r\n        return ElementSetController.fromSchema(data);\r\n    }\r\n    getItemJson(obj, uid) {\r\n        return super.getItemJson(obj, uid)\r\n            .then((elementSet) => {\r\n            if (elementSet.uid === null) {\r\n                throw new Error('could not find source');\r\n            }\r\n            return this.db.select('elements')\r\n                .where({ 'element_set': elementSet.uid })\r\n                .then((elements) => {\r\n                elementSet.elements = elements;\r\n                return elementSet;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ElementSetController = ElementSetController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL0VsZW1lbnRTZXRDb250cm9sbGVyLnRzP2YxZDEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFJSCw4Q0FBcUQ7QUFDckQsb0RBQXdEO0FBRXhELHlDQUE4QjtBQUU5QiwwQkFBa0MsU0FBUSxxQ0FBNkI7SUFFbkUsWUFBWSxFQUFhO1FBQ3JCLEtBQUssQ0FBQyxFQUFFLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBZ0I7UUFDbkMsTUFBTSxDQUFDLGFBQUksQ0FBQyx3QkFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRU0sTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFTO1FBQzlCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsd0JBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRVMsUUFBUSxDQUFDLElBQWdCO1FBQy9CLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVTLFVBQVUsQ0FBQyxJQUFTO1FBQzFCLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVNLFdBQVcsQ0FBQyxHQUEwQixFQUFFLEdBQVc7UUFDdEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQzthQUNqQyxJQUFJLENBQUMsQ0FBQyxVQUFVO1lBRWIsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUMxQixNQUFNLElBQUksS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUM7WUFDN0MsQ0FBQztZQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUM7aUJBQzVCLEtBQUssQ0FBQyxFQUFFLGFBQWEsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUM7aUJBQ3hDLElBQUksQ0FBQyxDQUFDLFFBQVE7Z0JBQ1gsVUFBVSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7Z0JBQy9CLE1BQU0sQ0FBQyxVQUFVLENBQUM7WUFDdEIsQ0FBQyxDQUFDLENBQUM7UUFDWCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSjtBQXRDRCxvREFzQ0MiLCJmaWxlIjoiODkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgQ29udHJvbGxlciBmb3IgZWxlbWVudCBzZXRzXG4gKiBAYXV0aG9yIDxhIGhyZWY9J21haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrJz5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMC4xXG4gKi9cblxuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuLi9jb3JlL0RhdGFiYXNlJztcblxuaW1wb3J0IHsgRWxlbWVudFNldCwgU2VyaWFsaXplciB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcbmltcG9ydCB7IEdlbmVyaWNDb250cm9sbGVyIH0gZnJvbSAnLi9HZW5lcmljQ29udHJvbGxlcic7XG5cbmltcG9ydCB7IG9taXQgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY2xhc3MgRWxlbWVudFNldENvbnRyb2xsZXIgZXh0ZW5kcyBHZW5lcmljQ29udHJvbGxlcjxFbGVtZW50U2V0PiB7XG5cbiAgICBjb25zdHJ1Y3RvcihkYiA6IERhdGFiYXNlKSB7XG4gICAgICAgIHN1cGVyKGRiLCAnZWxlbWVudF9zZXRzJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB0b1NjaGVtYShkYXRhOiBFbGVtZW50U2V0KSA6IGFueSB7XG4gICAgICAgIHJldHVybiBvbWl0KFNlcmlhbGl6ZXIudG9Kc29uKGRhdGEpLCAnZWxlbWVudHMnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGZyb21TY2hlbWEoZGF0YTogYW55KSA6IEVsZW1lbnRTZXQge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEVsZW1lbnRTZXQucHJvdG90eXBlKSwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHRvU2NoZW1hKGRhdGE6IEVsZW1lbnRTZXQpIDogYW55IHtcbiAgICAgICAgcmV0dXJuIEVsZW1lbnRTZXRDb250cm9sbGVyLnRvU2NoZW1hKGRhdGEpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBmcm9tU2NoZW1hKGRhdGE6IGFueSkgOiBFbGVtZW50U2V0IHtcbiAgICAgICAgcmV0dXJuIEVsZW1lbnRTZXRDb250cm9sbGVyLmZyb21TY2hlbWEoZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEl0ZW1Kc29uKG9iajogeyBuZXcoKTogRWxlbWVudFNldCB9LCB1aWQ6IG51bWJlcikgOiBQcm9taXNlTGlrZTxFbGVtZW50U2V0PiB7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXRJdGVtSnNvbihvYmosIHVpZClcbiAgICAgICAgLnRoZW4oKGVsZW1lbnRTZXQpID0+IHtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnRTZXQudWlkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgZmluZCBzb3VyY2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGIuc2VsZWN0KCdlbGVtZW50cycpXG4gICAgICAgICAgICAgICAgLndoZXJlKHsgJ2VsZW1lbnRfc2V0JzogZWxlbWVudFNldC51aWQgfSlcbiAgICAgICAgICAgICAgICAudGhlbigoZWxlbWVudHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFNldC5lbGVtZW50cyA9IGVsZW1lbnRzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudFNldDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NlcnZlci9jb250cm9sbGVycy9FbGVtZW50U2V0Q29udHJvbGxlci50cyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 90 */
/***/ function(module, exports) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nclass GenericController {\r\n    constructor(db, table) {\r\n        this.db = db;\r\n        this.tableName = table;\r\n    }\r\n    getItemJson(obj, uid) {\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.loadItem(this.tableName, uid)\r\n            .then((data) => this.fromSchema(data));\r\n    }\r\n    getCollectionJson(obj, params = {}) {\r\n        return this.db.loadCollection(this.tableName, params)\r\n            .then((data) => data.map((datum) => this.fromSchema(datum)));\r\n    }\r\n    postItem(obj, data) {\r\n        return this.db.createItem(this.tableName, this.toSchema(data));\r\n    }\r\n    putItem(obj, uid, data) {\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.updateItem(this.tableName, this.toSchema(data));\r\n    }\r\n    patchItem(obj, uid, data) {\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.loadItem(this.tableName, uid)\r\n            .then((originalData) => {\r\n            return this.db.updateItem(this.tableName, this.toSchema(Object.assign(this.fromSchema(originalData), data)));\r\n        });\r\n    }\r\n    deleteItem(obj, uid) {\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.deleteItem(this.tableName, uid);\r\n    }\r\n}\r\nexports.GenericController = GenericController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL0dlbmVyaWNDb250cm9sbGVyLnRzPzBjMGIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFPSDtJQUtJLFlBQ0ksRUFBWSxFQUNaLEtBQWE7UUFDYixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO0lBQzNCLENBQUM7SUFNTSxXQUFXLENBQUMsR0FBa0IsRUFBRSxHQUEwQjtRQUU3RCxFQUFFLENBQUMsQ0FBQyxPQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQztZQUMzQixNQUFNLElBQUksS0FBSyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7UUFDekQsQ0FBQztRQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQzthQUMzQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFTSxpQkFBaUIsQ0FBQyxHQUFrQixFQUFFLFNBQWMsRUFBRTtRQUN6RCxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUM7YUFDbkQsSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEtBQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkUsQ0FBQztJQUVNLFFBQVEsQ0FBQyxHQUFrQixFQUFFLElBQU87UUFDdkMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ25FLENBQUM7SUFFTSxPQUFPLENBQUMsR0FBa0IsRUFBRSxHQUEwQixFQUFFLElBQU87UUFFbEUsRUFBRSxDQUFDLENBQUMsT0FBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDM0IsTUFBTSxJQUFJLEtBQUssQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO1FBQ3pELENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbkUsQ0FBQztJQUVNLFNBQVMsQ0FBQyxHQUFrQixFQUFFLEdBQTBCLEVBQUUsSUFBTztRQUVwRSxFQUFFLENBQUMsQ0FBQyxPQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQztZQUMzQixNQUFNLElBQUksS0FBSyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7UUFDekQsQ0FBQztRQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQzthQUMzQyxJQUFJLENBQUMsQ0FBQyxZQUFZO1lBQ2YsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pILENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLFVBQVUsQ0FBQyxHQUFrQixFQUFFLEdBQTBCO1FBRTVELEVBQUUsQ0FBQyxDQUFDLE9BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQzNCLE1BQU0sSUFBSSxLQUFLLENBQUMsbUNBQW1DLENBQUMsQ0FBQztRQUN6RCxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDbkQsQ0FBQztDQUNKO0FBaEVELDhDQWdFQyIsImZpbGUiOiI5MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBDb250cm9sbGVyIGZvciBlbGVtZW50IHNldHNcbiAqIEBhdXRob3IgPGEgaHJlZj0nbWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWsnPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4wLjFcbiAqL1xuXG5pbXBvcnQgeyBJQ29udHJvbGxlciB9IGZyb20gJy4vSUNvbnRyb2xsZXInO1xuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuLi9jb3JlL0RhdGFiYXNlJztcblxuaW1wb3J0IHsgQ29tcG9zaXRlS2V5LCBGYWxjb25JdGVtIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgR2VuZXJpY0NvbnRyb2xsZXI8VCBleHRlbmRzIEZhbGNvbkl0ZW0+IGltcGxlbWVudHMgSUNvbnRyb2xsZXIge1xuXG4gICAgcHJvdGVjdGVkIHRhYmxlTmFtZTogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBkYiA6IERhdGFiYXNlO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGRiOiBEYXRhYmFzZSxcbiAgICAgICAgdGFibGU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMudGFibGVOYW1lID0gdGFibGU7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGZyb21TY2hlbWEoZGF0YTogYW55KSA6IFQ7XG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IHRvU2NoZW1hKGRhdGE6IFQpIDogYW55O1xuXG5cbiAgICBwdWJsaWMgZ2V0SXRlbUpzb24ob2JqOiB7IG5ldygpOiBUOyB9LCB1aWQ6IG51bWJlciB8IENvbXBvc2l0ZUtleSkgOiBQcm9taXNlTGlrZTxUPiB7XG5cbiAgICAgICAgaWYgKHR5cGVvZih1aWQpICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBzaW5nbGUgY29sdW1uIGlkZW50aWZpZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmRiLmxvYWRJdGVtKHRoaXMudGFibGVOYW1lLCB1aWQpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLmZyb21TY2hlbWEoZGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb2xsZWN0aW9uSnNvbihvYmo6IHsgbmV3KCk6IFQ7IH0sIHBhcmFtczogYW55ID0ge30pIDogUHJvbWlzZUxpa2U8VFtdPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmxvYWRDb2xsZWN0aW9uKHRoaXMudGFibGVOYW1lLCBwYXJhbXMpXG4gICAgICAgICAudGhlbigoZGF0YSkgPT4gZGF0YS5tYXAoKGRhdHVtKSA9PiAgdGhpcy5mcm9tU2NoZW1hKGRhdHVtKSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwb3N0SXRlbShvYmo6IHsgbmV3KCk6IFQ7IH0sIGRhdGE6IFQpIDogUHJvbWlzZUxpa2U8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmNyZWF0ZUl0ZW0odGhpcy50YWJsZU5hbWUsIHRoaXMudG9TY2hlbWEoZGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwdXRJdGVtKG9iajogeyBuZXcoKTogVDsgfSwgdWlkOiBudW1iZXIgfCBDb21wb3NpdGVLZXksIGRhdGE6IFQpIDogUHJvbWlzZUxpa2U8c3RyaW5nPiB7XG5cbiAgICAgICAgaWYgKHR5cGVvZih1aWQpICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBzaW5nbGUgY29sdW1uIGlkZW50aWZpZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmRiLnVwZGF0ZUl0ZW0odGhpcy50YWJsZU5hbWUsIHRoaXMudG9TY2hlbWEoZGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwYXRjaEl0ZW0ob2JqOiB7IG5ldygpOiBUOyB9LCB1aWQ6IG51bWJlciB8IENvbXBvc2l0ZUtleSwgZGF0YTogVCkgOiBQcm9taXNlTGlrZTxib29sZWFuPiB7XG5cbiAgICAgICAgaWYgKHR5cGVvZih1aWQpICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBzaW5nbGUgY29sdW1uIGlkZW50aWZpZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmRiLmxvYWRJdGVtKHRoaXMudGFibGVOYW1lLCB1aWQpXG4gICAgICAgIC50aGVuKChvcmlnaW5hbERhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLnVwZGF0ZUl0ZW0odGhpcy50YWJsZU5hbWUsIHRoaXMudG9TY2hlbWEoT2JqZWN0LmFzc2lnbih0aGlzLmZyb21TY2hlbWEob3JpZ2luYWxEYXRhKSwgZGF0YSkpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlbGV0ZUl0ZW0ob2JqOiB7IG5ldygpOiBUOyB9LCB1aWQ6IG51bWJlciB8IENvbXBvc2l0ZUtleSkgOiBQcm9taXNlTGlrZTxzdHJpbmc+IHtcblxuICAgICAgICBpZiAodHlwZW9mKHVpZCkgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHNpbmdsZSBjb2x1bW4gaWRlbnRpZmllcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZGVsZXRlSXRlbSh0aGlzLnRhYmxlTmFtZSwgdWlkKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL0dlbmVyaWNDb250cm9sbGVyLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 91 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst GenericController_1 = __webpack_require__(90);\r\nconst Exceptions_1 = __webpack_require__(78);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass EntityController extends GenericController_1.GenericController {\r\n    constructor(db) {\r\n        super(db, 'entities');\r\n    }\r\n    static fromSchema(data) {\r\n        return Object.assign(Object.create(falcon_core_1.Entity.prototype), {\r\n            entityType: data.type,\r\n            uid: data.uid,\r\n            label: data.label,\r\n            parent: data.parent\r\n        });\r\n    }\r\n    static toSchema(data) {\r\n        return Object.assign(lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'entityType', 'creationTimestamp', 'lastmodifiedTimestamp'), {\r\n            type: data.entityType,\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timeStamp: data.lastmodifiedTimestamp\r\n        });\r\n    }\r\n    fromSchema(data) {\r\n        return EntityController.fromSchema(data);\r\n    }\r\n    toSchema(data) {\r\n        return EntityController.toSchema(data);\r\n    }\r\n    getCollectionJson(obj, params = {}) {\r\n        if (params.type !== undefined) {\r\n            return this.db.getChildrenOf(lodash_1.isArray(params.type) ? params.type[0] : params.type, 'entity_types')\r\n                .then((ancestors) => {\r\n                return this.db.select('entities').whereIn('type', ancestors)\r\n                    .then((results) => results.map((result) => this.fromSchema(result)));\r\n            });\r\n        }\r\n        else {\r\n            return super.getCollectionJson(obj, params);\r\n        }\r\n    }\r\n    deleteItem(obj, uid) {\r\n        // check if this entity is the parent of another entity or if it has any relationships\r\n        // pointing towards it.\r\n        return Promise.all([\r\n            this.db.select(this.tableName).where('parent', '=', uid),\r\n            this.db.select('records').where('value_entity', '=', uid)\r\n        ]).then(([entities, records]) => {\r\n            if (entities.length + records.length === 0) {\r\n                return this.db.deleteItem(this.tableName, uid);\r\n            }\r\n            else {\r\n                throw new Exceptions_1.OperationNotPermittedException({\r\n                    message: 'The operation could not be completed as the entity is referenced in other sources',\r\n                    data: Promise.resolve({\r\n                        entity: entities,\r\n                        record: records\r\n                    })\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.EntityController = EntityController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL0VudGl0eUNvbnRyb2xsZXIudHM/ZTA0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUlILDhDQUFpRDtBQUNqRCxvREFBd0Q7QUFFeEQsNkNBQW9FO0FBRXBFLHlDQUF1QztBQUV2QyxzQkFBOEIsU0FBUSxxQ0FBeUI7SUFFM0QsWUFBWSxFQUFhO1FBQ3JCLEtBQUssQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBUztRQUM5QixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLG9CQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDbEQsVUFBVSxFQUFFLElBQUksQ0FBQyxJQUFJO1lBQ3JCLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRztZQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSztZQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07U0FDdEIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBWTtRQUNoQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFJLENBQUMsd0JBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQzVDLFlBQVksRUFDWixtQkFBbUIsRUFDbkIsdUJBQXVCLENBQUMsRUFBRTtZQUMxQixJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVU7WUFDckIsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtZQUMxQyxzQkFBc0IsRUFBRSxJQUFJLENBQUMscUJBQXFCO1NBQ3JELENBQUMsQ0FBQztJQUNQLENBQUM7SUFFUyxVQUFVLENBQUMsSUFBUztRQUMxQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFUyxRQUFRLENBQUMsSUFBWTtRQUM1QixNQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFTSxpQkFBaUIsQ0FBQyxHQUF1QixFQUFFLFNBQWMsRUFBRTtRQUM5RCxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDNUIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLGdCQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksRUFBRSxjQUFjLENBQUM7aUJBQ2hHLElBQUksQ0FBQyxDQUFDLFNBQVM7Z0JBQ1osTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDO3FCQUMzRCxJQUFJLENBQUMsQ0FBQyxPQUFPLEtBQUssT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN6RSxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLE1BQU0sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2hELENBQUM7SUFDTCxDQUFDO0lBRU0sVUFBVSxDQUFDLEdBQXVCLEVBQUUsR0FBVztRQUNsRCxzRkFBc0Y7UUFDdEYsdUJBQXVCO1FBQ3ZCLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1lBQ2YsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN4RCxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7U0FDNUQsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQztZQUN4QixFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDbkQsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNKLE1BQU0sSUFBSSwyQ0FBOEIsQ0FBQztvQkFDckMsT0FBTyxFQUFFLG1GQUFtRjtvQkFDNUYsSUFBSSxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUM7d0JBQ2xCLE1BQU0sRUFBRSxRQUFRO3dCQUNoQixNQUFNLEVBQUUsT0FBTztxQkFDbEIsQ0FBQztpQkFDTCxDQUFDLENBQUM7WUFDUCxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0o7QUFsRUQsNENBa0VDIiwiZmlsZSI6IjkxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IENvbnRyb2xsZXIgZm9yIGVsZW1lbnQgc2V0c1xuICogQGF1dGhvciA8YSBocmVmPSdtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51ayc+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjAuMVxuICovXG5cbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnLi4vY29yZS9EYXRhYmFzZSc7XG5cbmltcG9ydCB7IEVudGl0eSwgU2VyaWFsaXplciB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcbmltcG9ydCB7IEdlbmVyaWNDb250cm9sbGVyIH0gZnJvbSAnLi9HZW5lcmljQ29udHJvbGxlcic7XG5cbmltcG9ydCB7IE9wZXJhdGlvbk5vdFBlcm1pdHRlZEV4Y2VwdGlvbiB9IGZyb20gJy4uL2NvcmUvRXhjZXB0aW9ucyc7XG5cbmltcG9ydCB7IG9taXQsIGlzQXJyYXkgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY2xhc3MgRW50aXR5Q29udHJvbGxlciBleHRlbmRzIEdlbmVyaWNDb250cm9sbGVyPEVudGl0eT4ge1xuXG4gICAgY29uc3RydWN0b3IoZGIgOiBEYXRhYmFzZSkge1xuICAgICAgICBzdXBlcihkYiwgJ2VudGl0aWVzJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tU2NoZW1hKGRhdGE6IGFueSkgOiBFbnRpdHkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEVudGl0eS5wcm90b3R5cGUpLCB7XG4gICAgICAgICAgICBlbnRpdHlUeXBlOiBkYXRhLnR5cGUsXG4gICAgICAgICAgICB1aWQ6IGRhdGEudWlkLFxuICAgICAgICAgICAgbGFiZWw6IGRhdGEubGFiZWwsXG4gICAgICAgICAgICBwYXJlbnQ6IGRhdGEucGFyZW50XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdG9TY2hlbWEoZGF0YTogRW50aXR5KSA6IGFueSB7XG4gICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob21pdChTZXJpYWxpemVyLnRvSnNvbihkYXRhKSxcbiAgICAgICAgICAgICdlbnRpdHlUeXBlJyxcbiAgICAgICAgICAgICdjcmVhdGlvblRpbWVzdGFtcCcsXG4gICAgICAgICAgICAnbGFzdG1vZGlmaWVkVGltZXN0YW1wJyksIHtcbiAgICAgICAgICAgIHR5cGU6IGRhdGEuZW50aXR5VHlwZSxcbiAgICAgICAgICAgIGNyZWF0aW9uX3RpbWVzdGFtcDogZGF0YS5jcmVhdGlvblRpbWVzdGFtcCxcbiAgICAgICAgICAgIGxhc3Rtb2RpZmllZF90aW1lU3RhbXA6IGRhdGEubGFzdG1vZGlmaWVkVGltZXN0YW1wXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBmcm9tU2NoZW1hKGRhdGE6IGFueSkgOiBFbnRpdHkge1xuICAgICAgICByZXR1cm4gRW50aXR5Q29udHJvbGxlci5mcm9tU2NoZW1hKGRhdGEpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB0b1NjaGVtYShkYXRhOiBFbnRpdHkpIDogYW55IHtcbiAgICAgICByZXR1cm4gRW50aXR5Q29udHJvbGxlci50b1NjaGVtYShkYXRhKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sbGVjdGlvbkpzb24ob2JqOiB7IG5ldygpOiBFbnRpdHk7IH0sIHBhcmFtczogYW55ID0ge30pIDogUHJvbWlzZUxpa2U8RW50aXR5W10+ICB7XG4gICAgICAgIGlmIChwYXJhbXMudHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRDaGlsZHJlbk9mKGlzQXJyYXkocGFyYW1zLnR5cGUpID8gcGFyYW1zLnR5cGVbMF0gOiBwYXJhbXMudHlwZSwgJ2VudGl0eV90eXBlcycpXG4gICAgICAgICAgICAudGhlbigoYW5jZXN0b3JzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGIuc2VsZWN0KCdlbnRpdGllcycpLndoZXJlSW4oJ3R5cGUnLCBhbmNlc3RvcnMpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdHMpID0+IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IHRoaXMuZnJvbVNjaGVtYShyZXN1bHQpKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRDb2xsZWN0aW9uSnNvbihvYmosIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZGVsZXRlSXRlbShvYmo6IHsgbmV3KCk6IEVudGl0eTsgfSwgdWlkOiBudW1iZXIpIDogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBlbnRpdHkgaXMgdGhlIHBhcmVudCBvZiBhbm90aGVyIGVudGl0eSBvciBpZiBpdCBoYXMgYW55IHJlbGF0aW9uc2hpcHNcbiAgICAgICAgLy8gcG9pbnRpbmcgdG93YXJkcyBpdC5cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRoaXMuZGIuc2VsZWN0KHRoaXMudGFibGVOYW1lKS53aGVyZSgncGFyZW50JywgJz0nLCB1aWQpLFxuICAgICAgICAgICAgdGhpcy5kYi5zZWxlY3QoJ3JlY29yZHMnKS53aGVyZSgndmFsdWVfZW50aXR5JywgJz0nLCB1aWQpXG4gICAgICAgIF0pLnRoZW4oKFtlbnRpdGllcywgcmVjb3Jkc10pID0+IHtcbiAgICAgICAgICAgIGlmIChlbnRpdGllcy5sZW5ndGggKyByZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLmRlbGV0ZUl0ZW0odGhpcy50YWJsZU5hbWUsIHVpZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPcGVyYXRpb25Ob3RQZXJtaXR0ZWRFeGNlcHRpb24oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkIGFzIHRoZSBlbnRpdHkgaXMgcmVmZXJlbmNlZCBpbiBvdGhlciBzb3VyY2VzJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eTogZW50aXRpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmQ6IHJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NlcnZlci9jb250cm9sbGVycy9FbnRpdHlDb250cm9sbGVyLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 92 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst GenericController_1 = __webpack_require__(90);\r\nconst PredicateController_1 = __webpack_require__(93);\r\nconst EntityController_1 = __webpack_require__(91);\r\nconst Exceptions_1 = __webpack_require__(78);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass EntityTypeController extends GenericController_1.GenericController {\r\n    constructor(db) {\r\n        super(db, 'entity_types');\r\n    }\r\n    toSchema(data) {\r\n        return Object.assign(lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'sameAs', 'parents', 'children', 'creationTimestamp', 'lastmodifiedTimestamp'), {\r\n            same_as: data.sameAs,\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timeStamp: data.lastmodifiedTimestamp\r\n        });\r\n    }\r\n    fromSchema(data) {\r\n        return Object.assign(Object.create(falcon_core_1.EntityType.prototype), Object.assign(data, {\r\n            'sameAs': data.same_as\r\n        }));\r\n    }\r\n    getItemJson(obj, uid) {\r\n        return super.getItemJson(obj, uid)\r\n            .then((result) => {\r\n            return Promise.all([\r\n                this.db.getAncestorsOf(uid, 'entity_types')\r\n                    .then((ancestors) => {\r\n                    return this.db.select('entity_types').whereIn('uid', ancestors)\r\n                        .then((results) => results.map((result) => this.fromSchema(result)));\r\n                }),\r\n                this.db.select('entity_types', ['uid']).where({ parent: uid })\r\n            ])\r\n                .then(([parents, children]) => {\r\n                result.parents = parents;\r\n                result.children = children.map((child) => child.uid);\r\n                return result;\r\n            });\r\n        });\r\n    }\r\n    deleteItem(obj, uid) {\r\n        // check if this entity is the parent of another entity or if it has any relationships\r\n        // pointing towards it.\r\n        return Promise.all([\r\n            this.db.select(this.tableName).where('parent', '=', uid),\r\n            this.db.select('entities').where('type', '=', uid),\r\n            this.db.select('predicates').where('domain', '=', uid).orWhere('range_ref', '=', uid)\r\n        ]).then(([entityTypes, entities, predicates]) => {\r\n            if (entities.length + entityTypes.length + predicates.length === 0) {\r\n                return this.db.deleteItem(this.tableName, uid);\r\n            }\r\n            else {\r\n                throw new Exceptions_1.OperationNotPermittedException({\r\n                    message: 'The operation could not be completed as the entity is referenced in other sources',\r\n                    data: Promise.resolve({\r\n                        entityType: entityTypes.map((entityType) => EntityController_1.EntityController.fromSchema(entityType)),\r\n                        entity: entities.map((entity) => EntityController_1.EntityController.fromSchema(entity)),\r\n                        predicate: predicates.map((predicate) => PredicateController_1.PredicateController.fromSchema(predicate))\r\n                    })\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.EntityTypeController = EntityTypeController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL0VudGl0eVR5cGVDb250cm9sbGVyLnRzPzA5NGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFJSCw4Q0FBcUQ7QUFDckQsb0RBQXdEO0FBRXhELHNEQUE0RDtBQUU1RCxtREFBc0Q7QUFFdEQsNkNBQW9FO0FBRXBFLHlDQUE4QjtBQUU5QiwwQkFBa0MsU0FBUSxxQ0FBNkI7SUFFbkUsWUFBWSxFQUFhO1FBQ3JCLEtBQUssQ0FBQyxFQUFFLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVNLFFBQVEsQ0FBQyxJQUFnQjtRQUM1QixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFJLENBQUMsd0JBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQ3pDLFFBQVEsRUFDUixTQUFTLEVBQ1QsVUFBVSxFQUNWLG1CQUFtQixFQUNuQix1QkFBdUIsQ0FBQyxFQUFFO1lBQzlCLE9BQU8sRUFBRSxJQUFJLENBQUMsTUFBTTtZQUNwQixrQkFBa0IsRUFBRSxJQUFJLENBQUMsaUJBQWlCO1lBQzFDLHNCQUFzQixFQUFFLElBQUksQ0FBQyxxQkFBcUI7U0FDckQsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLFVBQVUsQ0FBQyxJQUFTO1FBQ3ZCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsd0JBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRTtZQUMxRSxRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU87U0FDekIsQ0FBQyxDQUFDLENBQUM7SUFDUixDQUFDO0lBRU0sV0FBVyxDQUFDLEdBQTJCLEVBQUUsR0FBVztRQUN2RCxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO2FBQ2pDLElBQUksQ0FBQyxDQUFDLE1BQU07WUFD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QUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKO0FBcEVELG9EQW9FQyIsImZpbGUiOiI5Mi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBDb250cm9sbGVyIGZvciBlbGVtZW50IHNldHNcbiAqIEBhdXRob3IgPGEgaHJlZj0nbWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWsnPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4wLjFcbiAqL1xuXG5pbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gJy4uL2NvcmUvRGF0YWJhc2UnO1xuXG5pbXBvcnQgeyBFbnRpdHlUeXBlLCBTZXJpYWxpemVyIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuaW1wb3J0IHsgR2VuZXJpY0NvbnRyb2xsZXIgfSBmcm9tICcuL0dlbmVyaWNDb250cm9sbGVyJztcblxuaW1wb3J0IHsgUHJlZGljYXRlQ29udHJvbGxlciB9IGZyb20gJy4vUHJlZGljYXRlQ29udHJvbGxlcic7XG5cbmltcG9ydCB7IEVudGl0eUNvbnRyb2xsZXIgfSBmcm9tICcuL0VudGl0eUNvbnRyb2xsZXInO1xuXG5pbXBvcnQgeyBPcGVyYXRpb25Ob3RQZXJtaXR0ZWRFeGNlcHRpb24gfSBmcm9tICcuLi9jb3JlL0V4Y2VwdGlvbnMnO1xuXG5pbXBvcnQgeyBvbWl0IH0gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGNsYXNzIEVudGl0eVR5cGVDb250cm9sbGVyIGV4dGVuZHMgR2VuZXJpY0NvbnRyb2xsZXI8RW50aXR5VHlwZT4ge1xuXG4gICAgY29uc3RydWN0b3IoZGIgOiBEYXRhYmFzZSkge1xuICAgICAgICBzdXBlcihkYiwgJ2VudGl0eV90eXBlcycpO1xuICAgIH1cblxuICAgIHB1YmxpYyB0b1NjaGVtYShkYXRhOiBFbnRpdHlUeXBlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9taXQoU2VyaWFsaXplci50b0pzb24oZGF0YSksXG4gICAgICAgICAgICAgICAgJ3NhbWVBcycsXG4gICAgICAgICAgICAgICAgJ3BhcmVudHMnLFxuICAgICAgICAgICAgICAgICdjaGlsZHJlbicsXG4gICAgICAgICAgICAgICAgJ2NyZWF0aW9uVGltZXN0YW1wJyxcbiAgICAgICAgICAgICAgICAnbGFzdG1vZGlmaWVkVGltZXN0YW1wJyksIHtcbiAgICAgICAgICAgIHNhbWVfYXM6IGRhdGEuc2FtZUFzLFxuICAgICAgICAgICAgY3JlYXRpb25fdGltZXN0YW1wOiBkYXRhLmNyZWF0aW9uVGltZXN0YW1wLFxuICAgICAgICAgICAgbGFzdG1vZGlmaWVkX3RpbWVTdGFtcDogZGF0YS5sYXN0bW9kaWZpZWRUaW1lc3RhbXBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGZyb21TY2hlbWEoZGF0YTogYW55KSA6IEVudGl0eVR5cGUge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEVudGl0eVR5cGUucHJvdG90eXBlKSwgT2JqZWN0LmFzc2lnbihkYXRhLCB7XG4gICAgICAgICAgICAnc2FtZUFzJzogZGF0YS5zYW1lX2FzXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SXRlbUpzb24ob2JqOiB7IG5ldygpOiBFbnRpdHlUeXBlOyB9LCB1aWQ6IG51bWJlcikgOiBQcm9taXNlTGlrZTxFbnRpdHlUeXBlPiB7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXRJdGVtSnNvbihvYmosIHVpZClcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGIuZ2V0QW5jZXN0b3JzT2YodWlkLCAnZW50aXR5X3R5cGVzJylcbiAgICAgICAgICAgICAgICAudGhlbigoYW5jZXN0b3JzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLnNlbGVjdCgnZW50aXR5X3R5cGVzJykud2hlcmVJbigndWlkJywgYW5jZXN0b3JzKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0cykgPT4gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gdGhpcy5mcm9tU2NoZW1hKHJlc3VsdCkpKTtcbiAgICAgICAgICAgICAgICB9KSxcblxuICAgICAgICAgICAgICAgIHRoaXMuZGIuc2VsZWN0KCdlbnRpdHlfdHlwZXMnLCBbJ3VpZCddKS53aGVyZSh7IHBhcmVudDogdWlkIH0pXG4gICAgICAgICAgICBdKVxuICAgICAgICAgICAgLnRoZW4oKFtwYXJlbnRzLCBjaGlsZHJlbl0pID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQucGFyZW50cyA9IHBhcmVudHM7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmNoaWxkcmVuID0gY2hpbGRyZW4ubWFwKChjaGlsZCkgPT4gY2hpbGQudWlkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWxldGVJdGVtKG9iajogeyBuZXcoKTogRW50aXR5VHlwZTsgfSwgdWlkOiBudW1iZXIpIDogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBlbnRpdHkgaXMgdGhlIHBhcmVudCBvZiBhbm90aGVyIGVudGl0eSBvciBpZiBpdCBoYXMgYW55IHJlbGF0aW9uc2hpcHNcbiAgICAgICAgLy8gcG9pbnRpbmcgdG93YXJkcyBpdC5cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRoaXMuZGIuc2VsZWN0KHRoaXMudGFibGVOYW1lKS53aGVyZSgncGFyZW50JywgJz0nLCB1aWQpLFxuICAgICAgICAgICAgdGhpcy5kYi5zZWxlY3QoJ2VudGl0aWVzJykud2hlcmUoJ3R5cGUnLCAnPScsIHVpZCksXG4gICAgICAgICAgICB0aGlzLmRiLnNlbGVjdCgncHJlZGljYXRlcycpLndoZXJlKCdkb21haW4nLCAnPScsIHVpZCkub3JXaGVyZSgncmFuZ2VfcmVmJywgJz0nLCB1aWQpXG4gICAgICAgIF0pLnRoZW4oKFtlbnRpdHlUeXBlcywgZW50aXRpZXMsIHByZWRpY2F0ZXNdKSA9PiB7XG4gICAgICAgICAgICBpZiAoZW50aXRpZXMubGVuZ3RoICsgZW50aXR5VHlwZXMubGVuZ3RoICsgcHJlZGljYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYi5kZWxldGVJdGVtKHRoaXMudGFibGVOYW1lLCB1aWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT3BlcmF0aW9uTm90UGVybWl0dGVkRXhjZXB0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZCBhcyB0aGUgZW50aXR5IGlzIHJlZmVyZW5jZWQgaW4gb3RoZXIgc291cmNlcycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlUeXBlOiBlbnRpdHlUeXBlcy5tYXAoKGVudGl0eVR5cGUpID0+IEVudGl0eUNvbnRyb2xsZXIuZnJvbVNjaGVtYShlbnRpdHlUeXBlKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHk6IGVudGl0aWVzLm1hcCgoZW50aXR5KSA9PiBFbnRpdHlDb250cm9sbGVyLmZyb21TY2hlbWEoZW50aXR5KSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGU6IHByZWRpY2F0ZXMubWFwKChwcmVkaWNhdGUpID0+IFByZWRpY2F0ZUNvbnRyb2xsZXIuZnJvbVNjaGVtYShwcmVkaWNhdGUpKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL0VudGl0eVR5cGVDb250cm9sbGVyLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 93 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst GenericController_1 = __webpack_require__(90);\r\nconst Exceptions_1 = __webpack_require__(78);\r\nconst RecordController_1 = __webpack_require__(94);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass PredicateController extends GenericController_1.GenericController {\r\n    constructor(db) {\r\n        super(db, 'predicates');\r\n    }\r\n    static toSchema(data) {\r\n        const out = Object.assign(lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'range', 'rangeIsReference', 'sameAs', 'creationTimestamp', 'lastmodifiedTimestamp'), {\r\n            same_as: data.sameAs,\r\n            range_type: data.rangeIsReference ? 'entity' : data.range,\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timeStamp: data.lastmodifiedTimestamp\r\n        });\r\n        if (data.rangeIsReference) {\r\n            out['range_ref'] = data.range;\r\n        }\r\n        else {\r\n            out['range_ref'] = null;\r\n        }\r\n        return out;\r\n    }\r\n    static fromSchema(data) {\r\n        if (data.range_type === 'entity') {\r\n            data.range = data.range_ref;\r\n            data.rangeIsReference = true;\r\n        }\r\n        else {\r\n            data.range = data.range_type;\r\n            data.rangeIsReference = false;\r\n        }\r\n        return Object.assign(Object.create(falcon_core_1.Predicate.prototype), Object.assign(data, {\r\n            'sameAs': data.same_as\r\n        }));\r\n    }\r\n    toSchema(data) {\r\n        return PredicateController.toSchema(data);\r\n    }\r\n    fromSchema(data) {\r\n        return PredicateController.fromSchema(data);\r\n    }\r\n    getCollectionJson(obj, params = {}) {\r\n        if (params.domain !== undefined) {\r\n            //TODO: this check should be unecessery\r\n            return this.db.getAncestorsOf(lodash_1.isArray(params.domain) ? params.domain[0] : params.domain, 'entity_types')\r\n                .then((ancestors) => {\r\n                return this.db.select('predicates').whereIn('domain', ancestors.concat([params.domain[0]]))\r\n                    .then((results) => results.map((result) => this.fromSchema(result)));\r\n            });\r\n        }\r\n        else {\r\n            return super.getCollectionJson(obj, params);\r\n        }\r\n    }\r\n    putItem(obj, uid, data) {\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.updateItem(this.tableName, falcon_core_1.Serializer.toJson(data));\r\n    }\r\n    patchItem(obj, uid, data) {\r\n        if (data.domain !== undefined) {\r\n            return this.db.select('records', ['entities.type as entityType'])\r\n                .distinct()\r\n                .where({ predicate: uid })\r\n                .innerJoin('entities', 'records.entity', 'entities.uid')\r\n                .then((records) => {\r\n                if (records.length > 0) {\r\n                    return this.db.getChildrenOf(data.domain, 'entity_types')\r\n                        .then((res) => {\r\n                        records.map((e) => e.entityType)\r\n                            .forEach((e) => {\r\n                            if (res.indexOf(e) === -1) {\r\n                                throw new Exceptions_1.OperationNotPermittedException({\r\n                                    message: 'The operation could not be completed as it would invalidate predicate relationships',\r\n                                    data: Promise.resolve({})\r\n                                });\r\n                            }\r\n                        });\r\n                    }).then(() => super.patchItem(obj, uid, data));\r\n                }\r\n                return super.patchItem(obj, uid, data);\r\n            });\r\n        }\r\n        //TODO: fix range enforcement\r\n        if (data.range !== undefined) {\r\n            return this.db.select('records')\r\n                .where({ predicate: uid })\r\n                .then((records) => {\r\n                if (records.length > 0) {\r\n                    if (data.rangeIsReference === false) {\r\n                        throw new Exceptions_1.OperationNotPermittedException({\r\n                            message: 'The operation could not be completed as it would invalidate predicate relationships',\r\n                            data: Promise.resolve({})\r\n                        });\r\n                    }\r\n                    return this.db.getChildrenOf(data.range, 'entity_types')\r\n                        .then((res) => {\r\n                        records.map((e) => e.value_entity)\r\n                            .forEach((e) => {\r\n                            if (res.indexOf(e) === -1) {\r\n                                throw new Exceptions_1.OperationNotPermittedException({\r\n                                    message: 'The operation could not be completed as it would invalidate predicate relationships',\r\n                                    data: Promise.resolve({})\r\n                                });\r\n                            }\r\n                        });\r\n                    }).then(() => super.patchItem(obj, uid, data));\r\n                }\r\n                return super.patchItem(obj, uid, data);\r\n            });\r\n        }\r\n        return super.patchItem(obj, uid, data);\r\n    }\r\n    deleteItem(obj, uid) {\r\n        // check if this entity is the parent of another entity or if it has any relationships\r\n        // pointing towards it.\r\n        return Promise.all([\r\n            this.db.loadCollection('records', { predicate: uid })\r\n        ]).then(([records]) => {\r\n            if (records.length === 0) {\r\n                return this.db.deleteItem(this.tableName, uid);\r\n            }\r\n            else {\r\n                throw new Exceptions_1.OperationNotPermittedException({\r\n                    message: 'The operation could not be completed as the predicate is used by other records',\r\n                    data: Promise.resolve({\r\n                        record: records.map((record) => RecordController_1.RecordController.fromSchema(record))\r\n                    })\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.PredicateController = PredicateController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL1ByZWRpY2F0ZUNvbnRyb2xsZXIudHM/MmUyMSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUlILDhDQUFvRDtBQUVwRCxvREFBd0Q7QUFFeEQsNkNBQW9FO0FBRXBFLG1EQUFzRDtBQUV0RCx5Q0FBdUM7QUFFdkMseUJBQWlDLFNBQVEscUNBQTRCO0lBRWpFLFlBQVksRUFBYTtRQUNyQixLQUFLLENBQUMsRUFBRSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFTSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQWU7UUFDbEMsTUFBTSxHQUFHLEdBQTJCLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBSSxDQUFDLHdCQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUMxRSxPQUFPLEVBQ1Asa0JBQWtCLEVBQ2xCLFFBQVEsRUFDUixtQkFBbUIsRUFDbkIsdUJBQXVCLENBQzFCLEVBQUU7WUFDQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE1BQU07WUFDcEIsVUFBVSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUs7WUFDekQsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtZQUMxQyxzQkFBc0IsRUFBRSxJQUFJLENBQUMscUJBQXFCO1NBQ3JELENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDeEIsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDbEMsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUM1QixDQUFDO1FBRUQsTUFBTSxDQUFDLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFTSxNQUFNLENBQUMsVUFBVSxDQUFDLElBQVM7UUFD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QyxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQzNDLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQztRQUVELE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVPLFVBQVUsQ0FBQyxHQUEwQixFQUFFLEdBQVc7UUFDdEQsc0ZBQXNGO1FBQ3RGLHVCQUF1QjtRQUN2QixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztZQUNmLElBQUksQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLFNBQVMsRUFBRSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUMsQ0FBQztTQUN2RCxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7WUFDZCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ25ELENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDSixNQUFNLElBQUksMkNBQThCLENBQUM7b0JBQ3JDLE9BQU8sRUFBRSxnRkFBZ0Y7b0JBQ3pGLElBQUksRUFBRSxPQUFPLENBQUMsT0FBTyxDQUFDO3dCQUNsQixNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxtQ0FBZ0IsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7cUJBQ3ZFLENBQUM7aUJBQ0wsQ0FBQyxDQUFDO1lBQ1AsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKO0FBOUpELGtEQThKQyIsImZpbGUiOiI5My5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVPdmVydmlldyBDb250cm9sbGVyIGZvciBlbGVtZW50IHNldHNcbiAqIEBhdXRob3IgPGEgaHJlZj0nbWFpbHRvOnRpbS5ob2xsaWVzQHdhcndpY2suYWMudWsnPlRpbSBIb2xsaWVzPC9hPlxuICogQHZlcnNpb24gMC4wLjFcbiAqL1xuXG5pbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gJy4uL2NvcmUvRGF0YWJhc2UnO1xuXG5pbXBvcnQgeyBQcmVkaWNhdGUsIFNlcmlhbGl6ZXIgfSBmcm9tICdmYWxjb24tY29yZSc7XG5cbmltcG9ydCB7IEdlbmVyaWNDb250cm9sbGVyIH0gZnJvbSAnLi9HZW5lcmljQ29udHJvbGxlcic7XG5cbmltcG9ydCB7IE9wZXJhdGlvbk5vdFBlcm1pdHRlZEV4Y2VwdGlvbiB9IGZyb20gJy4uL2NvcmUvRXhjZXB0aW9ucyc7XG5cbmltcG9ydCB7IFJlY29yZENvbnRyb2xsZXIgfSBmcm9tICcuL1JlY29yZENvbnRyb2xsZXInO1xuXG5pbXBvcnQgeyBvbWl0LCBpc0FycmF5IH0gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGNsYXNzIFByZWRpY2F0ZUNvbnRyb2xsZXIgZXh0ZW5kcyBHZW5lcmljQ29udHJvbGxlcjxQcmVkaWNhdGU+IHtcblxuICAgIGNvbnN0cnVjdG9yKGRiIDogRGF0YWJhc2UpIHtcbiAgICAgICAgc3VwZXIoZGIsICdwcmVkaWNhdGVzJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB0b1NjaGVtYShkYXRhOiBQcmVkaWNhdGUpIHtcbiAgICAgICAgY29uc3Qgb3V0IDogeyBbczogc3RyaW5nXSA6IGFueSB9ID0gT2JqZWN0LmFzc2lnbihvbWl0KFNlcmlhbGl6ZXIudG9Kc29uKGRhdGEpLFxuICAgICAgICAgICAgJ3JhbmdlJyxcbiAgICAgICAgICAgICdyYW5nZUlzUmVmZXJlbmNlJyxcbiAgICAgICAgICAgICdzYW1lQXMnLFxuICAgICAgICAgICAgJ2NyZWF0aW9uVGltZXN0YW1wJyxcbiAgICAgICAgICAgICdsYXN0bW9kaWZpZWRUaW1lc3RhbXAnXG4gICAgICAgICksIHtcbiAgICAgICAgICAgIHNhbWVfYXM6IGRhdGEuc2FtZUFzLFxuICAgICAgICAgICAgcmFuZ2VfdHlwZTogZGF0YS5yYW5nZUlzUmVmZXJlbmNlID8gJ2VudGl0eScgOiBkYXRhLnJhbmdlLFxuICAgICAgICAgICAgY3JlYXRpb25fdGltZXN0YW1wOiBkYXRhLmNyZWF0aW9uVGltZXN0YW1wLFxuICAgICAgICAgICAgbGFzdG1vZGlmaWVkX3RpbWVTdGFtcDogZGF0YS5sYXN0bW9kaWZpZWRUaW1lc3RhbXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGRhdGEucmFuZ2VJc1JlZmVyZW5jZSkge1xuICAgICAgICAgICAgb3V0WydyYW5nZV9yZWYnXSA9IGRhdGEucmFuZ2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvdXRbJ3JhbmdlX3JlZiddID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tU2NoZW1hKGRhdGE6IGFueSkgOiBQcmVkaWNhdGUge1xuICAgICAgICBpZiAoZGF0YS5yYW5nZV90eXBlID09PSAnZW50aXR5Jykge1xuICAgICAgICAgICAgZGF0YS5yYW5nZSA9IGRhdGEucmFuZ2VfcmVmO1xuICAgICAgICAgICAgZGF0YS5yYW5nZUlzUmVmZXJlbmNlID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEucmFuZ2UgPSBkYXRhLnJhbmdlX3R5cGU7XG4gICAgICAgICAgICBkYXRhLnJhbmdlSXNSZWZlcmVuY2UgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoUHJlZGljYXRlLnByb3RvdHlwZSksIE9iamVjdC5hc3NpZ24oZGF0YSwge1xuICAgICAgICAgICAgJ3NhbWVBcyc6IGRhdGEuc2FtZV9hc1xuICAgICAgICB9KSk7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgdG9TY2hlbWEoZGF0YTogUHJlZGljYXRlKSB7XG4gICAgICAgIHJldHVybiBQcmVkaWNhdGVDb250cm9sbGVyLnRvU2NoZW1hKGRhdGEpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBmcm9tU2NoZW1hKGRhdGE6IGFueSkgOiBQcmVkaWNhdGUge1xuICAgICAgICByZXR1cm4gUHJlZGljYXRlQ29udHJvbGxlci5mcm9tU2NoZW1hKGRhdGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb2xsZWN0aW9uSnNvbihvYmo6IHsgbmV3KCk6IFByZWRpY2F0ZTsgfSwgcGFyYW1zOiBhbnkgPSB7fSkgOiBQcm9taXNlTGlrZTxQcmVkaWNhdGVbXT4gIHtcbiAgICAgICAgaWYgKHBhcmFtcy5kb21haW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy9UT0RPOiB0aGlzIGNoZWNrIHNob3VsZCBiZSB1bmVjZXNzZXJ5XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRBbmNlc3RvcnNPZihpc0FycmF5KHBhcmFtcy5kb21haW4pID8gcGFyYW1zLmRvbWFpblswXSA6IHBhcmFtcy5kb21haW4sICdlbnRpdHlfdHlwZXMnKVxuICAgICAgICAgICAgLnRoZW4oKGFuY2VzdG9ycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLnNlbGVjdCgncHJlZGljYXRlcycpLndoZXJlSW4oJ2RvbWFpbicsIGFuY2VzdG9ycy5jb25jYXQoW3BhcmFtcy5kb21haW5bMF1dKSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0cykgPT4gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gdGhpcy5mcm9tU2NoZW1hKHJlc3VsdCkpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldENvbGxlY3Rpb25Kc29uKG9iaiwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBwdXRJdGVtKG9iajogeyBuZXcoKTogUHJlZGljYXRlOyB9LCB1aWQ6IG51bWJlciwgZGF0YTogUHJlZGljYXRlKSA6IFByb21pc2VMaWtlPHN0cmluZz4ge1xuXG4gICAgICAgIGlmICh0eXBlb2YodWlkKSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgc2luZ2xlIGNvbHVtbiBpZGVudGlmaWVyJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5kYi51cGRhdGVJdGVtKHRoaXMudGFibGVOYW1lLCBTZXJpYWxpemVyLnRvSnNvbihkYXRhKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHBhdGNoSXRlbShvYmo6IHsgbmV3KCk6IFByZWRpY2F0ZTsgfSwgdWlkOiBudW1iZXIsIGRhdGE6IFByZWRpY2F0ZSkgOiBQcm9taXNlTGlrZTxib29sZWFuPiB7XG5cbiAgICAgICAgaWYgKGRhdGEuZG9tYWluICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLnNlbGVjdCgncmVjb3JkcycsIFsnZW50aXRpZXMudHlwZSBhcyBlbnRpdHlUeXBlJ10pXG4gICAgICAgICAgICAgICAgLmRpc3RpbmN0KClcbiAgICAgICAgICAgICAgICAud2hlcmUoeyBwcmVkaWNhdGU6IHVpZCB9KVxuICAgICAgICAgICAgICAgIC5pbm5lckpvaW4oJ2VudGl0aWVzJywgJ3JlY29yZHMuZW50aXR5JywgJ2VudGl0aWVzLnVpZCcpXG4gICAgICAgICAgICAudGhlbigocmVjb3JkcykgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlY29yZHMubGVuZ3RoID4gMCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLmdldENoaWxkcmVuT2YoZGF0YS5kb21haW4sICdlbnRpdHlfdHlwZXMnKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzLm1hcCgoZSkgPT4gZS5lbnRpdHlUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmluZGV4T2YoZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBPcGVyYXRpb25Ob3RQZXJtaXR0ZWRFeGNlcHRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZCBhcyBpdCB3b3VsZCBpbnZhbGlkYXRlIHByZWRpY2F0ZSByZWxhdGlvbnNoaXBzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFByb21pc2UucmVzb2x2ZSh7fSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gc3VwZXIucGF0Y2hJdGVtKG9iaiwgdWlkLCBkYXRhKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnBhdGNoSXRlbShvYmosIHVpZCwgZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vVE9ETzogZml4IHJhbmdlIGVuZm9yY2VtZW50XG4gICAgICAgIGlmIChkYXRhLnJhbmdlICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGIuc2VsZWN0KCdyZWNvcmRzJylcbiAgICAgICAgICAgICAgICAud2hlcmUoeyBwcmVkaWNhdGU6IHVpZCB9KVxuICAgICAgICAgICAgLnRoZW4oKHJlY29yZHMpID0+IHtcblxuICAgICAgICAgICAgICAgIGlmIChyZWNvcmRzLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yYW5nZUlzUmVmZXJlbmNlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9wZXJhdGlvbk5vdFBlcm1pdHRlZEV4Y2VwdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZCBhcyBpdCB3b3VsZCBpbnZhbGlkYXRlIHByZWRpY2F0ZSByZWxhdGlvbnNoaXBzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBQcm9taXNlLnJlc29sdmUoe30pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLmdldENoaWxkcmVuT2YoZGF0YS5yYW5nZSwgJ2VudGl0eV90eXBlcycpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHMubWFwKChlKSA9PiBlLnZhbHVlX2VudGl0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5pbmRleE9mKGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT3BlcmF0aW9uTm90UGVybWl0dGVkRXhjZXB0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWQgYXMgaXQgd291bGQgaW52YWxpZGF0ZSBwcmVkaWNhdGUgcmVsYXRpb25zaGlwcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBQcm9taXNlLnJlc29sdmUoe30pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHN1cGVyLnBhdGNoSXRlbShvYmosIHVpZCwgZGF0YSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5wYXRjaEl0ZW0ob2JqLCB1aWQsIGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIucGF0Y2hJdGVtKG9iaiwgdWlkLCBkYXRhKTtcbiAgICB9XG5cbiAgICAgcHVibGljIGRlbGV0ZUl0ZW0ob2JqOiB7IG5ldygpOiBQcmVkaWNhdGU7IH0sIHVpZDogbnVtYmVyKSA6IFByb21pc2VMaWtlPHN0cmluZz4ge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGVudGl0eSBpcyB0aGUgcGFyZW50IG9mIGFub3RoZXIgZW50aXR5IG9yIGlmIGl0IGhhcyBhbnkgcmVsYXRpb25zaGlwc1xuICAgICAgICAvLyBwb2ludGluZyB0b3dhcmRzIGl0LlxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGhpcy5kYi5sb2FkQ29sbGVjdGlvbigncmVjb3JkcycsIHsgcHJlZGljYXRlOiB1aWR9KVxuICAgICAgICBdKS50aGVuKChbcmVjb3Jkc10pID0+IHtcbiAgICAgICAgICAgIGlmIChyZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLmRlbGV0ZUl0ZW0odGhpcy50YWJsZU5hbWUsIHVpZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPcGVyYXRpb25Ob3RQZXJtaXR0ZWRFeGNlcHRpb24oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkIGFzIHRoZSBwcmVkaWNhdGUgaXMgdXNlZCBieSBvdGhlciByZWNvcmRzJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZDogcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gUmVjb3JkQ29udHJvbGxlci5mcm9tU2NoZW1hKHJlY29yZCkpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvUHJlZGljYXRlQ29udHJvbGxlci50cyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 94 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst GenericController_1 = __webpack_require__(90);\r\nconst Exceptions_1 = __webpack_require__(78);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass RecordController extends GenericController_1.GenericController {\r\n    constructor(db) {\r\n        super(db, 'records');\r\n    }\r\n    static toSchema(data) {\r\n        const schemaOutput = lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'value', 'valueType', 'creationTimestamp', 'label', 'lastmodifiedTimestamp');\r\n        schemaOutput.value_type = data.valueType;\r\n        if (data.valueType !== undefined && data.valueType !== 'source') {\r\n            schemaOutput['value_' + data.valueType] = data.value;\r\n        }\r\n        return Object.assign({}, schemaOutput, {\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timeStamp: data.lastmodifiedTimestamp\r\n        });\r\n    }\r\n    static fromSchema(data) {\r\n        data.valueType = data.value_type;\r\n        switch (data.value_type) {\r\n            case 'entity':\r\n                data.value = data.value_entity;\r\n                break;\r\n            case 'string':\r\n                data.value = data.value_string;\r\n                break;\r\n            case 'date':\r\n                data.value = data.value_date;\r\n                break;\r\n            case 'integer':\r\n                data.value = data.value_integer;\r\n                break;\r\n            case 'point':\r\n                data.value = data.value_point;\r\n                break;\r\n            case 'region':\r\n                data.value = data.value_region;\r\n                break;\r\n            case 'source':\r\n                data.value = data.source;\r\n                break;\r\n            default:\r\n                data.value = null;\r\n        }\r\n        return Object.assign(Object.create(falcon_core_1.Record.prototype), data);\r\n    }\r\n    toSchema(data) {\r\n        return RecordController.toSchema(data);\r\n    }\r\n    fromSchema(data) {\r\n        return RecordController.fromSchema(data);\r\n    }\r\n    postItem(obj, data) {\r\n        // predicate domain must equal value_type\r\n        return this.db.select('predicates', ['range_type']).where({ uid: data.predicate })\r\n            .then(([predicate]) => {\r\n            if (data.valueType === predicate.range_type) {\r\n                //TODO: still need to check entity type constraints\r\n                return super.postItem(obj, data);\r\n            }\r\n            throw new Exceptions_1.OperationNotPermittedException({\r\n                message: 'Attempted to add a record with an incorrect type!',\r\n                data: Promise.resolve({})\r\n            });\r\n        });\r\n    }\r\n    putItem(obj, uid, data) {\r\n        //TODO: what happens if we only update the value - and do not send the valueType again?\r\n        return this.db.select('predicates', ['range_type']).where({ uid: data.predicate })\r\n            .then(([predicate]) => {\r\n            if (data.valueType === predicate.range_type) {\r\n                //TODO: still need to check entity type constraints\r\n                return super.putItem(obj, uid, data);\r\n            }\r\n            throw new Exceptions_1.OperationNotPermittedException({\r\n                message: 'Attempted to add a record with an incorrect type!',\r\n                data: Promise.resolve({})\r\n            });\r\n        });\r\n    }\r\n    patchItem(obj, uid, data) {\r\n        return this.db.select('predicates', ['range_type']).where({ uid: data.predicate })\r\n            .then(([predicate]) => {\r\n            if (data.valueType === predicate.range_type) {\r\n                //TODO: still need to check entity type constraints\r\n                return super.patchItem(obj, uid, data);\r\n            }\r\n            throw new Exceptions_1.OperationNotPermittedException({\r\n                message: 'Attempted to add a record with an incorrect type!',\r\n                data: Promise.resolve({})\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.RecordController = RecordController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL1JlY29yZENvbnRyb2xsZXIudHM/MDE3YyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUlILDhDQUFpRDtBQUNqRCxvREFBd0Q7QUFFeEQsNkNBQW9FO0FBRXBFLHlDQUE4QjtBQUU5QixzQkFBOEIsU0FBUSxxQ0FBeUI7SUFFM0QsWUFBWSxFQUFhO1FBQ3JCLEtBQUssQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDekIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBWTtRQUMvQixNQUFNLFlBQVksR0FBRyxhQUFJLENBQUMsd0JBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQzdDLE9BQU8sRUFDUCxXQUFXLEVBQ1gsbUJBQW1CLEVBQ25CLE9BQU8sRUFDUCx1QkFBdUIsQ0FBQyxDQUFDO1FBRTdCLFlBQVksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUV6QyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDOUQsWUFBWSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUN6RCxDQUFDO1FBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLFlBQVksRUFBRTtZQUNuQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsaUJBQWlCO1lBQzFDLHNCQUFzQixFQUFFLElBQUksQ0FBQyxxQkFBcUI7U0FDckQsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBUztRQUU5QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7UUFFakMsTUFBTSxDQUFDLENBQUMsSUFBSSxD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Q0QsTUFBTSxJQUFJLDJDQUE4QixDQUFDO2dCQUNyQyxPQUFPLEVBQUUsbURBQW1EO2dCQUM1RCxJQUFJLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7YUFDNUIsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sU0FBUyxDQUFDLEdBQXVCLEVBQUUsR0FBVyxFQUFFLElBQVk7UUFDL0QsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQzthQUNqRixJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUNkLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEtBQUssU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFDLG1EQUFtRDtnQkFDbkQsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMzQyxDQUFDO1lBQ0QsTUFBTSxJQUFJLDJDQUE4QixDQUFDO2dCQUNyQyxPQUFPLEVBQUUsbURBQW1EO2dCQUM1RCxJQUFJLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7YUFDNUIsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0o7QUFqSEQsNENBaUhDIiwiZmlsZSI6Ijk0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IENvbnRyb2xsZXIgZm9yIGVsZW1lbnQgc2V0c1xuICogQGF1dGhvciA8YSBocmVmPSdtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51ayc+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjAuMVxuICovXG5cbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnLi4vY29yZS9EYXRhYmFzZSc7XG5cbmltcG9ydCB7IFJlY29yZCwgU2VyaWFsaXplciB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcbmltcG9ydCB7IEdlbmVyaWNDb250cm9sbGVyIH0gZnJvbSAnLi9HZW5lcmljQ29udHJvbGxlcic7XG5cbmltcG9ydCB7IE9wZXJhdGlvbk5vdFBlcm1pdHRlZEV4Y2VwdGlvbiB9IGZyb20gJy4uL2NvcmUvRXhjZXB0aW9ucyc7XG5cbmltcG9ydCB7IG9taXQgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY2xhc3MgUmVjb3JkQ29udHJvbGxlciBleHRlbmRzIEdlbmVyaWNDb250cm9sbGVyPFJlY29yZD4ge1xuXG4gICAgY29uc3RydWN0b3IoZGIgOiBEYXRhYmFzZSkge1xuICAgICAgICBzdXBlcihkYiwgJ3JlY29yZHMnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHRvU2NoZW1hKGRhdGE6IFJlY29yZCkge1xuICAgICAgICBjb25zdCBzY2hlbWFPdXRwdXQgPSBvbWl0KFNlcmlhbGl6ZXIudG9Kc29uKGRhdGEpLFxuICAgICAgICAgICAgJ3ZhbHVlJyxcbiAgICAgICAgICAgICd2YWx1ZVR5cGUnLFxuICAgICAgICAgICAgJ2NyZWF0aW9uVGltZXN0YW1wJyxcbiAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAnbGFzdG1vZGlmaWVkVGltZXN0YW1wJyk7XG5cbiAgICAgICAgc2NoZW1hT3V0cHV0LnZhbHVlX3R5cGUgPSBkYXRhLnZhbHVlVHlwZTtcblxuICAgICAgICBpZiAoZGF0YS52YWx1ZVR5cGUgIT09IHVuZGVmaW5lZCAmJiBkYXRhLnZhbHVlVHlwZSAhPT0gJ3NvdXJjZScpIHtcbiAgICAgICAgICAgIHNjaGVtYU91dHB1dFsndmFsdWVfJyArIGRhdGEudmFsdWVUeXBlXSA9IGRhdGEudmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc2NoZW1hT3V0cHV0LCB7XG4gICAgICAgICAgICBjcmVhdGlvbl90aW1lc3RhbXA6IGRhdGEuY3JlYXRpb25UaW1lc3RhbXAsXG4gICAgICAgICAgICBsYXN0bW9kaWZpZWRfdGltZVN0YW1wOiBkYXRhLmxhc3Rtb2RpZmllZFRpbWVzdGFtcFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGZyb21TY2hlbWEoZGF0YTogYW55KSA6IFJlY29yZCB7XG5cbiAgICAgICAgZGF0YS52YWx1ZVR5cGUgPSBkYXRhLnZhbHVlX3R5cGU7XG5cbiAgICAgICAgc3dpdGNoIChkYXRhLnZhbHVlX3R5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2VudGl0eSc6XG4gICAgICAgICAgICAgICAgZGF0YS52YWx1ZSA9IGRhdGEudmFsdWVfZW50aXR5O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gZGF0YS52YWx1ZV9zdHJpbmc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gZGF0YS52YWx1ZV9kYXRlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICAgICAgZGF0YS52YWx1ZSA9IGRhdGEudmFsdWVfaW50ZWdlcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3BvaW50JzpcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gZGF0YS52YWx1ZV9wb2ludDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3JlZ2lvbic6XG4gICAgICAgICAgICAgICAgZGF0YS52YWx1ZSA9IGRhdGEudmFsdWVfcmVnaW9uO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc291cmNlJzpcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gZGF0YS5zb3VyY2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShSZWNvcmQucHJvdG90eXBlKSwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHRvU2NoZW1hKGRhdGE6IFJlY29yZCkge1xuICAgICAgcmV0dXJuIFJlY29yZENvbnRyb2xsZXIudG9TY2hlbWEoZGF0YSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGZyb21TY2hlbWEoZGF0YTogYW55KSB7XG4gICAgICByZXR1cm4gUmVjb3JkQ29udHJvbGxlci5mcm9tU2NoZW1hKGRhdGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwb3N0SXRlbShvYmo6IHsgbmV3KCk6IFJlY29yZDsgfSwgZGF0YTogUmVjb3JkKSA6IFByb21pc2VMaWtlPHN0cmluZz4ge1xuXG4gICAgICAgIC8vIHByZWRpY2F0ZSBkb21haW4gbXVzdCBlcXVhbCB2YWx1ZV90eXBlXG4gICAgICAgIHJldHVybiB0aGlzLmRiLnNlbGVjdCgncHJlZGljYXRlcycsIFsncmFuZ2VfdHlwZSddKS53aGVyZSh7IHVpZDogZGF0YS5wcmVkaWNhdGUgfSlcbiAgICAgICAgLnRoZW4oKFtwcmVkaWNhdGVdKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS52YWx1ZVR5cGUgPT09IHByZWRpY2F0ZS5yYW5nZV90eXBlKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBzdGlsbCBuZWVkIHRvIGNoZWNrIGVudGl0eSB0eXBlIGNvbnN0cmFpbnRzXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnBvc3RJdGVtKG9iaiwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlcmF0aW9uTm90UGVybWl0dGVkRXhjZXB0aW9uKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQXR0ZW1wdGVkIHRvIGFkZCBhIHJlY29yZCB3aXRoIGFuIGluY29ycmVjdCB0eXBlIScsXG4gICAgICAgICAgICAgICAgZGF0YTogUHJvbWlzZS5yZXNvbHZlKHt9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBwdXRJdGVtKG9iajogeyBuZXcoKTogUmVjb3JkOyB9LCB1aWQ6IG51bWJlciwgZGF0YTogUmVjb3JkKSA6IFByb21pc2VMaWtlPHN0cmluZz4ge1xuXG4gICAgICAgIC8vVE9ETzogd2hhdCBoYXBwZW5zIGlmIHdlIG9ubHkgdXBkYXRlIHRoZSB2YWx1ZSAtIGFuZCBkbyBub3Qgc2VuZCB0aGUgdmFsdWVUeXBlIGFnYWluP1xuXG4gICAgICAgIHJldHVybiB0aGlzLmRiLnNlbGVjdCgncHJlZGljYXRlcycsIFsncmFuZ2VfdHlwZSddKS53aGVyZSh7IHVpZDogZGF0YS5wcmVkaWNhdGUgfSlcbiAgICAgICAgLnRoZW4oKFtwcmVkaWNhdGVdKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS52YWx1ZVR5cGUgPT09IHByZWRpY2F0ZS5yYW5nZV90eXBlKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBzdGlsbCBuZWVkIHRvIGNoZWNrIGVudGl0eSB0eXBlIGNvbnN0cmFpbnRzXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnB1dEl0ZW0ob2JqLCB1aWQsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZXJhdGlvbk5vdFBlcm1pdHRlZEV4Y2VwdGlvbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0F0dGVtcHRlZCB0byBhZGQgYSByZWNvcmQgd2l0aCBhbiBpbmNvcnJlY3QgdHlwZSEnLFxuICAgICAgICAgICAgICAgIGRhdGE6IFByb21pc2UucmVzb2x2ZSh7fSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGF0Y2hJdGVtKG9iajogeyBuZXcoKTogUmVjb3JkOyB9LCB1aWQ6IG51bWJlciwgZGF0YTogUmVjb3JkKSA6IFByb21pc2VMaWtlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuc2VsZWN0KCdwcmVkaWNhdGVzJywgWydyYW5nZV90eXBlJ10pLndoZXJlKHsgdWlkOiBkYXRhLnByZWRpY2F0ZSB9KVxuICAgICAgICAudGhlbigoW3ByZWRpY2F0ZV0pID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnZhbHVlVHlwZSA9PT0gcHJlZGljYXRlLnJhbmdlX3R5cGUpIHtcbiAgICAgICAgICAgICAgICAvL1RPRE86IHN0aWxsIG5lZWQgdG8gY2hlY2sgZW50aXR5IHR5cGUgY29uc3RyYWludHNcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIucGF0Y2hJdGVtKG9iaiwgdWlkLCBkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVyYXRpb25Ob3RQZXJtaXR0ZWRFeGNlcHRpb24oe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBdHRlbXB0ZWQgdG8gYWRkIGEgcmVjb3JkIHdpdGggYW4gaW5jb3JyZWN0IHR5cGUhJyxcbiAgICAgICAgICAgICAgICBkYXRhOiBQcm9taXNlLnJlc29sdmUoe30pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NlcnZlci9jb250cm9sbGVycy9SZWNvcmRDb250cm9sbGVyLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 95 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst GenericController_1 = __webpack_require__(90);\r\nconst Exceptions_1 = __webpack_require__(78);\r\nconst RecordController_1 = __webpack_require__(94);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass SourceController extends GenericController_1.GenericController {\r\n    constructor(db) {\r\n        super(db, 'sources');\r\n    }\r\n    toSchema(data) {\r\n        return Object.assign({}, lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'metaData', 'sameAs', 'parents', 'children', 'creationTimestamp', 'lastmodifiedTimestamp'), {\r\n            same_as: data.sameAs,\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timeStamp: data.lastmodifiedTimestamp\r\n        });\r\n    }\r\n    fromSchema(data) {\r\n        return Object.assign(Object.create(falcon_core_1.Source.prototype), Object.assign(data, {\r\n            'sameAs': data.same_as\r\n        }));\r\n    }\r\n    // override the getItemJson and getCollectionJson functions to also get information about the\r\n    // metadata associated with the retrieved source\r\n    getMetadata(fields, sourceId) {\r\n        return this.db.query().raw(`\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM sources),\n                ancestor(uid) AS (\n                SELECT parent FROM parent_of WHERE uid=?\n                UNION ALL\n                SELECT parent FROM parent_of JOIN ancestor USING(uid) )\n\n            SELECT *\n                FROM ancestor;\n        `, sourceId).then((parents) => {\r\n            parents = lodash_1.map(parents, 'uid');\r\n            parents.pop();\r\n            parents = [sourceId].concat(parents);\r\n            return Promise.all(parents.map((parent) => this.db.query().select(fields)\r\n                .from('source_elements')\r\n                .innerJoin('elements', function () { this.on('source_elements.element', '=', 'elements.uid'); })\r\n                .innerJoin('element_sets', function () { this.on('element_sets.uid', '=', 'elements.element_set'); })\r\n                .where({ 'source_elements.source': parent }))).then((results) => {\r\n                const a = lodash_1.groupBy(lodash_1.flatten(results), 'label');\r\n                return Object.keys(a).reduce((prev, cur) => {\r\n                    const meta = lodash_1.omit(a[cur][0], 'source', 'value');\r\n                    meta['values'] = a[cur]\r\n                        .map((val) => ({ source: val.source, value: val.value, uid: val.uid }))\r\n                        .sort((a, b) => parents.indexOf(a.source) - parents.indexOf(b.source));\r\n                    return Object.assign(prev, { [cur]: meta });\r\n                }, {});\r\n            });\r\n        });\r\n    }\r\n    getItemJson(obj, uid) {\r\n        return super.getItemJson(obj, uid)\r\n            .then((source) => {\r\n            if (source.uid === null) {\r\n                throw new Error('could not find source');\r\n            }\r\n            return Promise.all([\r\n                this.getMetadata([\r\n                    'source_elements.source as source',\r\n                    'elements.label',\r\n                    'source_elements.value',\r\n                    'elements.description',\r\n                    'element_sets.label as element_set',\r\n                    'elements.comment',\r\n                    'elements.uri',\r\n                    'elements.uid as element_uid'\r\n                ], source.uid),\r\n                this.db.query().select('uid').from('sources').where({ parent: uid }),\r\n                this.db.query().raw(`\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM sources),\n                    ancestor(uid) AS (\n                    SELECT parent FROM parent_of WHERE uid=?\n                    UNION ALL\n                    SELECT parent FROM parent_of JOIN ancestor USING(uid) )\n\n                    SELECT uid\n                    FROM ancestor;\n                `, uid)\r\n            ])\r\n                .then(([sourceElements, children, parents]) => {\r\n                source.metaData = sourceElements;\r\n                source.children = children.map((child) => child.uid).filter((child) => child !== null);\r\n                source.parents = parents.map((parent) => parent.uid).filter((parent) => parent !== null);\r\n                return source;\r\n            });\r\n        });\r\n    }\r\n    getCollectionJson(obj, params = {}) {\r\n        return super.getCollectionJson(obj, params)\r\n            .then((sources) => {\r\n            return Promise.all(sources.map((source) => {\r\n                if (source.uid === null) {\r\n                    throw new Error('could not find source');\r\n                }\r\n                return this.getMetadata([\r\n                    'elements.label',\r\n                    'source_elements.value'\r\n                ], source.uid)\r\n                    .then((sourceElements) => {\r\n                    source.metaData = sourceElements;\r\n                    return source;\r\n                });\r\n            }));\r\n        });\r\n    }\r\n    //TODO should find every child source, not just the direct children\r\n    deleteItem(obj, uid) {\r\n        // check if this entity is the parent of another entity or if it has any relationships\r\n        // pointing towards it.\r\n        return Promise.all([\r\n            this.db.loadCollection('records', { source: uid }),\r\n            this.db.loadCollection('sources', { parent: uid })\r\n        ]).then(([records, sources]) => {\r\n            if (records.length + sources.length === 0) {\r\n                return this.db.deleteItem(this.tableName, uid);\r\n            }\r\n            else {\r\n                throw new Exceptions_1.OperationNotPermittedException({\r\n                    message: 'The operation could not be completed as the source is used by other records',\r\n                    data: Promise.resolve({\r\n                        record: records.map((record) => RecordController_1.RecordController.fromSchema(record)),\r\n                        source: sources.map((source) => this.fromSchema(source))\r\n                    })\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SourceController = SourceController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL1NvdXJjZUNvbnRyb2xsZXIudHM/NDgxNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHOztBQUlILDhDQUFpRDtBQUNqRCxvREFBd0Q7QUFFeEQsNkNBQW9FO0FBRXBFLG1EQUFzRDtBQUV0RCx5Q0FBOEQ7QUFFOUQsc0JBQThCLFNBQVEscUNBQXlCO0lBRTNELFlBQVksRUFBYTtRQUNyQixLQUFLLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFTSxRQUFRLENBQUMsSUFBWTtRQUN4QixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsYUFBSSxDQUFDLHdCQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUNqRCxVQUFVLEVBQ1YsUUFBUSxFQUNSLFNBQVMsRUFDVCxVQUFVLEVBQ1YsbUJBQW1CLEVBQ25CLHVCQUF1QixDQUMxQixFQUFFO1lBQ0MsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNO1lBQ3BCLGtCQUFrQixFQUFFLElBQUksQ0FBQyxpQkFBaUI7WUFDMUMsc0JBQXNCLEVBQUUsSUFBSSxDQUFDLHFCQUFxQjtTQUNyRCxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sVUFBVSxDQUFDLElBQVM7UUFDdkIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxvQkFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFO1lBQ3RFLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTztTQUN6QixDQUFDLENBQUMsQ0FBQztJQUNSLENBQUM7SUFFRCw2RkFBNkY7SUFDN0YsZ0RBQWdEO0lBRXhDLFdBQVcsQ0FBQyxNQUFpQixFQUFFLFFBQWdCO1FBRW5ELE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcs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QUE4QixDQUFDO29CQUNyQyxPQUFPLEVBQUUsNkVBQTZFO29CQUN0RixJQUFJLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQzt3QkFDbEIsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEtBQUssbUNBQWdCLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3dCQUNwRSxNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUMzRCxDQUFDO2lCQUNMLENBQUMsQ0FBQztZQUNQLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSjtBQXJKRCw0Q0FxSkMiLCJmaWxlIjoiOTUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgQ29udHJvbGxlciBmb3IgZWxlbWVudCBzZXRzXG4gKiBAYXV0aG9yIDxhIGhyZWY9J21haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrJz5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMC4xXG4gKi9cblxuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuLi9jb3JlL0RhdGFiYXNlJztcblxuaW1wb3J0IHsgU291cmNlLCBTZXJpYWxpemVyIH0gZnJvbSAnZmFsY29uLWNvcmUnO1xuaW1wb3J0IHsgR2VuZXJpY0NvbnRyb2xsZXIgfSBmcm9tICcuL0dlbmVyaWNDb250cm9sbGVyJztcblxuaW1wb3J0IHsgT3BlcmF0aW9uTm90UGVybWl0dGVkRXhjZXB0aW9uIH0gZnJvbSAnLi4vY29yZS9FeGNlcHRpb25zJztcblxuaW1wb3J0IHsgUmVjb3JkQ29udHJvbGxlciB9IGZyb20gJy4vUmVjb3JkQ29udHJvbGxlcic7XG5cbmltcG9ydCB7IG9taXQsIGdyb3VwQnksIGZsYXR0ZW4sIG1hcCBhcyBwbHVjayB9IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBjbGFzcyBTb3VyY2VDb250cm9sbGVyIGV4dGVuZHMgR2VuZXJpY0NvbnRyb2xsZXI8U291cmNlPiB7XG5cbiAgICBjb25zdHJ1Y3RvcihkYiA6IERhdGFiYXNlKSB7XG4gICAgICAgIHN1cGVyKGRiLCAnc291cmNlcycpO1xuICAgIH1cblxuICAgIHB1YmxpYyB0b1NjaGVtYShkYXRhOiBTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG9taXQoU2VyaWFsaXplci50b0pzb24oZGF0YSksXG4gICAgICAgICAgICAnbWV0YURhdGEnLFxuICAgICAgICAgICAgJ3NhbWVBcycsXG4gICAgICAgICAgICAncGFyZW50cycsXG4gICAgICAgICAgICAnY2hpbGRyZW4nLFxuICAgICAgICAgICAgJ2NyZWF0aW9uVGltZXN0YW1wJyxcbiAgICAgICAgICAgICdsYXN0bW9kaWZpZWRUaW1lc3RhbXAnXG4gICAgICAgICksIHtcbiAgICAgICAgICAgIHNhbWVfYXM6IGRhdGEuc2FtZUFzLFxuICAgICAgICAgICAgY3JlYXRpb25fdGltZXN0YW1wOiBkYXRhLmNyZWF0aW9uVGltZXN0YW1wLFxuICAgICAgICAgICAgbGFzdG1vZGlmaWVkX3RpbWVTdGFtcDogZGF0YS5sYXN0bW9kaWZpZWRUaW1lc3RhbXBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGZyb21TY2hlbWEoZGF0YTogYW55KSA6IFNvdXJjZSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoU291cmNlLnByb3RvdHlwZSksIE9iamVjdC5hc3NpZ24oZGF0YSwge1xuICAgICAgICAgICAgJ3NhbWVBcyc6IGRhdGEuc2FtZV9hc1xuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgLy8gb3ZlcnJpZGUgdGhlIGdldEl0ZW1Kc29uIGFuZCBnZXRDb2xsZWN0aW9uSnNvbiBmdW5jdGlvbnMgdG8gYWxzbyBnZXQgaW5mb3JtYXRpb24gYWJvdXQgdGhlXG4gICAgLy8gbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXRyaWV2ZWQgc291cmNlXG5cbiAgICBwcml2YXRlIGdldE1ldGFkYXRhKGZpZWxkcyA6IHN0cmluZ1tdLCBzb3VyY2VJZDogbnVtYmVyKSA6IFByb21pc2VMaWtlPGFueT4ge1xuXG4gICAgICAgIHJldHVybiB0aGlzLmRiLnF1ZXJ5KCkucmF3KGBcbiAgICAgICAgICAgIFdJVEggUkVDVVJTSVZFIHBhcmVudF9vZih1aWQsIHBhcmVudCkgQVMgIChTRUxFQ1QgdWlkLCBwYXJlbnQgRlJPTSBzb3VyY2VzKSxcbiAgICAgICAgICAgICAgICBhbmNlc3Rvcih1aWQpIEFTIChcbiAgICAgICAgICAgICAgICBTRUxFQ1QgcGFyZW50IEZST00gcGFyZW50X29mIFdIRVJFIHVpZD0/XG4gICAgICAgICAgICAgICAgVU5JT04gQUxMXG4gICAgICAgICAgICAgICAgU0VMRUNUIHBhcmVudCBGUk9NIHBhcmVudF9vZiBKT0lOIGFuY2VzdG9yIFVTSU5HKHVpZCkgKVxuXG4gICAgICAgICAgICBTRUxFQ1QgKlxuICAgICAgICAgICAgICAgIEZST00gYW5jZXN0b3I7XG4gICAgICAgIGAsIHNvdXJjZUlkKS50aGVuKChwYXJlbnRzKSA9PiB7XG4gICAgICAgICAgICBwYXJlbnRzID0gcGx1Y2socGFyZW50cywgJ3VpZCcpO1xuICAgICAgICAgICAgcGFyZW50cy5wb3AoKTtcbiAgICAgICAgICAgIHBhcmVudHMgPSBbc291cmNlSWRdLmNvbmNhdChwYXJlbnRzKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwYXJlbnRzLm1hcCgocGFyZW50KSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuZGIucXVlcnkoKS5zZWxlY3QoZmllbGRzKVxuICAgICAgICAgICAgICAgIC5mcm9tKCdzb3VyY2VfZWxlbWVudHMnKVxuICAgICAgICAgICAgICAgIC5pbm5lckpvaW4oJ2VsZW1lbnRzJywgZnVuY3Rpb24oKSB7IHRoaXMub24oJ3NvdXJjZV9lbGVtZW50cy5lbGVtZW50JywgJz0nLCAnZWxlbWVudHMudWlkJyk7IH0pXG4gICAgICAgICAgICAgICAgLmlubmVySm9pbignZWxlbWVudF9zZXRzJywgZnVuY3Rpb24oKSB7IHRoaXMub24oJ2VsZW1lbnRfc2V0cy51aWQnLCAnPScsICdlbGVtZW50cy5lbGVtZW50X3NldCcpOyB9KVxuICAgICAgICAgICAgICAgIC53aGVyZSh7ICdzb3VyY2VfZWxlbWVudHMuc291cmNlJzogcGFyZW50IH0pXG5cbiAgICAgICAgICAgICkpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gZ3JvdXBCeShmbGF0dGVuKHJlc3VsdHMpLCAnbGFiZWwnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYSkucmVkdWNlKChwcmV2LCBjdXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YSA9IG9taXQoYVtjdXJdWzBdLCAnc291cmNlJywgJ3ZhbHVlJyk7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFbJ3ZhbHVlcyddID0gYVtjdXJdXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKCh2YWwpID0+ICh7IHNvdXJjZTogdmFsLnNvdXJjZSwgdmFsdWU6IHZhbC52YWx1ZSwgdWlkOiB2YWwudWlkIH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHBhcmVudHMuaW5kZXhPZihhLnNvdXJjZSkgLSBwYXJlbnRzLmluZGV4T2YoYi5zb3VyY2UpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJldiwgeyBbY3VyXTogbWV0YSB9KTtcbiAgICAgICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEl0ZW1Kc29uKG9iajogeyBuZXcoKTogU291cmNlOyB9LCB1aWQ6IG51bWJlcikgOiBQcm9taXNlTGlrZTxTb3VyY2U+IHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldEl0ZW1Kc29uKG9iaiwgdWlkKVxuICAgICAgICAudGhlbigoc291cmNlKSA9PiB7XG5cbiAgICAgICAgICAgIGlmIChzb3VyY2UudWlkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgZmluZCBzb3VyY2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1ldGFkYXRhKFtcbiAgICAgICAgICAgICAgICAnc291cmNlX2VsZW1lbnRzLnNvdXJjZSBhcyBzb3VyY2UnLFxuICAgICAgICAgICAgICAgICdlbGVtZW50cy5sYWJlbCcsXG4gICAgICAgICAgICAgICAgJ3NvdXJjZV9lbGVtZW50cy52YWx1ZScsXG4gICAgICAgICAgICAgICAgJ2VsZW1lbnRzLmRlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICAgICAnZWxlbWVudF9zZXRzLmxhYmVsIGFzIGVsZW1lbnRfc2V0JyxcbiAgICAgICAgICAgICAgICAnZWxlbWVudHMuY29tbWVudCcsXG4gICAgICAgICAgICAgICAgJ2VsZW1lbnRzLnVyaScsXG4gICAgICAgICAgICAgICAgJ2VsZW1lbnRzLnVpZCBhcyBlbGVtZW50X3VpZCddLCBzb3VyY2UudWlkKSxcblxuICAgICAgICAgICAgICAgIHRoaXMuZGIucXVlcnkoKS5zZWxlY3QoJ3VpZCcpLmZyb20oJ3NvdXJjZXMnKS53aGVyZSh7IHBhcmVudDogdWlkIH0pLFxuXG4gICAgICAgICAgICAgICAgdGhpcy5kYi5xdWVyeSgpLnJhdyhgXG4gICAgICAgICAgICAgICAgICAgIFdJVEggUkVDVVJTSVZFIHBhcmVudF9vZih1aWQsIHBhcmVudCkgQVMgIChTRUxFQ1QgdWlkLCBwYXJlbnQgRlJPTSBzb3VyY2VzKSxcbiAgICAgICAgICAgICAgICAgICAgYW5jZXN0b3IodWlkKSBBUyAoXG4gICAgICAgICAgICAgICAgICAgIFNFTEVDVCBwYXJlbnQgRlJPTSBwYXJlbnRfb2YgV0hFUkUgdWlkPT9cbiAgICAgICAgICAgICAgICAgICAgVU5JT04gQUxMXG4gICAgICAgICAgICAgICAgICAgIFNFTEVDVCBwYXJlbnQgRlJPTSBwYXJlbnRfb2YgSk9JTiBhbmNlc3RvciBVU0lORyh1aWQpIClcblxuICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgdWlkXG4gICAgICAgICAgICAgICAgICAgIEZST00gYW5jZXN0b3I7XG4gICAgICAgICAgICAgICAgYCwgdWlkKVxuICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIC50aGVuKChbc291cmNlRWxlbWVudHMsIGNoaWxkcmVuLCBwYXJlbnRzXSkgPT4ge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5tZXRhRGF0YSA9IHNvdXJjZUVsZW1lbnRzO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5jaGlsZHJlbiA9IGNoaWxkcmVuLm1hcCgoY2hpbGQpID0+IGNoaWxkLnVpZCkuZmlsdGVyKChjaGlsZCkgPT4gY2hpbGQgIT09IG51bGwpO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5wYXJlbnRzID0gcGFyZW50cy5tYXAoKHBhcmVudCkgPT4gcGFyZW50LnVpZCkuZmlsdGVyKChwYXJlbnQpID0+IHBhcmVudCAhPT0gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sbGVjdGlvbkpzb24ob2JqOiB7IG5ldygpOiBTb3VyY2U7IH0sIHBhcmFtczogYW55ID0ge30pIDogUHJvbWlzZTxTb3VyY2VbXT4ge1xuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0Q29sbGVjdGlvbkpzb24ob2JqLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKChzb3VyY2VzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoc291cmNlcy5tYXAoKHNvdXJjZSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZS51aWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgZmluZCBzb3VyY2UnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YShbXG4gICAgICAgICAgICAgICAgICAgICdlbGVtZW50cy5sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICdzb3VyY2VfZWxlbWVudHMudmFsdWUnXG4gICAgICAgICAgICAgICAgXSwgc291cmNlLnVpZClcbiAgICAgICAgICAgICAgICAudGhlbigoc291cmNlRWxlbWVudHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLm1ldGFEYXRhID0gc291cmNlRWxlbWVudHM7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy9UT0RPIHNob3VsZCBmaW5kIGV2ZXJ5IGNoaWxkIHNvdXJjZSwgbm90IGp1c3QgdGhlIGRpcmVjdCBjaGlsZHJlblxuICAgIHB1YmxpYyBkZWxldGVJdGVtKG9iajogeyBuZXcoKTogU291cmNlOyB9LCB1aWQ6IG51bWJlcikgOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGVudGl0eSBpcyB0aGUgcGFyZW50IG9mIGFub3RoZXIgZW50aXR5IG9yIGlmIGl0IGhhcyBhbnkgcmVsYXRpb25zaGlwc1xuICAgICAgICAvLyBwb2ludGluZyB0b3dhcmRzIGl0LlxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGhpcy5kYi5sb2FkQ29sbGVjdGlvbigncmVjb3JkcycsIHsgc291cmNlOiB1aWR9KSxcbiAgICAgICAgICAgIHRoaXMuZGIubG9hZENvbGxlY3Rpb24oJ3NvdXJjZXMnLCB7IHBhcmVudDogdWlkfSlcbiAgICAgICAgXSkudGhlbigoW3JlY29yZHMsIHNvdXJjZXNdKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVjb3Jkcy5sZW5ndGggKyBzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRiLmRlbGV0ZUl0ZW0odGhpcy50YWJsZU5hbWUsIHVpZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPcGVyYXRpb25Ob3RQZXJtaXR0ZWRFeGNlcHRpb24oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkIGFzIHRoZSBzb3VyY2UgaXMgdXNlZCBieSBvdGhlciByZWNvcmRzJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZDogcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gUmVjb3JkQ29udHJvbGxlci5mcm9tU2NoZW1hKHJlY29yZCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzb3VyY2VzLm1hcCgoc291cmNlKSA9PiB0aGlzLmZyb21TY2hlbWEoc291cmNlKSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NlcnZlci9jb250cm9sbGVycy9Tb3VyY2VDb250cm9sbGVyLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 96 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst GenericController_1 = __webpack_require__(90);\r\nclass ElementController extends GenericController_1.GenericController {\r\n    constructor(db) {\r\n        super(db, 'elements');\r\n    }\r\n    toSchema(data) {\r\n        return falcon_core_1.Serializer.toJson(data);\r\n    }\r\n    fromSchema(data) {\r\n        return Object.assign(Object.create(falcon_core_1.Element.prototype), data);\r\n    }\r\n}\r\nexports.ElementController = ElementController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL0VsZW1lbnRDb250cm9sbGVyLnRzP2VlYmMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFJSCw4Q0FBa0Q7QUFFbEQsb0RBQXdEO0FBRXhELHVCQUErQixTQUFRLHFDQUEwQjtJQUU3RCxZQUFZLEVBQWE7UUFDckIsS0FBSyxDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRU0sUUFBUSxDQUFDLElBQWE7UUFDekIsTUFBTSxDQUFDLHdCQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFTSxVQUFVLENBQUMsSUFBUztRQUN2QixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLHFCQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDakUsQ0FBQztDQUNKO0FBYkQsOENBYUMiLCJmaWxlIjoiOTYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlT3ZlcnZpZXcgQ29udHJvbGxlciBmb3IgZWxlbWVudCBzZXRzXG4gKiBAYXV0aG9yIDxhIGhyZWY9J21haWx0bzp0aW0uaG9sbGllc0B3YXJ3aWNrLmFjLnVrJz5UaW0gSG9sbGllczwvYT5cbiAqIEB2ZXJzaW9uIDAuMC4xXG4gKi9cblxuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuLi9jb3JlL0RhdGFiYXNlJztcblxuaW1wb3J0IHsgRWxlbWVudCwgU2VyaWFsaXplciB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcblxuaW1wb3J0IHsgR2VuZXJpY0NvbnRyb2xsZXIgfSBmcm9tICcuL0dlbmVyaWNDb250cm9sbGVyJztcblxuZXhwb3J0IGNsYXNzIEVsZW1lbnRDb250cm9sbGVyIGV4dGVuZHMgR2VuZXJpY0NvbnRyb2xsZXI8RWxlbWVudD4ge1xuXG4gICAgY29uc3RydWN0b3IoZGIgOiBEYXRhYmFzZSkge1xuICAgICAgICBzdXBlcihkYiwgJ2VsZW1lbnRzJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHRvU2NoZW1hKGRhdGE6IEVsZW1lbnQpIDogYW55IHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6ZXIudG9Kc29uKGRhdGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBmcm9tU2NoZW1hKGRhdGE6IGFueSkgOiBFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShFbGVtZW50LnByb3RvdHlwZSksIGRhdGEpO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvRWxlbWVudENvbnRyb2xsZXIudHMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 97 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nconst falcon_core_1 = __webpack_require__(29);\r\nconst GenericController_1 = __webpack_require__(90);\r\nconst Exceptions_1 = __webpack_require__(78);\r\nconst lodash_1 = __webpack_require__(20);\r\nclass SourceElementController extends GenericController_1.GenericController {\r\n    constructor(db) {\r\n        super(db, 'source_elements');\r\n    }\r\n    toSchema(data) {\r\n        return Object.assign(lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'creationTimestamp', 'lastmodifiedTimestamp', 'uid', 'label'), {\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timeStamp: data.lastmodifiedTimestamp,\r\n            source: data.uid.values.source,\r\n            element: data.uid.values.element\r\n        });\r\n    }\r\n    fromSchema(data) {\r\n        return Object.assign(Object.create(falcon_core_1.SourceElement.prototype), Object.assign(data, {\r\n            uid: {\r\n                order: ['source', 'element'],\r\n                values: {\r\n                    source: data.source,\r\n                    element: data.element\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    getItemJson(obj, uid) {\r\n        return this.db.query().select()\r\n            .from(this.tableName)\r\n            .where(uid.values)\r\n            .first()\r\n            .then((result) => result === undefined ? Promise.reject(new Exceptions_1.KeyNotFoundException()) : result)\r\n            .then((data) => this.fromSchema(data));\r\n    }\r\n    putItem(obj, uid, data) {\r\n        return this.db.query()(this.tableName)\r\n            .where(uid.values)\r\n            .update(this.toSchema(data));\r\n    }\r\n    patchItem(obj, uid, data) {\r\n        const schemaData = this.toSchema(data);\r\n        const keys = Object.keys(schemaData);\r\n        const updateObject = {};\r\n        for (let i = 0; i < keys.length; i += 1) {\r\n            if (schemaData[keys[i]] !== undefined) {\r\n                updateObject[keys[i]] = schemaData[keys[i]];\r\n            }\r\n        }\r\n        return this.db.query()(this.tableName)\r\n            .where(uid.values)\r\n            .update(updateObject)\r\n            .then(() => true)\r\n            .catch((err) => { throw new Error(err); });\r\n    }\r\n    deleteItem(obj, uid) {\r\n        return this.db.query()(this.tableName)\r\n            .where(uid.values)\r\n            .del();\r\n    }\r\n}\r\nexports.SourceElementController = SourceElementController;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL1NvdXJjZUVsZW1lbnRDb250cm9sbGVyLnRzP2Y5NWMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRzs7QUFJSCw4Q0FBc0U7QUFFdEUsb0RBQXdEO0FBRXhELDZDQUEwRDtBQUUxRCx5Q0FBOEI7QUFFOUIsNkJBQXFDLFNBQVEscUNBQWdDO0lBRXpFLFlBQVksRUFBYTtRQUNyQixLQUFLLENBQUMsRUFBRSxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVPLFFBQVEsQ0FBQyxJQUFtQjtRQUNoQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFJLENBQUMsd0JBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQzdDLG1CQUFtQixFQUNuQix1QkFBdUIsRUFDdkIsS0FBSyxFQUNMLE9BQU8sQ0FDVixFQUFFO1lBQ0Msa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtZQUMxQyxzQkFBc0IsRUFBRSxJQUFJLENBQUMscUJBQXFCO1lBQ2xELE1BQU0sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNO1lBQzlCLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPO1NBQ25DLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFTSxVQUFVLENBQUMsSUFBUztRQUN2QixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLDJCQUFhLENBQUMsU0FBUyxDQUFDLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUU7WUFDekUsR0FBRyxFQUFFO2dCQUNMLEtBQUssRUFBRSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUM7Z0JBQzVCLE1BQU0sRUFBRTtvQkFDSixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07b0JBQ25CLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztpQkFDeEI7YUFDSjtTQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ1IsQ0FBQztJQUVNLFdBQVcsQ0FBQyxHQUE4QixFQUFFLEdBQWlCO1FBQ2hFLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRTthQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQzthQUNwQixLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQzthQUNqQixLQUFLLEVBQUU7YUFDUCxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssTUFBTSxLQUFLLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksaUNBQW9CLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQzthQUM1RixJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFTSxPQUFPLENBQUMsR0FBOEIsRUFBRSxHQUFpQixFQUFFLElBQW1CO1FBQ2pGLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7YUFDakMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7YUFDakIsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRU0sU0FBUyxDQUFDLEdBQThCLEVBQUUsR0FBaUIsRUFBRSxJQUFtQjtRQUNuRixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXZDLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFckMsTUFBTSxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBRXhCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDdEMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3BDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsQ0FBQztRQUNMLENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO2FBQ2pDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO2FBQ2pCLE1BQU0sQ0FBQyxZQUFZLENBQUM7YUFDcEIsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDO2FBQ2hCLEtBQUssQ0FBQyxDQUFDLEdBQUcsT0FBTyxNQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVNLFVBQVUsQ0FBQyxHQUE4QixFQUFFLEdBQWlCO1FBQy9ELE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7YUFDakMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7YUFDakIsR0FBRyxFQUFFLENBQUM7SUFDZixDQUFDO0NBQ0o7QUF4RUQsMERBd0VDIiwiZmlsZSI6Ijk3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZU92ZXJ2aWV3IENvbnRyb2xsZXIgZm9yIGVsZW1lbnQgc2V0c1xuICogQGF1dGhvciA8YSBocmVmPSdtYWlsdG86dGltLmhvbGxpZXNAd2Fyd2ljay5hYy51ayc+VGltIEhvbGxpZXM8L2E+XG4gKiBAdmVyc2lvbiAwLjAuMVxuICovXG5cbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnLi4vY29yZS9EYXRhYmFzZSc7XG5cbmltcG9ydCB7IFNvdXJjZUVsZW1lbnQsIFNlcmlhbGl6ZXIsIENvbXBvc2l0ZUtleSB9IGZyb20gJ2ZhbGNvbi1jb3JlJztcblxuaW1wb3J0IHsgR2VuZXJpY0NvbnRyb2xsZXIgfSBmcm9tICcuL0dlbmVyaWNDb250cm9sbGVyJztcblxuaW1wb3J0IHsgS2V5Tm90Rm91bmRFeGNlcHRpb24gfSBmcm9tICcuLi9jb3JlL0V4Y2VwdGlvbnMnO1xuXG5pbXBvcnQgeyBvbWl0IH0gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGNsYXNzIFNvdXJjZUVsZW1lbnRDb250cm9sbGVyIGV4dGVuZHMgR2VuZXJpY0NvbnRyb2xsZXI8U291cmNlRWxlbWVudD4ge1xuXG4gICAgY29uc3RydWN0b3IoZGIgOiBEYXRhYmFzZSkge1xuICAgICAgICBzdXBlcihkYiwgJ3NvdXJjZV9lbGVtZW50cycpO1xuICAgIH1cblxuICAgICBwdWJsaWMgdG9TY2hlbWEoZGF0YTogU291cmNlRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvbWl0KFNlcmlhbGl6ZXIudG9Kc29uKGRhdGEpLFxuICAgICAgICAgICAgJ2NyZWF0aW9uVGltZXN0YW1wJyxcbiAgICAgICAgICAgICdsYXN0bW9kaWZpZWRUaW1lc3RhbXAnLFxuICAgICAgICAgICAgJ3VpZCcsXG4gICAgICAgICAgICAnbGFiZWwnXG4gICAgICAgICksIHtcbiAgICAgICAgICAgIGNyZWF0aW9uX3RpbWVzdGFtcDogZGF0YS5jcmVhdGlvblRpbWVzdGFtcCxcbiAgICAgICAgICAgIGxhc3Rtb2RpZmllZF90aW1lU3RhbXA6IGRhdGEubGFzdG1vZGlmaWVkVGltZXN0YW1wLFxuICAgICAgICAgICAgc291cmNlOiBkYXRhLnVpZC52YWx1ZXMuc291cmNlLFxuICAgICAgICAgICAgZWxlbWVudDogZGF0YS51aWQudmFsdWVzLmVsZW1lbnRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGZyb21TY2hlbWEoZGF0YTogYW55KSA6IFNvdXJjZUVsZW1lbnQge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFNvdXJjZUVsZW1lbnQucHJvdG90eXBlKSwgT2JqZWN0LmFzc2lnbihkYXRhLCB7XG4gICAgICAgICAgICAgICAgdWlkOiB7XG4gICAgICAgICAgICAgICAgb3JkZXI6IFsnc291cmNlJywgJ2VsZW1lbnQnXSxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBkYXRhLnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZGF0YS5lbGVtZW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEl0ZW1Kc29uKG9iajogeyBuZXcoKTogU291cmNlRWxlbWVudDsgfSwgdWlkOiBDb21wb3NpdGVLZXkpIDogUHJvbWlzZUxpa2U8U291cmNlRWxlbWVudD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5xdWVyeSgpLnNlbGVjdCgpXG4gICAgICAgIC5mcm9tKHRoaXMudGFibGVOYW1lKVxuICAgICAgICAud2hlcmUodWlkLnZhbHVlcylcbiAgICAgICAgLmZpcnN0KClcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBQcm9taXNlLnJlamVjdChuZXcgS2V5Tm90Rm91bmRFeGNlcHRpb24oKSkgOiByZXN1bHQpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLmZyb21TY2hlbWEoZGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwdXRJdGVtKG9iajogeyBuZXcoKTogU291cmNlRWxlbWVudDsgfSwgdWlkOiBDb21wb3NpdGVLZXksIGRhdGE6IFNvdXJjZUVsZW1lbnQpIDogUHJvbWlzZUxpa2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLnF1ZXJ5KCkodGhpcy50YWJsZU5hbWUpXG4gICAgICAgICAgICAud2hlcmUodWlkLnZhbHVlcylcbiAgICAgICAgICAgIC51cGRhdGUodGhpcy50b1NjaGVtYShkYXRhKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHBhdGNoSXRlbShvYmo6IHsgbmV3KCk6IFNvdXJjZUVsZW1lbnQ7IH0sIHVpZDogQ29tcG9zaXRlS2V5LCBkYXRhOiBTb3VyY2VFbGVtZW50KSA6IFByb21pc2VMaWtlPGJvb2xlYW4+IHtcbiAgICAgICAgY29uc3Qgc2NoZW1hRGF0YSA9IHRoaXMudG9TY2hlbWEoZGF0YSk7XG5cbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNjaGVtYURhdGEpO1xuXG4gICAgICAgIGNvbnN0IHVwZGF0ZU9iamVjdCA9IHt9O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaWYgKHNjaGVtYURhdGFba2V5c1tpXV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZU9iamVjdFtrZXlzW2ldXSA9IHNjaGVtYURhdGFba2V5c1tpXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5kYi5xdWVyeSgpKHRoaXMudGFibGVOYW1lKVxuICAgICAgICAgICAgLndoZXJlKHVpZC52YWx1ZXMpXG4gICAgICAgICAgICAudXBkYXRlKHVwZGF0ZU9iamVjdClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4geyB0aHJvdyBuZXcgRXJyb3IoZXJyKTsgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlbGV0ZUl0ZW0ob2JqOiB7IG5ldygpOiBTb3VyY2VFbGVtZW50OyB9LCB1aWQ6IENvbXBvc2l0ZUtleSkgOiBQcm9taXNlTGlrZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIucXVlcnkoKSh0aGlzLnRhYmxlTmFtZSlcbiAgICAgICAgICAgIC53aGVyZSh1aWQudmFsdWVzKVxuICAgICAgICAgICAgLmRlbCgpO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvU291cmNlRWxlbWVudENvbnRyb2xsZXIudHMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 98 */
/***/ function(module, exports) {

	eval("module.exports = require(\"electron\");//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlbGVjdHJvblwiPzY5MjgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiOTguanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJlbGVjdHJvblwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImVsZWN0cm9uXCJcbi8vIG1vZHVsZSBpZCA9IDk4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ }
/******/ ]);