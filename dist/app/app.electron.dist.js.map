{"version":3,"sources":["webpack:///webpack/bootstrap 2abfdb755d0068deff5a","webpack:///external \"react\"","webpack:///./~/@digihum/falcon-core/dist/index.js","webpack:///external \"mobx-react\"","webpack:///external \"lodash\"","webpack:///./build/common/ApiService.js","webpack:///./build/common/components/AddTabButton.js","webpack:///./build/common/Exceptions.js","webpack:///./build/backend/controllers/GenericController.js","webpack:///./build/common/components/ComboDropdown.js","webpack:///external \"react-router\"","webpack:///./build/common/components/Overlay.js","webpack:///./build/common/components/fields/EditableFieldComponent.js","webpack:///external \"mousetrap\"","webpack:///./build/common/components/SearchBar.js","webpack:///./build/common/components/fields/EditableHeader.js","webpack:///external \"moment\"","webpack:///./build/backend/controllers/RecordController.js","webpack:///./build/common/components/fields/EditableComboDropdown.js","webpack:///./build/common/components/fields/EditableParagraph.js","webpack:///./build/common/components/fields/SameAsEditor.js","webpack:///./build/common/helper/findParentTree.js","webpack:///./build/common/helper/formatDate.js","webpack:///./build/common/itemTypes.js","webpack:///external \"graphql\"","webpack:///external \"react-sortable-hoc\"","webpack:///./build/backend/controllers/EntityController.js","webpack:///./build/backend/controllers/PredicateController.js","webpack:///./build/common/components/RecursiveTree.js","webpack:///./build/common/components/fields/PredicateDescription.js","webpack:///./build/common/literalTypes.js","webpack:///./build/common/stats/StatsGrid.js","webpack:///external \"mobx\"","webpack:///./build/backend/data/Database.js","webpack:///./build/backend/data/wrapDatabase.js","webpack:///./build/common/FalconApp.js","webpack:///external \"electron\"","webpack:///external \"react-dom\"","webpack:///./build/app/AdminApp.js","webpack:///./build/backend/QueryEngine.js","webpack:///./build/backend/ServerApiService.js","webpack:///./build/backend/controllers/ElementController.js","webpack:///./build/backend/controllers/ElementSetController.js","webpack:///./build/backend/controllers/EntityTypeController.js","webpack:///./build/backend/controllers/SourceController.js","webpack:///./build/backend/controllers/SourceElementController.js","webpack:///./build/backend/controllers/controllers.js","webpack:///./build/backend/graphql/entityQLType.js","webpack:///./build/backend/graphql/predicateQLType.js","webpack:///./build/backend/stats/GeneralStatisticsController.js","webpack:///./build/common/components/Loading.js","webpack:///./build/common/components/Sidebar.js","webpack:///./build/common/components/Toast.js","webpack:///./build/common/components/Workspace.js","webpack:///./build/common/components/entity_editor/DateFieldEditor.js","webpack:///./build/common/components/entity_editor/EntityFieldEditor.js","webpack:///./build/common/components/entity_editor/IntegerFieldEditor.js","webpack:///./build/common/components/entity_editor/RecordPredicate.js","webpack:///./build/common/components/entity_editor/RecordRow.js","webpack:///./build/common/components/entity_editor/RecordsEditor.js","webpack:///./build/common/components/entity_editor/StringFieldEditor.js","webpack:///./build/common/components/fields/DatePickerDropdown.js","webpack:///./build/common/components/fields/ScorePicker.js","webpack:///./build/common/components/modal/ConflictResolution.js","webpack:///./build/common/components/modal/CreateEntity.js","webpack:///./build/common/components/modal/CreateEntityType.js","webpack:///./build/common/components/modal/CreatePredicate.js","webpack:///./build/common/components/modal/CreatePresetRecord.js","webpack:///./build/common/components/modal/CreateRecord.js","webpack:///./build/common/components/modal/CreateSource.js","webpack:///./build/common/components/modal/CreateTabSet.js","webpack:///./build/common/components/object_list/EntityList.js","webpack:///./build/common/components/object_list/EntityTypeList.js","webpack:///./build/common/components/object_list/PredicateList.js","webpack:///./build/common/components/object_list/SourceList.js","webpack:///./build/common/components/sidebar/SearchBox.js","webpack:///./build/common/components/workspace/AdvancedSearchWorkspace.js","webpack:///./build/common/components/workspace/EmptyWorkspace.js","webpack:///./build/common/components/workspace/EntityEditorWorkspace.js","webpack:///./build/common/components/workspace/EntityTypeWorkspace.js","webpack:///./build/common/components/workspace/ObjectListWorkspace.js","webpack:///./build/common/components/workspace/PredicateEditorWorkspace.js","webpack:///./build/common/components/workspace/SourceEditorWorkspace.js","webpack:///./build/common/components/workspace/entity/EntityWorkspaceCoreView.js","webpack:///./build/common/components/workspace/entity/EntityWorkspaceReferenceView.js","webpack:///./build/common/components/workspace/workspace.js","webpack:///./build/common/stores/DataController.js","webpack:///./build/common/stores/DataStore.js","webpack:///./build/common/stores/ModalStore.js","webpack:///./build/common/views/Admin.js","webpack:///./build/common/views/AppDownload.js","webpack:///./build/common/views/DatabaseUpload.js","webpack:///./build/common/views/ObjectEditor.js","webpack:///./build/common/views/RouteNotFound.js","webpack:///./build/common/views/User.js","webpack:///./build/common/views/UserManagement.js","webpack:///./~/@digihum/falcon-core/dist/Element.js","webpack:///./~/@digihum/falcon-core/dist/ElementSet.js","webpack:///./~/@digihum/falcon-core/dist/Entity.js","webpack:///./~/@digihum/falcon-core/dist/EntityType.js","webpack:///./~/@digihum/falcon-core/dist/Predicate.js","webpack:///./~/@digihum/falcon-core/dist/Record.js","webpack:///./~/@digihum/falcon-core/dist/Serializer.js","webpack:///./~/@digihum/falcon-core/dist/Source.js","webpack:///./~/@digihum/falcon-core/dist/SourceElement.js","webpack:///external \"knex\"","webpack:///external \"levenshtein\"","webpack:///external \"lunr\"","webpack:///external \"mobx-react-devtools\"","webpack:///./build/app/app.electron.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA,kC;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;ACxBA,uC;;;;;;ACAA,mC;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,wFAAwF,gFAAgF,EAAE,EAAE;AACtN;AACA,sCAAsC,oFAAoF,gFAAgF,EAAE,EAAE;AAC9M,CAAC;AACD;AACA;AACA;AACA,wC;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,iCAAiC,0CAA0C;AAC3E;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,iCAAiC,mDAAmD;AACpF;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,iCAAiC,iDAAiD;AAClF;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,iCAAiC,2KAA2K,uIAAuI;AACnV;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,+BAA+B,EAAE;AACpE;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA,mCAAmC,mCAAmC,gCAAgC,EAAE,EAAE,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,6C;;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,YAAY;AAC/C,aAAa;AACb,qDAAqD,kCAAkC,QAAQ,QAAQ,GAAG,EAAE;AAC5G;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mDAAmD;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA,8EAA8E,gDAAgD,EAAE;AAChI,mCAAmC,sEAAsE;AACzG;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,4CAA4C,wEAAwE;AACpH;AACA,8CAA8C,kVAAkV;AAChY,gFAAgF,iFAAiF;AACjK,sEAAsE,gCAAgC,0DAA0D,gDAAgD;AAChN;AACA,8GAA8G,6CAA6C,gCAAgC,EAAE,wBAAwB,+BAA+B,EAAE,EAAE;AACxP,kDAAkD,iDAAiD;AACnG;AACA;AACA,sEAAsE,oCAAoC,4DAA4D,gCAAgC,EAAE,wBAAwB,gCAAgC,EAAE,EAAE,YAAY,EAAE;AAClR,4GAA4G,6CAA6C,gCAAgC,EAAE,wBAAwB,qDAAqD,EAAE,EAAE;AAC5Q,kDAAkD,iDAAiD;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,yC;;;;;;ACpPA,yC;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,iCAAiC;AAC7E,wCAAwC,iCAAiC;AACzE;AACA;AACA,CAAC;AACD;AACA;AACA,mC;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,0EAA0E;AACrG;AACA;AACA,2BAA2B,gCAAgC;AAC3D;AACA;AACA,2BAA2B,8CAA8C;AACzE;AACA;AACA,2BAA2B,+BAA+B;AAC1D;AACA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA;AACA,2BAA2B,+CAA+C;AAC1E;AACA;AACA;AACA,qEAAqE,eAAe,qQAAqQ,4FAA4F,EAAE,EAAE;AACzb;AACA;AACA,KAAK;AACL;AACA;AACA,kD;;;;;;AC1DA,sC;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qCAAqC;AACzE,yCAAyC,gCAAgC;AACzE,0CAA0C,kCAAkC;AAC5E,0CAA0C,6EAA6E,wDAAwD,EAAE,EAAE;AACnL;AACA,qC;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mGAAmG;AAC7I;AACA;AACA;AACA,0CAA0C,0FAA0F,uCAAuC,EAAE,EAAE;AAC/K,2CAA2C,+BAA+B;AAC1E,0CAA0C,kDAAkD;AAC5F,2CAA2C,+BAA+B;AAC1E,0CAA0C,kDAAkD;AAC5F;AACA;AACA,0C;;;;;;ACvBA,mC;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,sBAAsB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,mEAAmE,sBAAsB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,mEAAmE,sBAAsB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,4C;;;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,wBAAwB,6FAA6F,EAAE,EAAE;AACzM,2CAA2C,+BAA+B;AAC1E,0CAA0C,kDAAkD;AAC5F,2CAA2C,+BAA+B;AAC1E,0CAA0C,kDAAkD;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mGAAmG;AAC7I;AACA;AACA;AACA;AACA,iD;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,8DAA8D;AAC1G;AACA;AACA;AACA;AACA,8CAA8C,2EAA2E;AACzH;AACA;AACA;AACA,6CAA6C,4FAA4F,uCAAuC,EAAE,UAAU,+BAA+B,EAAE;AAC7N,2CAA2C,+BAA+B;AAC1E,0CAA0C,kDAAkD;AAC5F,2CAA2C,+BAA+B;AAC1E,0CAA0C,kDAAkD;AAC5F;AACA;AACA,6C;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gFAAgF,eAAe,yDAAyD,EAAE;AACjL;AACA;AACA;AACA;AACA,4DAA4D,qBAAqB,EAAE;AACnF,SAAS,eAAe,yDAAyD,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,2BAA2B;AACvE,0CAA0C,qBAAqB;AAC/D;AACA;AACA,8CAA8C,wGAAwG;AACtJ,2DAA2D,0BAA0B;AACrF,+CAA+C,oCAAoC;AACnF,8CAA8C,kDAAkD;AAChG,+CAA+C,oCAAoC;AACnF,8CAA8C,kDAAkD;AAChG,4CAA4C,qCAAqC;AACjF,kDAAkD,sHAAsH,wBAAwB,iCAAiC,EAAE,EAAE,wCAAwC;AAC7Q,iDAAiD,qFAAqF;AACtI,kDAAkD,0BAA0B;AAC5E,uCAAuC,4BAA4B,yCAAyC,oCAAoC,mBAAmB;AACnK,0CAA0C,8BAA8B;AACxE;AACA,8DAA8D,0FAA0F,YAAY,EAAE;AACtK;AACA;AACA,CAAC;AACD;AACA,wC;;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C,8CAA8C,0BAA0B,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0C;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA,qC;;;;;;AClFA,oC;;;;;;ACAA,+C;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,YAAY;AACZ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,+DAA+D,4BAA4B,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,2CAA2C,iCAAiC,EAAE,EAAE,EAAE;AAChJ;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,uBAAuB;AACtG,0DAA0D,uCAAuC,oBAAoB,WAAW,oCAAoC,GAAG,EAAE,EAAE,EAAE;AAC7K;AACA;AACA,iHAAiH,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,4C;;;;;;;AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,YAAY;AACZ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,4BAA4B,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,uCAAuC,iCAAiC,EAAE,EAAE,EAAE;AACxI;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kBAAkB,EAAE;AAClD;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,oCAAoC;AACpC;AACA,4BAA4B;AAC5B,wBAAwB;AACxB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,oCAAoC;AACpC;AACA,4BAA4B;AAC5B,wBAAwB;AACxB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,iBAAiB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,+DAA+D,EAAE;AAC5I,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,+C;;;;;;;ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,gEAAgE,8CAA8C,EAAE;AAChH;AACA;AACA;AACA,+EAA+E,qCAAqC,kBAAkB;AACtI,wCAAwC,gDAAgD,wBAAwB,oCAAoC,EAAE,EAAE,EAAE;AAC1J;AACA;AACA;AACA,kEAAkE,8CAA8C;AAChH,kEAAkE,6BAA6B;AAC/F,oDAAoD,6GAA6G,aAAa,EAAE;AAChL;AACA;AACA,CAAC;AACD;AACA,yC;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA,uBAAuB,uDAAuD;AAC9E;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,uBAAuB,qDAAqD;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,wBAAwB,iBAAiB,EAAE;AAChG;AACA,oDAAoD,wBAAwB,gBAAgB,EAAE;AAC9F,4CAA4C,8CAA8C;AAC1F,wCAAwC,sBAAsB;AAC9D,4CAA4C,sBAAsB;AAClE,kDAAkD,qBAAqB;AACvE,8EAA8E,qKAAqK;AACnP;AACA,uDAAuD,+CAA+C;AACtG,sDAAsD,kDAAkD;AACxG,uDAAuD,+CAA+C;AACtG,sDAAsD,kDAAkD;AACxG;AACA;AACA,8CAA8C,iGAAiG,wBAAwB,sBAAsB,EAAE,EAAE,EAAE;AACnM,4CAA4C,qBAAqB;AACjE,8CAA8C,6DAA6D;AAC3G,4CAA4C,qBAAqB;AACjE,kDAAkD,qBAAqB;AACvE,sEAAsE,kKAAkK;AACxO;AACA,uDAAuD,8CAA8C;AACrG,sDAAsD,kDAAkD;AACxG,uDAAuD,8CAA8C;AACrG,sDAAsD,kDAAkD;AACxG;AACA;AACA,8CAA8C,iGAAiG,wBAAwB,qBAAqB,EAAE,EAAE,EAAE;AAClM;AACA;AACA,CAAC;AACD;AACA,gD;;;;;;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,oEAAoE;AACzE,KAAK,sEAAsE;AAC3E,KAAK,+DAA+D;AACpE,QAAQ,0EAA0E;AAClF,QAAQ,4EAA4E;AACpF,KAAK;AACL;AACA,wC;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,0BAA0B;AACtE,kDAAkD,qBAAqB;AACvE,wCAAwC,sBAAsB;AAC9D,6CAA6C,yBAAyB;AACtE,6CAA6C,0BAA0B;AACvE,kDAAkD,0BAA0B;AAC5E,wCAAwC,2BAA2B;AACnE,6CAA6C,yBAAyB;AACtE,6CAA6C,0BAA0B;AACvE,kDAAkD,qBAAqB;AACvE,wCAAwC,sBAAsB;AAC9D,6CAA6C,yBAAyB;AACtE,6CAA6C,0BAA0B;AACvE,kDAAkD,wBAAwB;AAC1E,wCAAwC,yBAAyB;AACjE,6CAA6C,yBAAyB;AACtE,6CAA6C,0BAA0B;AACvE,oCAAoC,sBAAsB;AAC1D,yCAAyC,yBAAyB;AAClE,yCAAyC,0BAA0B;AACnE;AACA,qC;;;;;;AC9BA,iC;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,eAAe;AAChD;AACA;AACA;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA,6CAA6C,gGAAgG,EAAE;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,8CAA8C,kGAAkG,EAAE;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,uBAAuB,EAAE,oBAAoB,cAAc,EAAE;AAC5G,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0BAA0B,EAAE,oBAAoB,iBAAiB,EAAE;AAClH,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,oC;;;;;;;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wC;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,YAAY;AACZ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,6BAA6B;AACjG,2DAA2D,wBAAwB,EAAE;AACrF;AACA;AACA,+DAA+D,6BAA6B;AAC5F,2DAA2D,wBAAwB,EAAE;AACrF;AACA;AACA,uCAAuC,4CAA4C;AACnF;AACA;AACA;AACA;AACA,4CAA4C,eAAe;AAC3D,yBAAyB;AACzB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,4CAA4C,qCAAqC;AACjF,8DAA8D,8BAA8B,4DAA4D;AACxJ,4CAA4C,iCAAiC,0BAA0B,EAAE;AACzG,gDAAgD,sBAAsB;AACtE,kEAAkE,kCAAkC;AACpG,wDAAwD,oBAAoB;AAC5E,kEAAkE,oCAAoC;AACtG,kEAAkE,8FAA8F;AAChK,kEAAkE,8FAA8F;AAChK,kEAAkE,oGAAoG;AACtK,kEAAkE,wGAAwG;AAC1K,4FAA4F,4BAA4B;AACxH,sEAAsE,wCAAwC;AAC9G,6DAA6D,4BAA4B;AACzF,sDAAsD,4CAA4C;AAClG,sDAAsD,sCAAsC;AAC5F,0DAA0D,mCAAmC;AAC7F,uGAAuG,6DAA6D,uDAAuD,eAAe,yDAAyD,IAAI,EAAE,EAAE,iDAAiD,6DAA6D,6DAA6D,eAAe,2BAA2B,IAAI,EAAE,EAAE;AACxgB,+DAA+D,0DAA0D;AACzH,+DAA+D,+EAA+E;AAC9I,+DAA+D,uEAAuE;AACtI,+DAA+D,gFAAgF;AAC/I,+DAA+D,mEAAmE,oEAAoE,uBAAuB,eAAe,sBAAsB,IAAI,EAAE,EAAE;AAC1Q,+DAA+D,6DAA6D,oEAAoE,uBAAuB,eAAe,oGAAoG,IAAI,EAAE,EAAE;AAClV,8DAA8D,2CAA2C;AACzG;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;AC1IA,qC;;;;;;ACAA,sC;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qCAAqC,oBAAoB;AAC9F;AACA;AACA,4EAA4E,qBAAqB,aAAa;AAC9G,oC;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,6DAA6D,WAAW;AACxE;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,uC;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,4C;;;;;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,6C;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gCAAgC;AACxD;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,gD;;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,YAAY;AACZ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,cAAc;AAC9E;AACA;AACA;AACA;AACA,iEAAiE,kBAAkB,EAAE;AACrF;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,mEAAmE,EAAE;AAC5J,4EAA4E,+DAA+D,EAAE;AAC7I,oFAAoF,wEAAwE,EAAE;AAC9J,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,gD;;;;;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,YAAY;AACZ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,4BAA4B,EAAE;AAC7F;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,yDAAyD,EAAE;AACnH,4DAA4D,0DAA0D,EAAE;AACxH,4BAA4B,mCAAmC;AAC/D,aAAa;AACb;AACA;AACA;AACA;AACA,6CAA6C,UAAU,qDAAqD,EAAE,EAAE;AAChH,+CAA+C,8DAA8D,EAAE;AAC/G,uDAAuD;AACvD;AACA,iBAAiB,IAAI;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,cAAc;AACpF;AACA;AACA;AACA;AACA;AACA,iEAAiE,kBAAkB,EAAE,2BAA2B,uBAAuB,EAAE;AACzI;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,cAAc;AAC7E,+DAA+D,cAAc;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,+DAA+D,EAAE;AAC5I,2EAA2E,iCAAiC,EAAE;AAC9G,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,4C;;;;;;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,gGAAgG,EAAE;AACvI,mCAAmC,+BAA+B,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,aAAa,EAAE;AAC9C,mCAAmC,sBAAsB,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,mD;;;;;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uC;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,6DAA6D,mBAAmB,gCAAgC,mBAAmB,EAAE;AACrI;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,gCAAgC;AAC3D,0BAA0B;AAC1B,iBAAiB;AACjB;AACA;AACA;AACA,+DAA+D,aAAa,qCAAqC,UAAU,uCAAuC,EAAE,EAAE;AACtK;AACA;AACA,+DAA+D,WAAW,qCAAqC,UAAU,uCAAuC,EAAE,EAAE;AACpK;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,4BAA4B,2DAA2D;AACvF,2BAA2B;AAC3B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,yDAAyD,6CAA6C,UAAU,uCAAuC,EAAE,EAAE,EAAE,EAAE;AAC/J;AACA;AACA;AACA;AACA,yDAAyD,6CAA6C,UAAU,uCAAuC,EAAE,EAAE,EAAE,EAAE;AAC/J;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wC;;;;;;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+CAA+C;AAC/E,kDAAkD,uCAAuC,4BAA4B,EAAE,EAAE,EAAE;AAC3H;AACA;AACA;AACA,KAAK;AACL;AACA,2C;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,uD;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,8BAA8B;AACtE,oCAAoC,sBAAsB;AAC1D;AACA,mC;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,qCAAqC,+BAA+B;AACvI,gCAAgC,sCAAsC;AACtE,6EAA6E,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,oCAAoC,sBAAsB;AAClJ,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,qBAAqB;AAC9B,qCAAqC,iDAAiD;AACtF,oCAAoC,2BAA2B;AAC/D,sDAAsD,gBAAgB;AACtE,6CAA6C,2BAA2B;AACxE,+JAA+J,oCAAoC,sCAAsC;AACzO;AACA;AACA;AACA;AACA,+DAA+D,gDAAgD;AAC/G;AACA;AACA;AACA,yBAAyB,cAAc,EAAE,oCAAoC,2BAA2B;AACxG,qCAAqC,2BAA2B;AAChE,uCAAuC,uBAAuB,6CAA6C,EAAE,2BAA2B;AACxI,uCAAuC,uBAAuB,sDAAsD,EAAE,6BAA6B;AACnJ,0DAA0D,4BAA4B;AACtF,sCAAsC,kDAAkD,yEAAyE,EAAE,EAAE,cAAc,EAAE;AACrL;AACA,uCAAuC,yBAAyB;AAChE;AACA;AACA,mCAAmC,4BAA4B,EAAE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,mOAAmO;AAC9Q,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gBAAgB;AAChE,wDAAwD,yEAAyE;AACjI,wCAAwC,+BAA+B;AACvE,+CAA+C,uBAAuB,6CAA6C,EAAE,EAAE;AACvH,8CAA8C,2BAA2B;AACzE;AACA,+CAA+C,uBAAuB,yCAAyC,mFAAmF,EAAE,EAAE,EAAE,EAAE;AAC1M,8CAA8C,8BAA8B;AAC5E;AACA,+CAA+C,uBAAuB,wBAAwB,wCAAwC,EAAE,EAAE,EAAE;AAC5I,8CAA8C,8BAA8B;AAC5E;AACA,wCAAwC,mCAAmC;AAC3E,+CAA+C,8IAA8I;AAC7L;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,mC;;;;;;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD,kCAAkC,iBAAiB;AACnD;AACA;AACA,+CAA+C,2EAA2E;AAC1H;AACA,SAAS;AACT;AACA;AACA,oEAAoE,wBAAwB,EAAE;AAC9F,aAAa;AACb,SAAS;AACT;AACA;AACA,6FAA6F,qCAAqC,mCAAmC,6BAA6B,qCAAqC;AACvO,wCAAwC,qBAAqB;AAC7D,wCAAwC,uBAAuB,mBAAmB,EAAE;AACpF;AACA;AACA,CAAC;AACD;AACA,iC;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,mEAAmE;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,iDAAiD;AAC7F,wCAAwC,iDAAiD,2CAA2C,oBAAoB;AACxJ;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,6BAA6B;AACrE,sEAAsE,+CAA+C;AACrH;AACA,2C;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,oEAAoE;AACrF,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,0BAA0B;AAC1B;AACA,sEAAsE,8GAA8G,8FAA8F,EAAE,iCAAiC;AACrT;AACA,6C;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,uCAAuC;AACzF,0CAA0C,0EAA0E;AACpH;AACA,8C;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,mCAAmC;AACtI,kDAAkD,wBAAwB,mCAAmC,EAAE,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,8BAA8B;AACrE;AACA;AACA,0CAA0C,yKAAyK;AACnN,kEAAkE,sDAAsD;AACxH,0CAA0C,oCAAoC;AAC9E;AACA,+CAA+C,gCAAgC;AAC/E,mDAAmD,mCAAmC;AACtF,8FAA8F,+BAA+B;AAC7H,mDAAmD,+BAA+B;AAClF,mDAAmD,qCAAqC;AACxF,mDAAmD,qCAAqC;AACxF,mDAAmD,uCAAuC;AAC1F,6FAA6F,4DAA4D,oMAAoM,GAAG,EAAE;AAClW;AACA;AACA,CAAC;AACD;AACA,2C;;;;;;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,wDAAwD,8CAA8C,eAAe,GAAG,EAAE,EAAE;AAC5M;AACA,4EAA4E,wDAAwD,8CAA8C,eAAe,GAAG,EAAE,EAAE;AACxM;AACA,kFAAkF,wDAAwD,8CAA8C,eAAe,GAAG,EAAE,EAAE;AAC9M;AACA,gFAAgF,wFAAwF,8CAA8C,eAAe,GAAG,EAAE,4BAA4B;AACtQ;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,mCAAmC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,qCAAqC;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iCAAiC,uBAAuB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,0CAA0C,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,0BAA0B;AACrE,uCAAuC,mCAAmC;AAC1E,6EAA6E,+BAA+B;AAC5G,uCAAuC,+BAA+B;AACtE,0EAA0E;AAC1E,iCAAiC,oEAAoE;AACrG,qBAAqB,yEAAyE,mDAAmD,+CAA+C,GAAG,EAAE,+BAA+B,4BAA4B,EAAE,EAAE;AACpQ,uCAAuC,qCAAqC;AAC5E,gEAAgE,wEAAwE,mDAAmD,eAAe,GAAG,EAAE,EAAE;AACjN,uCAAuC,sCAAsC;AAC7E,wEAAwE,+DAA+D,mDAAmD,iBAAiB,GAAG,EAAE,EAAE;AAClN,uCAAuC,uCAAuC;AAC9E,+CAA+C,+BAA+B;AAC9E,8CAA8C,kDAAkD;AAChG,+CAA+C,+BAA+B;AAC9E,8CAA8C,kDAAkD;AAChG;AACA;AACA,2CAA2C,0BAA0B;AACrE,uCAAuC,mCAAmC;AAC1E;AACA;AACA,6EAA6E,+BAA+B;AAC5G,uCAAuC,+BAA+B;AACtE;AACA,kIAAkI,8CAA8C;AAChL,uCAAuC,qCAAqC;AAC5E,gEAAgE,2CAA2C;AAC3G,uCAAuC,sCAAsC;AAC7E,uCAAuC,uCAAuC;AAC9E,+CAA+C,yBAAyB;AACxE,8CAA8C,2EAA2E;AACzH,+CAA+C,uBAAuB,oCAAoC,EAAE,EAAE;AAC9G,8CAA8C,kDAAkD;AAChG;AACA,CAAC;AACD,qC;;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,aAAa;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iGAAiG,oCAAoC,EAAE;AACvI;AACA;AACA,2CAA2C,sDAAsD,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,yDAAyD,UAAU,+BAA+B,EAAE,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,qBAAqB;AACvE,gDAAgD,SAAS,kBAAkB,EAAE;AAC7E,oDAAoD,SAAS,YAAY,EAAE;AAC3E,wEAAwE,yBAAyB,gBAAgB,EAAE,wCAAwC,wBAAwB,yBAAyB,EAAE,EAAE,EAAE;AAClN,oDAAoD,SAAS,0CAA0C,EAAE;AACzG,sDAAsD,sIAAsI;AAC5L;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,mPAAmP;AAC3U,qBAAqB;AACrB;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,yC;;;;;;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2DAA2D,uCAAuC,EAAE,EAAE;AAChJ;AACA,6C;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,8BAA8B;AAC1E;AACA,8CAA8C,qQAAqQ;AACnT,sEAAsE,wBAAwB;AAC9F,4CAA4C,kFAAkF;AAC9H,oDAAoD,0BAA0B;AAC9E,oDAAoD,6DAA6D,oCAAoC,EAAE,EAAE;AACzJ,oDAAoD,6DAA6D,oCAAoC,EAAE,EAAE;AACzJ,oDAAoD,6DAA6D,oCAAoC,EAAE,EAAE;AACzJ,oDAAoD,2BAA2B;AAC/E,oDAAoD,iCAAiC;AACrF,0DAA0D,qBAAqB;AAC/E,0DAA0D,+EAA+E;AACzI,oDAAoD,mCAAmC;AACvF,0DAA0D,qBAAqB;AAC/E,2DAA2D,uDAAuD;AAClH,+DAA+D,cAAc;AAC7E,yEAAyE,wCAAwC,+EAA+E,UAAU,EAAE;AAC5M,oDAAoD,kCAAkC;AACtF,0DAA0D,qBAAqB;AAC/E,0DAA0D,iFAAiF;AAC3I;AACA;AACA,CAAC;AACD;AACA;AACA,8C;;;;;;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,4BAA4B,6BAA6B,mCAAmC,6FAA6F,GAAG,EAAE;AAC3O;AACA;AACA,6CAA6C,oCAAoC,+CAA+C,mCAAmC;AACnK;AACA;AACA;AACA;AACA,aAAa,yBAAyB,GAAG,EAAE;AAC3C;AACA;AACA,uC;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kDAAkD;AAC5F;AACA;AACA;AACA;AACA,8CAA8C,qBAAqB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,oCAAoC,EAAE;AAC3F;AACA,wDAAwD,0CAA0C,EAAE;AACpG,2DAA2D,2BAA2B;AACtF;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,8CAA8C,qBAAqB;AACnE;AACA;AACA;AACA;AACA,2DAA2D,2BAA2B;AACtF;AACA,qBAAqB;AACrB;AACA;AACA,8CAA8C,qBAAqB;AACnE;AACA;AACA;AACA;AACA,2DAA2D,+BAA+B;AAC1F;AACA,qBAAqB;AACrB;AACA;AACA,8CAA8C,qBAAqB;AACnE;AACA;AACA;AACA;AACA,2DAA2D,2BAA2B;AACtF;AACA,qBAAqB;AACrB,wCAAwC,6BAA6B;AACrE,+CAA+C,uBAAuB,6BAA6B,EAAE,EAAE;AACvG,+CAA+C,uBAAuB,+CAA+C,EAAE,EAAE;AACzH,8CAA8C,6BAA6B;AAC3E;AACA,+CAA+C,uBAAuB,0CAA0C,EAAE,EAAE;AACpH,8CAA8C,2BAA2B;AACzE;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8C;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG;AACzG;AACA;AACA,qEAAqE,2CAA2C,EAAE;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,iBAAiB;AACjB;AACA,4BAA4B,iCAAiC;AAC7D,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd,gCAAgC,8CAA8C,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D,0CAA0C,2DAA2D;AACrG,8BAA8B,EAAE,qEAAqE,wBAAwB,wBAAwB,EAAE,EAAE,EAAE;AAC3J,0CAA0C,qBAAqB;AAC/D,sEAAsE,sDAAsD,UAAU,6BAA6B,EAAE,EAAE,2FAA2F,wBAAwB,yBAAyB,EAAE,EAAE,kDAAkD;AACzW,2CAA2C,6CAA6C,6BAA6B,EAAE,0BAA0B;AACjJ,2CAA2C,wFAAwF;AACnI;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wC;;;;;;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D,0CAA0C,uGAAuG,wBAAwB,gCAAgC,EAAE,EAAE,EAAE;AAC/M,2CAA2C,uBAAuB,6BAA6B,EAAE,0BAA0B;AAC3H,2CAA2C,qEAAqE;AAChH;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4C;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uBAAuB;AAC5C,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gCAAgC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,uCAAuC;AACpE;AACA,yBAAyB;AACzB;AACA,wHAAwH,+BAA+B,EAAE;AACzJ,gCAAgC;AAChC,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT,6DAA6D,UAAU,qBAAqB,+CAA+C,EAAE,EAAE,EAAE;AACjJ,8EAA8E,UAAU,yBAAyB,uCAAuC,EAAE,EAAE,EAAE;AAC9J;AACA,2BAA2B,+BAA+B;AAC1D;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,+GAA+G;AAC/G;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,0CAA0C,iDAAiD;AAC3F;AACA,0CAA0C,qBAAqB;AAC/D,0CAA0C;AAC1C;AACA;AACA;AACA,iBAAiB,mDAAmD,wBAAwB,wBAAwB,EAAE,EAAE,EAAE;AAC1H,8EAA8E,kFAAkF,wBAAwB,YAAY,EAAE,EAAE,8BAA8B,wBAAwB,WAAW,EAAE,EAAE,mGAAmG;AAChX,wCAAwC,6BAA6B;AACrE,+CAA+C,qDAAqD;AACpG,+CAA+C,2DAA2D;AAC1G;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2C;;;;;;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,sCAAsC,EAAE;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8C;;;;;;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sDAAsD;AAC3F,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd,qCAAqC,qCAAqC,EAAE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,wOAAwO,wBAAwB,iBAAiB,EAAE,EAAE,EAAE;AAChV;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wC;;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yCAAyC;AAChE;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D,0CAA0C,uGAAuG,wBAAwB,gCAAgC,EAAE,EAAE,EAAE;AAC/M,2CAA2C,uBAAuB,6BAA6B,EAAE,0BAA0B;AAC3H,2CAA2C,iEAAiE;AAC5G;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wC;;;;;;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA,SAAS,oBAAoB,iCAAiC,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D,0CAA0C,uGAAuG,wBAAwB,gCAAgC,EAAE,EAAE,EAAE;AAC/M,2CAA2C,uBAAuB,6BAA6B,EAAE,0BAA0B;AAC3H,2CAA2C,iEAAiE;AAC5G;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wC;;;;;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,4DAA4D,0CAA0C,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA,2CAA2C,mBAAmB;AAC9D,wCAAwC,iCAAiC;AACzE,4CAA4C,6BAA6B;AACzE,8EAA8E,wFAAwF,yEAAyE,EAAE,2CAA2C,UAAU,8CAA8C,EAAE,EAAE,kEAAkE;AAC1Z,4CAA4C,6BAA6B;AACzE,8CAA8C,+DAA+D,uBAAuB,EAAE,EAAE;AACxI,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uFAAuF;AACxG,iBAAiB,uFAAuF;AACxG,iBAAiB;AACjB;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iCAAiC,uBAAuB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa,uDAAuD,kFAAkF,yBAAyB,EAAE,QAAQ,EAAE,EAAE;AAC7L,aAAa,kDAAkD,aAAa,EAAE,EAAE;AAChF,aAAa,wDAAwD,aAAa,EAAE,EAAE;AACtF,aAAa,yDAAyD,aAAa,EAAE,EAAE;AACvF,aAAa,0DAA0D,aAAa,EAAE;AACtF;AACA,uBAAuB,OAAO;AAC9B,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,UAAU,+CAA+C,EAAE,EAAE;AACpI;AACA,4DAA4D,oCAAoC,EAAE;AAClG,4FAA4F,kCAAkC,EAAE;AAChI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0CAA0C,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,kCAAkC,EAAE;AACxJ;AACA;AACA;AACA;AACA;AACA,oHAAoH,kCAAkC,EAAE;AACxJ;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT,4CAA4C,gCAAgC;AAC5E,2CAA2C,oCAAoC;AAC/E,4CAA4C,+BAA+B;AAC3E,gDAAgD,4BAA4B;AAC5E;AACA;AACA,sDAAsD,6HAA6H;AACnL,gDAAgD,2BAA2B;AAC3E,kDAAkD,+FAA+F;AACjJ,4CAA4C,iCAAiC;AAC7E,gDAAgD,uBAAuB;AACvE,oDAAoD,+BAA+B;AACnF,4CAA4C,2BAA2B;AACvE,8CAA8C,qBAAqB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,0GAA0G,wBAAwB,yBAAyB,EAAE,EAAE,6FAA6F;AACtV,uEAAuE,oCAAoC,mBAAmB;AAC9H,4DAA4D,yBAAyB;AACrF;AACA,uEAAuE,qEAAqE,0DAA0D,EAAE,EAAE;AAC1M,2EAA2E,eAAe;AAC1F,2EAA2E,kBAAkB;AAC7F,2EAA2E,oBAAoB;AAC/F,2EAA2E,mBAAmB;AAC9F;AACA,sEAAsE,0GAA0G,0DAA0D,EAAE,0BAA0B,MAAM,EAAE;AAC9Q,qFAAqF,oCAAoC,2BAA2B;AACpJ;AACA;AACA;AACA;AACA,8EAA8E,kCAAkC;AAChH;AACA,qDAAqD,oCAAoC,uBAAuB,oBAAoB,EAAE,IAAI,EAAE;AAC5I;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACpRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,qCAAqC,aAAa,EAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iCAAiC,uBAAuB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gCAAgC;AAC5E,2CAA2C,yCAAyC;AACpF,4CAA4C,+BAA+B;AAC3E,gDAAgD,4BAA4B;AAC5E;AACA;AACA,sDAAsD,kIAAkI;AACxL,4CAA4C,iCAAiC;AAC7E,gDAAgD,uBAAuB;AACvE,oDAAoD,mGAAmG,wBAAwB,eAAe,EAAE,EAAE,EAAE;AACpM,oDAAoD,mGAAmG,wBAAwB,eAAe,EAAE,EAAE,EAAE;AACpM,4CAA4C,2BAA2B;AACvE,4DAA4D,yBAAyB,gBAAgB,EAAE,+BAA+B,wBAAwB,gBAAgB,EAAE,EAAE,EAAE;AACpL,4EAA4E,yBAAyB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,sCAAsC;AACjG;AACA;AACA;AACA,kFAAkF,8CAA8C;AAChI;AACA;AACA;AACA,qBAAqB,oCAAoC,yBAAyB;AAClF,8DAA8D,sIAAsI;AACpM;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,0C;;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,aAAa;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iCAAiC,uBAAuB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gCAAgC;AAC5E,2CAA2C,uCAAuC;AAClF,4CAA4C,+BAA+B;AAC3E,gDAAgD,4BAA4B;AAC5E;AACA;AACA,sDAAsD,+HAA+H;AACrL,4CAA4C,iCAAiC;AAC7E,gDAAgD,uBAAuB;AACvE,oDAAoD,kCAAkC;AACtF,4CAA4C,2BAA2B;AACvE,4DAA4D,yBAAyB,gBAAgB,EAAE,+BAA+B,wBAAwB,gBAAgB,EAAE,EAAE,EAAE;AACpL,8CAA8C,yBAAyB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kHAAkH,mCAAmC,EAAE;AACvJ;AACA,qGAAqG,kCAAkC,EAAE;AACzI;AACA;AACA;AACA;AACA,2DAA2D,oCAAoC;AAC/F;AACA;AACA;AACA,kFAAkF,2CAA2C;AAC7H;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,yC;;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,qCAAqC,aAAa,EAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iCAAiC,uBAAuB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gCAAgC;AAC5E,2CAA2C,oCAAoC;AAC/E,4CAA4C,+BAA+B;AAC3E,gDAAgD,4BAA4B;AAC5E;AACA;AACA,sDAAsD,6HAA6H;AACnL,4CAA4C,iCAAiC;AAC7E,gDAAgD,uBAAuB;AACvE,oDAAoD,8FAA8F,wBAAwB,eAAe,EAAE,EAAE,EAAE;AAC/L,oDAAoD,8FAA8F,wBAAwB,eAAe,EAAE,EAAE,EAAE;AAC/L,4CAA4C,2BAA2B;AACvE,4DAA4D,yBAAyB,gBAAgB,EAAE,+BAA+B,wBAAwB,gBAAgB,EAAE,EAAE,EAAE;AACpL,4EAA4E,yBAAyB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,8BAA8B;AACzF;AACA;AACA;AACA,kFAAkF,qCAAqC;AACvH;AACA;AACA,qBAAqB,oCAAoC,yBAAyB;AAClF,8DAA8D,4HAA4H;AAC1L;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2EAA2E;AAC5F,KAAK;AACL;AACA,iBAAiB,wFAAwF;AACzG,KAAK;AACL;AACA,iBAAiB,oFAAoF;AACrG,KAAK;AACL;AACA,iBAAiB,2EAA2E;AAC5F,KAAK;AACL;AACA;AACA,oCAAoC,qCAAqC;AACzE,yCAAyC,gCAAgC;AACzE,0CAA0C,kCAAkC;AAC5E,sEAAsE,SAAS,uBAAuB;AACtG;AACA;AACA;AACA,iBAAiB,+EAA+E,EAAE,EAAE;AACpG;AACA,kCAAkC;AAClC,qC;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,qCAAqC,gCAAgC;AACzH,yDAAyD;AACzD,mD;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qCAAqC,gCAAgC;AAC3G,+DAA+D;AAC/D,0C;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,EAAE;AAC/C;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,8EAA8E,oGAAoG,EAAE;AACpL;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA,iGAAiG,oCAAoC,EAAE;AACvI;AACA;AACA,2CAA2C,sDAAsD,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,yDAAyD,UAAU,+BAA+B,EAAE,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI,uBAAuB;AACpC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,kCAAkC,EAAE;AAClG;AACA;AACA;AACA;AACA,4CAA4C,gCAAgC;AAC5E,2CAA2C,oCAAoC;AAC/E,4CAA4C,+BAA+B;AAC3E,gDAAgD,4BAA4B;AAC5E,kDAAkD,oCAAoC;AACtF,2EAA2E,kDAAkD,sBAAsB,iBAAiB,EAAE,EAAE,EAAE;AAC1K,gDAAgD,2BAA2B;AAC3E,kDAAkD,8FAA8F;AAChJ,kDAAkD,yFAAyF;AAC3I,4CAA4C,iCAAiC;AAC7E,gDAAgD,uBAAuB;AACvE,oDAAoD,wFAAwF,wBAAwB,SAAS,EAAE,EAAE,EAAE;AACnL,oDAAoD,wFAAwF,wBAAwB,SAAS,EAAE,EAAE,EAAE;AACnL,4GAA4G,qDAAqD,wFAAwF,qDAAqD;AAC9S;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iD;;;;;;;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,wBAAwB,6BAA6B,qBAAqB,EAAE,EAAE;AAC7G;AACA;AACA;AACA;AACA,wGAAwG,gDAAgD,uCAAuC;AAC/L,mHAAmH;AACnH;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,+BAA+B,4DAA4D,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,EAAE;AAC/C;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iCAAiC,uBAAuB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,sCAAsC,EAAE;AACtG;AACA;AACA;AACA;AACA,0EAA0E,UAAU,iCAAiC,EAAE,EAAE;AACzH,4CAA4C,gCAAgC;AAC5E,2CAA2C,yCAAyC;AACpF,4CAA4C,+BAA+B;AAC3E,gDAAgD,4BAA4B;AAC5E,oDAAoD,4BAA4B;AAChF,4HAA4H,yBAAyB,EAAE;AACvJ,iEAAiE,8BAA8B;AAC/F;AACA;AACA;AACA;AACA,sFAAsF,sCAAsC;AAC5H;AACA,0DAA0D,iCAAiC;AAC3F,yBAAyB;AACzB,kDAAkD,mCAAmC;AACrF,2EAA2E,sDAAsD,sBAAsB,iBAAiB,EAAE,EAAE,EAAE;AAC9K,gDAAgD,2BAA2B;AAC3E,kDAAkD,mGAAmG;AACrJ,kDAAkD,8FAA8F;AAChJ,kDAAkD,wFAAwF;AAC1I,4CAA4C,iCAAiC;AAC7E,gDAAgD,uBAAuB;AACvE,oDAAoD,oCAAoC;AACxF,4CAA4C,2BAA2B;AACvE,4CAA4C,0BAA0B;AACtE,kDAAkD,qBAAqB;AACvE,sEAAsE,sCAAsC,uBAAuB,IAAI,4CAA4C,8BAA8B,sBAAsB,gDAAgD,EAAE,EAAE;AAC3R;AACA;AACA,yBAAyB,EAAE;AAC3B,oGAAoG,iDAAiD;AACrJ,4CAA4C,0BAA0B;AACtE,kDAAkD,qBAAqB;AACvE,0EAA0E,4DAA4D,sBAAsB,uBAAuB,EAAE,EAAE,EAAE;AACzL,4CAA4C,0BAA0B;AACtE,uEAAuE,uDAAuD,sBAAsB,kBAAkB,EAAE,EAAE,EAAE;AAC5K;AACA;AACA;AACA,+CAA+C,kFAAkF,yBAAyB,EAAE,EAAE,EAAE;AAChK;AACA;AACA;AACA;AACA;AACA,2DAA2D,6BAA6B;AACxF;AACA;AACA,8EAA8E,2CAA2C;AACzH,qBAAqB;AACrB;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+C;;;;;;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,qCAAqC,4CAA4C;AACjI;AACA;AACA,kEAAkE,qBAAqB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,MAAM;AACP,+C;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,iCAAiC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uHAAuH;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,+CAA+C,sCAAsC;AAC3L,+GAA+G;AAC/G;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,+BAA+B,4DAA4D,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,EAAE;AAC/C;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,8EAA8E,oGAAoG,EAAE;AACpL;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qEAAqE,kCAAkC,EAAE;AACzG;AACA;AACA;AACA;AACA,sBAAsB;AACtB,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA,wEAAwE,kCAAkC,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA,6EAA6E,oCAAoC,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT,+EAA+E,UAAU,uBAAuB,qCAAqC,EAAE,EAAE,EAAE;AAC3J,iEAAiE,UAAU,qBAAqB,+CAA+C,EAAE,EAAE,EAAE;AACrJ,4CAA4C,gCAAgC;AAC5E,2CAA2C,uCAAuC;AAClF,4CAA4C,+BAA+B;AAC3E,gDAAgD,4BAA4B;AAC5E,kDAAkD,gDAAgD;AAClG,2EAA2E,qDAAqD,8CAA8C,EAAE,EAAE;AAClL,gDAAgD,2BAA2B;AAC3E,kDAAkD,8FAA8F;AAChJ,kDAAkD,wFAAwF;AAC1I,4CAA4C,iCAAiC;AAC7E,gDAAgD,uBAAuB;AACvE,oDAAoD,kCAAkC;AACtF,oDAAoD,SAAS,kBAAkB,0BAA0B;AACzG,4CAA4C,2BAA2B;AACvE;AACA,8DAA8D,8DAA8D;AAC5H;AACA;AACA,4CAA4C,0BAA0B;AACtE,kDAAkD,qBAAqB;AACvE,0EAA0E,2DAA2D,oDAAoD,EAAE,EAAE;AAC7L,4CAA4C,0BAA0B;AACtE,kDAAkD,qBAAqB;AACvE,sFAAsF,gEAAgE,qDAAqD,EAAE,kCAAkC,mFAAmF,EAAE,iHAAiH;AACrb;AACA,uEAAuE,sDAAsD,+CAA+C,EAAE,EAAE;AAChL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oD;;;;;;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,oCAAoC,EAAE;AAC9G;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA,+BAA+B,4DAA4D,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,EAAE;AAC/C;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,8EAA8E,oGAAoG,EAAE;AACpL;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8GAA8G,4CAA4C,2DAA2D;AACrN,sGAAsG;AACtG;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iCAAiC,EAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,kCAAkC,EAAE;AAClG;AACA;AACA;AACA;AACA,4CAA4C,gCAAgC;AAC5E,2CAA2C,oCAAoC;AAC/E,4CAA4C,+BAA+B;AAC3E,gDAAgD,4BAA4B;AAC5E,oDAAoD,4BAA4B;AAChF;AACA;AACA,mDAAmD,6EAA6E,yBAAyB,EAAE,EAAE,EAAE;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,kCAAkC;AACnG;AACA;AACA;AACA;AACA,sFAAsF,qCAAqC;AAC3H;AACA,0DAA0D,iCAAiC;AAC3F,yBAAyB;AACzB,kDAAkD,qCAAqC;AACvF,8EAA8E,kDAAkD,2CAA2C,EAAE,EAAE;AAC/K,gDAAgD,2BAA2B;AAC3E,kDAAkD,mGAAmG;AACrJ,kDAAkD,sFAAsF,oBAAoB,EAAE,EAAE;AAChK,kDAAkD,6GAA6G;AAC/J,4CAA4C,iCAAiC;AAC7E,gDAAgD,uBAAuB;AACvE,oDAAoD,+BAA+B;AACnF,oDAAoD,8BAA8B,kBAAkB,EAAE;AACtG,oDAAoD,8BAA8B,kBAAkB,EAAE;AACtG,4CAA4C,2BAA2B;AACvE,4CAA4C,0BAA0B;AACtE,kDAAkD,qBAAqB;AACvE,sEAAsE,SAAS,wCAAwC,8BAA8B,0EAA0E,EAAE;AACjO,0EAA0E,UAAU,iCAAiC,EAAE,EAAE;AACzH;AACA,yBAAyB,EAAE;AAC3B,gGAAgG,wCAAwC;AACxI,4CAA4C,0BAA0B;AACtE,uEAAuE,mDAAmD,4CAA4C,EAAE,EAAE;AAC1K;AACA;AACA,kEAAkE,oCAAoC;AACtG;AACA,wDAAwD,+BAA+B;AACvF,mDAAmD,8BAA8B;AACjF;AACA;AACA;AACA,0DAA0D,oBAAoB;AAC9E,kDAAkD,mCAAmC;AACrF,qFAAqF,qEAAqE,wCAAwC;AAClM,gGAAgG,+BAA+B,EAAE;AACjI;AACA,iDAAiD,EAAE;AACnD,8EAA8E,mDAAmD,kDAAkD,EAAE,EAAE;AACvL,iBAAiB;AACjB;AACA;AACA;AACA,+CAA+C,6EAA6E,yBAAyB,EAAE,EAAE,EAAE;AAC3J;AACA,2DAA2D,2BAA2B;AACtF;AACA;AACA,8EAA8E,sCAAsC;AACpH,qBAAqB;AACrB;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iD;;;;;;;ACjQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,2BAA2B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG,oCAAoC,EAAE;AACvI;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sDAAsD,EAAE;AACnG;AACA;AACA,sDAAsD,UAAU,+CAA+C,EAAE,EAAE;AACnH;AACA;AACA,8DAA8D,kCAAkC,EAAE;AAClG;AACA;AACA;AACA;AACA,gDAAgD,2BAA2B;AAC3E,wCAAwC,yBAAyB;AACjE,4CAA4C,yBAAyB;AACrE;AACA,sDAAsD,qBAAqB;AAC3E;AACA;AACA,0EAA0E,8CAA8C;AACxH,4CAA4C,SAAS,UAAU,EAAE;AACjE,kDAAkD,qBAAqB;AACvE,sEAAsE,SAAS,wCAAwC,8BAA8B,sBAAsB,gDAAgD,EAAE,EAAE;AAC/N,0EAA0E,UAAU,iCAAiC,EAAE,EAAE;AACzH;AACA,yBAAyB,EAAE;AAC3B,gGAAgG,wCAAwC;AACxI,wCAAwC,0BAA0B;AAClE,oEAAoE,0GAA0G,EAAE,0EAA0E;AAC1P;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,mD;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,yBAAyB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2BAA2B;AAC3E;AACA,0CAA0C,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA,uDAAuD,8BAA8B;AACrF;AACA,qGAAqG,qCAAqC,EAAE;AAC5I;AACA,8EAA8E,wCAAwC;AACtH;AACA,2GAA2G,2CAA2C,EAAE;AACxJ;AACA,8EAA8E,8CAA8C;AAC5H,iBAAiB;AACjB;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wD;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,YAAY;AACZ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,oDAAoD,EAAE;AAC/G,+CAA+C,iDAAiD;AAChG;AACA;AACA;AACA;AACA,6GAA6G,wBAAwB,EAAE;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2GAA2G,kBAAkB;AAC7H,2GAA2G,8CAA8C;AACzJ;AACA;AACA,yCAAyC,uEAAuE;AAChH,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0HAA0H,kBAAkB;AAC5I;AACA;AACA,yCAAyC,iDAAiD;AAC1F,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,oEAAoE,EAAE;AACnI;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2BAA2B,qCAAqC;AAC1G;AACA,yBAAyB;AACzB;AACA,4EAA4E,qBAAqB,EAAE;AACnG;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,sCAAsC,+CAA+C;AACrF;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,sGAAsG;AACtG,gGAAgG;AAChG,gGAAgG;AAChG,yGAAyG;AACzG;AACA;AACA;AACA;AACA;AACA,oCAAoC,0CAA0C;AAC9E,iCAAiC,uCAAuC;AACxE,iCAAiC,wCAAwC;AACzE,sCAAsC,0CAA0C;AAChF,qCAAqC;AACrC;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+G,mBAAmB,EAAE;AACpI,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,yCAAyC,eAAe,EAAE,EAAE,EAAE;AAClJ;AACA;AACA;AACA,mFAAmF,yCAAyC,eAAe,EAAE,EAAE,EAAE;AACjJ;AACA;AACA;AACA;AACA;AACA,qFAAqF,yCAAyC,eAAe,EAAE,EAAE,EAAE;AACnJ;AACA;AACA;AACA,mFAAmF,yCAAyC,eAAe,EAAE,EAAE,EAAE;AACjJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kDAAkD,EAAE;AACzG,+BAA+B,2EAA2E;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,mDAAmD,EAAE;AAClH;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,+CAA+C,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0C;;;;;;;AC9UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,8BAA8B;AAC/C,sBAAsB,8BAA8B;AACpD,oBAAoB,8BAA8B;AAClD,iBAAiB,8BAA8B;AAC/C,qBAAqB;AACrB,KAAK;AACL;AACA;AACA,kBAAkB;AAClB,uBAAuB;AACvB,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA,qC;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,gBAAgB,uHAAuH;AACrO;AACA,wFAAwF,gBAAgB,8JAA8J;AACtQ;AACA,oGAAoG,gBAAgB,gDAAgD;AACpK;AACA,wFAAwF,gBAAgB,2DAA2D;AACnK;AACA,wFAAwF;AACxF;AACA,gGAAgG;AAChG;AACA,oGAAoG,gBAAgB,qHAAqH;AACzO;AACA,wFAAwF;AACxF;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,2CAA2C,qCAAqC,oBAAoB;AACpG;AACA;AACA,mCAAmC,0BAA0B;AAC7D;AACA,0DAA0D,eAAe;AACzE,8CAA8C,2BAA2B;AACzE;AACA;AACA,0DAA0D,aAAa;AACvE,8CAA8C,8BAA8B;AAC5E;AACA;AACA,0CAA0C,oBAAoB;AAC9D,8CAA8C,oCAAoC;AAClF;AACA;AACA,0DAA0D,gBAAgB;AAC1E,8CAA8C,kCAAkC;AAChF;AACA;AACA;AACA,mCAAmC,0BAA0B;AAC7D,+CAA+C,8BAA8B;AAC7E,6CAA6C,iBAAiB;AAC9D,iDAAiD,uBAAuB,gDAAgD,EAAE,EAAE;AAC5H;AACA,kDAAkD,iDAAiD,iCAAiC,EAAE,EAAE;AACxI,SAAS;AACT,wEAAwE,qBAAqB,YAAY;AACzG;AACA;AACA;AACA,iC;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,qCAAqC,oBAAoB;AACjG;AACA;AACA;AACA,mCAAmC,0BAA0B;AAC7D;AACA,0CAA0C,0HAA0H;AACpK,8CAA8C,6BAA6B;AAC3E;AACA;AACA,0CAA0C,oHAAoH;AAC9J,8CAA8C,2BAA2B;AACzE;AACA;AACA,0CAA0C,4HAA4H;AACtK,8CAA8C,2BAA2B;AACzE,mCAAmC;AACnC,uC;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,qCAAqC,oBAAoB;AACpG;AACA;AACA,sCAAsC,+CAA+C;AACrF,uCAAuC,uBAAuB,0BAA0B,EAAE,EAAE,eAAe;AAC3G,0C;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE,gDAAgD,6DAA6D;AAC7G,oDAAoD,oHAAoH;AACxK,4EAA4E,oHAAoH;AAChM,oCAAoC,SAAS,kBAAkB,sFAAsF,oDAAoD,2CAA2C,gCAAgC,6CAA6C;AACjU,CAAC;AACD,6FAA6F,2EAA2E,EAAE;AAC1K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,4DAA4D,0EAA0E;AACtI,4CAA4C,8CAA8C;AAC1F;AACA,6CAA6C,qDAAqD;AAClG,6CAA6C,yBAAyB;AACtE,2DAA2D,kOAAkO,wBAAwB,8CAA8C,EAAE,EAAE,sFAAsF,uDAAuD,EAAE,EAAE;AACxf;AACA;AACA,6CAA6C,qDAAqD;AAClG;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wC;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,gCAAgC;AAChC,yC;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qCAAqC,oBAAoB;AAC1F;AACA,oEAAoE;AACpE,gC;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,qCAAqC,oBAAoB;AACpG;AACA,+EAA+E;AAC/E,0C;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yC;;;;;;ACbA,iC;;;;;;ACAA,wC;;;;;;ACAA,iC;;;;;;ACAA,gD;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,wC","file":"app.electron.dist.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 108);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2abfdb755d0068deff5a","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","/**\r\n * @fileOverview Collated list of data models\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nvar Element_1 = require(\"./Element\");\r\nexports.Element = Element_1.Element;\r\nvar ElementSet_1 = require(\"./ElementSet\");\r\nexports.ElementSet = ElementSet_1.ElementSet;\r\nvar SourceElement_1 = require(\"./SourceElement\");\r\nexports.SourceElement = SourceElement_1.SourceElement;\r\nvar Entity_1 = require(\"./Entity\");\r\nexports.Entity = Entity_1.Entity;\r\nvar EntityType_1 = require(\"./EntityType\");\r\nexports.EntityType = EntityType_1.EntityType;\r\nvar Predicate_1 = require(\"./Predicate\");\r\nexports.Predicate = Predicate_1.Predicate;\r\nvar Record_1 = require(\"./Record\");\r\nexports.Record = Record_1.Record;\r\nvar Source_1 = require(\"./Source\");\r\nexports.Source = Source_1.Source;\r\nvar Serializer_1 = require(\"./Serializer\");\r\nexports.Serializer = Serializer_1.Serializer;\r\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/index.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"mobx-react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mobx-react\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 3\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar itemTypes_1 = require(\"./itemTypes\");\r\nexports.AppUrls = {\r\n    element_set: itemTypes_1.itemTypes.element_set.machineName,\r\n    record: itemTypes_1.itemTypes.record.machineName,\r\n    entity: itemTypes_1.itemTypes.entity.machineName,\r\n    entity_type: itemTypes_1.itemTypes.entity_type.machineName,\r\n    predicate: itemTypes_1.itemTypes.predicate.machineName,\r\n    source: itemTypes_1.itemTypes.source.machineName,\r\n    source_element: itemTypes_1.itemTypes.source_element.machineName,\r\n    element: 'element'\r\n};\r\n//# sourceMappingURL=ApiService.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/ApiService.js\n// module id = 4\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nexports.AddTabButton = mobx_react_1.inject('dataStore')(mobx_react_1.observer(function (props, context) {\r\n    if (props.dataStore.dataStore.tabs[props.tabType] !== undefined\r\n        && props.uid in props.dataStore.dataStore.tabs[props.tabType]) {\r\n        return (React.createElement(\"i\", { className: 'fa fa-folder-open-o add button', title: 'Open item', onClick: function () { return context.router.transitionTo(\"/edit/\" + props.tabType + \"/\" + props.uid); } }, \" \"));\r\n    }\r\n    return (React.createElement(\"i\", { className: 'icon-list-add add button', title: 'Add to list', onClick: function () { return props.dataStore.createTab(props.tabType, props.uid, 'item', props.data); } }));\r\n}));\r\nexports.AddTabButton.wrappedComponent.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\n//# sourceMappingURL=AddTabButton.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/AddTabButton.js\n// module id = 5\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar UnprocessableEntity = (function (_super) {\r\n    __extends(UnprocessableEntity, _super);\r\n    function UnprocessableEntity(message, data) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = 422;\r\n        _this.data = data;\r\n        return _this;\r\n    }\r\n    return UnprocessableEntity;\r\n}(Error));\r\nexports.UnprocessableEntity = UnprocessableEntity;\r\nvar KeyNotFoundException = (function (_super) {\r\n    __extends(KeyNotFoundException, _super);\r\n    function KeyNotFoundException(message) {\r\n        if (message === void 0) { message = 'Could not find the given key'; }\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = 404;\r\n        return _this;\r\n    }\r\n    return KeyNotFoundException;\r\n}(Error));\r\nexports.KeyNotFoundException = KeyNotFoundException;\r\nvar ReadOnlyResourceException = (function (_super) {\r\n    __extends(ReadOnlyResourceException, _super);\r\n    function ReadOnlyResourceException(message) {\r\n        if (message === void 0) { message = 'Attempt to update a readonly resource'; }\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = 400;\r\n        return _this;\r\n    }\r\n    return ReadOnlyResourceException;\r\n}(Error));\r\nexports.ReadOnlyResourceException = ReadOnlyResourceException;\r\nvar CollectionNotFoundException = (function (_super) {\r\n    __extends(CollectionNotFoundException, _super);\r\n    function CollectionNotFoundException(message) {\r\n        if (message === void 0) { message = 'Could not find the given collection'; }\r\n        var _this = _super.call(this, message) || this;\r\n        _this.data = message;\r\n        return _this;\r\n    }\r\n    return CollectionNotFoundException;\r\n}(Error));\r\nexports.CollectionNotFoundException = CollectionNotFoundException;\r\nvar OperationNotPermittedException = (function (_super) {\r\n    __extends(OperationNotPermittedException, _super);\r\n    function OperationNotPermittedException(data) {\r\n        var _this = _super.call(this, data.message) || this;\r\n        _this.code = 422;\r\n        _this.data = data;\r\n        return _this;\r\n    }\r\n    return OperationNotPermittedException;\r\n}(Error));\r\nexports.OperationNotPermittedException = OperationNotPermittedException;\r\nvar InvalidUpdateException = (function (_super) {\r\n    __extends(InvalidUpdateException, _super);\r\n    function InvalidUpdateException(message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = 400;\r\n        return _this;\r\n    }\r\n    return InvalidUpdateException;\r\n}(Error));\r\nexports.InvalidUpdateException = InvalidUpdateException;\r\nvar DatabaseIntegrityError = (function (_super) {\r\n    __extends(DatabaseIntegrityError, _super);\r\n    function DatabaseIntegrityError(message) {\r\n        if (message === void 0) { message = \"A database integrity constraint has been broken - your change has not been\\n submitted. This is likely due to a change which violates the property types model; please check the types of\\n what you are trying to do. Please also contact the Digital Humanities team, this error should not occur.\"; }\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = 500;\r\n        return _this;\r\n    }\r\n    return DatabaseIntegrityError;\r\n}(Error));\r\nexports.DatabaseIntegrityError = DatabaseIntegrityError;\r\nexports.Exceptions = {\r\n    UnprocessableEntity: UnprocessableEntity,\r\n    KeyNotFoundException: KeyNotFoundException,\r\n    CollectionNotFoundException: CollectionNotFoundException,\r\n    OperationNotPermittedException: OperationNotPermittedException,\r\n    DatabaseIntegrityError: DatabaseIntegrityError,\r\n    InvalidUpdateException: InvalidUpdateException,\r\n    ReadOnlyResourceException: ReadOnlyResourceException\r\n};\r\n//# sourceMappingURL=Exceptions.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/Exceptions.js\n// module id = 6\n// module chunks = 0","/**\r\n * @fileOverview Generic controller containing logic common to most controller classes\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar Exceptions_1 = require(\"../../common/Exceptions\");\r\nvar GenericController = (function () {\r\n    function GenericController(db, table, readTable) {\r\n        this.db = db;\r\n        this.tableName = table;\r\n        this.readTableName = readTable === undefined ? table : readTable;\r\n    }\r\n    GenericController.prototype.getItemJson = function (obj, uid) {\r\n        var _this = this;\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.loadItem(this.readTableName, uid)\r\n            .then(function (data) { return _this.fromSchema(data); });\r\n    };\r\n    GenericController.prototype.getCollectionJson = function (obj, params) {\r\n        var _this = this;\r\n        if (params === void 0) { params = {}; }\r\n        return this.db.loadCollection(this.readTableName, params)\r\n            .then(function (data) { return data.map(function (datum) { return _this.fromSchema(datum); }); });\r\n    };\r\n    GenericController.prototype.postItem = function (obj, data, params) {\r\n        return this.db.createItem(this.tableName, this.toSchema(data));\r\n    };\r\n    GenericController.prototype.putItem = function (obj, uid, data) {\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.updateItem(this.tableName, this.toSchema(data));\r\n    };\r\n    GenericController.prototype.patchItem = function (obj, uid, data) {\r\n        var _this = this;\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        if (data.uid !== undefined) {\r\n            throw new Exceptions_1.InvalidUpdateException('Cannot patch uid');\r\n        }\r\n        return this.db.loadItem(this.tableName, uid)\r\n            .then(function (originalData) {\r\n            return _this.db.updateItem(_this.tableName, _this.toSchema(Object.assign(_this.fromSchema(originalData), data)));\r\n        });\r\n    };\r\n    GenericController.prototype.deleteItem = function (obj, uid) {\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.deleteItem(this.tableName, uid);\r\n    };\r\n    return GenericController;\r\n}());\r\nexports.GenericController = GenericController;\r\n//# sourceMappingURL=GenericController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/GenericController.js\n// module id = 7\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar lunr = require(\"lunr\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar ComboDropdown = (function (_super) {\r\n    __extends(ComboDropdown, _super);\r\n    function ComboDropdown() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            searchString: '',\r\n            showingDropDown: false,\r\n            filteredOptions: [],\r\n            highlightedIndex: null,\r\n            dropDownHeight: 0\r\n        };\r\n        return _this;\r\n    }\r\n    ComboDropdown.prototype.componentWillMount = function () {\r\n        this.ignoreBlur = false;\r\n        this.ignoreClick = false;\r\n        this.recalculateHeight = true;\r\n        this.dropDownBoxElement = null;\r\n        this.setState({\r\n            filteredOptions: this.props.options,\r\n            searchString: this.props.value === null || this.props.value.key === null ? '' : this.props.value.key\r\n        });\r\n    };\r\n    ComboDropdown.prototype.componentWillReceiveProps = function (newProps) {\r\n        var filterString = '';\r\n        if (this.props.value === null) {\r\n            if (newProps.value === null) {\r\n                // change nothing\r\n                filterString = this.state.searchString;\r\n            }\r\n            else {\r\n                // set to newProps value\r\n                filterString = newProps.value.key;\r\n            }\r\n        }\r\n        else {\r\n            if (newProps.value === null) {\r\n                // set to ''\r\n                filterString = '';\r\n            }\r\n            else {\r\n                if (newProps.value === this.props.value) {\r\n                    // change nothing\r\n                    filterString = this.state.searchString;\r\n                }\r\n                else {\r\n                    // set to newProps value\r\n                    filterString = newProps.value.key;\r\n                }\r\n            }\r\n        }\r\n        //const filterString = newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString;\r\n        this.updateFilter(filterString, newProps);\r\n        this.setState({\r\n            searchString: filterString\r\n        });\r\n    };\r\n    ComboDropdown.prototype.changeSearchString = function (event) {\r\n        var _this = this;\r\n        this.setState({\r\n            searchString: event.target.value,\r\n            showingDropDown: true\r\n        }, function () {\r\n            _this.updateFilter(_this.state.searchString, _this.props);\r\n            if (_this.props.updateSearchString !== undefined) {\r\n                _this.props.updateSearchString(_this.state.searchString);\r\n            }\r\n        });\r\n    };\r\n    ComboDropdown.prototype.updateSearchString = function (s) {\r\n        if (this.props.updateSearchString !== undefined) {\r\n            this.props.updateSearchString(s);\r\n        }\r\n    };\r\n    ComboDropdown.prototype.updateFilter = function (filter, props) {\r\n        var filtered = [];\r\n        if (filter.length > 0) {\r\n            var idx_1 = lunr(function () {\r\n                this.field('key', { boost: 10 });\r\n            });\r\n            props.options.forEach(function (opt, i) { return idx_1.add(Object.assign({}, opt, { id: i })); });\r\n            var result = idx_1.search(filter);\r\n            for (var i = 0; i < result.length; i += 1) {\r\n                filtered.push(props.options[result[i].ref]);\r\n            }\r\n        }\r\n        else {\r\n            filtered = props.options;\r\n        }\r\n        if (this.dropDownBoxElement !== null) {\r\n            this.recalculateHeight = true;\r\n            this.calculateDropdownHeight(this.dropDownBoxElement);\r\n        }\r\n        this.setState({\r\n            filteredOptions: filtered\r\n        });\r\n    };\r\n    ComboDropdown.prototype.addNewAction = function (option) {\r\n        this.props.createNewValue(option);\r\n    };\r\n    ComboDropdown.prototype.selectOption = function (option) {\r\n        this.props.setValue(option);\r\n        this.ignoreBlur = false;\r\n        this.recalculateHeight = true;\r\n        this.setState({ showingDropDown: false, searchString: option.key });\r\n        this.updateSearchString(option.key);\r\n    };\r\n    ComboDropdown.prototype.handleInputBlur = function () {\r\n        var _this = this;\r\n        if (!this.ignoreBlur) {\r\n            if (this.state.searchString.length === 0) {\r\n                this.setState({ searchString: '' });\r\n            }\r\n            else {\r\n                if (lodash_1.findIndex(this.props.options, function (option) { return option.key === _this.state.searchString; }) === -1) {\r\n                    this.setState({ searchString: this.props.value === null ? '' : this.props.value.key }, function () {\r\n                        _this.updateFilter(_this.props.value === null ? '' : _this.props.value.key, _this.props);\r\n                    });\r\n                }\r\n            }\r\n            this.recalculateHeight = true;\r\n            this.setState({\r\n                showingDropDown: false\r\n            });\r\n        }\r\n    };\r\n    ComboDropdown.prototype.handleInputFocus = function () {\r\n        if (this.ignoreBlur) {\r\n            this.ignoreBlur = true;\r\n            return;\r\n        }\r\n        // We don't want `selectItemFromMouse` to trigger when\r\n        // the user clicks into the input to focus it, so set this\r\n        // flag to cancel out the logic in `handleInputClick`.\r\n        // The event order is:  MouseDown -> Focus -> MouseUp -> Click\r\n        this.ignoreClick = true;\r\n        this.setState({ showingDropDown: true });\r\n    };\r\n    ComboDropdown.prototype.handleInputClick = function () {\r\n        // Input will not be focused if it's disabled\r\n        if (this.isInputFocused() && this.state.showingDropDown === false) {\r\n            this.setState({ showingDropDown: true });\r\n        }\r\n        else {\r\n            if (this.state.highlightedIndex !== null && !this.ignoreClick) {\r\n                this.selectItemFromMouse(this.state.filteredOptions[this.state.highlightedIndex]);\r\n            }\r\n            else {\r\n                this.ignoreClick = false;\r\n            }\r\n        }\r\n    };\r\n    ComboDropdown.prototype.selectItemFromMouse = function (item) {\r\n        var _this = this;\r\n        this.recalculateHeight = true;\r\n        this.setState({\r\n            showingDropDown: false,\r\n            highlightedIndex: null\r\n        }, function () {\r\n            _this.props.setValue(item);\r\n            _this.refs[ComboDropdown.comboDropdownInputBoxRef].focus();\r\n        });\r\n    };\r\n    ComboDropdown.prototype.isInputFocused = function () {\r\n        var el = this.refs[ComboDropdown.comboDropdownInputBoxRef];\r\n        return el.ownerDocument && (el === el.ownerDocument.activeElement);\r\n    };\r\n    ComboDropdown.prototype.clearSearchBox = function () {\r\n        this.props.setValue(null);\r\n        this.setState({ searchString: '' });\r\n        this.refs[ComboDropdown.comboDropdownInputBoxRef].focus();\r\n    };\r\n    ComboDropdown.prototype.calculateDropdownHeight = function (val) {\r\n        this.dropDownBoxElement = val;\r\n        if (val === null || !this.recalculateHeight) {\r\n            return;\r\n        }\r\n        else {\r\n            this.setState({\r\n                dropDownHeight: window.document.body.getBoundingClientRect().bottom - val.getBoundingClientRect().top - 32\r\n            });\r\n            this.recalculateHeight = false;\r\n        }\r\n    };\r\n    ComboDropdown.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"div\", { className: 'combo-dropdown ' + this.props.additionalClasses.join(' ') },\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"input\", { type: 'text', ref: ComboDropdown.comboDropdownInputBoxRef, className: 'search-input', value: this.state.searchString, placeholder: 'Click here and start typing..', onBlur: this.handleInputBlur.bind(this), onFocus: this.handleInputFocus.bind(this), onChange: this.changeSearchString.bind(this), onClick: this.handleInputClick.bind(this) }),\r\n                this.state.searchString.length > 0 ? (React.createElement(\"i\", { className: 'fa fa-times clear-button', onClick: this.clearSearchBox.bind(this) })) : null),\r\n            this.state.showingDropDown ? (React.createElement(\"div\", { className: 'dropdown', style: { maxHeight: this.state.dropDownHeight, overflowY: 'auto' }, ref: this.calculateDropdownHeight.bind(this) },\r\n                React.createElement(\"ul\", null,\r\n                    this.state.searchString.length === 0 && this.props.allowNew ? (React.createElement(\"li\", { className: 'add', onMouseDown: function () { return _this.ignoreBlur = true; }, onClick: function () { return _this.addNewAction(''); } },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus', \"aria-hidden\": 'true' }),\r\n                        \"Add new \",\r\n                        this.props.typeName)) : null,\r\n                    this.state.filteredOptions.map(function (opt, i) { return (React.createElement(\"li\", { key: \"opt-\" + opt.key + \"-\" + i, onMouseDown: function () { return _this.ignoreBlur = true; }, onClick: function () { return _this.selectOption(opt); } }, opt.key)); }),\r\n                    this.state.searchString.length > 0 && this.props.allowNew ? (React.createElement(\"li\", { className: 'add', onMouseDown: function () { return _this.ignoreBlur = true; }, onClick: function () { return _this.addNewAction(_this.state.searchString); } },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus', \"aria-hidden\": 'true' }),\r\n                        \"Add new \",\r\n                        this.props.typeName,\r\n                        \": '\",\r\n                        this.state.searchString,\r\n                        \"'\")) : null))) : null));\r\n    };\r\n    return ComboDropdown;\r\n}(React.Component));\r\nComboDropdown.defaultProps = {\r\n    allowNew: true,\r\n    additionalClasses: [],\r\n    updateSearchString: lodash_1.noop\r\n};\r\nComboDropdown.comboDropdownInputBoxRef = 'comboDropDownInputBox';\r\nexports.ComboDropdown = ComboDropdown;\r\nvar NumberComboDropdown = (function (_super) {\r\n    __extends(NumberComboDropdown, _super);\r\n    function NumberComboDropdown() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return NumberComboDropdown;\r\n}(ComboDropdown));\r\nexports.NumberComboDropdown = NumberComboDropdown;\r\nvar StringComboDropdown = (function (_super) {\r\n    __extends(StringComboDropdown, _super);\r\n    function StringComboDropdown() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return StringComboDropdown;\r\n}(ComboDropdown));\r\nexports.StringComboDropdown = StringComboDropdown;\r\n//# sourceMappingURL=ComboDropdown.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/ComboDropdown.js\n// module id = 8\n// module chunks = 0","module.exports = require(\"react-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router\"\n// module id = 9\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar Overlay = (function (_super) {\r\n    __extends(Overlay, _super);\r\n    function Overlay() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Overlay.prototype.render = function () {\r\n        return (React.createElement(\"div\", { className: 'full-page-overlay' },\r\n            React.createElement(\"div\", { className: 'overlay-container' }, this.props.children)));\r\n    };\r\n    return Overlay;\r\n}(React.Component));\r\nexports.Overlay = Overlay;\r\n;\r\n//# sourceMappingURL=Overlay.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/Overlay.js\n// module id = 10\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar React = require(\"react\");\r\nfunction EditableFieldHOC(WrappedComponent) {\r\n    return (function (_super) {\r\n        __extends(EditableFieldComponent, _super);\r\n        function EditableFieldComponent() {\r\n            var _this = _super.call(this) || this;\r\n            _this.state = {\r\n                edit: false,\r\n                internalValue: null\r\n            };\r\n            return _this;\r\n        }\r\n        EditableFieldComponent.prototype.componentWillMount = function () {\r\n            this.setState({ internalValue: this.props.value === undefined ? null : this.props.value });\r\n        };\r\n        EditableFieldComponent.prototype.componentWillReceiveProps = function (newProps) {\r\n            this.setState({ internalValue: newProps.value });\r\n        };\r\n        EditableFieldComponent.prototype.switchToEditState = function () {\r\n            this.setState({ edit: true, internalValue: this.props.value });\r\n        };\r\n        EditableFieldComponent.prototype.setInternalValue = function (internalValue) {\r\n            this.setState({ internalValue: internalValue });\r\n        };\r\n        EditableFieldComponent.prototype.acceptChanges = function () {\r\n            this.props.onChange(this.state.internalValue);\r\n            this.setState({ edit: false });\r\n        };\r\n        EditableFieldComponent.prototype.cancelChanges = function () {\r\n            this.setState({ edit: false, internalValue: this.props.value });\r\n        };\r\n        EditableFieldComponent.prototype.render = function () {\r\n            var _this = this;\r\n            return (React.createElement(WrappedComponent, __assign({}, this.props, { edit: this.state.edit, value: this.state.internalValue, onChange: this.setInternalValue.bind(this), setEdit: this.switchToEditState.bind(this), acceptChanges: this.acceptChanges.bind(this), cancelChanges: this.cancelChanges.bind(this), onDelete: function (e) { return _this.props.onDelete !== undefined ? _this.props.onDelete(_this.props.value) : null; } })));\r\n        };\r\n        return EditableFieldComponent;\r\n    }(React.Component));\r\n}\r\nexports.EditableFieldHOC = EditableFieldHOC;\r\n//# sourceMappingURL=EditableFieldComponent.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/fields/EditableFieldComponent.js\n// module id = 11\n// module chunks = 0","module.exports = require(\"mousetrap\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mousetrap\"\n// module id = 12\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.SearchBar = function (props) {\r\n    var filterFunc = function (s) {\r\n        return function (a) {\r\n            if (s.length === 0) {\r\n                return true;\r\n            }\r\n            return props.getValue(a).toLowerCase().indexOf(s.toLowerCase()) !== -1;\r\n        };\r\n    };\r\n    return (React.createElement(\"div\", null,\r\n        React.createElement(\"div\", { className: 'input-addon-formgroup' },\r\n            React.createElement(\"span\", { className: 'input-addon-icon' },\r\n                React.createElement(\"i\", { className: 'fa fa-search fa-fw' })),\r\n            React.createElement(\"input\", { type: 'text', className: 'form-control with-addon', onChange: function (e) { return props.setFilterFunc(filterFunc(e.target.value)); } }))));\r\n};\r\n//# sourceMappingURL=SearchBar.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/SearchBar.js\n// module id = 13\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.EditableHeader = function (props) {\r\n    if (!props.edit || props.value == null) {\r\n        return (React.createElement(\"h2\", null,\r\n            props.value,\r\n            React.createElement(\"sup\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: props.setEdit }))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"span\", null,\r\n            React.createElement(\"input\", { type: 'text', value: props.value, className: 'text-edit-header', onChange: function (e) { return props.onChange(e.target.value); } }),\r\n            React.createElement(\"button\", { onClick: props.acceptChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n            React.createElement(\"button\", { onClick: props.cancelChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' }))));\r\n    }\r\n};\r\n//# sourceMappingURL=EditableHeader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/fields/EditableHeader.js\n// module id = 14\n// module chunks = 0","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 15\n// module chunks = 0","/**\r\n * @fileOverview Controller for records\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar GenericController_1 = require(\"./GenericController\");\r\nvar Exceptions_1 = require(\"../../common/Exceptions\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar RecordController = (function (_super) {\r\n    __extends(RecordController, _super);\r\n    function RecordController(db) {\r\n        return _super.call(this, db, 'records') || this;\r\n    }\r\n    RecordController.toSchema = function (data) {\r\n        var schemaOutput = lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'value', 'valueType', 'creationTimestamp', 'label', 'lastmodifiedTimestamp');\r\n        schemaOutput.value_type = data.valueType;\r\n        if (data.valueType !== undefined && data.valueType !== 'source') {\r\n            schemaOutput['value_' + data.valueType] = data.value;\r\n        }\r\n        return Object.assign({}, schemaOutput, {\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timestamp: data.lastmodifiedTimestamp\r\n        });\r\n    };\r\n    RecordController.fromSchema = function (data) {\r\n        data.valueType = data.value_type;\r\n        switch (data.value_type) {\r\n            case 'entity':\r\n                data.value = data.value_entity;\r\n                break;\r\n            case 'string':\r\n                data.value = data.value_string;\r\n                break;\r\n            case 'date':\r\n                data.value = data.value_date;\r\n                break;\r\n            case 'integer':\r\n                data.value = data.value_integer;\r\n                break;\r\n            case 'point':\r\n                data.value = data.value_point;\r\n                break;\r\n            case 'region':\r\n                data.value = data.value_region;\r\n                break;\r\n            case 'source':\r\n                data.value = data.source;\r\n                break;\r\n            default:\r\n                data.value = null;\r\n        }\r\n        return Object.assign(Object.create(falcon_core_1.Record.prototype), data);\r\n    };\r\n    RecordController.prototype.toSchema = function (data) {\r\n        return RecordController.toSchema(data);\r\n    };\r\n    RecordController.prototype.fromSchema = function (data) {\r\n        return RecordController.fromSchema(data);\r\n    };\r\n    RecordController.prototype.postItem = function (obj, data, params) {\r\n        var _this = this;\r\n        // predicate domain must equal value_type\r\n        return this.db.select('predicates', ['range_type']).where({ uid: data.predicate })\r\n            .then(function (_a) {\r\n            var predicate = _a[0];\r\n            if (data.valueType === predicate.range_type) {\r\n                //TODO: still need to check entity type constraints\r\n                return _super.prototype.postItem.call(_this, obj, data, params);\r\n            }\r\n            throw new Exceptions_1.OperationNotPermittedException({\r\n                message: 'Attempted to add a record with an incorrect type!',\r\n                data: Promise.resolve({})\r\n            });\r\n        });\r\n    };\r\n    RecordController.prototype.putItem = function (obj, uid, data) {\r\n        //TODO: what happens if we only update the value - and do not send the valueType again?\r\n        var _this = this;\r\n        return this.db.select('predicates', ['range_type']).where({ uid: data.predicate })\r\n            .then(function (_a) {\r\n            var predicate = _a[0];\r\n            if (data.valueType === predicate.range_type) {\r\n                //TODO: still need to check entity type constraints\r\n                return _super.prototype.putItem.call(_this, obj, uid, data);\r\n            }\r\n            throw new Exceptions_1.OperationNotPermittedException({\r\n                message: 'Attempted to add a record with an incorrect type!',\r\n                data: Promise.resolve({})\r\n            });\r\n        });\r\n    };\r\n    RecordController.prototype.patchItem = function (obj, uid, data) {\r\n        var _this = this;\r\n        return this.db.select('predicates', ['range_type']).where({ uid: data.predicate })\r\n            .then(function (_a) {\r\n            var predicate = _a[0];\r\n            if (data.valueType === predicate.range_type) {\r\n                //TODO: still need to check entity type constraints\r\n                return _super.prototype.patchItem.call(_this, obj, uid, data);\r\n            }\r\n            throw new Exceptions_1.OperationNotPermittedException({\r\n                message: 'Attempted to add a record with an incorrect type!',\r\n                data: Promise.resolve({})\r\n            });\r\n        });\r\n    };\r\n    return RecordController;\r\n}(GenericController_1.GenericController));\r\nexports.RecordController = RecordController;\r\n//# sourceMappingURL=RecordController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/RecordController.js\n// module id = 16\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar React = require(\"react\");\r\nvar ComboDropdown_1 = require(\"../ComboDropdown\");\r\nfunction EditableComboDropdown(props) {\r\n    if (props.edit) {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(ComboDropdown_1.NumberComboDropdown, __assign({}, props.comboSettings, { value: props.value, setValue: props.onChange, allowNew: false, createNewValue: function () { } })),\r\n            React.createElement(\"button\", { onClick: props.acceptChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n            React.createElement(\"button\", { onClick: props.cancelChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' }))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"div\", null,\r\n            props.value !== null && props.value.key.length > 0 ? props.value.key\r\n                : (React.createElement(\"em\", null, \"No value\")),\r\n            React.createElement(\"sup\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: props.setEdit }))));\r\n    }\r\n}\r\nexports.EditableComboDropdown = EditableComboDropdown;\r\n;\r\n//# sourceMappingURL=EditableComboDropdown.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/fields/EditableComboDropdown.js\n// module id = 17\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar mousetrap = require(\"mousetrap\");\r\nexports.EditableParagraph = function (props) {\r\n    var keyBoardShortcuts;\r\n    var bindKeyboard = function (val) {\r\n        if (val !== null) {\r\n            val.focus();\r\n            keyBoardShortcuts = new mousetrap(val);\r\n            keyBoardShortcuts.bind('ctrl+return', props.acceptChanges);\r\n            keyBoardShortcuts.bind('escape', props.cancelChanges);\r\n        }\r\n        else {\r\n            keyBoardShortcuts.unbind('ctrl+return');\r\n        }\r\n    };\r\n    if (!props.edit) {\r\n        return (React.createElement(\"div\", { onClick: props.setEdit, className: 'editable-paragraph-box' },\r\n            React.createElement(\"p\", null,\r\n                props.value === null || props.value.length > 0 ? props.value\r\n                    : (React.createElement(\"em\", null, \"No value\")),\r\n                React.createElement(\"sup\", null,\r\n                    React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true' })))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"textarea\", { value: props.value === null ? '' : props.value, ref: bindKeyboard, onChange: function (e) { return props.onChange(e.target.value); }, style: { width: '100%', height: '6em' } }),\r\n            React.createElement(\"button\", { onClick: props.acceptChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n            React.createElement(\"button\", { onClick: props.cancelChanges },\r\n                React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' }))));\r\n    }\r\n};\r\n//# sourceMappingURL=EditableParagraph.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/fields/EditableParagraph.js\n// module id = 18\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar mousetrap = require(\"mousetrap\");\r\nvar SameAsEditor = (function (_super) {\r\n    __extends(SameAsEditor, _super);\r\n    function SameAsEditor(props) {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            temporaryValue: '',\r\n            urls: props.value === null || props.value.length === 0 ? [] : props.value.split(',')\r\n        };\r\n        return _this;\r\n    }\r\n    SameAsEditor.prototype.componentWillReceiveProps = function (props) {\r\n        this.setState({\r\n            temporaryValue: '',\r\n            urls: props.value === null || props.value.length === 0 ? [] : props.value.split(',')\r\n        });\r\n    };\r\n    SameAsEditor.prototype.addItemToList = function () {\r\n        var _this = this;\r\n        if (this.state.temporaryValue.length === 0) {\r\n            return;\r\n        }\r\n        this.setState({ urls: this.state.urls.concat([this.state.temporaryValue]), temporaryValue: '' }, function () { return _this.props.onChange(_this.state.urls.join(',')); });\r\n    };\r\n    SameAsEditor.prototype.removeItemFromList = function (itemId) {\r\n        var _this = this;\r\n        this.setState({\r\n            urls: this.state.urls.filter(function (val, i) { return i !== itemId; })\r\n        }, function () { return _this.props.onChange(_this.state.urls.join(',')); });\r\n    };\r\n    SameAsEditor.prototype.setupKeyboardShortcuts = function (val) {\r\n        var _this = this;\r\n        if (val !== null) {\r\n            val.focus();\r\n            this.keyboardShortcuts = new mousetrap(val);\r\n            this.keyboardShortcuts.bind('return', this.addItemToList.bind(this));\r\n            this.keyboardShortcuts.bind('escape', this.props.cancelChanges);\r\n            this.keyboardShortcuts.bind('ctrl+s', function (e) {\r\n                if (e.preventDefault) {\r\n                    e.preventDefault();\r\n                }\r\n                else {\r\n                    // internet explorer\r\n                    e.returnValue = false;\r\n                }\r\n                _this.props.acceptChanges();\r\n            });\r\n        }\r\n        else {\r\n            this.keyboardShortcuts.unbind('return');\r\n            this.keyboardShortcuts.unbind('escape');\r\n            this.keyboardShortcuts.unbind('ctrl+s');\r\n        }\r\n    };\r\n    SameAsEditor.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"div\", { className: 'same-as-box' },\r\n            React.createElement(\"label\", { className: 'small' },\r\n                \"Same As \",\r\n                !this.props.edit ? (React.createElement(\"sup\", null,\r\n                    React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: this.props.setEdit }))) : null),\r\n            this.props.edit ? (React.createElement(\"div\", { className: 'edit-group' },\r\n                React.createElement(\"button\", { onClick: this.props.acceptChanges },\r\n                    React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n                React.createElement(\"button\", { onClick: this.props.cancelChanges },\r\n                    React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' })),\r\n                React.createElement(\"div\", { className: 'input-addon-formgroup' },\r\n                    React.createElement(\"input\", { type: 'text', value: this.state.temporaryValue, ref: this.setupKeyboardShortcuts.bind(this), onChange: function (e) { return _this.setState({ temporaryValue: e.target.value }); }, className: 'form-control with-addon' }),\r\n                    React.createElement(\"span\", { className: 'input-addon-icon right button', onClick: this.addItemToList.bind(this) },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus' }))))) : null,\r\n            React.createElement(\"ul\", { className: 'same-as-list' }, this.state.urls.map(function (url, i) { return (React.createElement(\"li\", { key: \"li-\" + url },\r\n                React.createElement(\"a\", { target: '_blank', href: url }, url),\r\n                \" \",\r\n                _this.props.edit ? (React.createElement(\"i\", { className: 'fa fa-times close-button', onClick: _this.removeItemFromList.bind(_this, i) })) : null)); }))));\r\n    };\r\n    return SameAsEditor;\r\n}(React.Component));\r\nexports.SameAsEditor = SameAsEditor;\r\n//# sourceMappingURL=SameAsEditor.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/fields/SameAsEditor.js\n// module id = 19\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nexports.findParentTree = function (uid, data, ancestors) {\r\n    if (ancestors === void 0) { ancestors = []; }\r\n    var current = data.find(function (datum) { return datum.uid === uid; });\r\n    if (current === undefined) {\r\n        console.warn('Couldn\\'t find parent');\r\n        return ancestors;\r\n    }\r\n    else {\r\n        if (current.parent === null || current.uid === null) {\r\n            if (current.uid === null) {\r\n                console.warn('Found entity will null uid');\r\n                return ancestors;\r\n            }\r\n            else {\r\n                return ancestors.concat([current.uid]);\r\n            }\r\n        }\r\n        else {\r\n            return exports.findParentTree(current.parent, data, ancestors.concat([current.uid]));\r\n        }\r\n    }\r\n};\r\n//# sourceMappingURL=findParentTree.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/helper/findParentTree.js\n// module id = 20\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar moment = require(\"moment\");\r\nexports.formatDate = function (str) {\r\n    if (str === null || str.length === 0) {\r\n        return '';\r\n    }\r\n    var modifier = {\r\n        '=': '',\r\n        '>': 'After ',\r\n        '<': 'Before '\r\n    }[str[0]];\r\n    var year = str.substr(1, 4);\r\n    var rawMonth = parseInt(str.substr(5, 2)) - 1;\r\n    var month = rawMonth === -1 || isNaN(rawMonth) ? 'Unknown' : moment.months()[rawMonth];\r\n    var rawDay = parseInt(str.substr(7, 2));\r\n    var day = rawDay > 0 ? rawDay : '';\r\n    return modifier + \" \" + day + \" \" + month + \" \" + year;\r\n};\r\n//# sourceMappingURL=formatDate.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/helper/formatDate.js\n// module id = 21\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar simpleKey = function (raw) {\r\n    return parseInt(raw[0]);\r\n};\r\nexports.itemTypes = {\r\n    element_set: {\r\n        machineName: 'element_set',\r\n        name: 'Element Set',\r\n        plural: 'Element Sets',\r\n        workspace: '',\r\n        buildKey: simpleKey,\r\n        item: falcon_core_1.ElementSet\r\n    },\r\n    element: {\r\n        machineName: 'element',\r\n        name: 'Element',\r\n        plural: 'Elements',\r\n        workspace: '',\r\n        buildKey: simpleKey,\r\n        item: falcon_core_1.Element\r\n    },\r\n    record: {\r\n        machineName: 'record',\r\n        name: 'Record',\r\n        plural: 'Records',\r\n        workspace: '',\r\n        buildKey: simpleKey,\r\n        item: falcon_core_1.Record\r\n    },\r\n    entity: {\r\n        machineName: 'entity',\r\n        name: 'Entity',\r\n        plural: 'Entities',\r\n        workspace: 'entity',\r\n        buildKey: simpleKey,\r\n        item: falcon_core_1.Entity\r\n    },\r\n    entity_type: {\r\n        machineName: 'entity_type',\r\n        name: 'Entity Type',\r\n        plural: 'Entity Types',\r\n        workspace: 'entity_type',\r\n        buildKey: simpleKey,\r\n        item: falcon_core_1.EntityType\r\n    },\r\n    predicate: {\r\n        machineName: 'predicate',\r\n        name: 'Property',\r\n        plural: 'Properties',\r\n        workspace: 'predicate',\r\n        buildKey: simpleKey,\r\n        item: falcon_core_1.Predicate\r\n    },\r\n    source: {\r\n        machineName: 'source',\r\n        name: 'Source',\r\n        plural: 'Sources',\r\n        workspace: 'source',\r\n        buildKey: simpleKey,\r\n        item: falcon_core_1.Source\r\n    },\r\n    source_element: {\r\n        machineName: 'source_element',\r\n        name: 'Source Element',\r\n        plural: 'Source Elements',\r\n        workspace: '',\r\n        buildKey: function (raw) { return ({\r\n            order: ['source', 'element'],\r\n            values: {\r\n                source: parseInt(raw[0]),\r\n                element: parseInt(raw[1])\r\n            }\r\n        }); },\r\n        item: falcon_core_1.SourceElement\r\n    }\r\n};\r\n//# sourceMappingURL=itemTypes.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/itemTypes.js\n// module id = 22\n// module chunks = 0","module.exports = require(\"graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"react-sortable-hoc\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-sortable-hoc\"\n// module id = 24\n// module chunks = 0","/**\r\n * @fileOverview Controller for entities\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar GenericController_1 = require(\"./GenericController\");\r\nvar Exceptions_1 = require(\"../../common/Exceptions\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar EntityController = (function (_super) {\r\n    __extends(EntityController, _super);\r\n    function EntityController(db) {\r\n        return _super.call(this, db, 'entities') || this;\r\n    }\r\n    EntityController.fromSchema = function (data) {\r\n        return Object.assign(Object.create(falcon_core_1.Entity.prototype), {\r\n            entityType: data.type,\r\n            uid: data.uid,\r\n            label: data.label,\r\n            parent: data.parent\r\n        });\r\n    };\r\n    EntityController.toSchema = function (data) {\r\n        var allowedKeys = new Set(['uid', 'label', 'entityType', 'parent', 'creator', 'creationTimestamp', 'lastmodifiedTimestamp']);\r\n        var extraKeys = Object.keys(data).filter(function (a) { return !allowedKeys.has(a); });\r\n        if (extraKeys.length > 0) {\r\n            throw new Exceptions_1.InvalidUpdateException('Unknown keys: ' + extraKeys.join(', '));\r\n        }\r\n        return Object.assign(lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'entityType', 'creationTimestamp', 'lastmodifiedTimestamp'), {\r\n            type: data.entityType,\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timestamp: data.lastmodifiedTimestamp\r\n        });\r\n    };\r\n    EntityController.prototype.fromSchema = function (data) {\r\n        return EntityController.fromSchema(data);\r\n    };\r\n    EntityController.prototype.toSchema = function (data) {\r\n        return EntityController.toSchema(data);\r\n    };\r\n    EntityController.prototype.getCollectionJson = function (obj, params) {\r\n        if (params === void 0) { params = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            var ancestorTypes;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(params.type !== undefined)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.db.getChildrenOf(lodash_1.isArray(params.type) ? params.type[0] : params.type, 'entity_types')];\r\n                    case 1:\r\n                        ancestorTypes = _a.sent();\r\n                        return [2 /*return*/, this.db.select('entities')\r\n                                .whereIn('type', ancestorTypes)\r\n                                .then(function (rawEntities) { return rawEntities.map(function (entity) { return _this.fromSchema(entity); }); })];\r\n                    case 2: return [2 /*return*/, _super.prototype.getCollectionJson.call(this, obj, params)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EntityController.prototype.postItem = function (obj, data, params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, recordsToClone;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.db.createItem(this.tableName, this.toSchema(data))];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!(params.clone !== undefined)) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.db.query()('records').where({ entity: params.clone })\r\n                                .then(function (records) { return records.map(function (record) { return (__assign({}, record, { entity: result[0], uid: undefined })); }); })];\r\n                    case 2:\r\n                        recordsToClone = _a.sent();\r\n                        return [4 /*yield*/, this.db.query()('records').insert(recordsToClone).then(function () { })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4: return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EntityController.prototype.deleteItem = function (obj, uid) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, entities, records;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, Promise.all([\r\n                            this.db.select(this.tableName).where('parent', '=', uid),\r\n                            this.db.select('records').where('value_entity', '=', uid)\r\n                        ])];\r\n                    case 1:\r\n                        _a = _b.sent(), entities = _a[0], records = _a[1];\r\n                        if (entities.length + records.length === 0) {\r\n                            return [2 /*return*/, this.db.deleteItem(this.tableName, uid)];\r\n                        }\r\n                        else {\r\n                            throw new Exceptions_1.OperationNotPermittedException({\r\n                                message: 'The operation could not be completed as the entity is referenced in other sources',\r\n                                data: Promise.resolve({\r\n                                    entity: entities,\r\n                                    record: records\r\n                                })\r\n                            });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return EntityController;\r\n}(GenericController_1.GenericController));\r\nexports.EntityController = EntityController;\r\n//# sourceMappingURL=EntityController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/EntityController.js\n// module id = 25\n// module chunks = 0","/**\r\n * @fileOverview Controller for predicates\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar GenericController_1 = require(\"./GenericController\");\r\nvar Exceptions_1 = require(\"../../common/Exceptions\");\r\nvar RecordController_1 = require(\"./RecordController\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar PredicateController = (function (_super) {\r\n    __extends(PredicateController, _super);\r\n    function PredicateController(db) {\r\n        return _super.call(this, db, 'predicates', 'predicate_complete') || this;\r\n    }\r\n    PredicateController.toSchema = function (data) {\r\n        var allowedKeys = new Set(['uid', 'uses', 'label', 'domain', 'range',\r\n            'description', 'rangeIsReference', 'sameAs', 'creator', 'creationTimestamp', 'lastmodifiedTimestamp']);\r\n        var extraKeys = Object.keys(data).filter(function (a) { return !allowedKeys.has(a); });\r\n        if (extraKeys.length > 0) {\r\n            throw new Exceptions_1.InvalidUpdateException('Unknown keys: ' + extraKeys.join(', '));\r\n        }\r\n        var out = Object.assign(lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'range', 'rangeIsReference', 'sameAs', 'creationTimestamp', 'lastmodifiedTimestamp', 'uses'), {\r\n            same_as: data.sameAs,\r\n            range_type: data.rangeIsReference ? 'entity' : data.range,\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timestamp: data.lastmodifiedTimestamp\r\n        });\r\n        if (data.rangeIsReference) {\r\n            out['range_ref'] = data.range;\r\n        }\r\n        else {\r\n            out['range_ref'] = null;\r\n        }\r\n        return out;\r\n    };\r\n    PredicateController.fromSchema = function (data) {\r\n        if (data.range_type === 'entity') {\r\n            data.range = data.range_ref;\r\n            data.rangeIsReference = true;\r\n        }\r\n        else {\r\n            data.range = data.range_type;\r\n            data.rangeIsReference = false;\r\n        }\r\n        if (data.uses === null) {\r\n            data.uses = 0;\r\n        }\r\n        return Object.assign(Object.create(falcon_core_1.Predicate.prototype), {\r\n            'uid': data.uid,\r\n            'sameAs': data.same_as,\r\n            'label': data.label,\r\n            'lastmodifiedTimestamp': data.lastmodified_timestamp,\r\n            'creationTimestamp': data.creation_timestamp,\r\n            'rangeIsReference': data.rangeIsReference,\r\n            'range': data.range,\r\n            'domain': data.domain,\r\n            'uses': data.uses,\r\n            'description': data.description\r\n        });\r\n    };\r\n    PredicateController.prototype.toSchema = function (data) {\r\n        return PredicateController.toSchema(data);\r\n    };\r\n    PredicateController.prototype.fromSchema = function (data) {\r\n        return PredicateController.fromSchema(data);\r\n    };\r\n    PredicateController.prototype.getCollectionJson = function (obj, params) {\r\n        if (params === void 0) { params = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            var ancestorIds;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(params.domain !== undefined)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.db.getAncestorsOf(lodash_1.isArray(params.domain) ? params.domain[0] : params.domain, 'entity_types')];\r\n                    case 1:\r\n                        ancestorIds = _a.sent();\r\n                        return [2 /*return*/, this.db.select(this.readTableName).whereIn('domain', ancestorIds.concat([params.domain[0]]))\r\n                                .then(function (results) { return results.map(function (result) { return _this.fromSchema(result); }); })];\r\n                    case 2: return [2 /*return*/, _super.prototype.getCollectionJson.call(this, obj, params)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PredicateController.prototype.putItem = function (obj, uid, data) {\r\n        if (typeof (uid) !== 'number') {\r\n            throw new Error('Expected single column identifier');\r\n        }\r\n        return this.db.updateItem(this.tableName, falcon_core_1.Serializer.toJson(data));\r\n    };\r\n    // public patchItem(obj: { new(): Predicate; }, uid: number, data: Predicate) : Promise<boolean> {\r\n    //     if (data.domain !== undefined) {\r\n    //         return this.db.select('records', ['entities.type as entityType'])\r\n    //             .distinct()\r\n    //             .where({ predicate: uid })\r\n    //             .innerJoin('entities', 'records.entity', 'entities.uid')\r\n    //         .then((records) => {\r\n    //             if (records.length > 0) {\r\n    //                 return this.db.getChildrenOf(data.domain, 'entity_types')\r\n    //                 .then((res) => {\r\n    //                     records.map((e) => e.entityType)\r\n    //                     .forEach((e) => {\r\n    //                         if (res.indexOf(e) === -1) {\r\n    //                             throw new OperationNotPermittedException({\r\n    //                                 message: 'The operation could not be completed as it would invalidate predicate relationships',\r\n    //                                 data: Promise.resolve({})\r\n    //                             });\r\n    //                         }\r\n    //                     });\r\n    //                 }).then(() => super.patchItem(obj, uid, data));\r\n    //             }\r\n    //             return super.patchItem(obj, uid, data);\r\n    //         });\r\n    //     }\r\n    //     //TODO: fix range enforcement\r\n    //     if (data.range !== undefined) {\r\n    //         return this.db.select('records')\r\n    //             .where({ predicate: uid })\r\n    //         .then((records) => {\r\n    //             if (records.length > 0) {\r\n    //                 if (data.rangeIsReference === false) {\r\n    //                     throw new OperationNotPermittedException({\r\n    //                         message: 'The operation could not be completed as it would invalidate predicate relationships',\r\n    //                         data: Promise.resolve({})\r\n    //                     });\r\n    //                 }\r\n    //                 return this.db.getChildrenOf(parseInt(data.range as string), 'entity_types')\r\n    //                 .then((res) => {\r\n    //                     records.map((e) => e.value_entity)\r\n    //                     .forEach((e) => {\r\n    //                         if (res.indexOf(e) === -1) {\r\n    //                             throw new OperationNotPermittedException({\r\n    //                                 message: 'The operation could not be completed as it would invalidate predicate relationships',\r\n    //                                 data: Promise.resolve({})\r\n    //                             });\r\n    //                         }\r\n    //                     });\r\n    //                 }).then(() => super.patchItem(obj, uid, data));\r\n    //             }\r\n    //             return super.patchItem(obj, uid, data);\r\n    //         });\r\n    //     }\r\n    //     return super.patchItem(obj, uid, data);\r\n    // }\r\n    PredicateController.prototype.deleteItem = function (obj, uid) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var records;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.db.loadCollection('records', { predicate: uid })];\r\n                    case 1:\r\n                        records = _a.sent();\r\n                        if (records.length === 0) {\r\n                            return [2 /*return*/, this.db.deleteItem(this.tableName, uid)];\r\n                        }\r\n                        else {\r\n                            throw new Exceptions_1.OperationNotPermittedException({\r\n                                message: 'The operation could not be completed as the predicate is used by other records',\r\n                                data: Promise.resolve({\r\n                                    record: records.map(function (record) { return RecordController_1.RecordController.fromSchema(record); })\r\n                                })\r\n                            });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return PredicateController;\r\n}(GenericController_1.GenericController));\r\nexports.PredicateController = PredicateController;\r\n//# sourceMappingURL=PredicateController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/PredicateController.js\n// module id = 26\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar AddTabButton_1 = require(\"./AddTabButton\");\r\nvar RecursiveTree = (function (_super) {\r\n    __extends(RecursiveTree, _super);\r\n    function RecursiveTree() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = { collapsed: false };\r\n        return _this;\r\n    }\r\n    RecursiveTree.prototype.render = function () {\r\n        var _this = this;\r\n        var filtered = this.props.data.filter(function (datum) { return datum.parent === _this.props.parentId; });\r\n        if (filtered.length === 0) {\r\n            return null;\r\n        }\r\n        return (React.createElement(\"div\", null, filtered.map(function (item) { return (React.createElement(\"div\", { key: item.label },\r\n            React.createElement(\"div\", { className: 'tree-label', onClick: function () { return _this.setState({ collapsed: !_this.state.collapsed }); } },\r\n                \"- \",\r\n                item.label,\r\n                \" \",\r\n                React.createElement(AddTabButton_1.AddTabButton, { uid: item.uid, tabType: _this.props.tabType })),\r\n            !_this.state.collapsed ? (React.createElement(\"div\", { className: 'tree-children' },\r\n                React.createElement(RecursiveTree, { dataStore: _this.props.dataStore, data: _this.props.data, tabType: _this.props.tabType, parentId: item.uid }))) : null)); })));\r\n    };\r\n    return RecursiveTree;\r\n}(React.Component));\r\nexports.RecursiveTree = RecursiveTree;\r\n//# sourceMappingURL=RecursiveTree.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/RecursiveTree.js\n// module id = 27\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar ComboDropdown_1 = require(\"../ComboDropdown\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar PredicateRangeComboDropdown = (function (_super) {\r\n    __extends(PredicateRangeComboDropdown, _super);\r\n    function PredicateRangeComboDropdown() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return PredicateRangeComboDropdown;\r\n}(ComboDropdown_1.ComboDropdown));\r\nexports.PredicateRangeComboDropdown = PredicateRangeComboDropdown;\r\nvar PredicateDescription = (function (_super) {\r\n    __extends(PredicateDescription, _super);\r\n    function PredicateDescription() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            editingDomain: false,\r\n            editingRange: false,\r\n            rangeValue: { key: '', value: null },\r\n            domainValue: { key: '', value: null }\r\n        };\r\n        return _this;\r\n    }\r\n    PredicateDescription.prototype.componentWillMount = function () {\r\n        this.setState({\r\n            rangeValue: this.props.range,\r\n            domainValue: this.props.domain\r\n        });\r\n    };\r\n    PredicateDescription.prototype.componentWillReceiveProps = function (newProps) {\r\n        this.setState({\r\n            rangeValue: newProps.range,\r\n            domainValue: newProps.domain\r\n        });\r\n    };\r\n    PredicateDescription.prototype.acceptDomainChanges = function () {\r\n        this.props.domainChanged(this.state.domainValue);\r\n        this.setState({ editingDomain: false });\r\n    };\r\n    PredicateDescription.prototype.cancelDomainChanges = function () {\r\n        this.setState({ editingDomain: false, domainValue: this.props.domain });\r\n    };\r\n    PredicateDescription.prototype.acceptRangeChanges = function () {\r\n        this.props.rangeChanged(this.state.rangeValue);\r\n        this.setState({ editingRange: false });\r\n    };\r\n    PredicateDescription.prototype.cancelRangeChanges = function () {\r\n        this.setState({ editingDomain: false, rangeValue: this.props.range });\r\n    };\r\n    //  <label className='small'>Property Class</label>\r\n    //   <section className='class'>\r\n    //     <input type='radio' name='property-class' value='ObjectProperty' /> Object Property <small>Links to another entity</small><br/>\r\n    //     <input type='radio' name='property-class' value='DataTypeProperty' /> Data Type Property <small>Links to some data, like text or a date</small><br/>\r\n    //     <input type='radio' name='property-class' value='SourceProperty' /> Source Property <small>Links to a source</small><br/>\r\n    //   </section>\r\n    //   <label className='small'>Typing</label>\r\n    PredicateDescription.prototype.render = function () {\r\n        var _this = this;\r\n        var domainChanged = this.props.mode === 'editAll' ?\r\n            this.props.domainChanged : function (c) { return _this.setState({ domainValue: c }); };\r\n        var rangeChanged = this.props.mode === 'editAll' ?\r\n            this.props.rangeChanged : function (c) { return _this.setState({ rangeValue: c }); };\r\n        return (React.createElement(\"div\", { className: 'predicate-function-description' },\r\n            React.createElement(\"div\", { className: 'typing' },\r\n                React.createElement(\"div\", { className: 'domain' }, this.props.mode === 'editAll' || this.state.editingDomain ? (React.createElement(\"div\", null,\r\n                    React.createElement(\"label\", { className: 'small' }, \"Domain\"),\r\n                    React.createElement(ComboDropdown_1.NumberComboDropdown, { options: this.props.domainOptions, typeName: 'entity type', allowNew: false, value: this.state.domainValue, setValue: domainChanged, createNewValue: lodash_1.noop }),\r\n                    this.props.mode === 'editSingle' ? (React.createElement(\"div\", null,\r\n                        React.createElement(\"button\", { onClick: this.acceptDomainChanges.bind(this) },\r\n                            React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n                        React.createElement(\"button\", { onClick: this.cancelDomainChanges.bind(this) },\r\n                            React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' })))) : null)) : (React.createElement(\"div\", null,\r\n                    this.props.domain.key,\r\n                    \" \",\r\n                    React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: function () { return _this.setState({ editingDomain: true }); } })))),\r\n                React.createElement(\"div\", { className: 'arrow' },\r\n                    React.createElement(\"i\", { className: 'fa fa-long-arrow-right', \"aria-hidden\": 'true' })),\r\n                React.createElement(\"div\", { className: 'range' }, this.props.mode === 'editAll' || this.state.editingRange ? (React.createElement(\"div\", null,\r\n                    React.createElement(\"label\", { className: 'small' }, \"Range\"),\r\n                    React.createElement(PredicateRangeComboDropdown, { options: this.props.rangeOptions, typeName: 'entity type', allowNew: false, value: this.state.rangeValue, setValue: rangeChanged, createNewValue: lodash_1.noop }),\r\n                    this.props.mode === 'editSingle' ? (React.createElement(\"div\", null,\r\n                        React.createElement(\"button\", { onClick: this.acceptRangeChanges.bind(this) },\r\n                            React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n                        React.createElement(\"button\", { onClick: this.cancelRangeChanges.bind(this) },\r\n                            React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' })))) : null)) : (React.createElement(\"div\", null,\r\n                    this.props.range.key,\r\n                    \" \",\r\n                    React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true', onClick: function () { return _this.setState({ editingRange: true }); } })))))));\r\n    };\r\n    return PredicateDescription;\r\n}(React.Component));\r\nexports.PredicateDescription = PredicateDescription;\r\n//# sourceMappingURL=PredicateDescription.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/fields/PredicateDescription.js\n// module id = 28\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nexports.literalTypes = [\r\n    { label: 'text', value: 'string', url: '', description: 'some text' },\r\n    { label: 'number', value: 'integer', url: '', description: 'a number' },\r\n    { label: 'date', value: 'date', url: '', description: 'a date' },\r\n    // { name: 'point', value: 'point', url: '', description: 'a point on a map '},\r\n    // { name: 'region', value: 'region', url: '', description: 'a region on a map'},\r\n    { label: 'source', value: 'source', url: '', description: 'a source in the database' }\r\n];\r\n//# sourceMappingURL=literalTypes.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/literalTypes.js\n// module id = 29\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar react_router_1 = require(\"react-router\");\r\nexports.StatsGrid = function (props) {\r\n    return (React.createElement(\"section\", { className: 'stats-grid' },\r\n        React.createElement(react_router_1.Link, { to: '/edit/entity' },\r\n            React.createElement(\"div\", { className: 'entity' },\r\n                React.createElement(\"span\", { className: 'item-name' }, \"Entities\"),\r\n                React.createElement(\"span\", { className: 'item-count' }, props.stats.entity))),\r\n        React.createElement(react_router_1.Link, { to: '/edit/entity_type' },\r\n            React.createElement(\"div\", { className: 'entity_type' },\r\n                React.createElement(\"span\", { className: 'item-name' }, \"Entity Types\"),\r\n                React.createElement(\"span\", { className: 'item-count' }, props.stats.entityType))),\r\n        React.createElement(react_router_1.Link, { to: '/edit/source' },\r\n            React.createElement(\"div\", { className: 'source' },\r\n                React.createElement(\"span\", { className: 'item-name' }, \"Sources\"),\r\n                React.createElement(\"span\", { className: 'item-count' }, props.stats.source))),\r\n        React.createElement(react_router_1.Link, { to: '/edit/predicate' },\r\n            React.createElement(\"div\", { className: 'predicate' },\r\n                React.createElement(\"span\", { className: 'item-name' }, \"Properties\"),\r\n                React.createElement(\"span\", { className: 'item-count' }, props.stats.predicate))),\r\n        React.createElement(\"div\", { className: 'record' },\r\n            React.createElement(\"span\", { className: 'item-name' }, \"Records\"),\r\n            React.createElement(\"span\", { className: 'item-count' }, props.stats.record))));\r\n};\r\n//# sourceMappingURL=StatsGrid.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/stats/StatsGrid.js\n// module id = 30\n// module chunks = 0","module.exports = require(\"mobx\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mobx\"\n// module id = 31\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar Knex = require(\"knex\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar Exceptions_1 = require(\"../../common/Exceptions\");\r\nvar Database = (function () {\r\n    function Database(config) {\r\n        this.knex = Knex(config);\r\n        this.dbType = config.client;\r\n    }\r\n    Database.prototype.query = function () {\r\n        return this.knex;\r\n    };\r\n    Database.prototype.select = function (tableName, options) {\r\n        if (options === void 0) { options = '*'; }\r\n        return this.knex.select().from(tableName);\r\n    };\r\n    Database.prototype.loadItem = function (a, uid) {\r\n        var query = this.knex.select()\r\n            .from(a)\r\n            .where({ uid: uid })\r\n            .first();\r\n        return query.then(function (result) { return result === undefined ? Promise.reject(new Exceptions_1.KeyNotFoundException()) : result; });\r\n    };\r\n    Database.prototype.loadCollection = function (a, params) {\r\n        var query = this.knex.select()\r\n            .from(a);\r\n        Object.keys(params).forEach(function (param) {\r\n            query = query.whereIn(param, params[param]);\r\n        });\r\n        return query.then(function (results) { return results === undefined ? Promise.reject(new Exceptions_1.KeyNotFoundException()) : results; });\r\n    };\r\n    Database.prototype.createItem = function (tableName, data) {\r\n        var _this = this;\r\n        // throw warning if called with uid\r\n        // validate that everything else has been sent\r\n        var withoutUid = lodash_1.omit(data, ['uid']);\r\n        return this.knex.transaction(function (trx) {\r\n            return _this.knex(tableName).transacting(trx).insert(withoutUid, 'uid').returning('uid')\r\n                .then(function (results) {\r\n                return _this.checkIntegrity(trx)\r\n                    .then(function (valid) {\r\n                    if (!valid) {\r\n                        throw new Exceptions_1.DatabaseIntegrityError();\r\n                    }\r\n                    return results;\r\n                });\r\n            });\r\n        });\r\n    };\r\n    Database.prototype.updateItem = function (tableName, data) {\r\n        var _this = this;\r\n        // assert - must have uid\r\n        // validation?\r\n        return this.knex.transaction(function (trx) {\r\n            return _this.knex(tableName).transacting(trx)\r\n                .where({ 'uid': data.uid })\r\n                .update(data)\r\n                .then(function (results) {\r\n                return _this.checkIntegrity(trx)\r\n                    .then(function (valid) {\r\n                    if (!valid) {\r\n                        throw new Exceptions_1.DatabaseIntegrityError();\r\n                    }\r\n                    return results;\r\n                });\r\n            });\r\n        });\r\n    };\r\n    Database.prototype.deleteItem = function (tableName, uid) {\r\n        var _this = this;\r\n        return this.knex.transaction(function (trx) {\r\n            return _this.knex(tableName).transacting(trx)\r\n                .where({ uid: uid })\r\n                .del()\r\n                .then(function (results) {\r\n                return _this.checkIntegrity(trx)\r\n                    .then(function (valid) {\r\n                    if (!valid) {\r\n                        throw new Exceptions_1.DatabaseIntegrityError();\r\n                    }\r\n                    return results;\r\n                });\r\n            });\r\n        });\r\n    };\r\n    Database.prototype.getAncestorsOf = function (uid, tableName) {\r\n        var _this = this;\r\n        return this.knex.raw(\"\\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM \" + tableName + \"),\\n                ancestor(uid) AS (\\n                SELECT parent FROM parent_of WHERE uid=\" + uid + \"\\n                UNION ALL\\n                SELECT parent FROM parent_of JOIN ancestor USING(uid) )\\n\\t\\t\\t\\tSELECT * from ancestor\")\r\n            .then(function (result) {\r\n            if (_this.dbType === 'pg') {\r\n                result = result.rows;\r\n            }\r\n            return result.filter(function (a) { return a.uid !== null; }).map(function (a) { return a.uid; });\r\n        });\r\n    };\r\n    Database.prototype.getChildrenOf = function (uid, tableName) {\r\n        var _this = this;\r\n        return this.knex.raw(\"\\n            WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM \" + tableName + \"),\\n                ancestor(parent) AS (\\n                SELECT uid FROM parent_of WHERE uid=\" + uid + \"\\n                UNION ALL\\n                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\\n\\t\\t\\t\\tSELECT * from ancestor\")\r\n            .then(function (result) {\r\n            if (_this.dbType === 'pg') {\r\n                result = result.rows;\r\n            }\r\n            return result.filter(function (a) { return a.parent !== null; }).map(function (a) { return a.parent; });\r\n        });\r\n    };\r\n    Database.prototype.checkIntegrity = function (trx) {\r\n        var toInt = this.dbType === 'pg' ? '::int' : '';\r\n        return Promise.all([\r\n            this.knex.transacting(trx).select(this.knex.raw(\"SUM((records.value_type != predicates.range_type)\" + toInt + \") AS valid\"))\r\n                .from('records')\r\n                .innerJoin('predicates', 'records.predicate', 'predicates.uid'),\r\n            this.knex.transacting(trx).select(this.knex.raw(\"\\n                SUM((\\n\\n                entities.type not in (\\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM entity_types),\\n                                ancestor(parent) AS (\\n                                SELECT uid FROM parent_of WHERE uid=predicates.range_ref\\n                                UNION ALL\\n                                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\\n                                SELECT * from ancestor\\n                )\\n\\n                )\" + toInt + \") as valid\\n            \"))\r\n                .from('records')\r\n                .innerJoin('predicates', 'records.predicate', 'predicates.uid')\r\n                .innerJoin('entities', 'entities.uid', 'records.value_entity')\r\n                .where('records.value_type', '=', 'entity'),\r\n            this.knex.transacting(trx).select(this.knex.raw(\"\\n               SUM((\\n\\n                entities.type not in (\\n                    WITH RECURSIVE parent_of(uid, parent) AS  (SELECT uid, parent FROM entity_types),\\n                                ancestor(parent) AS (\\n                                SELECT uid FROM parent_of WHERE uid=predicates.domain\\n                                UNION ALL\\n                                SELECT uid FROM parent_of JOIN ancestor USING(parent) )\\n                                SELECT * from ancestor\\n                )\\n\\n                )\" + toInt + \") as valid\\n            \"))\r\n                .from('records')\r\n                .innerJoin('predicates', 'records.predicate', 'predicates.uid')\r\n                .innerJoin('entities', 'entities.uid', 'records.entity')\r\n        ]).then(function (_a) {\r\n            var a = _a[0][0], b = _a[1][0], c = _a[2][0];\r\n            return (parseInt(a.valid === null ? 0 : a.valid) +\r\n                parseInt(b.valid === null ? 0 : b.valid) +\r\n                parseInt(c.valid === null ? 0 : c.valid) === 0);\r\n        });\r\n    };\r\n    return Database;\r\n}());\r\nexports.Database = Database;\r\n//# sourceMappingURL=Database.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/data/Database.js\n// module id = 32\n// module chunks = 0","\"use strict\";\r\n/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\nvar itemTypes_1 = require(\"../../common/itemTypes\");\r\nvar ServerApiService_1 = require(\"../ServerApiService\");\r\nvar QueryEngine_1 = require(\"../QueryEngine\");\r\nvar controllers_1 = require(\"../../backend/controllers/controllers\");\r\nexports.wrapDatabase = function (db, fakeCreator) {\r\n    var routes = new Map([\r\n        [itemTypes_1.itemTypes.element_set.machineName, new controllers_1.ElementSetController(db)],\r\n        [itemTypes_1.itemTypes.record.machineName, new controllers_1.RecordController(db)],\r\n        [itemTypes_1.itemTypes.entity_type.machineName, new controllers_1.EntityTypeController(db)],\r\n        [itemTypes_1.itemTypes.entity.machineName, new controllers_1.EntityController(db)],\r\n        [itemTypes_1.itemTypes.predicate.machineName, new controllers_1.PredicateController(db)],\r\n        [itemTypes_1.itemTypes.source.machineName, new controllers_1.SourceController(db)],\r\n        [itemTypes_1.itemTypes.element.machineName, new controllers_1.ElementController(db)],\r\n        [itemTypes_1.itemTypes.source_element.machineName, new controllers_1.SourceElementController(db)]\r\n    ]);\r\n    return new ServerApiService_1.ServerApiService(db, routes, new QueryEngine_1.QueryEngine(db), fakeCreator);\r\n};\r\n//# sourceMappingURL=wrapDatabase.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/data/wrapDatabase.js\n// module id = 33\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n//https://react-router.now.sh/Match\r\nvar React = require(\"react\");\r\nvar react_router_1 = require(\"react-router\");\r\nvar RouteNotFound_1 = require(\"./views/RouteNotFound\");\r\nvar ApiService_1 = require(\"./ApiService\");\r\nvar itemTypes_1 = require(\"./itemTypes\");\r\nvar Admin_1 = require(\"./views/Admin\");\r\nvar AdminApp_1 = require(\"../app/AdminApp\");\r\nvar User_1 = require(\"./views/User\");\r\nvar UserManagement_1 = require(\"./views/UserManagement\");\r\nvar AppDownload_1 = require(\"./views/AppDownload\");\r\nvar DatabaseUpload_1 = require(\"./views/DatabaseUpload\");\r\nvar react_router_2 = require(\"react-router\");\r\nvar ObjectEditor_1 = require(\"./views/ObjectEditor\");\r\nvar FalconApp = (function (_super) {\r\n    __extends(FalconApp, _super);\r\n    function FalconApp(props) {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            user: '',\r\n            stats: null,\r\n            tabsets: []\r\n        };\r\n        return _this;\r\n    }\r\n    FalconApp.prototype.componentDidMount = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            var userData, tabsets;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(this.props.environment === 'website' && window !== undefined)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, fetch('/currentuser', { credentials: 'same-origin' })\r\n                                .then(function (response) { return response.json(); })];\r\n                    case 1:\r\n                        userData = _a.sent();\r\n                        return [4 /*yield*/, fetch('/tabset', { credentials: 'same-origin' })\r\n                                .then(function (response) { return response.json(); })];\r\n                    case 2:\r\n                        tabsets = _a.sent();\r\n                        this.setState({ user: userData.username, tabsets: tabsets });\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        this.props.api.getStats()\r\n                            .then(function (stats) {\r\n                            _this.setState({ stats: stats });\r\n                        });\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FalconApp.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"div\", { id: 'main', className: 'flex-fill' },\r\n            React.createElement(this.props.router, __assign({}, this.props.routerSettings, { className: 'flex-fill', basename: 'http://localhost:8080' }),\r\n                React.createElement(\"div\", { className: 'flex-fill', style: { flexDirection: 'column' } },\r\n                    React.createElement(\"div\", { className: 'header' },\r\n                        React.createElement(react_router_2.Link, { to: '/', className: 'logo-link' },\r\n                            React.createElement(\"div\", { className: 'logo' }, \"VRE\")),\r\n                        React.createElement(react_router_2.Link, { to: '/', className: 'header-link' }, \"Home\"),\r\n                        React.createElement(react_router_2.Link, { accessKey: 's', to: '/edit/' + ApiService_1.AppUrls.source, className: 'header-link source' }, itemTypes_1.itemTypes.source.plural),\r\n                        React.createElement(react_router_2.Link, { accessKey: 'e', to: '/edit/' + ApiService_1.AppUrls.entity, className: 'header-link entity' }, itemTypes_1.itemTypes.entity.plural),\r\n                        React.createElement(react_router_2.Link, { accessKey: 'p', to: '/edit/' + ApiService_1.AppUrls.predicate, className: 'header-link predicate' }, itemTypes_1.itemTypes.predicate.plural),\r\n                        React.createElement(react_router_2.Link, { accessKey: 't', to: '/edit/' + ApiService_1.AppUrls.entity_type, className: 'header-link entity_type' }, itemTypes_1.itemTypes.entity_type.plural),\r\n                        this.props.environment === 'website' ? (React.createElement(\"div\", { className: 'right-header' },\r\n                            React.createElement(react_router_2.Link, { to: '/user', className: 'header-link' },\r\n                                React.createElement(\"span\", { className: 'current-user' }, this.state.user)),\r\n                            React.createElement(\"a\", { href: '/logout', className: 'header-link' }, \"Logout\"),\r\n                            React.createElement(\"a\", { href: '/', className: 'header-link' },\r\n                                React.createElement(\"i\", { className: 'fa fa-external-link' })))) : null),\r\n                    this.props.environment === 'website' ? (React.createElement(react_router_1.Match, { exactly: true, pattern: '/', render: function (matchprops) { return (React.createElement(Admin_1.Admin, __assign({}, matchprops, { stats: _this.state.stats, tabsets: _this.state.tabsets }))); } })) : (React.createElement(react_router_1.Match, { exactly: true, pattern: '/', render: function (matchprops) { return (React.createElement(AdminApp_1.AdminApp, __assign({}, matchprops, { stats: _this.state.stats }))); } })),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/user', component: User_1.User }),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/users', component: UserManagement_1.UserManagement }),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/app', component: AppDownload_1.AppDownload }),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/upload', component: DatabaseUpload_1.DatabaseUpload }),\r\n                    React.createElement(react_router_1.Match, { exactly: true, pattern: '/search', render: function (matchprops) { return (React.createElement(ObjectEditor_1.ObjectEditor, __assign({ api: _this.props.api }, matchprops, { workspace: 'search' }))); } }),\r\n                    React.createElement(react_router_1.Match, { pattern: '/edit/:workspace', render: function (matchprops) { return (React.createElement(ObjectEditor_1.ObjectEditor, __assign({ api: _this.props.api }, matchprops, { workspace: matchprops.params.workspace === 'property' ? 'predicate' : matchprops.params.workspace }))); } }),\r\n                    React.createElement(react_router_1.Miss, { component: RouteNotFound_1.RouteNotFound })))));\r\n    };\r\n    return FalconApp;\r\n}(React.Component));\r\nexports.FalconApp = FalconApp;\r\n//# sourceMappingURL=FalconApp.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/FalconApp.js\n// module id = 34\n// module chunks = 0","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"react-dom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom\"\n// module id = 36\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar StatsGrid_1 = require(\"../common/stats/StatsGrid\");\r\nexports.AdminApp = function (props) { return (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"VRE App\"),\r\n        props.stats !== null ? (React.createElement(StatsGrid_1.StatsGrid, { stats: props.stats })) : null))); };\r\n//# sourceMappingURL=AdminApp.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/app/AdminApp.js\n// module id = 37\n// module chunks = 0","/**\r\n * @fileOverview Query processor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar graphql_1 = require(\"graphql\");\r\nvar entityQLType_1 = require(\"./graphql/entityQLType\");\r\nvar predicateQLType_1 = require(\"./graphql/predicateQLType\");\r\nvar QueryEngine = (function () {\r\n    function QueryEngine(db) {\r\n        var entityType = entityQLType_1.entityQLType(db, predicateQLType_1.predicateQLType(db));\r\n        // Define the Query type\r\n        var queryType = new graphql_1.GraphQLObjectType({\r\n            name: 'Query',\r\n            fields: {\r\n                entity: {\r\n                    type: new graphql_1.GraphQLList(entityType),\r\n                    // `args` describes the arguments that the `user` query accepts\r\n                    args: {\r\n                        uid: { type: graphql_1.GraphQLString }\r\n                    },\r\n                    resolve: function (_, _a) {\r\n                        var uid = _a.uid;\r\n                        if (uid === undefined) {\r\n                            return db.query()('entities');\r\n                        }\r\n                        return db.query()('entities').where({ uid: uid });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.schema = new graphql_1.GraphQLSchema({\r\n            query: queryType\r\n        });\r\n    }\r\n    QueryEngine.prototype.runQuery = function (query) {\r\n        return graphql_1.graphql(this.schema, query);\r\n    };\r\n    return QueryEngine;\r\n}());\r\nexports.QueryEngine = QueryEngine;\r\n//# sourceMappingURL=QueryEngine.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/QueryEngine.js\n// module id = 38\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar Exceptions_1 = require(\"../common/Exceptions\");\r\nvar moment = require(\"moment\");\r\nvar ApiService_1 = require(\"../common/ApiService\");\r\nexports.AppUrls = ApiService_1.AppUrls;\r\nvar GeneralStatisticsController_1 = require(\"./stats/GeneralStatisticsController\");\r\nvar ServerApiService = (function () {\r\n    function ServerApiService(db, routesMap, queryEngine, fakeCreator) {\r\n        this.controllerMap = routesMap;\r\n        this.queryEngine = queryEngine;\r\n        this.fakeCreator = fakeCreator;\r\n        this.db = db;\r\n    }\r\n    ServerApiService.prototype.getItem = function (obj, baseUrl, uid) {\r\n        var controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.getItemJson(obj, uid);\r\n    };\r\n    ServerApiService.prototype.getCollection = function (obj, baseUrl, params) {\r\n        var controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.getCollectionJson(obj, params);\r\n    };\r\n    ServerApiService.prototype.postItem = function (obj, baseUrl, data, params) {\r\n        var controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.postItem(obj, Object.assign(data, {\r\n            creationTimestamp: moment().toISOString(),\r\n            lastmodifiedTimestamp: moment().toISOString(),\r\n            creator: this.fakeCreator ? 0 : data.creator\r\n        }), params);\r\n    };\r\n    ServerApiService.prototype.putItem = function (obj, baseUrl, uid, data) {\r\n        var controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.putItem(obj, uid, Object.assign(data, {\r\n            lastmodifiedTimestamp: moment().toISOString()\r\n        }));\r\n    };\r\n    ServerApiService.prototype.patchItem = function (obj, baseUrl, uid, data) {\r\n        var controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.patchItem(obj, uid, Object.assign(data, {\r\n            lastmodifiedTimestamp: moment().toISOString()\r\n        }));\r\n    };\r\n    ServerApiService.prototype.delItem = function (obj, baseUrl, uid) {\r\n        var controller = this.controllerMap.get(baseUrl);\r\n        if (controller === undefined) {\r\n            return Promise.reject(new Exceptions_1.CollectionNotFoundException('Controller not found'));\r\n        }\r\n        return controller.deleteItem(obj, uid);\r\n    };\r\n    ServerApiService.prototype.query = function (graphQLQuery) {\r\n        return Promise.resolve({});\r\n    };\r\n    ServerApiService.prototype.getStats = function () {\r\n        return GeneralStatisticsController_1.GeneralStatisticsController(this.db.query());\r\n    };\r\n    return ServerApiService;\r\n}());\r\nexports.ServerApiService = ServerApiService;\r\n//# sourceMappingURL=ServerApiService.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/ServerApiService.js\n// module id = 39\n// module chunks = 0","/**\r\n * @fileOverview Controller for elements\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar GenericController_1 = require(\"./GenericController\");\r\nvar ElementController = (function (_super) {\r\n    __extends(ElementController, _super);\r\n    function ElementController(db) {\r\n        return _super.call(this, db, 'elements') || this;\r\n    }\r\n    ElementController.prototype.toSchema = function (data) {\r\n        return falcon_core_1.Serializer.toJson(data);\r\n    };\r\n    ElementController.prototype.fromSchema = function (data) {\r\n        return Object.assign(Object.create(falcon_core_1.Element.prototype), data);\r\n    };\r\n    return ElementController;\r\n}(GenericController_1.GenericController));\r\nexports.ElementController = ElementController;\r\n//# sourceMappingURL=ElementController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/ElementController.js\n// module id = 40\n// module chunks = 0","/**\r\n * @fileOverview Controller for element sets\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar GenericController_1 = require(\"./GenericController\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar ElementSetController = (function (_super) {\r\n    __extends(ElementSetController, _super);\r\n    function ElementSetController(db) {\r\n        return _super.call(this, db, 'element_sets') || this;\r\n    }\r\n    ElementSetController.toSchema = function (data) {\r\n        return lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'elements');\r\n    };\r\n    ElementSetController.fromSchema = function (data) {\r\n        return __assign({}, Object.create(falcon_core_1.ElementSet.prototype), data);\r\n        // return Object.assign(Object.create(ElementSet.prototype), data);\r\n    };\r\n    ElementSetController.prototype.toSchema = function (data) {\r\n        return ElementSetController.toSchema(data);\r\n    };\r\n    ElementSetController.prototype.fromSchema = function (data) {\r\n        return ElementSetController.fromSchema(data);\r\n    };\r\n    ElementSetController.prototype.getItemJson = function (obj, uid) {\r\n        var _this = this;\r\n        return _super.prototype.getItemJson.call(this, obj, uid)\r\n            .then(function (elementSet) {\r\n            if (elementSet.uid === null) {\r\n                throw new Error('could not find source');\r\n            }\r\n            return _this.db.select('elements')\r\n                .where({ 'element_set': elementSet.uid })\r\n                .then(function (elements) {\r\n                elementSet.elements = elements;\r\n                return elementSet;\r\n            });\r\n        });\r\n    };\r\n    return ElementSetController;\r\n}(GenericController_1.GenericController));\r\nexports.ElementSetController = ElementSetController;\r\n//# sourceMappingURL=ElementSetController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/ElementSetController.js\n// module id = 41\n// module chunks = 0","/**\r\n * @fileOverview Controller for entity types\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar GenericController_1 = require(\"./GenericController\");\r\nvar PredicateController_1 = require(\"./PredicateController\");\r\nvar EntityController_1 = require(\"./EntityController\");\r\nvar Exceptions_1 = require(\"../../common/Exceptions\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar EntityTypeController = (function (_super) {\r\n    __extends(EntityTypeController, _super);\r\n    function EntityTypeController(db) {\r\n        return _super.call(this, db, 'entity_types') || this;\r\n    }\r\n    EntityTypeController.prototype.toSchema = function (data) {\r\n        return Object.assign(lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'sameAs', 'parents', 'children', 'creationTimestamp', 'lastmodifiedTimestamp'), {\r\n            same_as: data.sameAs,\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timestamp: data.lastmodifiedTimestamp\r\n        });\r\n    };\r\n    EntityTypeController.prototype.fromSchema = function (data) {\r\n        return Object.assign(Object.create(falcon_core_1.EntityType.prototype), Object.assign(data, {\r\n            'sameAs': data.same_as\r\n        }));\r\n    };\r\n    EntityTypeController.prototype.getItemJson = function (obj, uid) {\r\n        var _this = this;\r\n        return _super.prototype.getItemJson.call(this, obj, uid)\r\n            .then(function (result) {\r\n            return Promise.all([\r\n                _this.db.getAncestorsOf(uid, 'entity_types'),\r\n                _this.db.select('entity_types', ['uid']).where({ parent: uid })\r\n            ])\r\n                .then(function (_a) {\r\n                var parents = _a[0], children = _a[1];\r\n                result.parents = parents;\r\n                result.children = children.map(function (child) { return child.uid; });\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    EntityTypeController.prototype.deleteItem = function (obj, uid) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, entityTypes, entities, predicates;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, Promise.all([\r\n                            this.db.select(this.tableName).where('parent', '=', uid),\r\n                            this.db.select('entities').where('type', '=', uid),\r\n                            this.db.select('predicates').where('domain', '=', uid).orWhere('range_ref', '=', uid)\r\n                        ])];\r\n                    case 1:\r\n                        _a = _b.sent(), entityTypes = _a[0], entities = _a[1], predicates = _a[2];\r\n                        if (entities.length + entityTypes.length + predicates.length === 0) {\r\n                            return [2 /*return*/, this.db.deleteItem(this.tableName, uid)];\r\n                        }\r\n                        else {\r\n                            throw new Exceptions_1.OperationNotPermittedException({\r\n                                message: 'The operation could not be completed as the entity is referenced in other sources',\r\n                                data: Promise.resolve({\r\n                                    entityType: entityTypes.map(function (entityType) { return EntityController_1.EntityController.fromSchema(entityType); }),\r\n                                    entity: entities.map(function (entity) { return EntityController_1.EntityController.fromSchema(entity); }),\r\n                                    predicate: predicates.map(function (predicate) { return PredicateController_1.PredicateController.fromSchema(predicate); })\r\n                                })\r\n                            });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return EntityTypeController;\r\n}(GenericController_1.GenericController));\r\nexports.EntityTypeController = EntityTypeController;\r\n//# sourceMappingURL=EntityTypeController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/EntityTypeController.js\n// module id = 42\n// module chunks = 0","/**\r\n * @fileOverview Controller for sources\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar GenericController_1 = require(\"./GenericController\");\r\nvar Exceptions_1 = require(\"../../common/Exceptions\");\r\nvar RecordController_1 = require(\"./RecordController\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar SourceController = (function (_super) {\r\n    __extends(SourceController, _super);\r\n    function SourceController(db) {\r\n        return _super.call(this, db, 'sources') || this;\r\n    }\r\n    SourceController.prototype.toSchema = function (data) {\r\n        var allowedKeys = new Set(['uid', 'label', 'parent', 'sameAs', 'readonly', 'creator', 'creationTimestamp', 'lastmodifiedTimestamp']);\r\n        var extraKeys = Object.keys(data).filter(function (a) { return !allowedKeys.has(a); });\r\n        if (extraKeys.length > 0) {\r\n            throw new Exceptions_1.InvalidUpdateException('Unknown keys: ' + extraKeys.join(', '));\r\n        }\r\n        return Object.assign({}, lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'metaData', 'sameAs', 'parents', 'children', 'creationTimestamp', 'lastmodifiedTimestamp'), {\r\n            same_as: data.sameAs,\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timestamp: data.lastmodifiedTimestamp\r\n        });\r\n    };\r\n    SourceController.prototype.fromSchema = function (data) {\r\n        return Object.assign(Object.create(falcon_core_1.Source.prototype), Object.assign(lodash_1.omit(data, 'same_as', 'creation_timestamp', 'lastmodified_timestamp'), {\r\n            'sameAs': data.same_as,\r\n            'creationTimestamp': data.creation_timestamp,\r\n            'lastmodifiedTimestamp': data.lastmodified_timestamp\r\n        }));\r\n    };\r\n    // override the getItemJson and getCollectionJson functions to also get information about the\r\n    // metadata associated with the retrieved source\r\n    SourceController.prototype.getMetadata = function (fields, sourceId) {\r\n        var _this = this;\r\n        return this.db.getAncestorsOf(sourceId, 'sources')\r\n            .then(function (parents) {\r\n            parents = [sourceId].concat(parents);\r\n            return Promise.all(parents.map(function (parent) {\r\n                return _this.db.query().select(fields)\r\n                    .from('source_elements')\r\n                    .innerJoin('elements', function () { this.on('source_elements.element', '=', 'elements.uid'); })\r\n                    .innerJoin('element_sets', function () { this.on('element_sets.uid', '=', 'elements.element_set'); })\r\n                    .where({ 'source_elements.source': parent });\r\n            })).then(function (results) {\r\n                var a = lodash_1.groupBy(lodash_1.flatten(results), 'label');\r\n                return Object.keys(a).reduce(function (prev, cur) {\r\n                    var meta = lodash_1.omit(a[cur][0], 'source', 'value');\r\n                    meta['values'] = a[cur]\r\n                        .map(function (val) { return ({ source: val.source, value: val.value, uid: val.uid }); })\r\n                        .sort(function (a, b) { return parents.indexOf(a.source) - parents.indexOf(b.source); });\r\n                    return Object.assign(prev, (_a = {}, _a[cur] = meta, _a));\r\n                    var _a;\r\n                }, {});\r\n            });\r\n        });\r\n    };\r\n    SourceController.prototype.getItemJson = function (obj, uid) {\r\n        var _this = this;\r\n        return _super.prototype.getItemJson.call(this, obj, uid)\r\n            .then(function (source) {\r\n            if (source.uid === null) {\r\n                throw new Error('could not find source');\r\n            }\r\n            return Promise.all([\r\n                _this.getMetadata([\r\n                    'source_elements.source as source',\r\n                    'elements.label',\r\n                    'source_elements.value',\r\n                    'elements.description',\r\n                    'element_sets.label as element_set',\r\n                    'elements.comment',\r\n                    'elements.uri',\r\n                    'elements.uid as element_uid'\r\n                ], source.uid),\r\n                _this.db.query().select('uid').from('sources').where({ parent: uid }),\r\n                _this.db.getAncestorsOf(uid, 'sources')\r\n            ])\r\n                .then(function (_a) {\r\n                var sourceElements = _a[0], children = _a[1], parents = _a[2];\r\n                source.metaData = sourceElements;\r\n                source.children = children.map(function (child) { return child.uid; }).filter(function (child) { return child !== null; });\r\n                source.parents = parents;\r\n                return source;\r\n            });\r\n        });\r\n    };\r\n    SourceController.prototype.getCollectionJson = function (obj, params) {\r\n        var _this = this;\r\n        if (params === void 0) { params = {}; }\r\n        return _super.prototype.getCollectionJson.call(this, obj, params)\r\n            .then(function (sources) {\r\n            return Promise.all(sources.map(function (source) {\r\n                if (source.uid === null) {\r\n                    throw new Error('could not find source');\r\n                }\r\n                return _this.getMetadata([\r\n                    'elements.label',\r\n                    'source_elements.value'\r\n                ], source.uid)\r\n                    .then(function (sourceElements) {\r\n                    source.metaData = sourceElements;\r\n                    return source;\r\n                });\r\n            }));\r\n        });\r\n    };\r\n    //TODO should find every child source, not just the direct children\r\n    SourceController.prototype.deleteItem = function (obj, uid) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            var _a, records, sources;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, Promise.all([\r\n                            this.db.loadCollection('records', { source: uid }),\r\n                            this.db.loadCollection('sources', { parent: uid })\r\n                        ])];\r\n                    case 1:\r\n                        _a = _b.sent(), records = _a[0], sources = _a[1];\r\n                        if (records.length + sources.length === 0) {\r\n                            return [2 /*return*/, this.db.deleteItem(this.tableName, uid)];\r\n                        }\r\n                        else {\r\n                            throw new Exceptions_1.OperationNotPermittedException({\r\n                                message: 'The operation could not be completed as the source is used by other records',\r\n                                data: Promise.resolve({\r\n                                    record: records.map(function (record) { return RecordController_1.RecordController.fromSchema(record); }),\r\n                                    source: sources.map(function (source) { return _this.fromSchema(source); })\r\n                                })\r\n                            });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SourceController;\r\n}(GenericController_1.GenericController));\r\nexports.SourceController = SourceController;\r\n//# sourceMappingURL=SourceController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/SourceController.js\n// module id = 43\n// module chunks = 0","/**\r\n * @fileOverview Controller for source elements\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar GenericController_1 = require(\"./GenericController\");\r\nvar Exceptions_1 = require(\"../../common/Exceptions\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar SourceElementController = (function (_super) {\r\n    __extends(SourceElementController, _super);\r\n    function SourceElementController(db) {\r\n        return _super.call(this, db, 'source_elements') || this;\r\n    }\r\n    SourceElementController.prototype.toSchema = function (data) {\r\n        return Object.assign(lodash_1.omit(falcon_core_1.Serializer.toJson(data), 'creationTimestamp', 'lastmodifiedTimestamp', 'uid', 'label'), {\r\n            creation_timestamp: data.creationTimestamp,\r\n            lastmodified_timestamp: data.lastmodifiedTimestamp,\r\n            // TODO: check these exist\r\n            source: data.uid.values['source'],\r\n            element: data.uid.values['element']\r\n        });\r\n    };\r\n    SourceElementController.prototype.fromSchema = function (data) {\r\n        return Object.assign(Object.create(falcon_core_1.SourceElement.prototype), Object.assign(data, {\r\n            uid: {\r\n                order: ['source', 'element'],\r\n                values: {\r\n                    source: data.source,\r\n                    element: data.element\r\n                }\r\n            }\r\n        }));\r\n    };\r\n    SourceElementController.prototype.getItemJson = function (obj, uid) {\r\n        var _this = this;\r\n        return this.db.query().select()\r\n            .from(this.tableName)\r\n            .where(uid.values)\r\n            .first()\r\n            .then(function (result) { return result === undefined ? Promise.reject(new Exceptions_1.KeyNotFoundException()) : result; })\r\n            .then(function (data) { return _this.fromSchema(data); });\r\n    };\r\n    SourceElementController.prototype.putItem = function (obj, uid, data) {\r\n        return this.db.query()(this.tableName)\r\n            .where(uid.values)\r\n            .update(this.toSchema(data));\r\n    };\r\n    SourceElementController.prototype.patchItem = function (obj, uid, data) {\r\n        var schemaData = this.toSchema(data);\r\n        var keys = Object.keys(schemaData);\r\n        var updateObject = {};\r\n        for (var i = 0; i < keys.length; i += 1) {\r\n            if (schemaData[keys[i]] !== undefined) {\r\n                updateObject[keys[i]] = schemaData[keys[i]];\r\n            }\r\n        }\r\n        return this.db.query()(this.tableName)\r\n            .where(uid.values)\r\n            .update(updateObject)\r\n            .then(function () { return true; })\r\n            .catch(function (err) { throw new Error(err); });\r\n    };\r\n    SourceElementController.prototype.deleteItem = function (obj, uid) {\r\n        return this.db.query()(this.tableName)\r\n            .where(uid.values)\r\n            .del();\r\n    };\r\n    return SourceElementController;\r\n}(GenericController_1.GenericController));\r\nexports.SourceElementController = SourceElementController;\r\n//# sourceMappingURL=SourceElementController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/SourceElementController.js\n// module id = 44\n// module chunks = 0","/**\r\n * @fileOverview Collated list of controllers\r\n * @author <a href='mailto:tim.hollies@warwick.ac.uk'>Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar ElementSetController_1 = require(\"./ElementSetController\");\r\nexports.ElementSetController = ElementSetController_1.ElementSetController;\r\nvar EntityController_1 = require(\"./EntityController\");\r\nexports.EntityController = EntityController_1.EntityController;\r\nvar EntityTypeController_1 = require(\"./EntityTypeController\");\r\nexports.EntityTypeController = EntityTypeController_1.EntityTypeController;\r\nvar PredicateController_1 = require(\"./PredicateController\");\r\nexports.PredicateController = PredicateController_1.PredicateController;\r\nvar RecordController_1 = require(\"./RecordController\");\r\nexports.RecordController = RecordController_1.RecordController;\r\nvar SourceController_1 = require(\"./SourceController\");\r\nexports.SourceController = SourceController_1.SourceController;\r\nvar ElementController_1 = require(\"./ElementController\");\r\nexports.ElementController = ElementController_1.ElementController;\r\nvar SourceElementController_1 = require(\"./SourceElementController\");\r\nexports.SourceElementController = SourceElementController_1.SourceElementController;\r\n//# sourceMappingURL=controllers.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/controllers/controllers.js\n// module id = 45\n// module chunks = 0","/**\r\n * @fileOverview Query processor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar graphql_1 = require(\"graphql\");\r\nexports.entityQLType = function (db, predicateType) {\r\n    return new graphql_1.GraphQLObjectType({\r\n        name: 'Entity',\r\n        fields: {\r\n            uid: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: function (parent, _a) {\r\n                    return parent.uid;\r\n                }\r\n            },\r\n            label: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: function (parent, _a) {\r\n                    return parent.label;\r\n                }\r\n            },\r\n            type: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: function (parent, _a) {\r\n                    return db.query()('entity_types').where({ uid: parent.type }).first().then(function (data) { return data.label; });\r\n                }\r\n            },\r\n            predicate: {\r\n                type: predicateType,\r\n                args: {\r\n                    name: { type: graphql_1.GraphQLString },\r\n                    uid: { type: graphql_1.GraphQLString }\r\n                },\r\n                resolve: function (entity, _a) {\r\n                    var name = _a.name, uid = _a.uid;\r\n                    if (name !== undefined) {\r\n                        return db.query()('predicates').where({ name: name }).first().then(function (predicate) { return ({ predicate: predicate, entity: entity }); });\r\n                    }\r\n                    if (uid !== undefined) {\r\n                        return db.query()('predicates').where({ uid: uid }).first().then(function (predicate) { return ({ predicate: predicate, entity: entity }); });\r\n                    }\r\n                }\r\n            },\r\n            predicates: {\r\n                type: new graphql_1.GraphQLList(predicateType),\r\n                args: {\r\n                    names: { type: new graphql_1.GraphQLList(graphql_1.GraphQLString) },\r\n                    uids: { type: new graphql_1.GraphQLList(graphql_1.GraphQLString) }\r\n                },\r\n                resolve: function (entity, _a) {\r\n                    var names = _a.names, uids = _a.uids;\r\n                    if (names !== undefined) {\r\n                        return db.query()('predicates')\r\n                            .whereIn('name', names)\r\n                            .then(function (predicates) { return predicates.map(function (predicate) { return ({ predicate: predicate, entity: entity }); }); });\r\n                    }\r\n                    if (uids !== undefined) {\r\n                        return db.query()('predicates')\r\n                            .whereIn('uid', uids)\r\n                            .then(function (predicates) { return predicates.map(function (predicate) { return ({ predicate: predicate, entity: entity }); }); });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n};\r\n//# sourceMappingURL=entityQLType.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/graphql/entityQLType.js\n// module id = 46\n// module chunks = 0","/**\r\n * @fileOverview Query processor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar graphql_1 = require(\"graphql\");\r\nexports.predicateQLType = function (db) {\r\n    return new graphql_1.GraphQLObjectType({\r\n        name: 'Predicate',\r\n        fields: {\r\n            uid: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: function (_a, _b) {\r\n                    var predicate = _a.predicate;\r\n                    return predicate.uid;\r\n                }\r\n            },\r\n            name: {\r\n                type: graphql_1.GraphQLString,\r\n                resolve: function (_a, _b) {\r\n                    var predicate = _a.predicate;\r\n                    return predicate.label;\r\n                }\r\n            },\r\n            values: {\r\n                type: new graphql_1.GraphQLList(graphql_1.GraphQLString),\r\n                resolve: function (_a, _b) {\r\n                    var entity = _a.entity, predicate = _a.predicate;\r\n                    return db.query()('records')\r\n                        .select('value_string')\r\n                        .where({ entity: entity.uid, predicate: predicate.uid })\r\n                        .then(function (results) { return results.map(function (result) { return result.value_string; }); });\r\n                }\r\n            }\r\n        }\r\n    });\r\n};\r\n//# sourceMappingURL=predicateQLType.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/graphql/predicateQLType.js\n// module id = 47\n// module chunks = 0","/**\r\n * @fileOverview Map of URIs to controllers\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nexports.GeneralStatisticsController = function (db) {\r\n    var countVarName = db.client.config.client === 'pg' ? 'count' : 'count(*)';\r\n    return Promise.all([\r\n        db('entities').count(),\r\n        db('entity_types').count(),\r\n        db('sources').count(),\r\n        db('records').count(),\r\n        db('predicates').count()\r\n    ]).then(function (_a) {\r\n        var entityCount = _a[0][0], entityTypeCount = _a[1][0], sourceCount = _a[2][0], recordCount = _a[3][0], predicateCount = _a[4][0];\r\n        var statistics = {\r\n            entity: entityCount[countVarName],\r\n            entityType: entityTypeCount[countVarName],\r\n            source: sourceCount[countVarName],\r\n            record: recordCount[countVarName],\r\n            predicate: predicateCount[countVarName]\r\n        };\r\n        return statistics;\r\n    });\r\n};\r\n//# sourceMappingURL=GeneralStatisticsController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/backend/stats/GeneralStatisticsController.js\n// module id = 48\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.Loading = function (props) {\r\n    return (React.createElement(\"div\", { className: 'loader-wrapper' },\r\n        React.createElement(\"div\", { className: 'loader' })));\r\n};\r\n//# sourceMappingURL=Loading.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/Loading.js\n// module id = 49\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar SearchBox_1 = require(\"./sidebar/SearchBox\");\r\nvar ApiService_1 = require(\"../ApiService\");\r\nvar react_router_1 = require(\"react-router\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar Handle = react_sortable_hoc_1.SortableHandle(function (props) { return (React.createElement(\"div\", { className: 'badge-container' },\r\n    React.createElement(\"div\", { className: 'badge ' + props.tabType },\r\n        React.createElement(\"span\", null, props.tabType[0].toUpperCase())))); });\r\nvar onCloseTab = function (e, tabType, uid, dataStore) {\r\n    dataStore.closeTab(tabType, uid);\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    e.nativeEvent.stopImmediatePropagation();\r\n};\r\nvar Card = react_sortable_hoc_1.SortableElement(mobx_react_1.observer(function (props) { return (React.createElement(\"li\", { key: \"\" + props.url },\r\n    React.createElement(\"div\", { className: (function (currentTab) {\r\n            var classes = ['sidebar-card', props.tab.tabClass];\r\n            if (currentTab) {\r\n                classes.push('current');\r\n            }\r\n            if (props.compact) {\r\n                classes.push('compact');\r\n            }\r\n            return classes.join(' ');\r\n        })(props.currentTab) },\r\n        React.createElement(Handle, { tabType: props.tab.tabType, index: props.index }),\r\n        React.createElement(\"div\", { className: 'description' },\r\n            React.createElement(react_router_1.Link, { to: props.url },\r\n                React.createElement(\"span\", { className: 'entity-name' }, props.title),\r\n                props.compact ? null : lodash_1.isObject(props.subtitle) ? (React.createElement(\"ul\", null, Object.keys(props.subtitle).map(function (sub, i) { return (React.createElement(\"li\", { key: \"tab-\" + props.index + \"-\" + i },\r\n                    sub,\r\n                    \":\",\r\n                    lodash_1.isObject(props.subtitle[sub]) ? (React.createElement(\"span\", null,\r\n                        React.createElement(\"ul\", null, Object.keys(props.subtitle[sub]).map(function (subSub, j) {\r\n                            return (React.createElement(\"li\", { key: \"tab-\" + props.index + \"-\" + i + \"-\" + j },\r\n                                subSub,\r\n                                \": \",\r\n                                props.subtitle[sub][subSub]));\r\n                        })))) : null)); }))) : (React.createElement(\"span\", { className: 'entity-type' }, props.subtitle)))),\r\n        React.createElement(\"span\", { className: 'lock-button' }, props.tab.tabType === 'source' ? (props.dataStore.defaultSource === props.tab.uid ?\r\n            (React.createElement(\"i\", { onClick: function () { return props.dataStore.defaultSource = null; }, className: 'fa fa-lock' })) :\r\n            (React.createElement(\"i\", { onClick: function () { return props.dataStore.defaultSource = props.tab.uid; }, className: 'fa fa-unlock' }))) : null),\r\n        !props.currentTab ? (React.createElement(\"span\", { className: 'close-button' },\r\n            React.createElement(\"i\", { className: 'fa fa-times', onClick: function (e) { return onCloseTab(e, props.tab.tabType, props.tab.uid, props.dataStore); } }))) : null))); }));\r\nvar CardList = mobx_react_1.observer(function (props) {\r\n    return (React.createElement(\"ul\", { className: 'card-list' }, props.dataStore.tabs.map(function (tab, index) {\r\n        // TODO: shouldn't be ==\r\n        var item = props.dataStore.dataStore.all[tab.tabType].value\r\n            .find(function (item) { return item.uid == tab.uid; });\r\n        var url = null;\r\n        if (tab.tabClass === 'item') {\r\n            url = \"/edit/\" + ApiService_1.AppUrls[tab.tabType] + \"/\" + tab.uid;\r\n        }\r\n        else {\r\n            if (tab.tabClass === 'view') {\r\n                url = {\r\n                    pathname: \"/edit/\" + ApiService_1.AppUrls[tab.tabType],\r\n                    query: tab.query\r\n                };\r\n            }\r\n        }\r\n        var subtitle = tab.tabClass === 'item' ?\r\n            lodash_1.capitalize(ApiService_1.AppUrls[tab.tabType]).replace('_', ' ') + ' ' + tab.uid\r\n            : tab.data;\r\n        var title = item === undefined ? tab.tabType + \" list\" : item.label;\r\n        var currentTab = !props.list && tab.tabType === props.workspace && tab.uid == props.id;\r\n        return (React.createElement(Card, { key: \"tab-\" + tab.tabType + \"-\" + tab.tabClass + \"-\" + tab.uid + \"-\" + tab.query, currentTab: currentTab, url: url, tab: tab, title: title, subtitle: subtitle, index: index, dataStore: props.dataStore, compact: props.compact }));\r\n    })));\r\n});\r\nvar Sidebar = (function (_super) {\r\n    __extends(Sidebar, _super);\r\n    function Sidebar() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            searchString: '',\r\n            compactMode: false\r\n        };\r\n        return _this;\r\n    }\r\n    Sidebar.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"section\", { id: 'sidebar' },\r\n            React.createElement(SearchBox_1.SearchBox, { searchString: this.state.searchString, dataStore: this.props.dataStore }),\r\n            React.createElement(\"div\", { className: 'sidebar-toolbar' },\r\n                React.createElement(\"button\", { onClick: function () { return _this.props.dataStore.clearAllTabs(); } },\r\n                    React.createElement(\"i\", { className: 'fa fa-trash' }),\r\n                    \" Clear All\"),\r\n                React.createElement(\"button\", { onClick: function () { return _this.props.modalStore.addModal({ name: 'createTabSet', cancel: lodash_1.noop, complete: lodash_1.noop, settings: {} }); } },\r\n                    React.createElement(\"i\", { className: 'fa fa-floppy-o' }),\r\n                    \" Save\"),\r\n                React.createElement(\"button\", { onClick: function () { return _this.setState({ compactMode: !_this.state.compactMode }); } },\r\n                    React.createElement(\"i\", { className: 'fa fa-compress' }),\r\n                    \" Compact\")),\r\n            React.createElement(\"div\", { className: 'card-list-container' },\r\n                React.createElement(CardList, { dataStore: this.props.dataStore, list: this.props.list, workspace: this.props.workspace, id: this.props.id, compact: this.state.compactMode }))));\r\n    };\r\n    return Sidebar;\r\n}(React.Component));\r\nSidebar = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], Sidebar);\r\nexports.Sidebar = Sidebar;\r\n//# sourceMappingURL=Sidebar.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/Sidebar.js\n// module id = 50\n// module chunks = 0","/**\r\n * @fileOverview Toast controller\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar Toast = (function (_super) {\r\n    __extends(Toast, _super);\r\n    function Toast() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            toasts: [],\r\n            nextId: 0\r\n        };\r\n        return _this;\r\n    }\r\n    Toast.prototype.addToast = function (title, message, level, lifeTime) {\r\n        var _this = this;\r\n        if (level === void 0) { level = 'warning'; }\r\n        if (lifeTime === void 0) { lifeTime = 3000; }\r\n        var id = this.state.nextId;\r\n        this.setState({\r\n            toasts: this.state.toasts.concat([{ title: title, message: message, level: level, lifeTime: lifeTime, id: id }]),\r\n            nextId: id + 1\r\n        });\r\n        setTimeout(function () {\r\n            _this.setState({\r\n                toasts: _this.state.toasts.filter(function (toast) { return toast.id !== id; })\r\n            });\r\n        }, lifeTime);\r\n    };\r\n    Toast.prototype.render = function () {\r\n        return (React.createElement(\"span\", null, this.state.toasts.map(function (toast, i) { return (React.createElement(\"div\", { key: \"toast-\" + toast.id, style: { bottom: (1 + 7 * i) + 'em' }, className: \"toast \" + toast.level },\r\n            React.createElement(\"div\", { className: 'title' }, toast.title),\r\n            React.createElement(\"div\", { className: 'message' }, toast.message))); })));\r\n    };\r\n    return Toast;\r\n}(React.Component));\r\nexports.Toast = Toast;\r\n//# sourceMappingURL=Toast.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/Toast.js\n// module id = 51\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar Loading_1 = require(\"./Loading\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar workspace_1 = require(\"./workspace/workspace\");\r\nvar Workspace = (function (_super) {\r\n    __extends(Workspace, _super);\r\n    function Workspace() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            searchString: ''\r\n        };\r\n        return _this;\r\n    }\r\n    Workspace.prototype.render = function () {\r\n        if (this.props.loading) {\r\n            return (React.createElement(Loading_1.Loading, null));\r\n        }\r\n        if (this.props.list) {\r\n            return (React.createElement(workspace_1.ObjectListWorkspace, { query: this.props.location.query, listType: this.props.workspace }));\r\n        }\r\n        var workspaceComponent = workspace_1.EmptyWorkspace;\r\n        switch (this.props.workspace) {\r\n            case 'entity':\r\n                workspaceComponent = workspace_1.EntityEditorWorkspace;\r\n                break;\r\n            case 'predicate':\r\n                workspaceComponent = workspace_1.PredicateEditorWorkspace;\r\n                break;\r\n            case 'source':\r\n                workspaceComponent = workspace_1.SourceEditorWorkspace;\r\n                break;\r\n            case 'entity_type':\r\n                workspaceComponent = workspace_1.EntityTypeWorkspace;\r\n                break;\r\n            case 'search':\r\n                workspaceComponent = workspace_1.AdvancedSearchWorkspace;\r\n                break;\r\n        }\r\n        return (React.createElement(\"div\", { className: 'flex-fill workspace-outer-wrapper' },\r\n            React.createElement(\"div\", { className: 'workspace-inner-wrapper flex-fill' }, React.createElement(workspaceComponent, { id: this.props.id }))));\r\n    };\r\n    return Workspace;\r\n}(React.Component));\r\nWorkspace = __decorate([\r\n    mobx_react_1.inject('dataStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], Workspace);\r\nexports.Workspace = Workspace;\r\n//# sourceMappingURL=Workspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/Workspace.js\n// module id = 52\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar DatePickerDropdown_1 = require(\"../fields/DatePickerDropdown\");\r\nexports.DateFieldEditor = function (props) {\r\n    return (React.createElement(\"div\", { className: 'date-selector' },\r\n        React.createElement(DatePickerDropdown_1.DatePickerDropdown, { value: props.value, setValue: props.onChange })));\r\n};\r\n//# sourceMappingURL=DateFieldEditor.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/entity_editor/DateFieldEditor.js\n// module id = 53\n// module chunks = 0","/**\r\n * @fileOverview Entity Field Editor - select box for entities\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar ComboDropdown_1 = require(\"../ComboDropdown\");\r\nvar lodash_1 = require(\"lodash\");\r\nexports.EntityFieldEditor = function (props) {\r\n    // build the options list\r\n    var options = props.entities.map(function (entity) {\r\n        return ({ key: entity.label, value: entity.uid !== null ? entity.uid : null });\r\n    });\r\n    // find the default option to display\r\n    var selectedOption = options.find(function (opt) {\r\n        return opt.value !== null && opt.value === props.value;\r\n    });\r\n    if (selectedOption === undefined) {\r\n        selectedOption = { key: '', value: null };\r\n    }\r\n    return (React.createElement(ComboDropdown_1.NumberComboDropdown, { options: options, typeName: 'entity type', allowNew: false, value: selectedOption, setValue: function (val) { return val !== null && val.value !== null ? props.onChange(val.value) : props.onChange(null); }, createNewValue: lodash_1.noop }));\r\n};\r\n//# sourceMappingURL=EntityFieldEditor.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/entity_editor/EntityFieldEditor.js\n// module id = 54\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.IntegerFieldEditor = function (props) {\r\n    var integerFieldChangeHandler = function (e) { return props.onChange(e.target.value); };\r\n    return (React.createElement(\"input\", { type: 'number', value: props.value, onChange: integerFieldChangeHandler }));\r\n};\r\n//# sourceMappingURL=IntegerFieldEditor.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/entity_editor/IntegerFieldEditor.js\n// module id = 55\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar EditableFieldComponent_1 = require(\"../fields/EditableFieldComponent\");\r\nvar RecordRow_1 = require(\"./RecordRow\");\r\nvar AddTabButton_1 = require(\"../AddTabButton\");\r\nvar RecordEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(RecordRow_1.RecordRow);\r\nvar RecordPredicate = (function (_super) {\r\n    __extends(RecordPredicate, _super);\r\n    function RecordPredicate() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            potentialValues: []\r\n        };\r\n        return _this;\r\n    }\r\n    RecordPredicate.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        if (this.props.predicate.rangeIsReference) {\r\n            this.props.dataStore.getCollection(falcon_core_1.Entity, ApiService_1.AppUrls.entity, { type: this.props.predicate.range })\r\n                .then(function (potentialValues) { return _this.setState({ potentialValues: potentialValues }); });\r\n        }\r\n    };\r\n    RecordPredicate.prototype.createNewRecord = function () {\r\n        this.props.dataStore.postItem(falcon_core_1.Record, ApiService_1.AppUrls.record, falcon_core_1.Serializer.fromJson(falcon_core_1.Record, {\r\n            predicate: this.props.predicate.uid,\r\n            entity: this.props.entity_id,\r\n            valueType: this.props.predicate.rangeIsReference ? 'entity' : this.props.predicate.range,\r\n            score: 3,\r\n            source: this.props.dataStore.defaultSource\r\n        }), {});\r\n    };\r\n    RecordPredicate.prototype.deleteRecord = function (record) {\r\n        var _this = this;\r\n        if (record.uid === null) {\r\n            throw new Error('Trying to delete a record with null id');\r\n        }\r\n        this.props.dataStore.delItem(falcon_core_1.Record, ApiService_1.AppUrls.record, record.uid)\r\n            .then(function () {\r\n            _this.props.onChange();\r\n        });\r\n    };\r\n    RecordPredicate.prototype.recordChanged = function (record) {\r\n        this.props.dataStore.putItem(falcon_core_1.Record, ApiService_1.AppUrls.record, this.props.entity_id, falcon_core_1.Serializer.toJson(record));\r\n    };\r\n    RecordPredicate.prototype.render = function () {\r\n        var _this = this;\r\n        if (this.props.predicate.uid === null) {\r\n            throw new Error('Expected uid to be a number, it was null');\r\n        }\r\n        return (React.createElement(\"section\", null,\r\n            React.createElement(\"h5\", { className: 'section-header' },\r\n                this.props.predicate.label,\r\n                \" \",\r\n                React.createElement(\"i\", { className: 'fa fa-plus-circle add button', \"aria-hidden\": 'true', onClick: this.createNewRecord.bind(this), title: \"Add new \" + this.props.predicate.label + \" record\" }),\r\n                React.createElement(AddTabButton_1.AddTabButton, { uid: this.props.predicate.uid, tabType: 'predicate' })),\r\n            React.createElement(\"table\", { className: 'record-editing-table' },\r\n                React.createElement(\"thead\", null,\r\n                    React.createElement(\"tr\", { className: 'record-row title' },\r\n                        React.createElement(\"th\", { className: 'record-row-item uid' }, \"ID\"),\r\n                        this.props.predicate.range !== 'source' ? (React.createElement(\"th\", { className: 'record-row-item' }, \"Value\")) : null,\r\n                        React.createElement(\"th\", { className: 'record-row-item' }, \"Source\"),\r\n                        React.createElement(\"th\", { className: 'record-row-item score' }, \"Score\"),\r\n                        React.createElement(\"th\", { className: 'record-row-item score' }, \"Period\"),\r\n                        React.createElement(\"th\", { className: 'record-row-item buttons' }, \"Actions\"))),\r\n                React.createElement(\"tbody\", null, this.props.records.map(function (record) { return (React.createElement(RecordEditableFieldComponent, { key: \"row-\" + record.uid, value: record, onChange: _this.recordChanged.bind(_this), onDelete: _this.deleteRecord.bind(_this), sources: _this.props.sources, entities: _this.state.potentialValues })); })))));\r\n    };\r\n    return RecordPredicate;\r\n}(React.Component));\r\nexports.RecordPredicate = RecordPredicate;\r\n//# sourceMappingURL=RecordPredicate.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/entity_editor/RecordPredicate.js\n// module id = 56\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar ScorePicker_1 = require(\"../fields/ScorePicker\");\r\nvar ComboDropdown_1 = require(\"../ComboDropdown\");\r\nvar StringFieldEditor_1 = require(\"./StringFieldEditor\");\r\nvar EntityFieldEditor_1 = require(\"./EntityFieldEditor\");\r\nvar DateFieldEditor_1 = require(\"./DateFieldEditor\");\r\nvar IntegerFieldEditor_1 = require(\"./IntegerFieldEditor\");\r\nvar AddTabButton_1 = require(\"../AddTabButton\");\r\nvar formatDate_1 = require(\"../../helper/formatDate\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar recordEditor = function (props, record) {\r\n    switch (record.valueType) {\r\n        case 'string':\r\n            return (React.createElement(StringFieldEditor_1.StringFieldEditor, { value: record.value || '', onChange: function (value) { return props.onChange(Object.assign(record, { value: value })); } }));\r\n        case 'date':\r\n            return (React.createElement(DateFieldEditor_1.DateFieldEditor, { value: record.value || '', onChange: function (value) { return props.onChange(Object.assign(record, { value: value })); } }));\r\n        case 'integer':\r\n            return (React.createElement(IntegerFieldEditor_1.IntegerFieldEditor, { value: record.value || '', onChange: function (value) { return props.onChange(Object.assign(record, { value: value })); } }));\r\n        case 'entity':\r\n            return (React.createElement(EntityFieldEditor_1.EntityFieldEditor, { value: record.value === null ? 0 : parseInt(record.value), onChange: function (value) { return props.onChange(Object.assign(record, { value: value })); }, entities: props.entities }));\r\n        default:\r\n            return (React.createElement(\"div\", null, \"Missing editor\"));\r\n    }\r\n};\r\nvar formatValue = function (props, record) {\r\n    if (record.valueType === 'entity') {\r\n        var entity = props.entities.find(function (entity) { return entity.uid == record.value; });\r\n        if (entity !== undefined) {\r\n            if (entity.uid === null) {\r\n                throw Error('Unexpected null ID on entity');\r\n            }\r\n            return (React.createElement(\"span\", null,\r\n                entity.label,\r\n                \" \",\r\n                React.createElement(AddTabButton_1.AddTabButton, { uid: entity.uid, tabType: 'entity' })));\r\n        }\r\n        else {\r\n            return (React.createElement(\"em\", null, \"Missing Entity\"));\r\n        }\r\n    }\r\n    if (record.valueType === 'date') {\r\n        return (React.createElement(\"span\", null, formatDate_1.formatDate(record.value)));\r\n    }\r\n    return (React.createElement(\"span\", null, record.value));\r\n};\r\nexports.RecordRow = mobx_react_1.inject('dataStore', 'modalStore')(mobx_react_1.observer(function (props) {\r\n    var createNewSource = function (initialValue) {\r\n        var a = {\r\n            name: 'source',\r\n            complete: function () {\r\n                // TODO : Automatically reload sources\r\n            },\r\n            cancel: function () { console.log('cancel'); },\r\n            settings: {\r\n                initialValue: initialValue\r\n            }\r\n        };\r\n        props.modalStore.addModal(a);\r\n    };\r\n    var recordValue = props.value;\r\n    if (recordValue === null) {\r\n        throw new Error('Should not be null!!');\r\n    }\r\n    var currentSource = recordValue.source === null ? undefined :\r\n        props.sources.find(function (source) { return source.uid === recordValue.source; });\r\n    var dropDownValue = {\r\n        key: '', value: recordValue.source === null ? null : recordValue.source\r\n    };\r\n    if (currentSource !== undefined) {\r\n        dropDownValue.key = currentSource.label;\r\n    }\r\n    if (props.edit) {\r\n        return (React.createElement(\"tr\", { className: 'record-row' },\r\n            React.createElement(\"td\", { className: 'record-row-item uid' }, recordValue.uid),\r\n            recordValue.valueType !== 'source' ? (React.createElement(\"td\", { className: 'record-row-item' }, recordEditor(props, recordValue))) : null,\r\n            React.createElement(\"td\", { className: 'record-row-item' },\r\n                React.createElement(ComboDropdown_1.NumberComboDropdown, { options: props.sources.map(function (source) {\r\n                        return ({ key: source.label, value: source.uid !== null ? source.uid : null });\r\n                    }), typeName: 'source', value: dropDownValue, setValue: function (combo) { return props.onChange(Object.assign(recordValue, { source: combo === null ? combo : combo.value })); }, createNewValue: function () { return createNewSource(''); } })),\r\n            React.createElement(\"td\", { className: 'record-row-item score' },\r\n                React.createElement(ScorePicker_1.ScorePicker, { value: recordValue.score, readOnly: false, onChange: function (score) { return props.onChange(Object.assign(recordValue, { score: score })); } })),\r\n            React.createElement(\"td\", { className: 'record-row-item period' },\r\n                React.createElement(DateFieldEditor_1.DateFieldEditor, { value: recordValue.period || '', onChange: function (period) { return props.onChange(Object.assign(recordValue, { period: period })); } })),\r\n            React.createElement(\"td\", { className: 'record-row-item buttons' },\r\n                React.createElement(\"button\", { onClick: props.acceptChanges },\r\n                    React.createElement(\"i\", { className: 'fa fa-check', \"aria-hidden\": 'true' })),\r\n                React.createElement(\"button\", { onClick: props.cancelChanges },\r\n                    React.createElement(\"i\", { className: 'fa fa-times', \"aria-hidden\": 'true' })))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"tr\", { className: 'record-row' },\r\n            React.createElement(\"td\", { className: 'record-row-item uid' },\r\n                \"#\",\r\n                recordValue.uid),\r\n            recordValue.valueType !== 'source' ? (React.createElement(\"td\", { className: 'record-row-item' }, formatValue(props, recordValue))) : null,\r\n            React.createElement(\"td\", { className: 'record-row-item' },\r\n                dropDownValue.key,\r\n                dropDownValue.key.length > 0 && dropDownValue.value !== null ? (React.createElement(AddTabButton_1.AddTabButton, { uid: dropDownValue.value, tabType: 'source' })) : null),\r\n            React.createElement(\"td\", { className: 'record-row-item score' },\r\n                React.createElement(ScorePicker_1.ScorePicker, { value: recordValue.score, readOnly: true })),\r\n            React.createElement(\"td\", { className: 'record-row-item period' }, formatDate_1.formatDate(recordValue.period)),\r\n            React.createElement(\"td\", { className: 'record-row-item buttons' },\r\n                React.createElement(\"button\", { onClick: props.setEdit },\r\n                    React.createElement(\"i\", { className: 'fa fa-pencil-square-o', title: 'Edit', \"aria-hidden\": 'true' })),\r\n                React.createElement(\"button\", { onClick: function () { return props.onDelete(props.value); } },\r\n                    React.createElement(\"i\", { className: 'fa fa-trash', \"aria-hidden\": 'true' })))));\r\n    }\r\n}));\r\n//# sourceMappingURL=RecordRow.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/entity_editor/RecordRow.js\n// module id = 57\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar SearchBar_1 = require(\"../SearchBar\");\r\nvar RecordPredicate_1 = require(\"./RecordPredicate\");\r\nvar findParentTree_1 = require(\"../../helper/findParentTree\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar RecordsEditor = (function (_super) {\r\n    __extends(RecordsEditor, _super);\r\n    function RecordsEditor() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            filterFunc: function () { return true; }\r\n        };\r\n        return _this;\r\n    }\r\n    RecordsEditor.prototype.deleteRecord = function (record) {\r\n        var _this = this;\r\n        if (record.uid === null) {\r\n            throw new Error('Trying to delete a record with null id');\r\n        }\r\n        this.props.dataStore.delItem(falcon_core_1.Record, ApiService_1.AppUrls.record, record.uid)\r\n            .then(function () {\r\n            _this.props.onChange();\r\n        });\r\n    };\r\n    RecordsEditor.prototype.createNewRecord = function () {\r\n        var entity = this.props.dataStore.dataStore.tabs.entity[this.props.id].value.entity;\r\n        var entityType = this.props.dataStore.dataStore.all.entity_type.value.find(function (t) { return t.uid === entity.entityType; });\r\n        var entityTypeParents = findParentTree_1.findParentTree(entity.entityType, this.props.dataStore.dataStore.all.entity_type.value);\r\n        var predicates = this.props.dataStore.dataStore.all.predicate\r\n            .value.filter(function (pred) { return entityTypeParents.indexOf(pred.domain) !== -1; });\r\n        var modalDef = {\r\n            name: 'record',\r\n            complete: function (data) {\r\n                console.log('Records editor called complete');\r\n                //this.loadData(this.props);\r\n            },\r\n            cancel: function () {\r\n                console.log('Records editor called cancel');\r\n            },\r\n            settings: {\r\n                options: predicates.map(function (pred) { return ({ key: pred.label, value: pred }); }),\r\n                entityUid: this.props.id,\r\n                entityType: this.props.entityTypeId\r\n            }\r\n        };\r\n        this.props.modalStore.addModal(modalDef);\r\n    };\r\n    RecordsEditor.prototype.render = function () {\r\n        var _this = this;\r\n        var predicates = this.props.predicates;\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(\"label\", { className: 'small' }, \"Records\"),\r\n                    React.createElement(\"div\", { style: { display: 'flex' } },\r\n                        React.createElement(\"div\", { style: { flex: '1' } },\r\n                            React.createElement(SearchBar_1.SearchBar, { getValue: function (p) { return p.label; }, setFilterFunc: function (filterFunc) { return _this.setState({ filterFunc: filterFunc }); } })),\r\n                        React.createElement(\"div\", { style: { padding: '0.1em 0.4em', fontSize: '2em' } },\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', \"aria-hidden\": 'true', onClick: this.createNewRecord.bind(this), title: 'Add new record' }))),\r\n                    React.createElement(\"div\", null, Object.keys(this.props.records).map(function (section) {\r\n                        var currentPredicate = predicates.find(function (pred) {\r\n                            if (pred.uid === null) {\r\n                                throw new Error('encountered predicate with null id');\r\n                            }\r\n                            return pred.uid.toString() === section;\r\n                        });\r\n                        if (currentPredicate === undefined) {\r\n                            throw new Error('Could not find predicate');\r\n                        }\r\n                        if (!_this.state.filterFunc(currentPredicate)) {\r\n                            return null;\r\n                        }\r\n                        return (React.createElement(RecordPredicate_1.RecordPredicate, { key: \"section-\" + section, entity_id: _this.props.id, dataStore: _this.props.dataStore, dimension: 'predicate', records: _this.props.records[section], predicate: currentPredicate, sources: _this.props.sources, onChange: _this.props.onChange }));\r\n                    }))))));\r\n    };\r\n    return RecordsEditor;\r\n}(React.Component));\r\nRecordsEditor = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], RecordsEditor);\r\nexports.RecordsEditor = RecordsEditor;\r\n//# sourceMappingURL=RecordsEditor.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/entity_editor/RecordsEditor.js\n// module id = 58\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.StringFieldEditor = function (props) {\r\n    return (React.createElement(\"input\", { type: 'text', value: props.value, onChange: function (e) { return props.onChange(e.target.value); } }));\r\n};\r\n//# sourceMappingURL=StringFieldEditor.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/entity_editor/StringFieldEditor.js\n// module id = 59\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar moment = require(\"moment\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar formatDate_1 = require(\"../../helper/formatDate\");\r\nvar DatePickerDropdown = (function (_super) {\r\n    __extends(DatePickerDropdown, _super);\r\n    function DatePickerDropdown() {\r\n        var _this = _super.call(this) || this;\r\n        //TODO: should be false\r\n        _this.state = {\r\n            showingDropDown: false\r\n        };\r\n        if (document !== undefined) {\r\n            _this.boundWindowClick = function () {\r\n                if (!_this.ignoreGlobalClick) {\r\n                    _this.setState({\r\n                        showingDropDown: false\r\n                    });\r\n                }\r\n                else {\r\n                    _this.ignoreGlobalClick = false;\r\n                }\r\n            };\r\n            document.body.addEventListener('click', _this.boundWindowClick);\r\n        }\r\n        return _this;\r\n    }\r\n    DatePickerDropdown.prototype.componentWillMount = function () {\r\n        this.ignoreBlur = false;\r\n        this.ignoreClick = false;\r\n        this.ignoreGlobalClick = false;\r\n    };\r\n    DatePickerDropdown.prototype.componentWillUnmount = function () {\r\n        document.body.removeEventListener('click', this.boundWindowClick);\r\n    };\r\n    DatePickerDropdown.prototype.componentWillReceiveProps = function (newProps) {\r\n        // this.updateFilter(newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString, newProps);\r\n        // this.setState({\r\n        //     searchString: newProps.value.key !== this.props.value.key ? newProps.value.key : this.state.searchString,\r\n        //     selected: newProps.value,\r\n        //     options: newProps.options\r\n        // });\r\n    };\r\n    //should be false\r\n    DatePickerDropdown.prototype.handleInputBlur = function () {\r\n        if (!this.ignoreBlur) {\r\n            this.setState({\r\n                showingDropDown: false\r\n            });\r\n        }\r\n        else {\r\n            this.ignoreBlur = false;\r\n        }\r\n    };\r\n    DatePickerDropdown.prototype.handleInputFocus = function () {\r\n        if (this.ignoreBlur) {\r\n            this.ignoreBlur = true;\r\n            return;\r\n        }\r\n        // We don't want `selectItemFromMouse` to trigger when\r\n        // the user clicks into the input to focus it, so set this\r\n        // flag to cancel out the logic in `handleInputClick`.\r\n        // The event order is:  MouseDown -> Focus -> MouseUp -> Click\r\n        this.ignoreClick = true;\r\n        this.setState({ showingDropDown: true });\r\n    };\r\n    DatePickerDropdown.prototype.handleInputClick = function () {\r\n        // Input will not be focused if it's disabled\r\n        if (this.isInputFocused() && this.state.showingDropDown === false) {\r\n            this.setState({ showingDropDown: true });\r\n        }\r\n        else {\r\n            //  if (this.state.highlightedIndex !== null && !this.ignoreClick) {\r\n            //      this.selectItemFromMouse(this.state.filteredOptions[this.state.highlightedIndex]);\r\n            //  } else {\r\n            this.ignoreClick = false;\r\n        }\r\n    };\r\n    DatePickerDropdown.prototype.selectItemFromMouse = function (item) {\r\n        var _this = this;\r\n        this.setState({\r\n            showingDropDown: false\r\n        }, function () {\r\n            _this.props.setValue(item);\r\n        });\r\n    };\r\n    DatePickerDropdown.prototype.isInputFocused = function () {\r\n        var el = this.refs[DatePickerDropdown.datePickerDropDownInputBoxRef];\r\n        return el.ownerDocument && (el === el.ownerDocument.activeElement);\r\n    };\r\n    DatePickerDropdown.prototype.onDropdownClick = function () {\r\n        this.ignoreBlur = true;\r\n        this.ignoreGlobalClick = true;\r\n        console.log('clicked');\r\n    };\r\n    DatePickerDropdown.prototype.rangeTypeChanged = function (rangeType) {\r\n        this.props.setValue(rangeType + this.props.value.substr(1));\r\n    };\r\n    DatePickerDropdown.prototype.yearChanged = function (e) {\r\n        var base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\r\n        var yearVal = e.currentTarget.value.substr(0, 4).replace(/[^0-9]/g, '');\r\n        for (var i = yearVal.length; i < 4; i += 1) {\r\n            yearVal += 'X';\r\n        }\r\n        this.props.setValue(base.substr(0, 1) + yearVal + base.substr(5));\r\n    };\r\n    DatePickerDropdown.prototype.monthChanged = function (e) {\r\n        this.ignoreGlobalClick = true;\r\n        var base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\r\n        var monthVal = e.currentTarget.value.substr(0, 2);\r\n        this.props.setValue(base.substr(0, 5) + monthVal + base.substr(7));\r\n    };\r\n    DatePickerDropdown.prototype.dayChanged = function (e) {\r\n        var base = this.props.value.length === 9 ? this.props.value : '=XXXX0000';\r\n        var dayVal = e.currentTarget.value.substr(0, 2).replace(/[^0-9]/g, '');\r\n        dayVal = lodash_1.padStart(dayVal, 2, '0');\r\n        this.props.setValue(base.substr(0, 7) + dayVal);\r\n    };\r\n    DatePickerDropdown.prototype.render = function () {\r\n        var _this = this;\r\n        var rangeOption = this.props.value.substr(0, 1);\r\n        if (['<', '>', '='].indexOf(rangeOption) === -1) {\r\n            rangeOption = '=';\r\n        }\r\n        var rangeOptionClassName = function (val) {\r\n            if (val === rangeOption) {\r\n                return 'range-option selected';\r\n            }\r\n            else {\r\n                return 'range-option';\r\n            }\r\n        };\r\n        var year = this.props.value.substr(1, 4).replace(/X/g, '');\r\n        var month = this.props.value.substr(5, 2);\r\n        var day = this.props.value[7] === '0' ? this.props.value[8] === '0' ?\r\n            ''\r\n            : this.props.value.substr(8, 1)\r\n            : this.props.value.substr(7, 2);\r\n        var displayValue = formatDate_1.formatDate(this.props.value);\r\n        return (React.createElement(\"div\", { className: 'combo-dropdown' },\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"input\", { type: 'text', readOnly: true, ref: DatePickerDropdown.datePickerDropDownInputBoxRef, className: 'search-input', value: displayValue, onBlur: this.handleInputBlur.bind(this), onFocus: this.handleInputFocus.bind(this), onClick: this.handleInputClick.bind(this) })),\r\n            this.state.showingDropDown ? (React.createElement(\"div\", { className: 'dropdown' },\r\n                React.createElement(\"div\", { className: 'date-picker-dropdown', onMouseDown: this.onDropdownClick.bind(this) },\r\n                    React.createElement(\"section\", { className: 'range-type' },\r\n                        React.createElement(\"div\", { className: rangeOptionClassName('<'), onClick: function () { return _this.rangeTypeChanged('<'); } }, \"Before\"),\r\n                        React.createElement(\"div\", { className: rangeOptionClassName('='), onClick: function () { return _this.rangeTypeChanged('='); } }, \"Exactly\"),\r\n                        React.createElement(\"div\", { className: rangeOptionClassName('>'), onClick: function () { return _this.rangeTypeChanged('>'); } }, \"After\")),\r\n                    React.createElement(\"section\", { className: 'date-select' },\r\n                        React.createElement(\"div\", { className: 'date-selector day' },\r\n                            React.createElement(\"label\", { className: 'small' }, \"Day\"),\r\n                            React.createElement(\"input\", { type: 'text', maxLength: 2, value: day, onChange: this.dayChanged.bind(this) })),\r\n                        React.createElement(\"div\", { className: 'date-selector month' },\r\n                            React.createElement(\"label\", { className: 'small' }, \"Month\"),\r\n                            React.createElement(\"select\", { onChange: this.monthChanged.bind(this), value: month },\r\n                                React.createElement(\"option\", { value: '00' }, \"Unknown\"),\r\n                                moment.months().map(function (month, i) { return (React.createElement(\"option\", { key: \"option-\" + month, value: lodash_1.padStart((i + 1).toString(), 2, '0') }, month)); }))),\r\n                        React.createElement(\"div\", { className: 'date-selector year' },\r\n                            React.createElement(\"label\", { className: 'small' }, \"Year\"),\r\n                            React.createElement(\"input\", { type: 'text', maxLength: 4, value: year, onChange: this.yearChanged.bind(this) })))))) : null));\r\n    };\r\n    return DatePickerDropdown;\r\n}(React.Component));\r\nDatePickerDropdown.datePickerDropDownInputBoxRef = 'datePickerDropDownInputBox';\r\nexports.DatePickerDropdown = DatePickerDropdown;\r\n//# sourceMappingURL=DatePickerDropdown.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/fields/DatePickerDropdown.js\n// module id = 60\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar lodash_1 = require(\"lodash\");\r\nexports.ScorePicker = function (props) {\r\n    var values = [1, 2, 3, 4, 5];\r\n    if (props.readOnly) {\r\n        return (React.createElement(\"span\", { className: 'score-picker' }, values.map(function (val) { return (React.createElement(\"i\", { key: val, className: 'fa fa-star' + (val > props.value ? '-o' : ''), \"aria-hidden\": 'true' })); })));\r\n    }\r\n    else {\r\n        return (React.createElement(\"span\", { className: 'score-picker editing' }, lodash_1.reverse(values).map(function (val) { return (React.createElement(\"i\", { key: val, className: 'fa fa-star' + (val > props.value ? '-o' : ''), onClick: function () {\r\n                if (props.onChange === undefined) {\r\n                    throw new Error('An onChange handler is required');\r\n                }\r\n                props.onChange(val);\r\n            }, \"aria-hidden\": 'true' })); })));\r\n    }\r\n};\r\n//# sourceMappingURL=ScorePicker.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/fields/ScorePicker.js\n// module id = 61\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar Overlay_1 = require(\"../Overlay\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar ConflictResolution = (function (_super) {\r\n    __extends(ConflictResolution, _super);\r\n    function ConflictResolution() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            label: '',\r\n            entityType: { key: '', value: null },\r\n            allEntityTypes: []\r\n        };\r\n        return _this;\r\n    }\r\n    ConflictResolution.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-exclamation-triangle warning' }),\r\n                \" Conflict: \",\r\n                this.props.message),\r\n            this.props.conflictingItems.record !== undefined && this.props.conflictingItems.record.length > 0 ? (React.createElement(\"span\", null,\r\n                React.createElement(\"p\", null, \"The following records conflict with your request change:\"),\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"th\", null, \"Entity\"),\r\n                            React.createElement(\"th\", null, \"Predicate\"),\r\n                            React.createElement(\"th\", null, \"Value\"))),\r\n                    React.createElement(\"tbody\", null, this.props.conflictingItems.record.map(function (record) {\r\n                        var entityName = _this.props.dataStore.dataStore.all.entity.value\r\n                            .find(function (entity) { return entity.uid == record.entity; }).label;\r\n                        var predicateName = _this.props.dataStore.dataStore.all.predicate.value\r\n                            .find(function (predicate) { return predicate.uid == record.predicate; }).label;\r\n                        return (React.createElement(\"tr\", { key: \"row-\" + record.uid },\r\n                            React.createElement(\"td\", null, entityName),\r\n                            React.createElement(\"td\", null, predicateName),\r\n                            React.createElement(\"td\", null, record.value)));\r\n                    }))))) : null,\r\n            this.props.conflictingItems.entity !== undefined && this.props.conflictingItems.entity.length > 0 ? (React.createElement(\"span\", null,\r\n                React.createElement(\"p\", null, \"The following entities conflict with your request change:\"),\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"th\", null, \"Entity\"))),\r\n                    React.createElement(\"tbody\", null, this.props.conflictingItems.entity.map(function (entity) {\r\n                        return (React.createElement(\"tr\", { key: \"row-\" + entity.uid },\r\n                            React.createElement(\"td\", null, entity.label)));\r\n                    }))))) : null,\r\n            this.props.conflictingItems.entityType !== undefined && this.props.conflictingItems.entityType.length > 0 ? (React.createElement(\"span\", null,\r\n                React.createElement(\"p\", null, \"The following entity types conflict with your request change:\"),\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"th\", null, \"Entity Type\"))),\r\n                    React.createElement(\"tbody\", null, this.props.conflictingItems.entityType.map(function (entityType) {\r\n                        return (React.createElement(\"tr\", { key: \"row-\" + entityType.uid },\r\n                            React.createElement(\"td\", null, entityType.label)));\r\n                    }))))) : null,\r\n            this.props.conflictingItems.source !== undefined && this.props.conflictingItems.source.length > 0 ? (React.createElement(\"span\", null,\r\n                React.createElement(\"p\", null, \"The following sources conflict with your request change:\"),\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"th\", null, \"Sources\"))),\r\n                    React.createElement(\"tbody\", null, this.props.conflictingItems.source.map(function (source) {\r\n                        return (React.createElement(\"tr\", { key: \"row-\" + source.uid },\r\n                            React.createElement(\"td\", null, source.label)));\r\n                    }))))) : null,\r\n            React.createElement(\"div\", { className: 'block-buttons' },\r\n                React.createElement(\"button\", { onClick: function () { return _this.props.cancel(); } }, \"Cancel\"),\r\n                React.createElement(\"button\", { onClick: function () { return _this.props.complete('addToWorkspace'); } },\r\n                    React.createElement(\"i\", { className: 'icon-list-add' }),\r\n                    \"Cancel and add conflicting records to workspace\"),\r\n                React.createElement(\"button\", { onClick: function () { return _this.props.complete('deleteAll'); } },\r\n                    React.createElement(\"i\", { className: 'fa fa-trash' }),\r\n                    \" Continue and delete all conflicting records\"))));\r\n    };\r\n    return ConflictResolution;\r\n}(React.Component));\r\nConflictResolution = __decorate([\r\n    mobx_react_1.inject('dataStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], ConflictResolution);\r\nexports.ConflictResolution = ConflictResolution;\r\n;\r\n//# sourceMappingURL=ConflictResolution.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/modal/ConflictResolution.js\n// module id = 62\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar Overlay_1 = require(\"../Overlay\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar ComboDropdown_1 = require(\"../ComboDropdown\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar CreateEntity = (function (_super) {\r\n    __extends(CreateEntity, _super);\r\n    function CreateEntity() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            label: '',\r\n            entityType: { key: '', value: null },\r\n            allEntityTypes: []\r\n        };\r\n        return _this;\r\n    }\r\n    CreateEntity.prototype.componentWillMount = function () {\r\n        var _this = this;\r\n        this.props.dataStore.getCollection(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, {})\r\n            .then(function (allEntityTypes) {\r\n            if (_this.props.initialType !== undefined) {\r\n                var initialType = allEntityTypes.find(function (et) { return et.uid === _this.props.initialType; });\r\n                if (initialType === undefined) {\r\n                    throw new Error('Invalid initial type');\r\n                }\r\n                if (initialType.uid === null) {\r\n                    throw new Error('found entity type with null uid');\r\n                }\r\n                _this.setState({\r\n                    entityType: { key: initialType.label, value: initialType.uid }\r\n                });\r\n            }\r\n            _this.setState({ allEntityTypes: allEntityTypes });\r\n        });\r\n    };\r\n    CreateEntity.prototype.createEntity = function () {\r\n        var _this = this;\r\n        if (this.state.entityType === null) {\r\n            throw new Error('Cannot create entity with null type');\r\n        }\r\n        this.props.dataStore.postItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, falcon_core_1.Serializer.fromJson(falcon_core_1.Entity, {\r\n            label: this.state.label,\r\n            entityType: this.state.entityType.value\r\n        }), {})\r\n            .then(function (a) { return _this.props.complete(a[0].toString()); });\r\n    };\r\n    CreateEntity.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Create Entity\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Label\"),\r\n            React.createElement(\"input\", { type: 'text', value: this.state.label, ref: function (a) { if (a !== null)\r\n                    a.focus(); }, name: 'new-entity-name', className: 'gap', onChange: function (e) { return _this.setState({ label: e.target.value }); } }),\r\n            React.createElement(\"label\", { className: 'small' }, \"Type\"),\r\n            React.createElement(ComboDropdown_1.NumberComboDropdown, { options: this.state.allEntityTypes.map(function (t) { return ({ key: t.label, value: t.uid }); }), typeName: 'entity type', value: this.state.entityType, setValue: function (entityType) { return _this.setState({ entityType: entityType }); }, createNewValue: lodash_1.noop, allowNew: false }),\r\n            React.createElement(\"button\", { name: 'cancel-modal', onClick: function () { return _this.props.cancel(); }, className: 'pull-left' }, \"Cancel\"),\r\n            React.createElement(\"button\", { name: 'create-entity', onClick: this.createEntity.bind(this), className: 'pull-right' }, \"Create Entity\")));\r\n    };\r\n    return CreateEntity;\r\n}(React.Component));\r\nCreateEntity = __decorate([\r\n    mobx_react_1.inject('dataStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], CreateEntity);\r\nexports.CreateEntity = CreateEntity;\r\n;\r\n//# sourceMappingURL=CreateEntity.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/modal/CreateEntity.js\n// module id = 63\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar Overlay_1 = require(\"../Overlay\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar mousetrap = require(\"mousetrap\");\r\nvar CreateEntityType = (function (_super) {\r\n    __extends(CreateEntityType, _super);\r\n    function CreateEntityType() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            internalValue: ''\r\n        };\r\n        return _this;\r\n    }\r\n    CreateEntityType.prototype.createEntityType = function () {\r\n        this.props.dataStore.postItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, falcon_core_1.Serializer.fromJson(falcon_core_1.EntityType, {\r\n            label: this.state.internalValue\r\n        }), {})\r\n            .then(this.props.complete);\r\n    };\r\n    CreateEntityType.prototype.inputRef = function (val) {\r\n        if (val !== null) {\r\n            val.focus();\r\n            this.keyboardShortcuts = new mousetrap(val);\r\n            this.keyboardShortcuts.bind('return', this.createEntityType.bind(this));\r\n            this.keyboardShortcuts.bind('escape', this.props.cancel);\r\n        }\r\n        else {\r\n            this.keyboardShortcuts.unbind('return');\r\n        }\r\n    };\r\n    CreateEntityType.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Create Entity Type\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Name\"),\r\n            React.createElement(\"input\", { type: 'text', value: this.state.internalValue, ref: this.inputRef.bind(this), onChange: function (e) { return _this.setState({ internalValue: e.target.value }); } }),\r\n            React.createElement(\"button\", { onClick: function () { return _this.props.cancel(); }, className: 'pull-left' }, \"Cancel\"),\r\n            React.createElement(\"button\", { onClick: this.createEntityType.bind(this), className: 'pull-right' }, \"Create Entity Type\")));\r\n    };\r\n    return CreateEntityType;\r\n}(React.Component));\r\nCreateEntityType = __decorate([\r\n    mobx_react_1.inject('dataStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], CreateEntityType);\r\nexports.CreateEntityType = CreateEntityType;\r\n;\r\n//# sourceMappingURL=CreateEntityType.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/modal/CreateEntityType.js\n// module id = 64\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar Overlay_1 = require(\"../Overlay\");\r\nvar PredicateDescription_1 = require(\"../fields/PredicateDescription\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar literalTypes_1 = require(\"../../literalTypes\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar CreatePredicate = (function (_super) {\r\n    __extends(CreatePredicate, _super);\r\n    function CreatePredicate() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            label: '',\r\n            domain: { key: '', value: null },\r\n            range: { key: '', value: null },\r\n            domainOptions: [],\r\n            rangeOptions: []\r\n        };\r\n        return _this;\r\n    }\r\n    CreatePredicate.prototype.componentWillMount = function () {\r\n        this.setState({ label: this.props.initialName });\r\n    };\r\n    CreatePredicate.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        if (this.props.initialDomain !== undefined) {\r\n            this.props.dataStore.getItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, this.props.initialDomain)\r\n                .then(function (result) {\r\n                if (result.uid === null) {\r\n                    throw new Error('Unexpected null uid');\r\n                }\r\n                _this.setState({\r\n                    domain: { key: result.label, value: result.uid },\r\n                    domainOptions: [\r\n                        { key: result.label, value: result.uid }\r\n                    ].concat(result.parents.map(function (entityTypeId) {\r\n                        var parentEntityType = _this.props.dataStore.dataStore.all.entity_type.value.find(function (e) { return e.uid === entityTypeId; });\r\n                        return { key: parentEntityType.label, value: entityTypeId };\r\n                    }))\r\n                });\r\n            });\r\n        }\r\n        var results = this.props.dataStore.dataStore.all.entity_type.value;\r\n        var entityTypeMap = results.map(function (entityType) {\r\n            if (entityType.uid === null) {\r\n                throw new Error('Unexpected null uid');\r\n            }\r\n            return { key: entityType.label, value: entityType.uid };\r\n        });\r\n        var entityTypeMap2 = entityTypeMap.map(function (e) { return ({ key: e.key, value: { isReference: true, value: e.value.toString() } }); });\r\n        var literalTypesMap = literalTypes_1.literalTypes.map(function (lit) { return ({ key: lit.label, value: { isReference: false, value: lit.value } }); });\r\n        if (this.props.initialDomain === undefined) {\r\n            this.setState({ domainOptions: entityTypeMap });\r\n        }\r\n        this.setState({\r\n            rangeOptions: literalTypesMap.concat(entityTypeMap2)\r\n        });\r\n    };\r\n    CreatePredicate.prototype.create = function () {\r\n        var _this = this;\r\n        if (this.state.range.value === null || this.state.domain.value === null) {\r\n            throw new Error('Domain and range must be set');\r\n        }\r\n        var newPredicate = falcon_core_1.Serializer.fromJson(falcon_core_1.Predicate, {\r\n            label: this.state.label,\r\n            domain: this.state.domain.value,\r\n            range: this.state.range.value.value,\r\n            rangeIsReference: this.state.range.value.isReference\r\n        });\r\n        this.props.dataStore.postItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, newPredicate, {})\r\n            .then(function (result) {\r\n            newPredicate.uid = result[0];\r\n            _this.props.complete(newPredicate);\r\n        });\r\n    };\r\n    CreatePredicate.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null,\r\n                React.createElement(\"i\", { className: 'fa fa-plus', \"aria-hidden\": 'true' }),\r\n                \" Create Property\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Name\"),\r\n            React.createElement(\"input\", { type: 'text', className: 'gap', ref: function (a) {\r\n                    if (a !== null) {\r\n                        a.focus();\r\n                    }\r\n                }, value: this.state.label, onChange: function (e) { return _this.setState({ label: e.target.value }); } }),\r\n            React.createElement(PredicateDescription_1.PredicateDescription, { domain: this.state.domain, range: this.state.range, domainChanged: function (s) { return _this.setState({ domain: s }); }, rangeChanged: function (s) { return _this.setState({ range: s }); }, domainOptions: this.state.domainOptions, rangeOptions: this.state.rangeOptions, mode: 'editAll' }),\r\n            React.createElement(\"div\", { className: 'modal-toolbar' },\r\n                React.createElement(\"button\", { onClick: this.props.cancel, className: 'pull-left' }, \"Cancel\"),\r\n                React.createElement(\"button\", { onClick: this.create.bind(this), className: 'pull-right' }, \"Create Property\"))));\r\n    };\r\n    return CreatePredicate;\r\n}(React.Component));\r\nCreatePredicate = __decorate([\r\n    mobx_react_1.inject('dataStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], CreatePredicate);\r\nexports.CreatePredicate = CreatePredicate;\r\n;\r\n//# sourceMappingURL=CreatePredicate.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/modal/CreatePredicate.js\n// module id = 65\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar CreatePresetRecord = CreatePresetRecord_1 = (function (_super) {\r\n    __extends(CreatePresetRecord, _super);\r\n    function CreatePresetRecord() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {};\r\n        return _this;\r\n    }\r\n    CreatePresetRecord.prototype.componentDidMount = function () {\r\n        if (CreatePresetRecord_1.openEntityDialog) {\r\n            CreatePresetRecord_1.openEntityDialog = false;\r\n            this.createNewEntity();\r\n        }\r\n        else {\r\n            CreatePresetRecord_1.openEntityDialog = true;\r\n        }\r\n    };\r\n    CreatePresetRecord.prototype.createNewEntity = function () {\r\n        var _this = this;\r\n        var modalDef = {\r\n            name: 'entity',\r\n            complete: function (data) {\r\n                var isMentioned = _this.props.dataStore.dataStore.all.predicate.value.find(function (pred) { return pred.label === 'is mentioned'; });\r\n                if (isMentioned === undefined) {\r\n                    throw new Error('Is mentioned predicate is missing, it should be loaded by default');\r\n                }\r\n                _this.props.dataStore.postItem(falcon_core_1.Record, ApiService_1.AppUrls.record, falcon_core_1.Serializer.fromJson(falcon_core_1.Record, {\r\n                    predicate: isMentioned.uid,\r\n                    entity: data[0],\r\n                    valueType: 'source',\r\n                    source: _this.props.source.uid,\r\n                    score: 3\r\n                }), {})\r\n                    .then(function (result) {\r\n                    _this.props.complete(result);\r\n                })\r\n                    .catch(_this.props.cancel);\r\n            },\r\n            cancel: function () {\r\n            },\r\n            settings: {}\r\n        };\r\n        this.props.modalStore.addModal(modalDef);\r\n    };\r\n    CreatePresetRecord.prototype.render = function () {\r\n        return null;\r\n    };\r\n    return CreatePresetRecord;\r\n}(React.Component));\r\nCreatePresetRecord.openEntityDialog = true;\r\nCreatePresetRecord = CreatePresetRecord_1 = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], CreatePresetRecord);\r\nexports.CreatePresetRecord = CreatePresetRecord;\r\n;\r\nvar CreatePresetRecord_1;\r\n//# sourceMappingURL=CreatePresetRecord.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/modal/CreatePresetRecord.js\n// module id = 66\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar Overlay_1 = require(\"../Overlay\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar ComboDropdown_1 = require(\"../ComboDropdown\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar PredicateComboDropdown = (function (_super) {\r\n    __extends(PredicateComboDropdown, _super);\r\n    function PredicateComboDropdown() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return PredicateComboDropdown;\r\n}(ComboDropdown_1.ComboDropdown));\r\nvar CreateRecord = (function (_super) {\r\n    __extends(CreateRecord, _super);\r\n    function CreateRecord() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            comboValue: { key: '', value: null },\r\n            searchValue: ''\r\n        };\r\n        return _this;\r\n    }\r\n    CreateRecord.prototype.componentDidMount = function () {\r\n        this.refs['comboDropDown'].refs['comboDropDownInputBox'].focus();\r\n    };\r\n    CreateRecord.prototype.createNewPredicate = function () {\r\n        var _this = this;\r\n        var modalDef = {\r\n            name: 'predicate',\r\n            complete: function (data) {\r\n                console.log('Predicate editor called complete');\r\n                _this.setComboValue({ key: data.label, value: data === null ? null : data });\r\n            },\r\n            cancel: function () {\r\n                console.log('Predicate editor called cancel');\r\n            },\r\n            settings: {\r\n                initialName: this.state.searchValue,\r\n                initialDomain: this.props.entityType\r\n            }\r\n        };\r\n        this.props.modalStore.addModal(modalDef);\r\n    };\r\n    CreateRecord.prototype.setComboValue = function (opt) {\r\n        var _this = this;\r\n        if (opt.value === null) {\r\n            throw new Error('Value cannot be null');\r\n        }\r\n        this.props.dataStore.postItem(falcon_core_1.Record, ApiService_1.AppUrls.record, falcon_core_1.Serializer.fromJson(falcon_core_1.Record, {\r\n            predicate: opt.value.uid,\r\n            entity: this.props.entityUid,\r\n            valueType: opt.value.rangeIsReference ? 'entity' : opt.value.range,\r\n            score: 3,\r\n            source: this.props.dataStore.defaultSource\r\n        }), {})\r\n            .then(function (result) { return _this.props.complete(result); })\r\n            .catch(this.props.cancel);\r\n    };\r\n    CreateRecord.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Create Record\"),\r\n            React.createElement(PredicateComboDropdown, { ref: 'comboDropDown', options: this.props.options, typeName: 'predicate', value: this.state.comboValue, setValue: this.setComboValue.bind(this), createNewValue: this.createNewPredicate.bind(this), updateSearchString: function (s) { return _this.setState({ searchValue: s }); } })));\r\n    };\r\n    return CreateRecord;\r\n}(React.Component));\r\nCreateRecord = __decorate([\r\n    mobx_react_1.inject('modalStore', 'dataStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], CreateRecord);\r\nexports.CreateRecord = CreateRecord;\r\n;\r\n//# sourceMappingURL=CreateRecord.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/modal/CreateRecord.js\n// module id = 67\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar Overlay_1 = require(\"../Overlay\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar mousetrap = require(\"mousetrap\");\r\nvar CreateSource = (function (_super) {\r\n    __extends(CreateSource, _super);\r\n    function CreateSource() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            internalValue: ''\r\n        };\r\n        return _this;\r\n    }\r\n    CreateSource.prototype.componentWillMount = function () {\r\n        this.setState({ internalValue: this.props.initialValue });\r\n    };\r\n    CreateSource.prototype.createSource = function () {\r\n        this.props.dataStore.postItem(falcon_core_1.Source, ApiService_1.AppUrls.source, falcon_core_1.Serializer.fromJson(falcon_core_1.Source, {\r\n            label: this.state.internalValue\r\n        }), {})\r\n            .then(this.props.complete);\r\n    };\r\n    CreateSource.prototype.inputRef = function (val) {\r\n        if (val !== null) {\r\n            val.focus();\r\n            this.keyboardShortcuts = new mousetrap(val);\r\n            this.keyboardShortcuts.bind('return', this.createSource.bind(this));\r\n            this.keyboardShortcuts.bind('escape', this.props.cancel);\r\n        }\r\n        else {\r\n            this.keyboardShortcuts.unbind('return');\r\n            this.keyboardShortcuts.unbind('escape');\r\n        }\r\n    };\r\n    CreateSource.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Create Source\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Name\"),\r\n            React.createElement(\"input\", { type: 'text', value: this.state.internalValue, ref: this.inputRef.bind(this), onChange: function (e) { return _this.setState({ internalValue: e.target.value }); } }),\r\n            React.createElement(\"button\", { onClick: function () { return _this.props.cancel(); }, className: 'pull-left' }, \"Cancel\"),\r\n            React.createElement(\"button\", { onClick: this.createSource.bind(this), className: 'pull-right' }, \"Create Source\")));\r\n    };\r\n    return CreateSource;\r\n}(React.Component));\r\nCreateSource.defaultProps = {\r\n    initialValue: ''\r\n};\r\nCreateSource = __decorate([\r\n    mobx_react_1.inject('dataStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], CreateSource);\r\nexports.CreateSource = CreateSource;\r\n//# sourceMappingURL=CreateSource.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/modal/CreateSource.js\n// module id = 68\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar Overlay_1 = require(\"../Overlay\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar mousetrap = require(\"mousetrap\");\r\nvar CreateTabSet = (function (_super) {\r\n    __extends(CreateTabSet, _super);\r\n    function CreateTabSet() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            internalValue: ''\r\n        };\r\n        return _this;\r\n    }\r\n    CreateTabSet.prototype.createTabSet = function () {\r\n        var _this = this;\r\n        return fetch('/tabset', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                name: this.state.internalValue,\r\n                tabs: this.props.dataStore.tabs\r\n            }),\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            credentials: 'same-origin'\r\n        })\r\n            .then(function (response) {\r\n            return response.json();\r\n        }).then(function () { return _this.props.complete(''); });\r\n    };\r\n    CreateTabSet.prototype.inputRef = function (val) {\r\n        if (val !== null) {\r\n            val.focus();\r\n            this.keyboardShortcuts = new mousetrap(val);\r\n            this.keyboardShortcuts.bind('return', this.createTabSet.bind(this));\r\n            this.keyboardShortcuts.bind('escape', this.props.cancel);\r\n        }\r\n        else {\r\n            this.keyboardShortcuts.unbind('return');\r\n        }\r\n    };\r\n    CreateTabSet.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(Overlay_1.Overlay, null,\r\n            React.createElement(\"h2\", null, \"Save Tab Set\"),\r\n            React.createElement(\"label\", { className: 'small' }, \"Name\"),\r\n            React.createElement(\"input\", { type: 'text', value: this.state.internalValue, ref: this.inputRef.bind(this), onChange: function (e) { return _this.setState({ internalValue: e.target.value }); } }),\r\n            React.createElement(\"button\", { onClick: function () { return _this.props.cancel(); }, className: 'pull-left' }, \"Cancel\"),\r\n            React.createElement(\"button\", { onClick: this.createTabSet.bind(this), className: 'pull-right' }, \"Create Tab Set\")));\r\n    };\r\n    return CreateTabSet;\r\n}(React.Component));\r\nCreateTabSet = __decorate([\r\n    mobx_react_1.inject('dataStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], CreateTabSet);\r\nexports.CreateTabSet = CreateTabSet;\r\n;\r\n//# sourceMappingURL=CreateTabSet.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/modal/CreateTabSet.js\n// module id = 69\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar lev = require(\"levenshtein\");\r\nvar ComboDropdown_1 = require(\"../ComboDropdown\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar AddTabButton_1 = require(\"../AddTabButton\");\r\nvar formatDate_1 = require(\"../../helper/formatDate\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar sortIcons = {\r\n    'none': 'fa fa-sort',\r\n    'asc': 'fa fa-sort-asc',\r\n    'desc': 'fa fa-sort-desc'\r\n};\r\nvar customColumns = function (predicates, columns, updateColumnParams, rotateSort) {\r\n    return [0, 1, 2].map(function (id) {\r\n        var comboValue = { key: '', value: null };\r\n        if (columns[id].predicate !== -1) {\r\n            var thisPred = predicates.find(function (pred) { return pred.uid == columns[id].predicate; });\r\n            if (thisPred !== undefined) {\r\n                comboValue.key = thisPred.label;\r\n            }\r\n            comboValue.value = columns[id].predicate;\r\n        }\r\n        return (React.createElement(\"td\", { key: \"col-\" + id },\r\n            React.createElement(\"div\", { className: 'list-combo-header' },\r\n                React.createElement(\"div\", { className: 'combo-wrapper' },\r\n                    React.createElement(ComboDropdown_1.NumberComboDropdown, { value: comboValue, typeName: 'predicate', allowNew: false, setValue: function (value) { return updateColumnParams(id, 'p', value === null ? null : value.value); }, options: predicates.map(function (pred) { return ({ key: pred.label, value: pred.uid.toString() }); }), createNewValue: lodash_1.noop, additionalClasses: ['compact'] })),\r\n                React.createElement(\"div\", { className: 'order-wrapper' },\r\n                    React.createElement(\"i\", { className: sortIcons[columns[id].sort], onClick: function () { return rotateSort(id); } })))));\r\n    });\r\n};\r\nvar EntityList = (function (_super) {\r\n    __extends(EntityList, _super);\r\n    function EntityList(props) {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            entities: [],\r\n            entityTypes: [],\r\n            predicates: [],\r\n            columns: [\r\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' },\r\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' },\r\n                { predicate: -1, sort: 'none', filterType: 'any', invertFilter: false, filterValue: '' }\r\n            ],\r\n            entityType: { key: 'Any', value: 0 },\r\n            queryData: {}\r\n        };\r\n        return _this;\r\n    }\r\n    EntityList.prototype.componentDidMount = function () {\r\n        this.update(this.props);\r\n    };\r\n    EntityList.prototype.componentWillReceiveProps = function (newProps) {\r\n        this.update(newProps);\r\n    };\r\n    EntityList.prototype.update = function (props) {\r\n        var queryStringOptions = props.query;\r\n        var columns = lodash_1.cloneDeep(this.state.columns);\r\n        if (queryStringOptions !== null) {\r\n            for (var i = 1; i < 4; i += 1) {\r\n                columns[i - 1].predicate = queryStringOptions[\"col\" + i + \"p\"] || null;\r\n                columns[i - 1].sort = queryStringOptions[\"col\" + i + \"s\"] || null;\r\n                columns[i - 1].filterType = queryStringOptions[\"col\" + i + \"f\"] || '';\r\n                columns[i - 1].filterValue = queryStringOptions[\"col\" + i + \"v\"] || '';\r\n                columns[i - 1].invertFilter = queryStringOptions[\"col\" + i + \"i\"] || null;\r\n            }\r\n        }\r\n        this.setState({\r\n            columns: columns,\r\n            queryData: queryStringOptions === null ? {} : queryStringOptions\r\n        });\r\n    };\r\n    EntityList.prototype.addNew = function () {\r\n        var a = {\r\n            name: 'entity',\r\n            complete: function () {\r\n            },\r\n            cancel: function () { console.log('cancel'); },\r\n            settings: {\r\n                initialName: ''\r\n            }\r\n        };\r\n        this.props.modalStore.addModal(a);\r\n    };\r\n    EntityList.prototype.updateColumnParams = function (colId, key, value) {\r\n        this.context.router.transitionTo({\r\n            pathname: '/edit/entity',\r\n            query: Object.assign(this.state.queryData, (_a = {}, _a[\"col\" + (colId + 1) + key] = value, _a))\r\n        });\r\n        var _a;\r\n    };\r\n    EntityList.prototype.rotateSort = function (colId) {\r\n        var columns = lodash_1.cloneDeep(this.state.columns);\r\n        switch (columns[colId].sort) {\r\n            case 'none':\r\n                columns[colId].sort = 'asc';\r\n                break;\r\n            case 'asc':\r\n                columns[colId].sort = 'desc';\r\n                break;\r\n            case 'desc':\r\n                columns[colId].sort = 'none';\r\n        }\r\n        this.setState({\r\n            columns: columns\r\n        });\r\n    };\r\n    EntityList.prototype.addViewTab = function () {\r\n        var _this = this;\r\n        var tabData = {};\r\n        var mapping = [\r\n            { key: 'p', display: 'Predicate', mod: function (data) { return _this.props.dataStore.dataStore.all.predicate.value.find(function (pred) { return pred.uid == data; }).label; } },\r\n            { key: 's', display: 'Sort', mod: function (data) { return data; } },\r\n            { key: 'f', display: 'filterType', mod: function (data) { return data; } },\r\n            { key: 'v', display: 'filterValue', mod: function (data) { return data; } },\r\n            { key: 'i', display: 'invertFilter', mod: function (data) { return data; } }\r\n        ];\r\n        for (var i = 1; i < 4; i += 1) {\r\n            for (var j = 0; j < mapping.length; j += 1) {\r\n                if (this.state.queryData[\"col\" + i + mapping[j].key] !== undefined) {\r\n                    if (tabData[\"Column \" + i] === undefined) {\r\n                        tabData[\"Column \" + i] = {};\r\n                    }\r\n                    tabData[\"Column \" + i][mapping[j].display] = mapping[j].mod(this.state.queryData[\"col\" + i + mapping[j].key]);\r\n                }\r\n            }\r\n        }\r\n        this.props.dataStore.createTab('entity', Date.now(), 'view', tabData, this.props.query);\r\n    };\r\n    EntityList.prototype.render = function () {\r\n        var _this = this;\r\n        var entities = this.props.dataStore.dataStore.all.entity.value;\r\n        var predicates = this.props.dataStore.dataStore.all.predicate.value;\r\n        var entityTypes = this.props.dataStore.dataStore.all.entity_type.value;\r\n        var entityTypeOptions = entityTypes.map(function (entityType) { return ({ key: entityType.label, value: entityType.uid }); });\r\n        var tableData = entities.map(function (entity) {\r\n            var entityType = entityTypes.find(function (t) { return t.uid === entity.entityType; });\r\n            var entityData = _this.props.dataStore.dataStore.records.filter(function (res) { return res.entity === entity.uid; });\r\n            return {\r\n                uid: entity.uid,\r\n                label: entity.label,\r\n                entityType: entityType,\r\n                columns: _this.state.columns.map(function (col) {\r\n                    var value = '';\r\n                    if (entityData !== undefined && col.predicate !== -1) {\r\n                        var predicateData = entityData\r\n                            .filter(function (record) { return record.predicate == col.predicate; });\r\n                        if (predicateData !== undefined) {\r\n                            value = predicateData.map(function (pred) {\r\n                                if (pred.valueType === 'date') {\r\n                                    return formatDate_1.formatDate(pred.value);\r\n                                }\r\n                                if (pred.valueType === 'source') {\r\n                                    if (pred.value === null) {\r\n                                        return 'Not set';\r\n                                    }\r\n                                    return _this.props.dataStore.dataStore.all.source.value.find(function (source) { return source.uid === pred.value; }).label;\r\n                                }\r\n                                if (pred.valueType === 'entity') {\r\n                                    if (pred.value === null) {\r\n                                        return 'Not set';\r\n                                    }\r\n                                    return _this.props.dataStore.dataStore.all.entity.value.find(function (entity) { return entity.uid === pred.value; }).label;\r\n                                }\r\n                                return pred.value;\r\n                            }).join(', ');\r\n                        }\r\n                        return value;\r\n                    }\r\n                })\r\n            };\r\n        })\r\n            .filter(function (row) {\r\n            var keepRow = true;\r\n            _this.state.columns.forEach(function (col, i) {\r\n                if (col.filterType === 'contains' && col.filterValue.length > 0 && col.predicate !== null) {\r\n                    if (row.columns[i].toLowerCase().indexOf(col.filterValue.toLowerCase()) === -1) {\r\n                        keepRow = false;\r\n                    }\r\n                }\r\n                if (col.filterType === 'exists' && col.predicate !== null) {\r\n                    if (row.columns[i].length === 0) {\r\n                        keepRow = false;\r\n                    }\r\n                }\r\n                if (col.filterType === 'similar' && col.predicate !== null && col.filterValue.length > 0) {\r\n                    if (new lev(row.columns[i], col.filterValue).distance >= col.filterValue.length + 2) {\r\n                        keepRow = false;\r\n                    }\r\n                }\r\n            });\r\n            return keepRow;\r\n        })\r\n            .sort(function (row1, row2) {\r\n            var score = 0;\r\n            _this.state.columns.forEach(function (col, i) {\r\n                if (col.sort !== 'none' && row1.columns[i] !== row2.columns[i]) {\r\n                    score += (row1.columns[i] > row2.columns[i] ? 1 : -1) * (Math.pow(10, 3 - i)) * (col.sort === 'asc' ? -1 : 1);\r\n                }\r\n            });\r\n            return score;\r\n        });\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header entity' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"h2\", null,\r\n                            \"All Entities \",\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', title: 'Add new entity', \"aria-hidden\": 'true', onClick: this.addNew.bind(this) }))),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-folder-open-o', \"aria-hidden\": 'true', onClick: this.addViewTab.bind(this) }))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'entity selected' }, \"LIST\")))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(\"table\", { className: 'table' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null, \"#\"),\r\n                            React.createElement(\"td\", null, \"Label\"),\r\n                            React.createElement(\"td\", null, \"Type\"),\r\n                            customColumns(predicates, this.state.columns, this.updateColumnParams.bind(this), this.rotateSort.bind(this))),\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null),\r\n                            React.createElement(\"td\", null),\r\n                            React.createElement(\"td\", null,\r\n                                React.createElement(ComboDropdown_1.NumberComboDropdown, { value: this.state.entityType, typeName: 'entity type', allowNew: false, setValue: function (entityType) { return _this.setState({ entityType: entityType }); }, options: entityTypeOptions, createNewValue: lodash_1.noop, additionalClasses: ['compact'] })),\r\n                            this.state.columns.map(function (col, id) { return (React.createElement(\"td\", { key: \"col-\" + id },\r\n                                React.createElement(\"div\", { className: 'flex-fill' },\r\n                                    React.createElement(\"div\", null,\r\n                                        React.createElement(\"select\", { value: col.filterType, className: 'padded', onChange: function (e) { return _this.updateColumnParams(id, 'f', e.target.value); } },\r\n                                            React.createElement(\"option\", { value: 'any' }, \"Any\"),\r\n                                            React.createElement(\"option\", { value: 'exists' }, \"Exists\"),\r\n                                            React.createElement(\"option\", { value: 'contains' }, \"Contains\"),\r\n                                            React.createElement(\"option\", { value: 'similar' }, \"Similar\"))),\r\n                                    React.createElement(\"div\", null,\r\n                                        React.createElement(\"input\", { type: 'text', disabled: col.filterType === 'any' || col.filterType === 'exists', onChange: function (e) { return _this.updateColumnParams(id, 'v', e.target.value); }, value: col.filterValue }))))); }))),\r\n                    React.createElement(\"tbody\", null, tableData.map(function (row) { return (React.createElement(\"tr\", { key: \"entity-\" + row.uid },\r\n                        React.createElement(\"td\", null, row.uid),\r\n                        React.createElement(\"td\", null,\r\n                            row.label,\r\n                            \" \",\r\n                            React.createElement(AddTabButton_1.AddTabButton, { uid: row.uid, tabType: 'entity' })),\r\n                        React.createElement(\"td\", null, row.entityType ? row.entityType.label : ''),\r\n                        [0, 1, 2].map(function (id) { return (React.createElement(\"td\", { key: \"col-val-\" + id }, row.columns[id])); }))); }))))));\r\n    };\r\n    return EntityList;\r\n}(React.Component));\r\nEntityList.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nEntityList = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [Object])\r\n], EntityList);\r\nexports.EntityList = EntityList;\r\n//# sourceMappingURL=EntityList.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/object_list/EntityList.js\n// module id = 70\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar AddTabButton_1 = require(\"../AddTabButton\");\r\nvar SearchBar_1 = require(\"../SearchBar\");\r\nvar RecursiveTree_1 = require(\"../RecursiveTree\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar EntityRecursiveTree = (function (_super) {\r\n    __extends(EntityRecursiveTree, _super);\r\n    function EntityRecursiveTree() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return EntityRecursiveTree;\r\n}(RecursiveTree_1.RecursiveTree));\r\nvar EntityTypeList = (function (_super) {\r\n    __extends(EntityTypeList, _super);\r\n    function EntityTypeList() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            filterFunc: function () { return true; },\r\n            mode: 'list'\r\n        };\r\n        return _this;\r\n    }\r\n    EntityTypeList.prototype.addNew = function () {\r\n        var a = {\r\n            name: 'entity_type',\r\n            complete: function () {\r\n            },\r\n            cancel: function () { console.log('cancel'); },\r\n            settings: {}\r\n        };\r\n        this.props.modalStore.addModal(a);\r\n    };\r\n    EntityTypeList.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header entity_type' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"h2\", null,\r\n                            \"All Entity Types \",\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', \"aria-hidden\": 'true', title: 'Add new entity type', onClick: this.addNew.bind(this) })))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'entity_type ' + (this.state.mode === 'list' ? 'selected' : ''), onClick: function () { return _this.setState({ mode: 'list' }); } }, \"LIST\"),\r\n                        React.createElement(\"div\", { className: 'entity_type ' + (this.state.mode === 'tree' ? 'selected' : ''), onClick: function () { return _this.setState({ mode: 'tree' }); } }, \"TREE\")))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(SearchBar_1.SearchBar, { getValue: function (a) { return a.label; }, setFilterFunc: function (f) { return _this.setState({ filterFunc: f }); } }),\r\n                this.state.mode === 'list' ? (React.createElement(\"table\", { className: 'table gap' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null, \"#\"),\r\n                            React.createElement(\"td\", null, \"Name\"),\r\n                            React.createElement(\"td\", null, \"Parent\"),\r\n                            React.createElement(\"td\", null, \"Description\"))),\r\n                    React.createElement(\"tbody\", null, this.props.dataStore.dataStore.all.entity_type.value.filter(this.state.filterFunc).map(function (entityType) {\r\n                        if (entityType.uid === null) {\r\n                            throw new Error('Found entity with no id');\r\n                        }\r\n                        return (React.createElement(\"tr\", { key: \"entityType-\" + entityType.uid },\r\n                            React.createElement(\"td\", null,\r\n                                entityType.uid,\r\n                                \" \",\r\n                                React.createElement(AddTabButton_1.AddTabButton, { uid: entityType.uid, tabType: 'entity_type' })),\r\n                            React.createElement(\"td\", null, entityType.label),\r\n                            React.createElement(\"td\", null, entityType.parent),\r\n                            React.createElement(\"td\", null, entityType.description)));\r\n                    })))) : (React.createElement(\"div\", { className: 'tree-root' },\r\n                    React.createElement(EntityRecursiveTree, { data: this.props.dataStore.dataStore.all.entity_type.value, tabType: 'entity_type', parentId: null, dataStore: this.props.dataStore }))))));\r\n    };\r\n    return EntityTypeList;\r\n}(React.Component));\r\nEntityTypeList = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], EntityTypeList);\r\nexports.EntityTypeList = EntityTypeList;\r\n//# sourceMappingURL=EntityTypeList.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/object_list/EntityTypeList.js\n// module id = 71\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar AddTabButton_1 = require(\"../AddTabButton\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar SearchBar_1 = require(\"../SearchBar\");\r\nvar PredicateList = (function (_super) {\r\n    __extends(PredicateList, _super);\r\n    function PredicateList() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            filterFunc: function () { return true; }\r\n        };\r\n        return _this;\r\n    }\r\n    PredicateList.prototype.addNew = function () {\r\n        var a = {\r\n            name: 'predicate',\r\n            complete: function () {\r\n            },\r\n            cancel: function () { console.log('cancel'); },\r\n            settings: {\r\n                initialName: ''\r\n            }\r\n        };\r\n        this.props.modalStore.addModal(a);\r\n    };\r\n    PredicateList.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header predicate' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"h2\", null,\r\n                            \"All Properties \",\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', title: 'Add new property', \"aria-hidden\": 'true', onClick: this.addNew.bind(this) })))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'predicate selected' }, \"LIST\")))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(SearchBar_1.SearchBar, { getValue: function (a) { return a.label; }, setFilterFunc: function (f) { return _this.setState({ filterFunc: f }); } }),\r\n                React.createElement(\"table\", { className: 'table gap' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null, \"#\"),\r\n                            React.createElement(\"td\", null, \"Label\"),\r\n                            React.createElement(\"td\", null, \"Domain\"),\r\n                            React.createElement(\"td\", null, \"Range\"),\r\n                            React.createElement(\"td\", null, \"Uses\"))),\r\n                    React.createElement(\"tbody\", null, this.props.dataStore.dataStore.all.predicate.value.filter(this.state.filterFunc).map(function (predicate) {\r\n                        var entityType = _this.props.dataStore.dataStore.all.entity_type.value.find(function (t) { return t.uid === predicate.domain; });\r\n                        var rangeType = predicate.rangeIsReference ?\r\n                            _this.props.dataStore.dataStore.all.entity_type.value.find(function (t) { return t.uid === predicate.range; }) :\r\n                            predicate.range;\r\n                        if (predicate.uid === null) {\r\n                            throw new Error('Found predicate with null uid');\r\n                        }\r\n                        return (React.createElement(\"tr\", { key: \"predicate-\" + predicate.uid },\r\n                            React.createElement(\"td\", null,\r\n                                predicate.uid,\r\n                                \" \",\r\n                                React.createElement(AddTabButton_1.AddTabButton, { uid: predicate.uid, tabType: 'predicate' })),\r\n                            React.createElement(\"td\", null, predicate.label),\r\n                            React.createElement(\"td\", null, entityType ? entityType.label : ''),\r\n                            React.createElement(\"td\", null, predicate.rangeIsReference ? rangeType ? rangeType.label : '' : rangeType),\r\n                            React.createElement(\"td\", null, predicate.uses)));\r\n                    }))))));\r\n    };\r\n    return PredicateList;\r\n}(React.Component));\r\nPredicateList = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], PredicateList);\r\nexports.PredicateList = PredicateList;\r\n//# sourceMappingURL=PredicateList.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/object_list/PredicateList.js\n// module id = 72\n// module chunks = 0","/**\r\n * @fileOverview Sidebar for editor\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar AddTabButton_1 = require(\"../AddTabButton\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar SearchBar_1 = require(\"../SearchBar\");\r\nvar RecursiveTree_1 = require(\"../RecursiveTree\");\r\nvar SourceRecursiveTree = (function (_super) {\r\n    __extends(SourceRecursiveTree, _super);\r\n    function SourceRecursiveTree() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return SourceRecursiveTree;\r\n}(RecursiveTree_1.RecursiveTree));\r\nvar SourceList = (function (_super) {\r\n    __extends(SourceList, _super);\r\n    function SourceList() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            filterFunc: function () { return true; },\r\n            mode: 'list'\r\n        };\r\n        return _this;\r\n    }\r\n    SourceList.prototype.addNew = function () {\r\n        var a = {\r\n            name: 'source',\r\n            complete: function () {\r\n            },\r\n            cancel: function () { console.log('cancel'); },\r\n            settings: {}\r\n        };\r\n        this.props.modalStore.addModal(a);\r\n    };\r\n    SourceList.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header source' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"h2\", null,\r\n                            \"All Sources \",\r\n                            React.createElement(\"i\", { className: 'fa fa-plus-circle add button', \"aria-hidden\": 'true', title: 'Add new source', onClick: this.addNew.bind(this) })))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'source ' + (this.state.mode === 'list' ? 'selected' : ''), onClick: function () { return _this.setState({ mode: 'list' }); } }, \"LIST\"),\r\n                        React.createElement(\"div\", { className: 'source ' + (this.state.mode === 'tree' ? 'selected' : ''), onClick: function () { return _this.setState({ mode: 'tree' }); } }, \"TREE\")))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(SearchBar_1.SearchBar, { getValue: function (a) { return a.label; }, setFilterFunc: function (f) { return _this.setState({ filterFunc: f }); } }),\r\n                this.state.mode === 'list' ? (React.createElement(\"table\", { className: 'table gap' },\r\n                    React.createElement(\"thead\", null,\r\n                        React.createElement(\"tr\", null,\r\n                            React.createElement(\"td\", null, \"#\"),\r\n                            React.createElement(\"td\", null, \"Name\"),\r\n                            React.createElement(\"td\", null, \"Parent\"))),\r\n                    React.createElement(\"tbody\", null, this.props.dataStore.dataStore.all.source.value.filter(this.state.filterFunc).map(function (source) {\r\n                        if (source.uid === null) {\r\n                            throw new Error('Encountered source with null uid');\r\n                        }\r\n                        return (React.createElement(\"tr\", { key: \"source-\" + source.uid },\r\n                            React.createElement(\"td\", null,\r\n                                source.uid,\r\n                                \" \",\r\n                                React.createElement(AddTabButton_1.AddTabButton, { uid: source.uid, tabType: 'source' })),\r\n                            React.createElement(\"td\", null, source.label),\r\n                            React.createElement(\"td\", null, source.parent)));\r\n                    })))) : (React.createElement(\"div\", { className: 'tree-root' },\r\n                    React.createElement(SourceRecursiveTree, { data: this.props.dataStore.dataStore.all.source.value, tabType: 'source', parentId: null, dataStore: this.props.dataStore }))))));\r\n    };\r\n    return SourceList;\r\n}(React.Component));\r\nSourceList = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], SourceList);\r\nexports.SourceList = SourceList;\r\n//# sourceMappingURL=SourceList.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/object_list/SourceList.js\n// module id = 73\n// module chunks = 0","/**\r\n * @fileOverview Searchboc for sidebar\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar ComboDropdown_1 = require(\"../ComboDropdown\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nexports.SearchBox = function (props, context) {\r\n    var entities = props.dataStore.dataStore.all.entity.value.map(function (entity) {\r\n        return ({ key: entity.label, value: ApiService_1.AppUrls.entity + \"/\" + entity.uid });\r\n    });\r\n    var entityTypes = props.dataStore.dataStore.all.entity_type.value.map(function (entityType) {\r\n        return ({ key: entityType.label, value: ApiService_1.AppUrls.entity_type + \"/\" + entityType.uid });\r\n    });\r\n    var predicates = props.dataStore.dataStore.all.predicate.value.map(function (predicate) {\r\n        return ({ key: predicate.label, value: ApiService_1.AppUrls.predicate + \"/\" + predicate.uid });\r\n    });\r\n    var sources = props.dataStore.dataStore.all.source.value.map(function (source) {\r\n        return ({ key: source.label, value: ApiService_1.AppUrls.source + \"/\" + source.uid });\r\n    });\r\n    var all = entities.concat(entityTypes, predicates, sources);\r\n    return (React.createElement(\"span\", null,\r\n        React.createElement(\"div\", { className: 'input-addon-formgroup' },\r\n            React.createElement(\"span\", { className: 'input-addon-icon' },\r\n                React.createElement(\"i\", { className: 'fa fa-search fa-fw' })),\r\n            React.createElement(ComboDropdown_1.StringComboDropdown, { value: { key: '', value: null }, setValue: function (val) {\r\n                    if (val !== null) {\r\n                        context.router.transitionTo(\"/edit/\" + val.value);\r\n                    }\r\n                }, typeName: 'all', options: all, allowNew: false, createNewValue: function () { } }))));\r\n};\r\nexports.SearchBox.contextTypes = { router: React.PropTypes.object.isRequired };\r\n//# sourceMappingURL=SearchBox.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/sidebar/SearchBox.js\n// module id = 74\n// module chunks = 0","/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.AdvancedSearchWorkspace = function (props) { return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n    React.createElement(\"h2\", null, \"Advanced Search\"))); };\r\n//# sourceMappingURL=AdvancedSearchWorkspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/AdvancedSearchWorkspace.js\n// module id = 75\n// module chunks = 0","/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.EmptyWorkspace = function () { return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n    React.createElement(\"h2\", null, \"There is nothing here\"))); };\r\n//# sourceMappingURL=EmptyWorkspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/EmptyWorkspace.js\n// module id = 76\n// module chunks = 0","/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar findParentTree_1 = require(\"../../helper/findParentTree\");\r\nvar EditableHeader_1 = require(\"../fields/EditableHeader\");\r\nvar EditableFieldComponent_1 = require(\"../fields/EditableFieldComponent\");\r\nvar EntityWorkspaceCoreView_1 = require(\"./entity/EntityWorkspaceCoreView\");\r\nvar EntityWorkspaceReferenceView_1 = require(\"./entity/EntityWorkspaceReferenceView\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar HeaderEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableHeader_1.EditableHeader);\r\n// What can I do?\r\n// Entity Operations\r\n// - Delete the entity\r\n// - Merge the entity\r\n// - Split the entity\r\n// - Add 'same-as-ses' to the entity\r\n// Records\r\n// - Order records by type, source and date\r\n// - Add new records\r\n// - Adding a new predicate creates a new record with the\r\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\r\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\r\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\r\n//   to one of its parents. The range MUST be set.\r\n// Visualisations:\r\n// - Network graph of entity relationships\r\nvar EntityEditorWorkspace = (function (_super) {\r\n    __extends(EntityEditorWorkspace, _super);\r\n    function EntityEditorWorkspace(props, context) {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            tab: 0\r\n        };\r\n        return _this;\r\n    }\r\n    EntityEditorWorkspace.prototype.del = function () {\r\n        var _this = this;\r\n        this.props.dataStore.delItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, this.props.id)\r\n            .then(function () {\r\n            _this.props.dataStore.closeTab('entity', _this.props.id);\r\n            _this.context.router.transitionTo('/edit/notfound');\r\n        })\r\n            .catch(function (e) {\r\n            if (e.code === 404) {\r\n                _this.context.router.transitionTo('/edit/notfound');\r\n            }\r\n            if (e.code === 422) {\r\n                e.data.then(function (data) {\r\n                    var conflictResolutionModal = {\r\n                        name: 'conflict_resolution',\r\n                        cancel: function () { },\r\n                        complete: function (result) {\r\n                            if (result === 'addToWorkspace') {\r\n                                data.record.forEach(function (datum) {\r\n                                    _this.props.dataStore.createTab('entity', datum.entity, 'item');\r\n                                });\r\n                                data.entity.forEach(function (datum) {\r\n                                    _this.props.dataStore.createTab('entity', datum.uid, 'item');\r\n                                });\r\n                            }\r\n                            if (result === 'deleteAll') {\r\n                                Promise.all(data.record.map(function (datum) { return _this.props.dataStore.delItem(falcon_core_1.Record, ApiService_1.AppUrls.record, datum.uid); }))\r\n                                    .then(function () {\r\n                                    _this.del();\r\n                                });\r\n                            }\r\n                        },\r\n                        settings: {\r\n                            conflictingItems: data,\r\n                            message: 'Deleting Entity'\r\n                        }\r\n                    };\r\n                    _this.props.modalStore.addModal(conflictResolutionModal);\r\n                });\r\n            }\r\n        });\r\n    };\r\n    EntityEditorWorkspace.prototype.createNewRecord = function () {\r\n        var entity = this.props.dataStore.dataStore.tabs.entity[this.props.id].value.entity;\r\n        var entityType = this.props.dataStore.dataStore.all.entity_type.value.find(function (t) { return t.uid === entity.entityType; });\r\n        var entityTypeParents = findParentTree_1.findParentTree(entity.entityType, this.props.dataStore.dataStore.all.entity_type.value);\r\n        var predicates = this.props.dataStore.dataStore.all.predicate\r\n            .value.filter(function (pred) { return entityTypeParents.indexOf(pred.domain) !== -1; });\r\n        if (entityType === undefined) {\r\n            throw new Error('Encountered undefined entity type!');\r\n        }\r\n        var modalDef = {\r\n            name: 'record',\r\n            complete: function (data) {\r\n                console.log('Records editor called complete');\r\n                //this.loadData(this.props);\r\n            },\r\n            cancel: function () {\r\n                console.log('Records editor called cancel');\r\n            },\r\n            settings: {\r\n                options: predicates.map(function (pred) { return ({ key: pred.label, value: pred }); }),\r\n                entityUid: this.props.id,\r\n                entityType: entityType.uid\r\n            }\r\n        };\r\n        this.props.modalStore.addModal(modalDef);\r\n    };\r\n    EntityEditorWorkspace.prototype.update = function (data) {\r\n        this.props.dataStore.patchItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, this.props.id, data);\r\n    };\r\n    EntityEditorWorkspace.prototype.clone = function () {\r\n        var _this = this;\r\n        var entity = this.props.dataStore.dataStore.tabs.entity[this.props.id].value.entity;\r\n        this.props.dataStore.postItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, falcon_core_1.Serializer.fromJson(falcon_core_1.Entity, {\r\n            label: 'Copy of ' + entity.label,\r\n            entityType: entity.entityType\r\n        }), { clone: this.props.id }).then(function (_a) {\r\n            var id = _a[0];\r\n            return _this.props.dataStore.createTab('entity', id, 'item');\r\n        });\r\n    };\r\n    EntityEditorWorkspace.prototype.render = function () {\r\n        var _this = this;\r\n        var entity = this.props.dataStore.dataStore.tabs.entity[this.props.id].value.entity;\r\n        var potentialParents = this.props.dataStore.dataStore.all.entity.value;\r\n        var parentName = '';\r\n        if (potentialParents !== null && entity.parent !== undefined) {\r\n            var found = potentialParents.find(function (par) { return par.uid === entity.parent; });\r\n            if (found !== undefined) {\r\n                parentName = found.label;\r\n            }\r\n        }\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header entity' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-cube item-icon' }),\r\n                        React.createElement(HeaderEditableFieldComponent, { value: entity.label, onChange: function (value) { return _this.update({ 'label': value }); } })),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-trash delete button', \"aria-hidden\": 'true', onClick: this.del.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-clone button', \"aria-hidden\": 'true', onClick: this.clone.bind(this) }))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'entity ' + (this.state.tab === 0 ? 'selected' : ''), onClick: function () { return _this.setState({ tab: 0 }); } }, \"CORE\"),\r\n                        React.createElement(\"div\", { className: 'entity ' + (this.state.tab === 1 ? 'selected' : ''), onClick: function () { return _this.setState({ tab: 1 }); } }, \"REFERENCED BY\")))),\r\n            this.state.tab === 0 ? (React.createElement(EntityWorkspaceCoreView_1.EntityWorkspaceCoreView, { dataStore: this.props.dataStore, id: this.props.id })) : (React.createElement(EntityWorkspaceReferenceView_1.EntityWorkspaceReferenceView, { dataStore: this.props.dataStore, id: this.props.id }))));\r\n    };\r\n    return EntityEditorWorkspace;\r\n}(React.Component));\r\nEntityEditorWorkspace.contextTypes = {\r\n    router: React.PropTypes.object.isRequired,\r\n    manager: React.PropTypes.object.isRequired\r\n};\r\nEntityEditorWorkspace = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [Object, Object])\r\n], EntityEditorWorkspace);\r\nexports.EntityEditorWorkspace = EntityEditorWorkspace;\r\n//# sourceMappingURL=EntityEditorWorkspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/EntityEditorWorkspace.js\n// module id = 77\n// module chunks = 0","/**\r\n * @fileOverview Predicate editor workspace\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar SameAsEditor_1 = require(\"../fields/SameAsEditor\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar AddTabButton_1 = require(\"../AddTabButton\");\r\nvar EditableHeader_1 = require(\"../fields/EditableHeader\");\r\nvar EditableFieldComponent_1 = require(\"../fields/EditableFieldComponent\");\r\nvar EditableParagraph_1 = require(\"../fields/EditableParagraph\");\r\nvar EditableComboDropdown_1 = require(\"../fields/EditableComboDropdown\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar HeaderEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableHeader_1.EditableHeader);\r\nvar ParagraphEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableParagraph_1.EditableParagraph);\r\nvar SameAsEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(SameAsEditor_1.SameAsEditor);\r\nvar ComboEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableComboDropdown_1.EditableComboDropdown);\r\nvar EntityTypeWorkspace = (function (_super) {\r\n    __extends(EntityTypeWorkspace, _super);\r\n    function EntityTypeWorkspace() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {};\r\n        return _this;\r\n    }\r\n    EntityTypeWorkspace.prototype.update = function (data) {\r\n        var _this = this;\r\n        var entityType = this.props.dataStore.dataStore.tabs.entity_type[this.props.id].value;\r\n        this.props.dataStore.patchItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, this.props.id, data)\r\n            .then(function () { return _this.setState({ entityType: Object.assign({}, entityType, data) }); });\r\n    };\r\n    EntityTypeWorkspace.prototype.copy = function () {\r\n        var _this = this;\r\n        var entityType = this.props.dataStore.dataStore.tabs.entity_type[this.props.id].value;\r\n        var newEntityType = falcon_core_1.Serializer.fromJson(falcon_core_1.EntityType, Object.assign({}, falcon_core_1.Serializer.toJson(entityType), { label: 'Copy of ' + entityType.label }));\r\n        this.props.dataStore.postItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, newEntityType, {})\r\n            .then(function (_a) {\r\n            var id = _a[0];\r\n            _this.props.dataStore.createTab('entity_type', id, 'item');\r\n        });\r\n    };\r\n    EntityTypeWorkspace.prototype.del = function () {\r\n        var _this = this;\r\n        this.props.dataStore.delItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, this.props.id)\r\n            .then(function () { return _this.context.router.transitionTo('/edit/notfound'); })\r\n            .catch(function (e) {\r\n            if (e.code === 404) {\r\n                _this.context.router.transitionTo('/edit/notfound');\r\n            }\r\n            if (e.code === 422) {\r\n                e.data.then(function (data) {\r\n                    var conflictResolutionModal = {\r\n                        name: 'conflict_resolution',\r\n                        cancel: function () { },\r\n                        complete: function (result) {\r\n                            if (result === 'addToWorkspace') {\r\n                                data.entityType.forEach(function (datum) {\r\n                                    _this.props.dataStore.createTab('entity_type', datum.uid, 'item');\r\n                                });\r\n                                data.predicate.forEach(function (datum) {\r\n                                    _this.props.dataStore.createTab('predicate', datum.uid, 'item');\r\n                                });\r\n                                data.entity.forEach(function (datum) {\r\n                                    _this.props.dataStore.createTab('entity', datum.uid, 'item');\r\n                                });\r\n                            }\r\n                        },\r\n                        settings: {\r\n                            conflictingItems: data,\r\n                            message: 'Deleting Entity Type'\r\n                        }\r\n                    };\r\n                    _this.props.modalStore.addModal(conflictResolutionModal);\r\n                });\r\n            }\r\n        });\r\n    };\r\n    EntityTypeWorkspace.prototype.createEntity = function () {\r\n        var _this = this;\r\n        var a = {\r\n            name: 'entity',\r\n            complete: function (_a) {\r\n                var id = _a[0];\r\n                _this.props.dataStore.createTab('entity', id, 'item');\r\n            },\r\n            cancel: function () { console.log('cancel'); },\r\n            settings: {\r\n                initialName: '',\r\n                initialType: this.props.id\r\n            }\r\n        };\r\n        this.props.modalStore.addModal(a);\r\n    };\r\n    EntityTypeWorkspace.prototype.render = function () {\r\n        var _this = this;\r\n        var entityType = this.props.dataStore.dataStore.tabs.entity_type[this.props.id].value;\r\n        var potentialParents = this.props.dataStore.dataStore.all.entity_type.value;\r\n        var parentName = '';\r\n        if (potentialParents !== null && entityType.parent !== undefined) {\r\n            var found = potentialParents.find(function (par) { return par.uid === entityType.parent; });\r\n            if (found !== undefined) {\r\n                parentName = found.label;\r\n            }\r\n        }\r\n        var potentialParentOptions = potentialParents.map(function (par) { return ({ key: par.label, value: par.uid }); });\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header entity_type' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"div\", { className: 'bread-crumbs' }, entityType.parents.map(function (parent, i) {\r\n                            var parentEntityType = _this.props.dataStore.dataStore.all.entity_type.value.find(function (e) { return e.uid === parent; });\r\n                            return (React.createElement(\"span\", { key: \"breadcrumb-\" + parent },\r\n                                React.createElement(\"span\", null,\r\n                                    \"  \",\r\n                                    parentEntityType.label,\r\n                                    \" \",\r\n                                    React.createElement(AddTabButton_1.AddTabButton, { tabType: 'entity_type', uid: parent }),\r\n                                    \" \"),\r\n                                React.createElement(\"i\", { className: 'fa fa-angle-right' })));\r\n                        })),\r\n                        React.createElement(\"i\", { className: 'fa fa-tag item-icon' }),\r\n                        React.createElement(HeaderEditableFieldComponent, { value: entityType.label, onChange: function (value) { return _this.update({ 'label': value }); } })),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus add button', \"aria-hidden\": 'true', onClick: this.createEntity.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-trash delete button', \"aria-hidden\": 'true', onClick: this.del.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-clone button', \"aria-hidden\": 'true', onClick: this.copy.bind(this) }))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'entity_type selected' }, \"CORE\")))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Parent\"),\r\n                    React.createElement(ComboEditableFieldComponent, { value: entityType.parent === null ? { key: '', value: null } : { key: parentName, value: entityType.parent }, onChange: function (value) { return _this.update({ 'parent': value === null ? null : value.value }); }, comboSettings: {\r\n                            options: potentialParentOptions,\r\n                            typeName: 'EntityType'\r\n                        } }),\r\n                    entityType.parent !== null ? (React.createElement(AddTabButton_1.AddTabButton, { tabType: 'entity_type', uid: entityType.parent })) : null),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Description\"),\r\n                    React.createElement(ParagraphEditableFieldComponent, { value: entityType.description, onChange: function (value) { return _this.update({ 'description': value }); } })),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(SameAsEditableFieldComponent, { value: entityType.sameAs, onChange: function (value) { return _this.update({ 'sameAs': value }); } })),\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(\"h4\", null, \"Direct Children\"),\r\n                    React.createElement(\"ul\", null, entityType.children\r\n                        .map(function (child) { return _this.props.dataStore.dataStore.all.entity_type.value.find(function (et) { return et.uid === child; }); })\r\n                        .map(function (childEt) {\r\n                        if (childEt === undefined) {\r\n                            return null;\r\n                        }\r\n                        //TODO: REMOVE !\r\n                        return (React.createElement(\"li\", { key: \"dc-\" + childEt.label },\r\n                            childEt.label,\r\n                            \" \",\r\n                            React.createElement(AddTabButton_1.AddTabButton, { tabType: 'entity_type', uid: childEt.uid })));\r\n                    }))))));\r\n    };\r\n    return EntityTypeWorkspace;\r\n}(React.Component));\r\nEntityTypeWorkspace.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nEntityTypeWorkspace = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], EntityTypeWorkspace);\r\nexports.EntityTypeWorkspace = EntityTypeWorkspace;\r\n//# sourceMappingURL=EntityTypeWorkspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/EntityTypeWorkspace.js\n// module id = 78\n// module chunks = 0","/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar EntityList_1 = require(\"../object_list/EntityList\");\r\nvar PredicateList_1 = require(\"../object_list/PredicateList\");\r\nvar SourceList_1 = require(\"../object_list/SourceList\");\r\nvar EntityTypeList_1 = require(\"../object_list/EntityTypeList\");\r\nexports.ObjectListWorkspace = function (props) { return (React.createElement(\"div\", { className: 'workspace-editor object-list' }, (function () {\r\n    switch (props.listType) {\r\n        case 'entity':\r\n            return (React.createElement(EntityList_1.EntityList, { query: props.query }));\r\n        case 'source':\r\n            return (React.createElement(SourceList_1.SourceList, null));\r\n        case 'predicate':\r\n            return (React.createElement(PredicateList_1.PredicateList, null));\r\n        case 'entity_type':\r\n            return (React.createElement(EntityTypeList_1.EntityTypeList, null));\r\n    }\r\n})())); };\r\n//# sourceMappingURL=ObjectListWorkspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/ObjectListWorkspace.js\n// module id = 79\n// module chunks = 0","/**\r\n * @fileOverview Predicate editor workspace\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar react_router_1 = require(\"react-router\");\r\nvar SameAsEditor_1 = require(\"../fields/SameAsEditor\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar EditableHeader_1 = require(\"../fields/EditableHeader\");\r\nvar EditableFieldComponent_1 = require(\"../fields/EditableFieldComponent\");\r\nvar EditableParagraph_1 = require(\"../fields/EditableParagraph\");\r\nvar PredicateDescription_1 = require(\"../fields/PredicateDescription\");\r\nvar literalTypes_1 = require(\"../../literalTypes\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar HeaderEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableHeader_1.EditableHeader);\r\nvar ParagraphEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableParagraph_1.EditableParagraph);\r\nvar SameAsEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(SameAsEditor_1.SameAsEditor);\r\n// - Should state the number of times this predicate is used\r\n// - Widening the domain or range always okay\r\n// - Narrowing should check for conflicts and return them\r\n// - Asks 'Delete conflicting records?'\r\n// - Strong check (double button press or type) to confirm\r\n// - Changing name/description/sameAs - absolutly fine\r\n// - Cannot change 'readonly'\r\nvar PredicateEditorWorkspace = (function (_super) {\r\n    __extends(PredicateEditorWorkspace, _super);\r\n    function PredicateEditorWorkspace() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            records: []\r\n        };\r\n        return _this;\r\n    }\r\n    PredicateEditorWorkspace.prototype.updatePredicate = function (field, value, rangeIsReferenceOverride) {\r\n        if (rangeIsReferenceOverride === void 0) { rangeIsReferenceOverride = null; }\r\n        var predicate = this.props.dataStore.dataStore.tabs.predicate[this.props.id].value;\r\n        if (predicate === null) {\r\n            console.warn('Tried to edit unready predicate');\r\n            return;\r\n        }\r\n        var rangeIsReferenceVal = rangeIsReferenceOverride === null\r\n            ? predicate.rangeIsReference : rangeIsReferenceOverride;\r\n        this.props.dataStore.patchItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, predicate.uid, (_a = {},\r\n            _a[field] = value,\r\n            _a.rangeIsReference = rangeIsReferenceVal,\r\n            _a));\r\n        var _a;\r\n    };\r\n    PredicateEditorWorkspace.prototype.copy = function () {\r\n        var _this = this;\r\n        var predicate = this.props.dataStore.dataStore.tabs.predicate[this.props.id].value;\r\n        var newPredicate = falcon_core_1.Serializer.fromJson(falcon_core_1.Predicate, Object.assign({}, falcon_core_1.Serializer.toJson(predicate), { label: 'Copy of ' + predicate.label }));\r\n        this.props.dataStore.postItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, newPredicate, {})\r\n            .then(function (_a) {\r\n            var id = _a[0];\r\n            _this.props.dataStore.createTab('predicate', id, 'item');\r\n        });\r\n    };\r\n    PredicateEditorWorkspace.prototype.del = function () {\r\n        var _this = this;\r\n        this.props.dataStore.delItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, this.props.id)\r\n            .then(function () { return _this.context.router.transitionTo('/edit/notfound'); })\r\n            .catch(function (e) {\r\n            if (e.code === 404) {\r\n                _this.context.router.transitionTo('/edit/notfound');\r\n            }\r\n            if (e.code === 422) {\r\n                e.data.then(function (data) {\r\n                    var conflictResolutionModal = {\r\n                        name: 'conflict_resolution',\r\n                        cancel: function () { },\r\n                        complete: function (result) {\r\n                            if (result === 'addToWorkspace') {\r\n                                data.forEach(function (datum) {\r\n                                    _this.props.dataStore.createTab('entity', datum.entity, 'item');\r\n                                });\r\n                            }\r\n                            if (result === 'deleteAll') {\r\n                                Promise.all(data.record.map(function (datum) { return _this.props.dataStore.delItem(falcon_core_1.Record, ApiService_1.AppUrls.record, datum.uid); }))\r\n                                    .then(function () {\r\n                                    _this.del();\r\n                                });\r\n                            }\r\n                        },\r\n                        settings: {\r\n                            conflictingItems: data,\r\n                            message: 'Deleting Predicate'\r\n                        }\r\n                    };\r\n                    _this.props.modalStore.addModal(conflictResolutionModal);\r\n                });\r\n            }\r\n        });\r\n    };\r\n    PredicateEditorWorkspace.prototype.render = function () {\r\n        var _this = this;\r\n        var predicate = this.props.dataStore.dataStore.tabs.predicate[this.props.id].value;\r\n        var entityTypes = this.props.dataStore.dataStore.all.entity_type.value;\r\n        var currentDomainEntityType = entityTypes.find(function (t) { return t.uid == predicate.domain; });\r\n        var currentDomainEntityTypeName = '';\r\n        if (currentDomainEntityType !== undefined) {\r\n            currentDomainEntityTypeName = currentDomainEntityType.label;\r\n        }\r\n        var domain = { key: currentDomainEntityTypeName, value: predicate.domain };\r\n        var range = { key: '', value: {\r\n                isReference: predicate.rangeIsReference,\r\n                value: predicate.range\r\n            } };\r\n        if (predicate.rangeIsReference) {\r\n            var currentRangeEntityType = entityTypes.find(function (t) { return t.uid === predicate.range; });\r\n            if (currentRangeEntityType !== undefined) {\r\n                range.key = currentRangeEntityType.label;\r\n            }\r\n        }\r\n        else {\r\n            var literalType = literalTypes_1.literalTypes.find(function (t) { return t.value === predicate.range; });\r\n            if (literalType !== undefined) {\r\n                range.key = literalType.label;\r\n            }\r\n        }\r\n        var entityTypeOptions = entityTypes.map(function (t) {\r\n            if (t.uid === null) {\r\n                throw new Error('Encountered entity type with no id!');\r\n            }\r\n            return { key: t.label, value: t.uid };\r\n        });\r\n        var literalTypeOptions = literalTypes_1.literalTypes.map(function (t) { return ({ key: t.label, value: { value: t.label, isReference: false } }); });\r\n        var entityTypeMap2 = entityTypeOptions.map(function (e) { return ({ key: e.key, value: { isReference: true, value: e.value.toString() } }); });\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header predicate' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-long-arrow-right item-icon' }),\r\n                        React.createElement(HeaderEditableFieldComponent, { value: predicate.label, onChange: function (value) { return _this.updatePredicate('label', value); } })),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-trash delete button', \"aria-hidden\": 'true', onClick: this.del.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-clone button', \"aria-hidden\": 'true', onClick: this.copy.bind(this) }))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'predicate selected' }, \"CORE\"),\r\n                        React.createElement(\"div\", { style: { display: 'none' }, className: 'predicate' }, \"SAME AS\")))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(react_router_1.Link, { to: \"/edit/entity?col1p=\" + this.props.id + \"&col1f=exists\" },\r\n                        \"Uses: \",\r\n                        predicate.uses)),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Description\"),\r\n                    React.createElement(ParagraphEditableFieldComponent, { value: predicate.description, onChange: function (value) { return _this.updatePredicate('description', value); } })),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Typing\"),\r\n                    React.createElement(PredicateDescription_1.PredicateDescription, { domain: domain, range: range, domainChanged: function (value) { return _this.updatePredicate('domain', value.value); }, rangeChanged: function (value) { return _this.updatePredicate('range', value.value.value, value.value.isReference); }, mode: 'editSingle', domainOptions: entityTypeOptions, rangeOptions: literalTypeOptions.concat(entityTypeMap2) })),\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(SameAsEditableFieldComponent, { value: predicate.sameAs, onChange: function (value) { return _this.updatePredicate('sameAs', value); } })))));\r\n    };\r\n    return PredicateEditorWorkspace;\r\n}(React.Component));\r\nPredicateEditorWorkspace.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nPredicateEditorWorkspace = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], PredicateEditorWorkspace);\r\nexports.PredicateEditorWorkspace = PredicateEditorWorkspace;\r\n//# sourceMappingURL=PredicateEditorWorkspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/PredicateEditorWorkspace.js\n// module id = 80\n// module chunks = 0","/**\r\n * @fileOverview Predicate editor workspace\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar SameAsEditor_1 = require(\"../fields/SameAsEditor\");\r\nvar ApiService_1 = require(\"../../ApiService\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar EditableHeader_1 = require(\"../fields/EditableHeader\");\r\nvar EditableFieldComponent_1 = require(\"../fields/EditableFieldComponent\");\r\nvar EditableParagraph_1 = require(\"../fields/EditableParagraph\");\r\nvar EditableComboDropdown_1 = require(\"../fields/EditableComboDropdown\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar AddTabButton_1 = require(\"../AddTabButton\");\r\nvar HeaderEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableHeader_1.EditableHeader);\r\nvar ParagraphEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableParagraph_1.EditableParagraph);\r\nvar SameAsEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(SameAsEditor_1.SameAsEditor);\r\nvar ComboEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableComboDropdown_1.EditableComboDropdown);\r\n// - Should state the number of times this predicate is used\r\n// - Widening the domain or range always okay\r\n// - Narrowing should check for conflicts and return them\r\n// - Asks 'Delete conflicting records?'\r\n// - Strong check (double button press or type) to confirm\r\n// - Changing name/description/sameAs - absolutly fine\r\n// - Cannot change 'readonly'\r\nvar SourceEditorWorkspace = (function (_super) {\r\n    __extends(SourceEditorWorkspace, _super);\r\n    function SourceEditorWorkspace() {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            metaData: {}\r\n        };\r\n        return _this;\r\n    }\r\n    SourceEditorWorkspace.prototype.componentDidMount = function () {\r\n        this.loadData(this.props);\r\n    };\r\n    SourceEditorWorkspace.prototype.componentWillReceiveProps = function (newProps) {\r\n        this.loadData(newProps);\r\n    };\r\n    SourceEditorWorkspace.prototype.loadData = function (props) {\r\n        var source = props.dataStore.dataStore.tabs.source[this.props.id].value.source;\r\n        this.setState({\r\n            metaData: lodash_1.keyBy(source.metaData, 'name')\r\n        });\r\n    };\r\n    SourceEditorWorkspace.prototype.updateSource = function (field, value) {\r\n        var source = this.props.dataStore.dataStore.tabs.source[this.props.id].value.source;\r\n        if (source.uid === null) {\r\n            throw new Error('source uid should not be null');\r\n        }\r\n        this.props.dataStore.patchItem(falcon_core_1.Source, ApiService_1.AppUrls.source, source.uid, (_a = {}, _a[field] = value, _a));\r\n        var _a;\r\n    };\r\n    SourceEditorWorkspace.prototype.updateSourceElement = function (element, value) {\r\n        var _this = this;\r\n        var source = this.props.dataStore.dataStore.tabs.source[this.props.id].value.source;\r\n        if (element.uid === null) {\r\n            throw new Error('source element uid should not be null');\r\n        }\r\n        var compositeKey = {\r\n            order: ['source', 'element'],\r\n            values: {\r\n                source: this.props.id,\r\n                element: element.uid\r\n            }\r\n        };\r\n        if (source.metaData[element.label] !== undefined\r\n            && source.metaData[element.label].values.find(function (a) { return a.source === _this.props.id; }) !== undefined) {\r\n            this.props.dataStore.patchItem(falcon_core_1.SourceElement, ApiService_1.AppUrls.source_element, compositeKey, falcon_core_1.Serializer.fromJson(falcon_core_1.SourceElement, {\r\n                uid: compositeKey,\r\n                element: source.metaData[element.label].element_uid,\r\n                source: this.props.id,\r\n                value: value\r\n            }));\r\n        }\r\n        else {\r\n            this.props.dataStore.postItem(falcon_core_1.SourceElement, ApiService_1.AppUrls.source_element, falcon_core_1.Serializer.fromJson(falcon_core_1.SourceElement, {\r\n                uid: compositeKey,\r\n                value: value\r\n            }), {});\r\n        }\r\n    };\r\n    SourceEditorWorkspace.prototype.del = function () {\r\n        var _this = this;\r\n        this.props.dataStore.delItem(falcon_core_1.Source, ApiService_1.AppUrls.source, this.props.id)\r\n            .then(function () { return _this.context.router.transitionTo('/edit/notfound'); })\r\n            .catch(function (e) {\r\n            if (e.code === 404) {\r\n                _this.context.router.transitionTo('/edit/notfound');\r\n            }\r\n            if (e.code === 422) {\r\n                e.data.then(function (data) {\r\n                    var conflictResolutionModal = {\r\n                        name: 'conflict_resolution',\r\n                        cancel: function () { },\r\n                        complete: function (result) {\r\n                            if (result === 'addToWorkspace') {\r\n                                data.source.forEach(function (datum) {\r\n                                    _this.props.dataStore.createTab('source', datum.uid, 'item');\r\n                                });\r\n                            }\r\n                            if (result === 'deleteAll') {\r\n                                Promise.all(data.source.map(function (datum) { return _this.props.dataStore.delItem(falcon_core_1.Source, ApiService_1.AppUrls.source, datum.uid); }))\r\n                                    .then(function () {\r\n                                    _this.del();\r\n                                });\r\n                            }\r\n                        },\r\n                        settings: {\r\n                            conflictingItems: data,\r\n                            message: 'Deleting Source'\r\n                        }\r\n                    };\r\n                    _this.props.modalStore.addModal(conflictResolutionModal);\r\n                });\r\n            }\r\n        });\r\n    };\r\n    SourceEditorWorkspace.prototype.createChild = function () {\r\n        var _this = this;\r\n        var source = this.props.dataStore.dataStore.tabs.source[this.props.id].value.source;\r\n        var newSource = falcon_core_1.Serializer.fromJson(falcon_core_1.Source, lodash_1.omit(Object.assign({}, falcon_core_1.Serializer.toJson(source), { label: 'Child of ' + source.label, parent: this.props.id }), 'metaData', 'children', 'parents'));\r\n        this.props.dataStore.postItem(falcon_core_1.Source, ApiService_1.AppUrls.source, newSource, {})\r\n            .then(function (_a) {\r\n            var id = _a[0];\r\n            _this.props.dataStore.createTab('source', id, 'item');\r\n        });\r\n    };\r\n    // create entity with 'mentioned in' already set to this source\r\n    SourceEditorWorkspace.prototype.createEntity = function () {\r\n        var _this = this;\r\n        var a = {\r\n            name: 'preset_record',\r\n            complete: function (_a) {\r\n                var id = _a[0];\r\n                _this.props.dataStore.createTab('entity', id, 'item');\r\n            },\r\n            cancel: function () { },\r\n            settings: {\r\n                source: this.props.dataStore.dataStore.tabs.source[this.props.id].value.source\r\n            }\r\n        };\r\n        this.props.modalStore.addModal(a);\r\n    };\r\n    SourceEditorWorkspace.prototype.render = function () {\r\n        var _this = this;\r\n        var source = this.props.dataStore.dataStore.tabs.source[this.props.id].value.source;\r\n        var potentialParents = this.props.dataStore.dataStore.all.source.value;\r\n        var parentName = '';\r\n        if (potentialParents !== null && source.parent !== undefined) {\r\n            var found = potentialParents.find(function (par) { return par.uid === source.parent; });\r\n            if (found !== undefined) {\r\n                parentName = found.label;\r\n            }\r\n        }\r\n        return (React.createElement(\"div\", { className: 'workspace-editor' },\r\n            React.createElement(\"header\", { className: 'editor-header source' },\r\n                React.createElement(\"div\", { className: 'primary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'main-toolbar' },\r\n                        React.createElement(\"div\", { className: 'bread-crumbs' }, source.parents\r\n                            .slice()\r\n                            .reverse()\r\n                            .map(function (child) { return _this.props.dataStore.dataStore.all.source.value.find(function (et) { return et.uid === child; }); })\r\n                            .map(function (parent, i) {\r\n                            if (parent === undefined) {\r\n                                throw new Error('Encountered undefined parent');\r\n                            }\r\n                            if (parent.uid === null) {\r\n                                throw new Error('Encountered parent with null uid');\r\n                            }\r\n                            return (React.createElement(\"span\", { key: \"breadcrumb-\" + parent.uid },\r\n                                React.createElement(\"span\", null,\r\n                                    \"  \",\r\n                                    parent.label,\r\n                                    \" \",\r\n                                    React.createElement(AddTabButton_1.AddTabButton, { tabType: 'source', uid: parent.uid }),\r\n                                    \" \"),\r\n                                React.createElement(\"i\", { className: 'fa fa-angle-right' })));\r\n                        })),\r\n                        React.createElement(\"i\", { className: 'fa fa-sun-o item-icon' }),\r\n                        React.createElement(EditableHeader_1.EditableHeader, { value: source.label, onChange: function (value) { return _this.updateSource('label', value); } })),\r\n                    React.createElement(\"div\", { className: 'sub-toolbar' },\r\n                        React.createElement(\"i\", { className: 'fa fa-plus add button', \"aria-hidden\": 'true', onClick: this.createEntity.bind(this) }),\r\n                        React.createElement(\"i\", { className: 'fa fa-trash delete button', \"aria-hidden\": 'true', onClick: function () { return _this.del(); } }),\r\n                        React.createElement(\"i\", { className: 'fa fa-arrow-circle-o-down button', \"aria-hidden\": 'true', onClick: this.createChild.bind(this) }))),\r\n                React.createElement(\"div\", { className: 'secondary-toolbar' },\r\n                    React.createElement(\"div\", { className: 'tab-bar' },\r\n                        React.createElement(\"div\", { className: 'source selected' }, \"DUBLIN CORE\"),\r\n                        React.createElement(\"div\", { className: 'source', style: { display: 'none' } }, \"DETAILS\"),\r\n                        React.createElement(\"div\", { className: 'source', style: { display: 'none' } }, \"MEDIA\")))),\r\n            React.createElement(\"section\", { className: 'editor-body' },\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Parent\"),\r\n                    React.createElement(ComboEditableFieldComponent, { value: { key: parentName, value: source.parent }, onChange: function (value) { return _this.updateSource('parent', value === null ? null : value.value); }, comboSettings: {\r\n                            options: potentialParents.map(function (par) { return ({ key: par.label, value: par.uid }); }),\r\n                            typeName: 'Source'\r\n                        } }),\r\n                    source.parent !== null ? (React.createElement(AddTabButton_1.AddTabButton, { tabType: 'source', uid: source.parent })) : null),\r\n                React.createElement(\"div\", { className: 'edit-group' },\r\n                    React.createElement(SameAsEditableFieldComponent, { value: source.sameAs, onChange: function (value) { return _this.updateSource('sameAs', value); } })),\r\n                this.props.dataStore.dataStore.all.dublinCore.value.elements.map(function (element) {\r\n                    var values = source.metaData.hasOwnProperty(element.label) ?\r\n                        source.metaData[element.label].values : [{ source: _this.props.id, value: '' }];\r\n                    var editableValue = values[0].source == _this.props.id ? values[0].value : '';\r\n                    return (React.createElement(\"div\", { key: element.label + \"-edit\" },\r\n                        React.createElement(\"h5\", { className: 'section-header' },\r\n                            element.label,\r\n                            \" \",\r\n                            React.createElement(\"small\", null,\r\n                                React.createElement(\"a\", { href: element.uri }, element.uri))),\r\n                        React.createElement(\"p\", { className: 'element-description' }, element.description),\r\n                        React.createElement(\"ul\", null, values.map(function (value) { return value.source != _this.props.id ? (React.createElement(\"li\", { key: element.uid + \"-\" + value.source },\r\n                            _this.props.dataStore.dataStore.all.source.value.find(function (s) { return s.uid === value.source; }).label,\r\n                            \": \",\r\n                            value.value)) : null; })),\r\n                        React.createElement(ParagraphEditableFieldComponent, { value: editableValue, onChange: function (value) { return _this.updateSourceElement(element, value); } })));\r\n                }),\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(\"h4\", null, \"Direct Children\"),\r\n                    React.createElement(\"ul\", null, source.children\r\n                        .map(function (child) { return _this.props.dataStore.dataStore.all.source.value.find(function (et) { return et.uid === child; }); })\r\n                        .map(function (childEt) {\r\n                        return (React.createElement(\"li\", { key: \"dc-\" + childEt.uid },\r\n                            childEt.label,\r\n                            \" \",\r\n                            React.createElement(AddTabButton_1.AddTabButton, { tabType: 'source', uid: childEt.uid })));\r\n                    }))))));\r\n    };\r\n    return SourceEditorWorkspace;\r\n}(React.Component));\r\nSourceEditorWorkspace.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nSourceEditorWorkspace = __decorate([\r\n    mobx_react_1.inject('dataStore', 'modalStore'),\r\n    mobx_react_1.observer,\r\n    __metadata(\"design:paramtypes\", [])\r\n], SourceEditorWorkspace);\r\nexports.SourceEditorWorkspace = SourceEditorWorkspace;\r\n//# sourceMappingURL=SourceEditorWorkspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/SourceEditorWorkspace.js\n// module id = 81\n// module chunks = 0","/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar RecordsEditor_1 = require(\"../../entity_editor/RecordsEditor\");\r\nvar ApiService_1 = require(\"../../../ApiService\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar AddTabButton_1 = require(\"../../AddTabButton\");\r\nvar findParentTree_1 = require(\"../../../helper/findParentTree\");\r\nvar EditableFieldComponent_1 = require(\"../../fields/EditableFieldComponent\");\r\nvar EditableComboDropdown_1 = require(\"../../fields/EditableComboDropdown\");\r\nvar ComboEditableFieldComponent = EditableFieldComponent_1.EditableFieldHOC(EditableComboDropdown_1.EditableComboDropdown);\r\n// What can I do?\r\n// Entity Operations\r\n// - Delete the entity\r\n// - Merge the entity\r\n// - Split the entity\r\n// - Add 'same-as-ses' to the entity\r\n// Records\r\n// - Order records by type, source and date\r\n// - Add new records\r\n// - Adding a new predicate creates a new record with the\r\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\r\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\r\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\r\n//   to one of its parents. The range MUST be set.\r\n// Visualisations:\r\n// - Network graph of entity relationships\r\nvar EntityWorkspaceCoreView = (function (_super) {\r\n    __extends(EntityWorkspaceCoreView, _super);\r\n    function EntityWorkspaceCoreView(props, context) {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            comboValue: { key: 'test', value: null },\r\n            comboSearchValue: ''\r\n        };\r\n        return _this;\r\n    }\r\n    EntityWorkspaceCoreView.prototype.update = function (data) {\r\n        this.props.dataStore.patchItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, this.props.id, data);\r\n    };\r\n    EntityWorkspaceCoreView.prototype.render = function () {\r\n        var _this = this;\r\n        var entity = this.props.dataStore.dataStore.tabs.entity[this.props.id].value.entity;\r\n        var entityType = this.props.dataStore.dataStore.all.entity_type.value.find(function (t) { return t.uid === entity.entityType; });\r\n        if (entityType === undefined || entityType.uid === null) {\r\n            throw new Error('Encountered undefined entity type or entity type with null id');\r\n        }\r\n        var potentialParents = this.props.dataStore.dataStore.all.entity.value;\r\n        var entityTypeParents = findParentTree_1.findParentTree(entity.entityType, this.props.dataStore.dataStore.all.entity_type.value);\r\n        var predicates = this.props.dataStore.dataStore.all.predicate\r\n            .value.filter(function (pred) { return entityTypeParents.indexOf(pred.domain) !== -1; });\r\n        var sources = this.props.dataStore.dataStore.all.source.value;\r\n        var records = lodash_1.groupBy(this.props.dataStore.dataStore.tabs.entity[this.props.id].value.records, 'predicate');\r\n        var options = predicates.map(function (pred) { return ({ key: pred.label, value: pred.uid, meta: pred }); });\r\n        var parentName = '';\r\n        if (potentialParents !== null && entity.parent !== undefined) {\r\n            var found = potentialParents.find(function (par) { return par.uid === entity.parent; });\r\n            if (found !== undefined) {\r\n                parentName = found.label;\r\n            }\r\n        }\r\n        return (React.createElement(\"section\", { className: 'editor-body' },\r\n            React.createElement(\"div\", { className: 'flex-fill' },\r\n                React.createElement(\"div\", { className: 'flex-fill' },\r\n                    React.createElement(\"div\", null,\r\n                        React.createElement(\"label\", { className: 'small' }, \"Type\"),\r\n                        entityType.label,\r\n                        \" \",\r\n                        React.createElement(AddTabButton_1.AddTabButton, { uid: entityType.uid, tabType: 'entity_type' }))),\r\n                React.createElement(\"div\", { style: { flex: 1 } },\r\n                    React.createElement(\"label\", { className: 'small' }, \"Parent\"),\r\n                    React.createElement(ComboEditableFieldComponent, { value: { key: parentName, value: entity.parent }, onChange: function (value) { return _this.update({ 'parent': value === null ? null : value.value }); }, comboSettings: {\r\n                            options: potentialParents.map(function (par) { return ({ key: par.label, value: par.uid }); }),\r\n                            typeName: 'Entity'\r\n                        } }),\r\n                    entity.parent !== null ? (React.createElement(AddTabButton_1.AddTabButton, { tabType: 'entity', uid: entity.parent })) : null)),\r\n            React.createElement(\"div\", { className: 'edit-group' },\r\n                React.createElement(RecordsEditor_1.RecordsEditor, { dimension: 'predicates', entityExists: true, id: this.props.id, records: records, onChange: function () { }, predicates: predicates, sources: sources, entityTypeId: entityType.uid }))));\r\n    };\r\n    return EntityWorkspaceCoreView;\r\n}(React.Component));\r\nEntityWorkspaceCoreView.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.EntityWorkspaceCoreView = EntityWorkspaceCoreView;\r\n//# sourceMappingURL=EntityWorkspaceCoreView.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/entity/EntityWorkspaceCoreView.js\n// module id = 82\n// module chunks = 0","/**\r\n * @fileOverview Empty workspace for when nothing is open!\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar ApiService_1 = require(\"../../../ApiService\");\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar AddTabButton_1 = require(\"../../AddTabButton\");\r\n// What can I do?\r\n// Entity Operations\r\n// - Delete the entity\r\n// - Merge the entity\r\n// - Split the entity\r\n// - Add 'same-as-ses' to the entity\r\n// Records\r\n// - Order records by type, source and date\r\n// - Add new records\r\n// - Adding a new predicate creates a new record with the\r\n//   entity set, the predicate set, the score set to 3, the period set to null, source set to null\r\n//   it also creates a blank entry in the records sub table based on the range of the predicate.\r\n// - New predicates must have a name. The domain is set to the current entitytype but can be changed\r\n//   to one of its parents. The range MUST be set.\r\n// Visualisations:\r\n// - Network graph of entity relationships\r\nvar EntityWorkspaceReferenceView = (function (_super) {\r\n    __extends(EntityWorkspaceReferenceView, _super);\r\n    function EntityWorkspaceReferenceView(props, context) {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            comboValue: { key: 'test', value: '' },\r\n            comboSearchValue: ''\r\n        };\r\n        return _this;\r\n    }\r\n    EntityWorkspaceReferenceView.prototype.update = function (data) {\r\n        this.props.dataStore.patchItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, this.props.id, data);\r\n    };\r\n    EntityWorkspaceReferenceView.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"section\", { className: 'editor-body' },\r\n            React.createElement(\"h2\", null, \"References\"),\r\n            React.createElement(\"table\", { className: 'table' },\r\n                React.createElement(\"thead\", null,\r\n                    React.createElement(\"tr\", null,\r\n                        React.createElement(\"th\", null, \"Entity\"),\r\n                        React.createElement(\"th\", null, \"Property\"))),\r\n                React.createElement(\"tbody\", null, this.props.dataStore.dataStore.tabs.entity[this.props.id].value.referenceRecords.map(function (record) {\r\n                    return (React.createElement(\"tr\", { key: \"record-\" + record.uid },\r\n                        React.createElement(\"td\", null,\r\n                            _this.props.dataStore.dataStore.all.entity.value.find(function (entity) { return entity.uid === record.entity; }).label,\r\n                            \" \",\r\n                            React.createElement(AddTabButton_1.AddTabButton, { tabType: 'entity', uid: record.entity })),\r\n                        React.createElement(\"td\", null,\r\n                            _this.props.dataStore.dataStore.all.predicate.value.find(function (predicate) { return predicate.uid === record.predicate; }).label,\r\n                            \" \",\r\n                            React.createElement(AddTabButton_1.AddTabButton, { tabType: 'predicate', uid: record.predicate }))));\r\n                })))));\r\n    };\r\n    return EntityWorkspaceReferenceView;\r\n}(React.Component));\r\nEntityWorkspaceReferenceView.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.EntityWorkspaceReferenceView = EntityWorkspaceReferenceView;\r\n//# sourceMappingURL=EntityWorkspaceReferenceView.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/entity/EntityWorkspaceReferenceView.js\n// module id = 83\n// module chunks = 0","/**\r\n * @fileOverview Unified export of workspaces\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\" />Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar EmptyWorkspace_1 = require(\"./EmptyWorkspace\");\r\nexports.EmptyWorkspace = EmptyWorkspace_1.EmptyWorkspace;\r\nvar EntityEditorWorkspace_1 = require(\"./EntityEditorWorkspace\");\r\nexports.EntityEditorWorkspace = EntityEditorWorkspace_1.EntityEditorWorkspace;\r\nvar EntityTypeWorkspace_1 = require(\"./EntityTypeWorkspace\");\r\nexports.EntityTypeWorkspace = EntityTypeWorkspace_1.EntityTypeWorkspace;\r\nvar SourceEditorWorkspace_1 = require(\"./SourceEditorWorkspace\");\r\nexports.SourceEditorWorkspace = SourceEditorWorkspace_1.SourceEditorWorkspace;\r\nvar PredicateEditorWorkspace_1 = require(\"./PredicateEditorWorkspace\");\r\nexports.PredicateEditorWorkspace = PredicateEditorWorkspace_1.PredicateEditorWorkspace;\r\nvar AdvancedSearchWorkspace_1 = require(\"./AdvancedSearchWorkspace\");\r\nexports.AdvancedSearchWorkspace = AdvancedSearchWorkspace_1.AdvancedSearchWorkspace;\r\nvar ObjectListWorkspace_1 = require(\"./ObjectListWorkspace\");\r\nexports.ObjectListWorkspace = ObjectListWorkspace_1.ObjectListWorkspace;\r\n//# sourceMappingURL=workspace.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/components/workspace/workspace.js\n// module id = 84\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nvar ApiService_1 = require(\"../ApiService\");\r\nvar DataStore_1 = require(\"./DataStore\");\r\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\r\nvar mobx_1 = require(\"mobx\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar moment = require(\"moment\");\r\nvar DataController = (function () {\r\n    function DataController(api) {\r\n        this.api = api;\r\n        this.dataStore = lodash_1.cloneDeep(DataStore_1.emptyDataStore);\r\n        this.tabs = [];\r\n        if (typeof window !== 'undefined') {\r\n            var tabString = window.localStorage.getItem('open_tabs');\r\n            if (tabString !== null) {\r\n                this.tabs = JSON.parse(tabString);\r\n            }\r\n        }\r\n    }\r\n    // checks that the page exists and adds it to tabs if necessery\r\n    DataController.prototype.enterPage = function (workspace, uid, other) {\r\n        if (!lodash_1.isNaN(uid)) {\r\n            if (lodash_1.find(this.tabs, function (tab) { return tab.tabType === workspace && tab.uid == uid; }) === undefined) {\r\n                this.tabs = this.tabs.concat([{ tabType: workspace, uid: uid, tabClass: 'item' }]);\r\n                return false;\r\n            }\r\n        }\r\n        if (other !== null) {\r\n            this.entitySearchColumns = [other['col1p'], other['col2p'], other['col3p']].filter(function (a) { return a !== undefined; });\r\n        }\r\n        else {\r\n            this.entitySearchColumns = [];\r\n        }\r\n        return true;\r\n    };\r\n    DataController.prototype.loadTabData = function (tab) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (tab.tabClass !== 'item') {\r\n                    return [2 /*return*/, new falcon_core_1.Entity()];\r\n                }\r\n                switch (tab.tabType) {\r\n                    case 'entity':\r\n                        return [2 /*return*/, Promise.all([\r\n                                this.api.getItem(falcon_core_1.Entity, ApiService_1.AppUrls.entity, tab.uid),\r\n                                this.api.getCollection(falcon_core_1.Record, ApiService_1.AppUrls.record, { entity: tab.uid }),\r\n                                this.api.getCollection(falcon_core_1.Record, ApiService_1.AppUrls.record, { value_type: 'entity', value_entity: tab.uid })\r\n                            ]).then(function (_a) {\r\n                                var entity = _a[0], records = _a[1], referenceRecords = _a[2];\r\n                                return ({ entity: entity, records: records, referenceRecords: referenceRecords });\r\n                            })];\r\n                    case 'predicate':\r\n                        return [2 /*return*/, this.api.getItem(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, tab.uid)];\r\n                    case 'entity_type':\r\n                        return [2 /*return*/, this.api.getItem(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, tab.uid)];\r\n                    case 'source':\r\n                        return [2 /*return*/, Promise.all([\r\n                                this.api.getItem(falcon_core_1.Source, ApiService_1.AppUrls.source, tab.uid),\r\n                                this.api.getCollection(falcon_core_1.SourceElement, ApiService_1.AppUrls.source_element, { source: tab.uid })\r\n                            ]).then(function (_a) {\r\n                                var source = _a[0], source_element = _a[1];\r\n                                return ({ source: source, source_element: source_element });\r\n                            })];\r\n                    default:\r\n                        throw new Error('Unexpected tab type requested');\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    /*\r\n    * Loads required data from the server\r\n    * @return Promise returning a boolean indicating whether the operation was succesful\r\n    */\r\n    DataController.prototype.update = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            var groupedTabs, tabPromise, allPromise;\r\n            return __generator(this, function (_a) {\r\n                groupedTabs = lodash_1.groupBy(this.tabs, 'tabType');\r\n                if (lodash_1.find(this.tabs, function (tab) { return tab.tabType === 'source' && tab.uid === _this.defaultSource; }) === undefined) {\r\n                    this.defaultSource = null;\r\n                }\r\n                tabPromise = Promise.all(Object.keys(groupedTabs).map(function (tabType) {\r\n                    return Promise.all(groupedTabs[tabType].map(function (tab) {\r\n                        return _this.loadTabData(tab)\r\n                            .then(function (value) {\r\n                            return _a = {}, _a[parseInt(tab.uid)] = { value: value, lastUpdate: moment() }, _a;\r\n                            var _a;\r\n                        })\r\n                            .catch(function (err) {\r\n                            _this.tabs = _this.tabs.filter(function (tab2) { return tab2 !== tab; });\r\n                            _this.saveTabs();\r\n                            // propogate the error\r\n                            throw err;\r\n                        });\r\n                    }))\r\n                        .then(function (tabData) {\r\n                        return _a = {}, _a[tabType] = Object.assign.apply(Object, [{}].concat(tabData)), _a;\r\n                        var _a;\r\n                    });\r\n                }));\r\n                allPromise = Promise.all([\r\n                    this.api.getCollection(falcon_core_1.Predicate, ApiService_1.AppUrls.predicate, {}),\r\n                    this.api.getCollection(falcon_core_1.Source, ApiService_1.AppUrls.source, {}),\r\n                    this.api.getCollection(falcon_core_1.Entity, ApiService_1.AppUrls.entity, {}),\r\n                    this.api.getCollection(falcon_core_1.EntityType, ApiService_1.AppUrls.entity_type, {}),\r\n                    this.api.getItem(falcon_core_1.ElementSet, ApiService_1.AppUrls.element_set, 1)\r\n                ])\r\n                    .then(function (_a) {\r\n                    var predicates = _a[0], sources = _a[1], entities = _a[2], entityType = _a[3], dublinCore = _a[4];\r\n                    return {\r\n                        predicate: { value: predicates, lastUpdate: moment() },\r\n                        source: { value: sources, lastUpdate: moment() },\r\n                        entity: { value: entities, lastUpdate: moment() },\r\n                        entity_type: { value: entityType, lastUpdate: moment() },\r\n                        dublinCore: { value: dublinCore, lastUpdate: moment() }\r\n                    };\r\n                });\r\n                return [2 /*return*/, Promise.all([tabPromise, allPromise])\r\n                        .then(mobx_1.action(function (_a) {\r\n                        var tabsArray = _a[0], all = _a[1];\r\n                        return __awaiter(_this, void 0, void 0, function () {\r\n                            var tabs, _a;\r\n                            return __generator(this, function (_b) {\r\n                                switch (_b.label) {\r\n                                    case 0:\r\n                                        tabs = Object.assign.apply(Object, [{}].concat(tabsArray));\r\n                                        this.dataStore.tabs = tabs;\r\n                                        this.dataStore.all = all;\r\n                                        if (!(this.entitySearchColumns.length > 0)) return [3 /*break*/, 2];\r\n                                        _a = this.dataStore;\r\n                                        return [4 /*yield*/, this.getCollection(falcon_core_1.Record, ApiService_1.AppUrls.record, {\r\n                                                predicate: this.entitySearchColumns,\r\n                                                entity: this.dataStore.all.entity.value.map(function (entity) { return entity.uid; })\r\n                                            })];\r\n                                    case 1:\r\n                                        _a.records = _b.sent();\r\n                                        _b.label = 2;\r\n                                    case 2: return [2 /*return*/, true];\r\n                                }\r\n                            });\r\n                        });\r\n                    }))];\r\n            });\r\n        });\r\n    };\r\n    /*\r\n    *\r\n    *    API\r\n    *\r\n    */\r\n    DataController.prototype.getItem = function (obj, baseUrl, uid) {\r\n        return this.api.getItem.apply(this.api, arguments);\r\n    };\r\n    DataController.prototype.getCollection = function (obj, baseUrl, params) {\r\n        return this.api.getCollection.apply(this.api, arguments);\r\n    };\r\n    DataController.prototype.postItem = function (obj, baseUrl, data, params) {\r\n        var _this = this;\r\n        return this.api.postItem.apply(this.api, arguments).then(function (result) { return _this.update().then(function () { return result; }); });\r\n    };\r\n    DataController.prototype.putItem = function (obj, baseUrl, uid, data) {\r\n        var _this = this;\r\n        return this.api.putItem.apply(this.api, arguments).then(function (result) { return _this.update().then(function () { return result; }); });\r\n    };\r\n    //TODO: patch item takes a subset of an objects properties. This is currently being looked at in TS in the\r\n    //context of the 'setState' function in react\r\n    DataController.prototype.patchItem = function (obj, baseUrl, uid, data) {\r\n        var _this = this;\r\n        return this.api.patchItem.apply(this.api, arguments).then(function (result) { return _this.update().then(function () { return result; }); });\r\n    };\r\n    DataController.prototype.delItem = function (obj, baseUrl, uid) {\r\n        var _this = this;\r\n        return this.api.delItem.apply(this.api, arguments).then(function (result) { return _this.update().then(function () { return result; }); });\r\n    };\r\n    DataController.prototype.query = function (graphQLQuery) {\r\n        return this.api.query.apply(this.api, arguments);\r\n    };\r\n    DataController.prototype.getStats = function () {\r\n        return this.api.getStats.apply(this.api, arguments);\r\n    };\r\n    /*\r\n    *\r\n    *    TABS\r\n    *\r\n    */\r\n    DataController.prototype.createTab = function (tabType, uid, tabClass, data, query) {\r\n        // don't add a tab if it already exists\r\n        if (lodash_1.find(this.tabs, function (tab) { return tab.tabType === tabType && tab.uid == uid; }) === undefined) {\r\n            this.tabs.unshift({ tabType: tabType, uid: uid, data: data, tabClass: tabClass, query: query });\r\n            this.saveTabs();\r\n            this.update();\r\n        }\r\n    };\r\n    DataController.prototype.updateTab = function (tabType, uid, data) {\r\n        var tabs = lodash_1.cloneDeep(this.tabs);\r\n        var tabId = lodash_1.findIndex(tabs, function (tab) { return tab.tabType === tabType && tab.uid === uid; });\r\n        if (tabId !== -1) {\r\n            tabs[tabId].data = data;\r\n            this.tabs = tabs;\r\n        }\r\n    };\r\n    DataController.prototype.closeTab = function (tabType, uid) {\r\n        this.tabs = this.tabs.filter(function (a) { return a.tabType !== tabType || a.uid !== uid; });\r\n        this.saveTabs();\r\n        this.update();\r\n    };\r\n    DataController.prototype.saveTabs = function () {\r\n        var tabsString = JSON.stringify(this.tabs);\r\n        window.localStorage.setItem('open_tabs', tabsString);\r\n    };\r\n    DataController.prototype.clearAllTabs = function () {\r\n        this.tabs = [];\r\n        this.saveTabs();\r\n        this.update();\r\n    };\r\n    DataController.prototype.reorderTabs = function (data) {\r\n        this.tabs = react_sortable_hoc_1.arrayMove(this.tabs, data.oldIndex, data.newIndex);\r\n        this.saveTabs();\r\n    };\r\n    return DataController;\r\n}());\r\n__decorate([\r\n    mobx_1.observable,\r\n    __metadata(\"design:type\", Object)\r\n], DataController.prototype, \"dataStore\", void 0);\r\n__decorate([\r\n    mobx_1.observable,\r\n    __metadata(\"design:type\", Array)\r\n], DataController.prototype, \"tabs\", void 0);\r\n__decorate([\r\n    mobx_1.observable,\r\n    __metadata(\"design:type\", Number)\r\n], DataController.prototype, \"defaultSource\", void 0);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", [String, Number, Object]),\r\n    __metadata(\"design:returntype\", Boolean)\r\n], DataController.prototype, \"enterPage\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", []),\r\n    __metadata(\"design:returntype\", Object)\r\n], DataController.prototype, \"update\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", [String, Number, String, Object, Object]),\r\n    __metadata(\"design:returntype\", void 0)\r\n], DataController.prototype, \"createTab\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", [String, Number, Object]),\r\n    __metadata(\"design:returntype\", void 0)\r\n], DataController.prototype, \"updateTab\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", [String, Number]),\r\n    __metadata(\"design:returntype\", void 0)\r\n], DataController.prototype, \"closeTab\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", []),\r\n    __metadata(\"design:returntype\", void 0)\r\n], DataController.prototype, \"saveTabs\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", []),\r\n    __metadata(\"design:returntype\", void 0)\r\n], DataController.prototype, \"clearAllTabs\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", [Object]),\r\n    __metadata(\"design:returntype\", void 0)\r\n], DataController.prototype, \"reorderTabs\", null);\r\nexports.DataController = DataController;\r\n//# sourceMappingURL=DataController.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/stores/DataController.js\n// module id = 85\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar falcon_core_1 = require(\"@digihum/falcon-core\");\r\nexports.emptyDataStore = {\r\n    all: {\r\n        entity: { value: [], lastUpdate: null },\r\n        entity_type: { value: [], lastUpdate: null },\r\n        predicate: { value: [], lastUpdate: null },\r\n        source: { value: [], lastUpdate: null },\r\n        dublinCore: { value: new falcon_core_1.ElementSet(), lastUpdate: null }\r\n    },\r\n    records: [],\r\n    tabs: {\r\n        entity: {},\r\n        entity_type: {},\r\n        predicate: {},\r\n        source: {}\r\n    },\r\n    lockedSource: null\r\n};\r\n//# sourceMappingURL=DataStore.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/stores/DataStore.js\n// module id = 86\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar React = require(\"react\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar CreatePredicate_1 = require(\"../components/modal/CreatePredicate\");\r\nvar CreateRecord_1 = require(\"../components/modal/CreateRecord\");\r\nvar CreatePresetRecord_1 = require(\"../components/modal/CreatePresetRecord\");\r\nvar CreateSource_1 = require(\"../components/modal/CreateSource\");\r\nvar CreateEntity_1 = require(\"../components/modal/CreateEntity\");\r\nvar CreateEntityType_1 = require(\"../components/modal/CreateEntityType\");\r\nvar ConflictResolution_1 = require(\"../components/modal/ConflictResolution\");\r\nvar CreateTabSet_1 = require(\"../components/modal/CreateTabSet\");\r\nvar mobx_1 = require(\"mobx\");\r\nvar ModalStore = (function () {\r\n    function ModalStore() {\r\n        this.modalQueue = [];\r\n    }\r\n    Object.defineProperty(ModalStore.prototype, \"currentModal\", {\r\n        // might be @computed?\r\n        get: function () {\r\n            if (this.modalQueue.length === 0) {\r\n                return null;\r\n            }\r\n            var sharedProps = {\r\n                complete: this.modalComplete.bind(this),\r\n                cancel: this.modalCancel.bind(this)\r\n            };\r\n            switch (this.modalQueue[0].name) {\r\n                case 'predicate':\r\n                    return (React.createElement(CreatePredicate_1.CreatePredicate, __assign({}, sharedProps, { initialName: this.modalQueue[0].settings['initialName'], initialDomain: this.modalQueue[0].settings['initialDomain'] })));\r\n                case 'record':\r\n                    return (React.createElement(CreateRecord_1.CreateRecord, __assign({}, sharedProps, { entityType: this.modalQueue[0].settings['entityType'], entityUid: this.modalQueue[0].settings['entityUid'], options: this.modalQueue[0].settings['options'] })));\r\n                case 'preset_record':\r\n                    return (React.createElement(CreatePresetRecord_1.CreatePresetRecord, __assign({}, sharedProps, { source: this.modalQueue[0].settings['source'] })));\r\n                case 'source':\r\n                    return (React.createElement(CreateSource_1.CreateSource, __assign({}, sharedProps, { initialValue: this.modalQueue[0].settings['initialName'] })));\r\n                case 'entity':\r\n                    return (React.createElement(CreateEntity_1.CreateEntity, __assign({}, sharedProps, this.modalQueue[0].settings)));\r\n                case 'entity_type':\r\n                    return (React.createElement(CreateEntityType_1.CreateEntityType, __assign({}, sharedProps, this.modalQueue[0].settings)));\r\n                case 'conflict_resolution':\r\n                    return (React.createElement(ConflictResolution_1.ConflictResolution, __assign({}, sharedProps, { conflictingItems: this.modalQueue[0].settings['conflictingItems'], message: this.modalQueue[0].settings['message'] })));\r\n                case 'createTabSet':\r\n                    return (React.createElement(CreateTabSet_1.CreateTabSet, __assign({}, sharedProps)));\r\n            }\r\n            return null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ModalStore.prototype.addModal = function (def) {\r\n        this.modalQueue.unshift(def);\r\n    };\r\n    ModalStore.prototype.modalComplete = function (data) {\r\n        if (this.modalQueue.length === 0) {\r\n            throw new Error('Attempted to complete non-existent modal');\r\n        }\r\n        this.modalQueue[0].complete(data);\r\n        if (this.modalQueue.length > 0) {\r\n            this.modalQueue = lodash_1.tail(this.modalQueue);\r\n        }\r\n    };\r\n    ModalStore.prototype.modalCancel = function () {\r\n        if (this.modalQueue.length === 0) {\r\n            throw new Error('Attempted to cancel non-existent modal');\r\n        }\r\n        this.modalQueue[0].cancel();\r\n        this.modalQueue = [];\r\n    };\r\n    return ModalStore;\r\n}());\r\n__decorate([\r\n    mobx_1.observable,\r\n    __metadata(\"design:type\", Array)\r\n], ModalStore.prototype, \"modalQueue\", void 0);\r\n__decorate([\r\n    mobx_1.computed,\r\n    __metadata(\"design:type\", Object),\r\n    __metadata(\"design:paramtypes\", [])\r\n], ModalStore.prototype, \"currentModal\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", [Object]),\r\n    __metadata(\"design:returntype\", void 0)\r\n], ModalStore.prototype, \"addModal\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", [Object]),\r\n    __metadata(\"design:returntype\", void 0)\r\n], ModalStore.prototype, \"modalComplete\", null);\r\n__decorate([\r\n    mobx_1.action,\r\n    __metadata(\"design:type\", Function),\r\n    __metadata(\"design:paramtypes\", []),\r\n    __metadata(\"design:returntype\", void 0)\r\n], ModalStore.prototype, \"modalCancel\", null);\r\nexports.ModalStore = ModalStore;\r\n//# sourceMappingURL=ModalStore.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/stores/ModalStore.js\n// module id = 87\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nvar react_router_1 = require(\"react-router\");\r\nvar StatsGrid_1 = require(\"../stats/StatsGrid\");\r\nvar setTabList = function (data, router) {\r\n    window.localStorage.setItem('open_tabs', JSON.stringify(data));\r\n    router.transitionTo('/edit/empty');\r\n};\r\nvar deleteTabSet = function (id) {\r\n    fetch('/tabset/' + id, {\r\n        method: 'DELETE',\r\n        credentials: 'same-origin'\r\n    });\r\n};\r\nexports.Admin = function (props, context) { return (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"Welcome to the admin pages\"),\r\n        React.createElement(\"ul\", { className: 'links-list' },\r\n            React.createElement(\"li\", null,\r\n                React.createElement(react_router_1.Link, { to: '/users' },\r\n                    React.createElement(\"i\", { className: 'fa fa-users' }),\r\n                    \" Manage Users\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(react_router_1.Link, { to: '/app' },\r\n                    React.createElement(\"i\", { className: 'fa fa-download' }),\r\n                    \" Download app\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"a\", { href: '/snapshot' },\r\n                    React.createElement(\"i\", { className: 'fa fa-cloud-download' }),\r\n                    \" Download database snapshot\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(react_router_1.Link, { to: '/upload' },\r\n                    React.createElement(\"i\", { className: 'fa fa-cloud-upload' }),\r\n                    \" Upload database file\")))),\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h2\", null, \"Saved Tab Sets\"),\r\n        React.createElement(\"ul\", { className: 'links-list' }, props.tabsets.map(function (tabset) {\r\n            return (React.createElement(\"li\", { key: \"tabset-\" + tabset.uid },\r\n                React.createElement(\"span\", { className: 'a' },\r\n                    React.createElement(\"span\", { onClick: function () { return setTabList(tabset.tabs, context.router); } }, tabset.name),\r\n                    React.createElement(\"span\", null,\r\n                        React.createElement(\"i\", { className: 'fa fa-times', onClick: function () { return deleteTabSet(tabset.uid); } })))));\r\n        }))),\r\n    props.stats !== null ? (React.createElement(StatsGrid_1.StatsGrid, { stats: props.stats })) : null)); };\r\nexports.Admin.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\n//# sourceMappingURL=Admin.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/views/Admin.js\n// module id = 88\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.AppDownload = function (props) { return (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"App Download\"),\r\n        React.createElement(\"p\", null, \"Use this VRE without an internet connection! Simply download the app for your platform and then\" + \" \" + \"download a database snapshot from the main page. When you are ready, use the upload tool to merge\" + \" \" + \"your offline copy with the server.\"),\r\n        React.createElement(\"ul\", { className: 'links-list' },\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"a\", { href: 'https://github.com/digihum/imperial-entanglements-app/raw/master/bin/imperial-entanglements%20Setup%200.1.1.exe' },\r\n                    React.createElement(\"i\", { className: 'fa fa-windows' }),\r\n                    \" Windows\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"a\", { href: 'https://github.com/digihum/imperial-entanglements-app/raw/master/bin/mac/imperial-entanglements-0.1.1.dmg' },\r\n                    React.createElement(\"i\", { className: 'fa fa-apple' }),\r\n                    \" Mac\")),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"a\", { href: 'https://github.com/digihum/imperial-entanglements-app/raw/master/bin/imperial-entanglements-0.1.1-x86_64.AppImage' },\r\n                    React.createElement(\"i\", { className: 'fa fa-linux' }),\r\n                    \" Linux\")))))); };\r\n//# sourceMappingURL=AppDownload.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/views/AppDownload.js\n// module id = 89\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.DatabaseUpload = function (props) { return (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"This is the database upload page\"),\r\n        React.createElement(\"input\", { type: 'file', id: 'input', accept: '.sqlite' }),\r\n        React.createElement(\"button\", { onClick: function () { alert('Work in process'); } }, \"Upload\")))); };\r\n//# sourceMappingURL=DatabaseUpload.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/views/DatabaseUpload.js\n// module id = 90\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar React = require(\"react\");\r\nvar Sidebar_1 = require(\"../components/Sidebar\");\r\nvar Workspace_1 = require(\"../components/Workspace\");\r\nvar Toast_1 = require(\"../components/Toast\");\r\nvar DataController_1 = require(\"../stores/DataController\");\r\nvar ModalStore_1 = require(\"../stores/ModalStore\");\r\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\r\nvar mobx_react_devtools_1 = require(\"mobx-react-devtools\");\r\nvar mobx_react_1 = require(\"mobx-react\");\r\nvar ObjectEditorCore = react_sortable_hoc_1.SortableContainer(function (props) {\r\n    return (React.createElement(\"span\", { className: 'flex-fill' },\r\n        React.createElement(Sidebar_1.Sidebar, { list: props.list, id: props.id, workspace: props.workspace }),\r\n        React.createElement(Workspace_1.Workspace, { workspace: props.workspace, id: props.id, loading: props.loadingWheel, location: props.location, list: props.list }),\r\n        props.splitWorkspace ? (React.createElement(Workspace_1.Workspace, { workspace: props.workspace, id: props.id, loading: props.loadingWheel, location: props.location, list: props.list })) : null,\r\n        React.createElement(\"div\", { style: { display: 'none' }, className: 'split-workspace-button-container', onClick: props.toggleSplitWorkspace }, props.splitWorkspace ? (React.createElement(\"i\", { className: 'fa fa-times', title: 'split' })) : (React.createElement(\"i\", { className: 'fa fa-columns', title: 'split' })))));\r\n});\r\nvar ModalWrapper = mobx_react_1.inject('modalStore')(mobx_react_1.observer(function (props) { return (React.createElement(\"span\", null, props.modalStore.currentModal)); }));\r\nvar ObjectEditor = (function (_super) {\r\n    __extends(ObjectEditor, _super);\r\n    function ObjectEditor(props, context) {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = {\r\n            dataController: new DataController_1.DataController(props.api),\r\n            modalStore: new ModalStore_1.ModalStore(),\r\n            loadingWheel: true,\r\n            loading: true,\r\n            id: NaN,\r\n            list: false,\r\n            splitWorkspace: false\r\n        };\r\n        return _this;\r\n    }\r\n    ObjectEditor.prototype.componentDidMount = function () {\r\n        this.reload(this.props, false, true);\r\n    };\r\n    ObjectEditor.prototype.componentWillUnmount = function () {\r\n        this.state.dataController.saveTabs();\r\n    };\r\n    ObjectEditor.prototype.componentWillReceiveProps = function (props) {\r\n        this.reload(props);\r\n    };\r\n    ObjectEditor.prototype.reload = function (props, force, initialLoad) {\r\n        var _this = this;\r\n        if (force === void 0) { force = false; }\r\n        if (initialLoad === void 0) { initialLoad = false; }\r\n        var oldId = parseInt(this.props.location.pathname.substr(this.props.pathname.length + 1));\r\n        var newId = parseInt(props.location.pathname.substr(props.pathname.length + 1));\r\n        var workspaceChanged = props.workspace !== this.props.workspace;\r\n        var idChanged = isNaN(oldId) ? !isNaN(newId) : isNaN(newId) ? true : oldId !== newId;\r\n        var queryChanged = props.location.search !== this.props.location.search;\r\n        var newWorkspace = props.workspace;\r\n        // if there is not a tab for the current URL - create it\r\n        // if the url is invalid, relocate to /edit/notfound\r\n        if (['entity', 'source', 'predicate', 'entity_type', 'notfound'].indexOf(newWorkspace) === -1) {\r\n            this.context.router.transitionTo('/edit/notfound');\r\n        }\r\n        var alreadyLoaded = newWorkspace === 'notfound' || this.state.dataController.enterPage(newWorkspace, newId, this.props.location.query);\r\n        if (!initialLoad && this.state.loading && !force) {\r\n            this.setState({\r\n                id: newId,\r\n                list: props.location.pathname.substr(props.pathname.length + 1).length === 0\r\n            });\r\n        }\r\n        else {\r\n            this.setState({\r\n                id: newId,\r\n                list: props.location.pathname.substr(props.pathname.length + 1).length === 0,\r\n                loading: true,\r\n                loadingWheel: initialLoad || !alreadyLoaded\r\n            }, function () {\r\n                _this.state.dataController.update()\r\n                    .then(function (dataStore) {\r\n                    _this.setState({\r\n                        loading: false,\r\n                        loadingWheel: false\r\n                    });\r\n                }).catch(function () {\r\n                    _this.context.router.transitionTo('/edit/notfound');\r\n                });\r\n            });\r\n        }\r\n    };\r\n    ObjectEditor.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(mobx_react_1.Provider, { dataStore: this.state.dataController, modalStore: this.state.modalStore },\r\n            React.createElement(\"section\", { id: 'entity-editor', className: 'flex-fill' },\r\n                process.env.NODE_ENV === 'dev' ? (React.createElement(mobx_react_devtools_1.default, null)) : null,\r\n                React.createElement(\"span\", { className: 'header-colour ' + this.props.workspace }),\r\n                React.createElement(\"span\", { className: 'flex-fill' },\r\n                    React.createElement(ObjectEditorCore, { id: this.state.id, workspace: this.props.workspace, useDragHandle: true, loadingWheel: this.state.loadingWheel, splitWorkspace: this.state.splitWorkspace, helperClass: 'card-being-dragged', toggleSplitWorkspace: function () { return _this.setState({ splitWorkspace: !_this.state.splitWorkspace }); }, list: this.state.list, location: this.props.location, onSortEnd: function (change) { return _this.state.dataController.reorderTabs(change); } }),\r\n                    React.createElement(Toast_1.Toast, null),\r\n                    React.createElement(ModalWrapper, null)),\r\n                React.createElement(\"span\", { className: 'header-colour ' + this.props.workspace }))));\r\n    };\r\n    return ObjectEditor;\r\n}(React.Component));\r\nObjectEditor.contextTypes = {\r\n    router: React.PropTypes.object.isRequired\r\n};\r\nexports.ObjectEditor = ObjectEditor;\r\n//# sourceMappingURL=ObjectEditor.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/views/ObjectEditor.js\n// module id = 91\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.RouteNotFound = function (props) { return (React.createElement(\"section\", null,\r\n    React.createElement(\"h1\", null,\r\n        \"The page at \",\r\n        props.url,\r\n        \" does not exist :(\"))); };\r\n//# sourceMappingURL=RouteNotFound.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/views/RouteNotFound.js\n// module id = 92\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.User = function (props) { return (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"This is the user page\")))); };\r\n//# sourceMappingURL=User.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/views/User.js\n// module id = 93\n// module chunks = 0","/**\r\n * @fileOverview <Description Missing>\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar React = require(\"react\");\r\nexports.UserManagement = function (props) { return (React.createElement(\"div\", { className: 'page' },\r\n    React.createElement(\"section\", null,\r\n        React.createElement(\"h1\", null, \"This is the user management page\")))); };\r\n//# sourceMappingURL=UserManagement.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/common/views/UserManagement.js\n// module id = 94\n// module chunks = 0","/**\n * @fileOverview Abstract interface for sources\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\n * @version 0.0.1\n */\n\"use strict\";\nclass Element {\n    constructor() {\n        this.itemType = 'element';\n    }\n}\nexports.Element = Element;\n//# sourceMappingURL=Element.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/Element.js\n// module id = 95\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nclass ElementSet {\r\n    constructor() {\r\n        this.itemType = 'element_set';\r\n    }\r\n}\r\nexports.ElementSet = ElementSet;\r\n//# sourceMappingURL=ElementSet.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/ElementSet.js\n// module id = 96\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for entities\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nclass Entity {\r\n    constructor() {\r\n        this.itemType = 'entity';\r\n    }\r\n}\r\nexports.Entity = Entity;\r\n//# sourceMappingURL=Entity.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/Entity.js\n// module id = 97\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for entity type\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nclass EntityType {\r\n    constructor() {\r\n        this.itemType = 'entity_type';\r\n    }\r\n}\r\nexports.EntityType = EntityType;\r\n//# sourceMappingURL=EntityType.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/EntityType.js\n// module id = 98\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for locations\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nclass Predicate {\r\n    constructor() {\r\n        this.itemType = 'predicate';\r\n    }\r\n}\r\nexports.Predicate = Predicate;\r\n//# sourceMappingURL=Predicate.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/Predicate.js\n// module id = 99\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for entities\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nclass Record {\r\n    constructor() {\r\n        this.itemType = 'record';\r\n        this.label = '';\r\n        //calculated\r\n        this.valueType = null;\r\n    }\r\n}\r\nexports.Record = Record;\r\n// Each value type will have it's own editor control :/\r\n// entity = dropdown selector\r\n// string = text editor\r\n// date = date picker\r\n// integer = numberic picker\r\n// spatial point = lat/lng or point picker (opens new tab. creates new resource)\r\n// spatial region = choose from a list or create new (opens new tab, creates new resource)\r\n// score - star picker\r\n// source - entity picker (with slight modification)\r\n// value - custom (see above)\r\n// entity - entity picker (with slight modification)\r\n//# sourceMappingURL=Record.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/Record.js\n// module id = 100\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for entities\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nexports.fromJson = function (obj, data) {\r\n    return Object.assign(Object.create(obj.prototype), data);\r\n};\r\nexports.toJson = function (data) {\r\n    return JSON.parse(JSON.stringify(data));\r\n};\r\nexports.Serializer = {\r\n    fromJson: exports.fromJson, toJson: exports.toJson\r\n};\r\n//# sourceMappingURL=Serializer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/Serializer.js\n// module id = 101\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nclass Source {\r\n    constructor() {\r\n        this.itemType = 'source';\r\n    }\r\n}\r\nexports.Source = Source;\r\n//# sourceMappingURL=Source.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/Source.js\n// module id = 102\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.0.1\r\n */\r\n\"use strict\";\r\nclass SourceElement {\r\n    constructor() {\r\n        this.itemType = 'source_element';\r\n        this.label = '';\r\n    }\r\n}\r\nexports.SourceElement = SourceElement;\r\n//# sourceMappingURL=SourceElement.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@digihum/falcon-core/dist/SourceElement.js\n// module id = 103\n// module chunks = 0","module.exports = require(\"knex\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"knex\"\n// module id = 104\n// module chunks = 0","module.exports = require(\"levenshtein\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"levenshtein\"\n// module id = 105\n// module chunks = 0","module.exports = require(\"lunr\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lunr\"\n// module id = 106\n// module chunks = 0","module.exports = require(\"mobx-react-devtools\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mobx-react-devtools\"\n// module id = 107\n// module chunks = 0","/**\r\n * @fileOverview Abstract interface for sources\r\n * @author <a href=\"mailto:tim.hollies@warwick.ac.uk\">Tim Hollies</a>\r\n * @version 0.2.0\r\n */\r\n\"use strict\";\r\nvar react_dom_1 = require(\"react-dom\");\r\nvar react_1 = require(\"react\");\r\nvar FalconApp_1 = require(\"../common/FalconApp\");\r\nvar Database_1 = require(\"../backend/data/Database\");\r\nvar wrapDatabase_1 = require(\"../backend/data/wrapDatabase\");\r\nvar react_router_1 = require(\"react-router\");\r\nvar electron = require(\"electron\");\r\nvar databaseFile = electron.remote.dialog.showOpenDialog({ properties: ['openFile'], filters: [\r\n        { name: 'Database Files', extensions: ['sqlite'] }\r\n    ] });\r\nif (databaseFile !== undefined) {\r\n    electron.remote.getCurrentWindow().setTitle(\"Imperial Entanglements (\" + databaseFile[0] + \")\");\r\n    var db_1 = new Database_1.Database({\r\n        client: 'sqlite3',\r\n        useNullAsDefault: true,\r\n        connection: {\r\n            filename: databaseFile[0]\r\n        },\r\n        pool: {\r\n            afterCreate: function (conn, cb) {\r\n                conn.run('PRAGMA foreign_keys = ON', cb);\r\n            }\r\n        }\r\n    });\r\n    document.addEventListener('DOMContentLoaded', function (event) {\r\n        react_dom_1.render(react_1.createElement(FalconApp_1.FalconApp, {\r\n            api: wrapDatabase_1.wrapDatabase(db_1, true),\r\n            environment: 'app',\r\n            connected: false,\r\n            router: react_router_1.MemoryRouter,\r\n            routerSettings: {\r\n                initialEntries: ['/'],\r\n                initialIndex: 0\r\n            }\r\n        }), document.getElementById('falcon-container'));\r\n    });\r\n}\r\nelse {\r\n    electron.remote.app.quit();\r\n}\r\n//# sourceMappingURL=app.electron.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/app/app.electron.js\n// module id = 108\n// module chunks = 0"],"sourceRoot":""}